var xl=Object.defineProperty;var gl=(e,t,n)=>t in e?xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vs=(e,t,n)=>gl(e,typeof t!="symbol"?t+"":t,n);import{u as vr,b as Ja,j as r,T as Ta,d as f,L as ho,e as mo,f as yl,g as Nn,h as Mn,B as j,C as fo,A as vl,I as Kt,M as bl,D as bs,i as jl,k as Ut,l as wl,m as wt,n as Vn,S as Cl,o as Gn,p as Tl,q as ae,t as po,r as Ft,V as xo,s as Ue,v as Ye,w as Pl,G as I,x as Ce,y as Te,z as at,E as Qe,F as Ot,H as ot,J as go,K as vt,N as bt,O as jt,Q as xe,R as yo,U as tn,W as Xn,X as rn,Y as nn,Z as $e,$ as Dl,a0 as Fa,a1 as Sl,a2 as Zn,a3 as kl,c as st,_ as V,a4 as Oe,a5 as rt,a6 as ut,a7 as ht,a8 as De,a9 as ct,aa as ar,ab as Jn,ac as js,ad as xr,ae as Nl,af as Ml,ag as he,ah as Pa,ai as Al,aj as nr,ak as Nr,P as O,al as Rl,am as Mr,an as El,ao as vo,ap as es,aq as bo,ar as jo,as as wo,at as Il,au as Co,av as To,aw as Yr,ax as qr,ay as Qr,az as yt,aA as se,aB as Kr,aC as Ol,aD as _l,aE as Fl,aF as Vl,aG as Ll,aH as $l,aI as Bl,aJ as Gr,aK as Po,aL as Do,aM as Dr,aN as Wl,aO as Ul,aP as Hl,aQ as zl,aR as Yl,aS as ql}from"./mui-Vd8n5yjX.js";import{d as Ql,r as x,b as _t,g as Kl}from"./vendor-Cr2nE3UY.js";import{u as an,a as Gl,b as So,B as Xl,R as Zl,c as $t,N as Jl}from"./router-DkWuIpoj.js";import{u as sn,a as Wt,b as hr,Q as ec,c as tc}from"./query-CINsntGB.js";import{o as rc,r as nc,a as ac,c as ko,b as dr,u as No,C as gt,d as ws,e as gn}from"./forms-DotYSCGd.js";import{R as Dt,P as Mo,a as Ao,C as on,T as St,L as ts,b as ea,c as Ht,X as zt,Y as Yt,d as Ar,e as Ro,S as sc,f as oc,B as Eo,g as Ln,h as ic,A as lc,i as cc}from"./charts-CoiOD3R9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Va={},Cs=Ql;Va.createRoot=Cs.createRoot,Va.hydrateRoot=Cs.hydrateRoot;var Io={exports:{}};Io.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var dc=Io.exports;let uc={data:""},hc=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||uc,mc=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fc=/\/\*[^]*?\*\/|  +/g,Ts=/\n+/g,Jt=(e,t)=>{let n="",a="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":a+=i[1]=="f"?Jt(o,i):i+"{"+Jt(o,i[1]=="k"?"":t)+"}":typeof o=="object"?a+=Jt(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Jt.p?Jt.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+a},Bt={},Oo=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Oo(e[n]);return t}return e},pc=(e,t,n,a,s)=>{let i=Oo(e),o=Bt[i]||(Bt[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Bt[o]){let c=i!==e?e:(d=>{let u,m,p=[{}];for(;u=mc.exec(d.replace(fc,""));)u[4]?p.shift():u[3]?(m=u[3].replace(Ts," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][u[1]]=u[2].replace(Ts," ").trim();return p[0]})(e);Bt[o]=Jt(s?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&Bt.g?Bt.g:null;return n&&(Bt.g=Bt[o]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Bt[o],t,a,l),o},xc=(e,t,n)=>e.reduce((a,s,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Jt(l,""):l===!1?"":l}return a+s+(o??"")},"");function ta(e){let t=this||{},n=e.call?e(t.p):e;return pc(n.unshift?n.raw?xc(n,[].slice.call(arguments,1),t.p):n.reduce((a,s)=>Object.assign(a,s&&s.call?s(t.p):s),{}):n,hc(t.target),t.g,t.o,t.k)}let _o,La,$a;ta.bind({g:1});let qt=ta.bind({k:1});function gc(e,t,n,a){Jt.p=t,_o=e,La=n,$a=a}function sr(e,t){let n=this||{};return function(){let a=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:La&&La()},l),n.o=/ *go\d+/.test(c),l.className=ta.apply(n,a)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),$a&&d[0]&&$a(l),_o(d,l)}return s}}var yc=e=>typeof e=="function",$n=(e,t)=>yc(e)?e(t):e,vc=(()=>{let e=0;return()=>(++e).toString()})(),Fo=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),bc=20,rs="default",Vo=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:a}=t;return Vo(e,{type:e.toasts.find(o=>o.id===a.id)?1:0,toast:a});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},An=[],Lo={toasts:[],pausedAt:void 0,settings:{toastLimit:bc}},It={},$o=(e,t=rs)=>{It[t]=Vo(It[t]||Lo,e),An.forEach(([n,a])=>{n===t&&a(It[t])})},Bo=e=>Object.keys(It).forEach(t=>$o(e,t)),jc=e=>Object.keys(It).find(t=>It[t].toasts.some(n=>n.id===e)),ra=(e=rs)=>t=>{$o(t,e)},wc={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Cc=(e={},t=rs)=>{let[n,a]=x.useState(It[t]||Lo),s=x.useRef(It[t]);x.useEffect(()=>(s.current!==It[t]&&a(It[t]),An.push([t,a]),()=>{let o=An.findIndex(([l])=>l===t);o>-1&&An.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||wc[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:i}},Tc=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||vc()}),ln=e=>(t,n)=>{let a=Tc(t,e,n);return ra(a.toasterId||jc(a.id))({type:2,toast:a}),a.id},He=(e,t)=>ln("blank")(e,t);He.error=ln("error");He.success=ln("success");He.loading=ln("loading");He.custom=ln("custom");He.dismiss=(e,t)=>{let n={type:3,toastId:e};t?ra(t)(n):Bo(n)};He.dismissAll=e=>He.dismiss(void 0,e);He.remove=(e,t)=>{let n={type:4,toastId:e};t?ra(t)(n):Bo(n)};He.removeAll=e=>He.remove(void 0,e);He.promise=(e,t,n)=>{let a=He.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?$n(t.success,s):void 0;return i?He.success(i,{id:a,...n,...n==null?void 0:n.success}):He.dismiss(a),s}).catch(s=>{let i=t.error?$n(t.error,s):void 0;i?He.error(i,{id:a,...n,...n==null?void 0:n.error}):He.dismiss(a)}),e};var Pc=1e3,Dc=(e,t="default")=>{let{toasts:n,pausedAt:a}=Cc(e,t),s=x.useRef(new Map).current,i=x.useCallback((m,p=Pc)=>{if(s.has(m))return;let h=setTimeout(()=>{s.delete(m),o({type:4,toastId:m})},p);s.set(m,h)},[]);x.useEffect(()=>{if(a)return;let m=Date.now(),p=n.map(h=>{if(h.duration===1/0)return;let g=(h.duration||0)+h.pauseDuration-(m-h.createdAt);if(g<0){h.visible&&He.dismiss(h.id);return}return setTimeout(()=>He.dismiss(h.id,t),g)});return()=>{p.forEach(h=>h&&clearTimeout(h))}},[n,a,t]);let o=x.useCallback(ra(t),[t]),l=x.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=x.useCallback((m,p)=>{o({type:1,toast:{id:m,height:p}})},[o]),d=x.useCallback(()=>{a&&o({type:6,time:Date.now()})},[a,o]),u=x.useCallback((m,p)=>{let{reverseOrder:h=!1,gutter:g=8,defaultPosition:v}=p||{},w=n.filter(T=>(T.position||v)===(m.position||v)&&T.height),C=w.findIndex(T=>T.id===m.id),b=w.filter((T,y)=>y<C&&T.visible).length;return w.filter(T=>T.visible).slice(...h?[b+1]:[0,b]).reduce((T,y)=>T+(y.height||0)+g,0)},[n]);return x.useEffect(()=>{n.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let p=s.get(m.id);p&&(clearTimeout(p),s.delete(m.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Sc=qt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kc=qt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Nc=qt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Mc=sr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Nc} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ac=qt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rc=sr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ac} 1s linear infinite;
`,Ec=qt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ic=qt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Oc=sr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ec} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ic} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_c=sr("div")`
  position: absolute;
`,Fc=sr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Vc=qt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lc=sr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Vc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$c=({toast:e})=>{let{icon:t,type:n,iconTheme:a}=e;return t!==void 0?typeof t=="string"?x.createElement(Lc,null,t):t:n==="blank"?null:x.createElement(Fc,null,x.createElement(Rc,{...a}),n!=="loading"&&x.createElement(_c,null,n==="error"?x.createElement(Mc,{...a}):x.createElement(Oc,{...a})))},Bc=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Wc=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Uc="0%{opacity:0;} 100%{opacity:1;}",Hc="0%{opacity:1;} 100%{opacity:0;}",zc=sr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Yc=sr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qc=(e,t)=>{let n=e.includes("top")?1:-1,[a,s]=Fo()?[Uc,Hc]:[Bc(n),Wc(n)];return{animation:t?`${qt(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qt(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Qc=x.memo(({toast:e,position:t,style:n,children:a})=>{let s=e.height?qc(e.position||t||"top-center",e.visible):{opacity:0},i=x.createElement($c,{toast:e}),o=x.createElement(Yc,{...e.ariaProps},$n(e.message,e));return x.createElement(zc,{className:e.className,style:{...s,...n,...e.style}},typeof a=="function"?a({icon:i,message:o}):x.createElement(x.Fragment,null,i,o))});gc(x.createElement);var Kc=({id:e,className:t,style:n,onHeightUpdate:a,children:s})=>{let i=x.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;a(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return x.createElement("div",{ref:i,className:t,style:n},s)},Gc=(e,t)=>{let n=e.includes("top"),a=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Fo()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...a,...s}},Xc=ta`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yn=16,Zc=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:a,children:s,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=Dc(n,i);return x.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:yn,left:yn,right:yn,bottom:yn,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let m=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:a,defaultPosition:t}),h=Gc(m,p);return x.createElement(Kc,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?Xc:"",style:h},u.type==="custom"?$n(u.message,u):s?s(u):x.createElement(Qc,{toast:u,position:m}))}))};const jr=240,Jc=[{text:"Dashboard",icon:r.jsx(jl,{}),path:"/"},{text:"Portfolios",icon:r.jsx(Ut,{}),path:"/portfolios"},{text:"Assets",icon:r.jsx(wl,{}),path:"/assets"},{text:"Analytics",icon:r.jsx(wt,{}),path:"/analytics"},{text:"Reports",icon:r.jsx(Vn,{}),path:"/reports"},{text:"Settings",icon:r.jsx(Cl,{}),path:"/settings"}],ed=({children:e})=>{const t=vr(),n=Ja(t.breakpoints.down("md")),a=an(),s=Gl(),[i,o]=x.useState(!1),l=()=>{o(!i)},c=u=>{a(u),n&&o(!1)},d=r.jsxs("div",{children:[r.jsx(Ta,{children:r.jsx(f,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Manager"})}),r.jsx(ho,{children:Jc.map(u=>r.jsx(mo,{disablePadding:!0,children:r.jsxs(yl,{selected:s.pathname===u.path,onClick:()=>c(u.path),children:[r.jsx(Nn,{children:u.icon}),r.jsx(Mn,{primary:u.text})]})},u.text))})]});return r.jsxs(j,{sx:{display:"flex"},children:[r.jsx(fo,{}),r.jsx(vl,{position:"fixed",sx:{width:{md:`calc(100% - ${jr}px)`},ml:{md:`${jr}px`}},children:r.jsxs(Ta,{children:[r.jsx(Kt,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,sx:{mr:2,display:{md:"none"}},children:r.jsx(bl,{})}),r.jsx(f,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Management System"})]})}),r.jsxs(j,{component:"nav",sx:{width:{md:jr},flexShrink:{md:0}},"aria-label":"navigation",children:[r.jsx(bs,{variant:"temporary",open:i,onClose:l,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:jr}},children:d}),r.jsx(bs,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:jr}},open:!0,children:d})]}),r.jsxs(j,{component:"main",sx:{flexGrow:1,p:3,width:{md:`calc(100% - ${jr}px)`}},children:[r.jsx(Ta,{}),e]})]})};function Wo(e,t){return function(){return e.apply(t,arguments)}}const{toString:td}=Object.prototype,{getPrototypeOf:ns}=Object,{iterator:na,toStringTag:Uo}=Symbol,aa=(e=>t=>{const n=td.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kt=e=>(e=e.toLowerCase(),t=>aa(t)===e),sa=e=>t=>typeof t===e,{isArray:Ir}=Array,Jr=sa("undefined");function cn(e){return e!==null&&!Jr(e)&&e.constructor!==null&&!Jr(e.constructor)&&ft(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ho=kt("ArrayBuffer");function rd(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ho(e.buffer),t}const nd=sa("string"),ft=sa("function"),zo=sa("number"),dn=e=>e!==null&&typeof e=="object",ad=e=>e===!0||e===!1,Rn=e=>{if(aa(e)!=="object")return!1;const t=ns(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Uo in e)&&!(na in e)},sd=e=>{if(!dn(e)||cn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},od=kt("Date"),id=kt("File"),ld=kt("Blob"),cd=kt("FileList"),dd=e=>dn(e)&&ft(e.pipe),ud=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ft(e.append)&&((t=aa(e))==="formdata"||t==="object"&&ft(e.toString)&&e.toString()==="[object FormData]"))},hd=kt("URLSearchParams"),[md,fd,pd,xd]=["ReadableStream","Request","Response","Headers"].map(kt),gd=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function un(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),Ir(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(cn(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(a=0;a<o;a++)l=i[a],t.call(null,e[l],l,e)}}function Yo(e,t){if(cn(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,s;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qo=e=>!Jr(e)&&e!==ur;function Ba(){const{caseless:e}=qo(this)&&this||{},t={},n=(a,s)=>{const i=e&&Yo(t,s)||s;Rn(t[i])&&Rn(a)?t[i]=Ba(t[i],a):Rn(a)?t[i]=Ba({},a):Ir(a)?t[i]=a.slice():t[i]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&un(arguments[a],n);return t}const yd=(e,t,n,{allOwnKeys:a}={})=>(un(t,(s,i)=>{n&&ft(s)?e[i]=Wo(s,n):e[i]=s},{allOwnKeys:a}),e),vd=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),bd=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},jd=(e,t,n,a)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!a||a(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&ns(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wd=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},Cd=e=>{if(!e)return null;if(Ir(e))return e;let t=e.length;if(!zo(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Td=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ns(Uint8Array)),Pd=(e,t)=>{const a=(e&&e[na]).call(e);let s;for(;(s=a.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Dd=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},Sd=kt("HTMLFormElement"),kd=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,s){return a.toUpperCase()+s}),Ps=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Nd=kt("RegExp"),Qo=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};un(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(a[i]=o||s)}),Object.defineProperties(e,a)},Md=e=>{Qo(e,(t,n)=>{if(ft(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(ft(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ad=(e,t)=>{const n={},a=s=>{s.forEach(i=>{n[i]=!0})};return Ir(e)?a(e):a(String(e).split(t)),n},Rd=()=>{},Ed=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Id(e){return!!(e&&ft(e.append)&&e[Uo]==="FormData"&&e[na])}const Od=e=>{const t=new Array(10),n=(a,s)=>{if(dn(a)){if(t.indexOf(a)>=0)return;if(cn(a))return a;if(!("toJSON"in a)){t[s]=a;const i=Ir(a)?[]:{};return un(a,(o,l)=>{const c=n(o,s+1);!Jr(c)&&(i[l]=c)}),t[s]=void 0,i}}return a};return n(e,0)},_d=kt("AsyncFunction"),Fd=e=>e&&(dn(e)||ft(e))&&ft(e.then)&&ft(e.catch),Ko=((e,t)=>e?setImmediate:t?((n,a)=>(ur.addEventListener("message",({source:s,data:i})=>{s===ur&&i===n&&a.length&&a.shift()()},!1),s=>{a.push(s),ur.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ft(ur.postMessage)),Vd=typeof queueMicrotask<"u"?queueMicrotask.bind(ur):typeof process<"u"&&process.nextTick||Ko,Ld=e=>e!=null&&ft(e[na]),$={isArray:Ir,isArrayBuffer:Ho,isBuffer:cn,isFormData:ud,isArrayBufferView:rd,isString:nd,isNumber:zo,isBoolean:ad,isObject:dn,isPlainObject:Rn,isEmptyObject:sd,isReadableStream:md,isRequest:fd,isResponse:pd,isHeaders:xd,isUndefined:Jr,isDate:od,isFile:id,isBlob:ld,isRegExp:Nd,isFunction:ft,isStream:dd,isURLSearchParams:hd,isTypedArray:Td,isFileList:cd,forEach:un,merge:Ba,extend:yd,trim:gd,stripBOM:vd,inherits:bd,toFlatObject:jd,kindOf:aa,kindOfTest:kt,endsWith:wd,toArray:Cd,forEachEntry:Pd,matchAll:Dd,isHTMLForm:Sd,hasOwnProperty:Ps,hasOwnProp:Ps,reduceDescriptors:Qo,freezeMethods:Md,toObjectSet:Ad,toCamelCase:kd,noop:Rd,toFiniteNumber:Ed,findKey:Yo,global:ur,isContextDefined:qo,isSpecCompliantForm:Id,toJSONObject:Od,isAsyncFn:_d,isThenable:Fd,setImmediate:Ko,asap:Vd,isIterable:Ld};function je(e,t,n,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Go=je.prototype,Xo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xo[e]={value:e}});Object.defineProperties(je,Xo);Object.defineProperty(Go,"isAxiosError",{value:!0});je.from=(e,t,n,a,s,i)=>{const o=Object.create(Go);return $.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),je.call(o,e.message,t,n,a,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const $d=null;function Wa(e){return $.isPlainObject(e)||$.isArray(e)}function Zo(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function Ds(e,t,n){return e?e.concat(t).map(function(s,i){return s=Zo(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function Bd(e){return $.isArray(e)&&!e.some(Wa)}const Wd=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function oa(e,t,n){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!$.isUndefined(w[v])});const a=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if($.isDate(g))return g.toISOString();if($.isBoolean(g))return g.toString();if(!c&&$.isBlob(g))throw new je("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(g)||$.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,w){let C=g;if(g&&!w&&typeof g=="object"){if($.endsWith(v,"{}"))v=a?v:v.slice(0,-2),g=JSON.stringify(g);else if($.isArray(g)&&Bd(g)||($.isFileList(g)||$.endsWith(v,"[]"))&&(C=$.toArray(g)))return v=Zo(v),C.forEach(function(T,y){!($.isUndefined(T)||T===null)&&t.append(o===!0?Ds([v],y,i):o===null?v:v+"[]",d(T))}),!1}return Wa(g)?!0:(t.append(Ds(w,v,i),d(g)),!1)}const m=[],p=Object.assign(Wd,{defaultVisitor:u,convertValue:d,isVisitable:Wa});function h(g,v){if(!$.isUndefined(g)){if(m.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));m.push(g),$.forEach(g,function(C,b){(!($.isUndefined(C)||C===null)&&s.call(t,C,$.isString(b)?b.trim():b,v,p))===!0&&h(C,v?v.concat(b):[b])}),m.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Ss(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function as(e,t){this._pairs=[],e&&oa(e,this,t)}const Jo=as.prototype;Jo.append=function(t,n){this._pairs.push([t,n])};Jo.toString=function(t){const n=t?function(a){return t.call(this,a,Ss)}:Ss;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Ud(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ei(e,t,n){if(!t)return e;const a=n&&n.encode||Ud;$.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=$.isURLSearchParams(t)?t.toString():new as(t,n).toString(a),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ks{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(a){a!==null&&t(a)})}}const ti={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hd=typeof URLSearchParams<"u"?URLSearchParams:as,zd=typeof FormData<"u"?FormData:null,Yd=typeof Blob<"u"?Blob:null,qd={isBrowser:!0,classes:{URLSearchParams:Hd,FormData:zd,Blob:Yd},protocols:["http","https","file","blob","url","data"]},ss=typeof window<"u"&&typeof document<"u",Ua=typeof navigator=="object"&&navigator||void 0,Qd=ss&&(!Ua||["ReactNative","NativeScript","NS"].indexOf(Ua.product)<0),Kd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gd=ss&&window.location.href||"http://localhost",Xd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ss,hasStandardBrowserEnv:Qd,hasStandardBrowserWebWorkerEnv:Kd,navigator:Ua,origin:Gd},Symbol.toStringTag,{value:"Module"})),lt={...Xd,...qd};function Zd(e,t){return oa(e,new lt.classes.URLSearchParams,{visitor:function(n,a,s,i){return lt.isNode&&$.isBuffer(n)?(this.append(a,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Jd(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function eu(e){const t={},n=Object.keys(e);let a;const s=n.length;let i;for(a=0;a<s;a++)i=n[a],t[i]=e[i];return t}function ri(e){function t(n,a,s,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&$.isArray(s)?s.length:o,c?($.hasOwnProp(s,o)?s[o]=[s[o],a]:s[o]=a,!l):((!s[o]||!$.isObject(s[o]))&&(s[o]=[]),t(n,a,s[o],i)&&$.isArray(s[o])&&(s[o]=eu(s[o])),!l)}if($.isFormData(e)&&$.isFunction(e.entries)){const n={};return $.forEachEntry(e,(a,s)=>{t(Jd(a),s,n,0)}),n}return null}function tu(e,t,n){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const hn={transitional:ti,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",s=a.indexOf("application/json")>-1,i=$.isObject(t);if(i&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return s?JSON.stringify(ri(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Zd(t,this.formSerializer).toString();if((l=$.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return oa(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),tu(t)):t}],transformResponse:[function(t){const n=this.transitional||hn.transitional,a=n&&n.forcedJSONParsing,s=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(a&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?je.from(l,je.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lt.classes.FormData,Blob:lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{hn.headers[e]={}});const ru=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nu=e=>{const t={};let n,a,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),a=o.substring(s+1).trim(),!(!n||t[n]&&ru[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},Ns=Symbol("internals");function Vr(e){return e&&String(e).trim().toLowerCase()}function En(e){return e===!1||e==null?e:$.isArray(e)?e.map(En):String(e)}function au(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const su=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Da(e,t,n,a,s){if($.isFunction(a))return a.call(this,t,n);if(s&&(t=n),!!$.isString(t)){if($.isString(a))return t.indexOf(a)!==-1;if($.isRegExp(a))return a.test(t)}}function ou(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function iu(e,t){const n=$.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(s,i,o){return this[a].call(this,t,s,i,o)},configurable:!0})})}let pt=class{constructor(t){t&&this.set(t)}set(t,n,a){const s=this;function i(l,c,d){const u=Vr(c);if(!u)throw new Error("header name must be a non-empty string");const m=$.findKey(s,u);(!m||s[m]===void 0||d===!0||d===void 0&&s[m]!==!1)&&(s[m||c]=En(l))}const o=(l,c)=>$.forEach(l,(d,u)=>i(d,u,c));if($.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if($.isString(t)&&(t=t.trim())&&!su(t))o(nu(t),n);else if($.isObject(t)&&$.isIterable(t)){let l={},c,d;for(const u of t){if(!$.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?$.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,n)}else t!=null&&i(n,t,a);return this}get(t,n){if(t=Vr(t),t){const a=$.findKey(this,t);if(a){const s=this[a];if(!n)return s;if(n===!0)return au(s);if($.isFunction(n))return n.call(this,s,a);if($.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Vr(t),t){const a=$.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Da(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let s=!1;function i(o){if(o=Vr(o),o){const l=$.findKey(a,o);l&&(!n||Da(a,a[l],l,n))&&(delete a[l],s=!0)}}return $.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const i=n[a];(!t||Da(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,a={};return $.forEach(this,(s,i)=>{const o=$.findKey(a,i);if(o){n[o]=En(s),delete n[i];return}const l=t?ou(i):String(i).trim();l!==i&&delete n[i],n[l]=En(s),a[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return $.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=t&&$.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[Ns]=this[Ns]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=Vr(o);a[l]||(iu(s,o),a[l]=!0)}return $.isArray(t)?t.forEach(i):i(t),this}};pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(pt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});$.freezeMethods(pt);function Sa(e,t){const n=this||hn,a=t||n,s=pt.from(a.headers);let i=a.data;return $.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function ni(e){return!!(e&&e.__CANCEL__)}function Or(e,t,n){je.call(this,e??"canceled",je.ERR_CANCELED,t,n),this.name="CanceledError"}$.inherits(Or,je,{__CANCEL__:!0});function ai(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new je("Request failed with status code "+n.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function lu(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function cu(e,t){e=e||10;const n=new Array(e),a=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=a[i];o||(o=d),n[s]=c,a[s]=d;let m=i,p=0;for(;m!==s;)p+=n[m++],m=m%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const h=u&&d-u;return h?Math.round(p*1e3/h):void 0}}function du(e,t){let n=0,a=1e3/t,s,i;const o=(d,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-n;m>=a?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},a-m)))},()=>s&&o(s)]}const Bn=(e,t,n=3)=>{let a=0;const s=cu(50,250);return du(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-a,d=s(c),u=o<=l;a=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},n)},Ms=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},As=e=>(...t)=>$.asap(()=>e(...t)),uu=lt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,lt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(lt.origin),lt.navigator&&/(msie|trident)/i.test(lt.navigator.userAgent)):()=>!0,hu=lt.hasStandardBrowserEnv?{write(e,t,n,a,s,i){const o=[e+"="+encodeURIComponent(t)];$.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),$.isString(a)&&o.push("path="+a),$.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fu(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function si(e,t,n){let a=!mu(t);return e&&(a||n==!1)?fu(e,t):t}const Rs=e=>e instanceof pt?{...e}:e;function gr(e,t){t=t||{};const n={};function a(d,u,m,p){return $.isPlainObject(d)&&$.isPlainObject(u)?$.merge.call({caseless:p},d,u):$.isPlainObject(u)?$.merge({},u):$.isArray(u)?u.slice():u}function s(d,u,m,p){if($.isUndefined(u)){if(!$.isUndefined(d))return a(void 0,d,m,p)}else return a(d,u,m,p)}function i(d,u){if(!$.isUndefined(u))return a(void 0,u)}function o(d,u){if($.isUndefined(u)){if(!$.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function l(d,u,m){if(m in t)return a(d,u);if(m in e)return a(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>s(Rs(d),Rs(u),m,!0)};return $.forEach(Object.keys({...e,...t}),function(u){const m=c[u]||s,p=m(e[u],t[u],u);$.isUndefined(p)&&m!==l||(n[u]=p)}),n}const oi=e=>{const t=gr({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=pt.from(o),t.url=ei(si(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if($.isFormData(n)){if(lt.hasStandardBrowserEnv||lt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(lt.hasStandardBrowserEnv&&(a&&$.isFunction(a)&&(a=a(t)),a||a!==!1&&uu(t.url))){const d=s&&i&&hu.read(i);d&&o.set(s,d)}return t},pu=typeof XMLHttpRequest<"u",xu=pu&&function(e){return new Promise(function(n,a){const s=oi(e);let i=s.data;const o=pt.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,m,p,h,g;function v(){h&&h(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function C(){if(!w)return;const T=pt.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:T,config:e,request:w};ai(function(k){n(k),v()},function(k){a(k),v()},S),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(a(new je("Request aborted",je.ECONNABORTED,e,w)),w=null)},w.onerror=function(){a(new je("Network Error",je.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let y=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||ti;s.timeoutErrorMessage&&(y=s.timeoutErrorMessage),a(new je(y,S.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,e,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&$.forEach(o.toJSON(),function(y,S){w.setRequestHeader(S,y)}),$.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),l&&l!=="json"&&(w.responseType=s.responseType),d&&([p,g]=Bn(d,!0),w.addEventListener("progress",p)),c&&w.upload&&([m,h]=Bn(c),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(u=T=>{w&&(a(!T||T.type?new Or(null,e,w):T),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const b=lu(s.url);if(b&&lt.protocols.indexOf(b)===-1){a(new je("Unsupported protocol "+b+":",je.ERR_BAD_REQUEST,e));return}w.send(i||null)})},gu=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;a.abort(u instanceof je?u:new Or(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new je(`timeout ${t} of ms exceeded`,je.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>$.asap(l),c}},yu=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,s;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},vu=async function*(e,t){for await(const n of bu(e))yield*yu(n,t)},bu=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},Es=(e,t,n,a)=>{const s=vu(e,t);let i=0,o,l=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let m=u.byteLength;if(n){let p=i+=m;n(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},ia=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ii=ia&&typeof ReadableStream=="function",ju=ia&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),li=(e,...t)=>{try{return!!e(...t)}catch{return!1}},wu=ii&&li(()=>{let e=!1;const t=new Request(lt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Is=64*1024,Ha=ii&&li(()=>$.isReadableStream(new Response("").body)),Wn={stream:Ha&&(e=>e.body)};ia&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Wn[t]&&(Wn[t]=$.isFunction(e[t])?n=>n[t]():(n,a)=>{throw new je(`Response type '${t}' is not supported`,je.ERR_NOT_SUPPORT,a)})})})(new Response);const Cu=async e=>{if(e==null)return 0;if($.isBlob(e))return e.size;if($.isSpecCompliantForm(e))return(await new Request(lt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($.isArrayBufferView(e)||$.isArrayBuffer(e))return e.byteLength;if($.isURLSearchParams(e)&&(e=e+""),$.isString(e))return(await ju(e)).byteLength},Tu=async(e,t)=>{const n=$.toFiniteNumber(e.getContentLength());return n??Cu(t)},Pu=ia&&(async e=>{let{url:t,method:n,data:a,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:p}=oi(e);d=d?(d+"").toLowerCase():"text";let h=gu([s,i&&i.toAbortSignal()],o),g;const v=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let w;try{if(c&&wu&&n!=="get"&&n!=="head"&&(w=await Tu(u,a))!==0){let S=new Request(t,{method:"POST",body:a,duplex:"half"}),R;if($.isFormData(a)&&(R=S.headers.get("content-type"))&&u.setContentType(R),S.body){const[k,E]=Ms(w,Bn(As(c)));a=Es(S.body,Is,k,E)}}$.isString(m)||(m=m?"include":"omit");const C="credentials"in Request.prototype;g=new Request(t,{...p,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:C?m:void 0});let b=await fetch(g,p);const T=Ha&&(d==="stream"||d==="response");if(Ha&&(l||T&&v)){const S={};["status","statusText","headers"].forEach(M=>{S[M]=b[M]});const R=$.toFiniteNumber(b.headers.get("content-length")),[k,E]=l&&Ms(R,Bn(As(l),!0))||[];b=new Response(Es(b.body,Is,k,()=>{E&&E(),v&&v()}),S)}d=d||"text";let y=await Wn[$.findKey(Wn,d)||"text"](b,e);return!T&&v&&v(),await new Promise((S,R)=>{ai(S,R,{data:y,headers:pt.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:g})})}catch(C){throw v&&v(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,e,g),{cause:C.cause||C}):je.from(C,C&&C.code,e,g)}}),za={http:$d,xhr:xu,fetch:Pu};$.forEach(za,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Os=e=>`- ${e}`,Du=e=>$.isFunction(e)||e===null||e===!1,ci={getAdapter:e=>{e=$.isArray(e)?e:[e];const{length:t}=e;let n,a;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(a=n,!Du(n)&&(a=za[(o=String(n)).toLowerCase()],a===void 0))throw new je(`Unknown adapter '${o}'`);if(a)break;s[o||"#"+i]=a}if(!a){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Os).join(`
`):" "+Os(i[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:za};function ka(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Or(null,e)}function _s(e){return ka(e),e.headers=pt.from(e.headers),e.data=Sa.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ci.getAdapter(e.adapter||hn.adapter)(e).then(function(a){return ka(e),a.data=Sa.call(e,e.transformResponse,a),a.headers=pt.from(a.headers),a},function(a){return ni(a)||(ka(e),a&&a.response&&(a.response.data=Sa.call(e,e.transformResponse,a.response),a.response.headers=pt.from(a.response.headers))),Promise.reject(a)})}const di="1.11.0",la={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{la[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const Fs={};la.transitional=function(t,n,a){function s(i,o){return"[Axios v"+di+"] Transitional option '"+i+"'"+o+(a?". "+a:"")}return(i,o,l)=>{if(t===!1)throw new je(s(o," has been removed"+(n?" in "+n:"")),je.ERR_DEPRECATED);return n&&!Fs[o]&&(Fs[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};la.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Su(e,t,n){if(typeof e!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const i=a[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new je("option "+i+" must be "+c,je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new je("Unknown option "+i,je.ERR_BAD_OPTION)}}const In={assertOptions:Su,validators:la},Mt=In.validators;let mr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ks,response:new ks}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=gr(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:i}=n;a!==void 0&&In.assertOptions(a,{silentJSONParsing:Mt.transitional(Mt.boolean),forcedJSONParsing:Mt.transitional(Mt.boolean),clarifyTimeoutError:Mt.transitional(Mt.boolean)},!1),s!=null&&($.isFunction(s)?n.paramsSerializer={serialize:s}:In.assertOptions(s,{encode:Mt.function,serialize:Mt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),In.assertOptions(n,{baseUrl:Mt.spelling("baseURL"),withXsrfToken:Mt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&$.merge(i.common,i[n.method]);i&&$.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=pt.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,m=0,p;if(!c){const g=[_s.bind(this),void 0];for(g.unshift(...l),g.push(...d),p=g.length,u=Promise.resolve(n);m<p;)u=u.then(g[m++],g[m++]);return u}p=l.length;let h=n;for(m=0;m<p;){const g=l[m++],v=l[m++];try{h=g(h)}catch(w){v.call(this,w);break}}try{u=_s.call(this,h)}catch(g){return Promise.reject(g)}for(m=0,p=d.length;m<p;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=gr(this.defaults,t);const n=si(t.baseURL,t.url,t.allowAbsoluteUrls);return ei(n,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){mr.prototype[t]=function(n,a){return this.request(gr(a||{},{method:t,url:n,data:(a||{}).data}))}});$.forEach(["post","put","patch"],function(t){function n(a){return function(i,o,l){return this.request(gr(l||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mr.prototype[t]=n(),mr.prototype[t+"Form"]=n(!0)});let ku=class ui{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const a=this;this.promise.then(s=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](s);a._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{a.subscribe(l),i=l}).then(s);return o.cancel=function(){a.unsubscribe(i)},o},t(function(i,o,l){a.reason||(a.reason=new Or(i,o,l),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ui(function(s){t=s}),cancel:t}}};function Nu(e){return function(n){return e.apply(null,n)}}function Mu(e){return $.isObject(e)&&e.isAxiosError===!0}const Ya={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ya).forEach(([e,t])=>{Ya[t]=e});function hi(e){const t=new mr(e),n=Wo(mr.prototype.request,t);return $.extend(n,mr.prototype,t,{allOwnKeys:!0}),$.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return hi(gr(e,s))},n}const Je=hi(hn);Je.Axios=mr;Je.CanceledError=Or;Je.CancelToken=ku;Je.isCancel=ni;Je.VERSION=di;Je.toFormData=oa;Je.AxiosError=je;Je.Cancel=Je.CanceledError;Je.all=function(t){return Promise.all(t)};Je.spread=Nu;Je.isAxiosError=Mu;Je.mergeConfig=gr;Je.AxiosHeaders=pt;Je.formToJSON=e=>ri($.isHTMLForm(e)?new FormData(e):e);Je.getAdapter=ci.getAdapter;Je.HttpStatusCode=Ya;Je.default=Je;const{Axios:jv,AxiosError:wv,CanceledError:Cv,isCancel:Tv,CancelToken:Pv,VERSION:Dv,all:Sv,Cancel:kv,isAxiosError:Nv,spread:Mv,toFormData:Av,AxiosHeaders:Rv,HttpStatusCode:Ev,formToJSON:Iv,getAdapter:Ov,mergeConfig:_v}=Je;class Au{constructor(){vs(this,"api");this.api=Je.create({baseURL:"http://localhost:3000",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(t=>{const n=localStorage.getItem("auth_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t)),this.api.interceptors.response.use(t=>t,t=>{var n;return((n=t.response)==null?void 0:n.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(t)})}async getHealth(){return(await this.api.get("/health")).data}async getAssets(){return(await this.api.get("/api/v1/assets")).data}async getAsset(t){return(await this.api.get(`/api/v1/assets/${t}`)).data}async getAssetWithComputedFields(t,n){const a=n?`/api/v1/assets/${t}/with-computed-fields?portfolioId=${n}`:`/api/v1/assets/${t}/with-computed-fields`;return(await this.api.get(a)).data}async createAsset(t){return(await this.api.post("/api/v1/assets",t)).data}async updateAsset(t,n){return(await this.api.put(`/api/v1/assets/${t}`,n)).data}async deleteAsset(t){await this.api.delete(`/api/v1/assets/${t}`)}async refreshAssetComputedFields(t,n){const a=n?`/api/v1/assets/${t}/update-computed-fields?portfolioId=${n}`:`/api/v1/assets/${t}/update-computed-fields`;return(await this.api.post(a)).data}async getPortfolios(t){return(await this.api.get(`/api/v1/portfolios?accountId=${t}`)).data}async getPortfolio(t){return(await this.api.get(`/api/v1/portfolios/${t}`)).data}async createPortfolio(t){return(await this.api.post("/api/v1/portfolios",t)).data}async updatePortfolio(t,n){return(await this.api.put(`/api/v1/portfolios/${t}`,n)).data}async deletePortfolio(t){await this.api.delete(`/api/v1/portfolios/${t}`)}async getPortfolioNav(t){return(await this.api.get(`/api/v1/portfolios/${t}/nav`)).data}async getPortfolioPerformance(t){return(await this.api.get(`/api/v1/portfolios/${t}/performance`)).data}async getPortfolioAllocation(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/allocation`)).data}async getPortfolioPerformanceHistory(t,n){const a=n?{period:n}:{};return(await this.api.get(`/api/v1/portfolios/${t}/analytics/performance-history`,{params:a})).data}async getPortfolioRiskReturn(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/risk-return`)).data}async getPortfolioAssetPerformance(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/asset-performance`)).data}async getPortfolioRiskMetrics(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/risk-metrics`)).data}async getPortfolioDiversificationHeatmap(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/diversification-heatmap`)).data}async getPortfolioAllocationTimeline(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/allocation-timeline`)).data}async getPortfolioCashFlowAnalysis(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/cash-flow-analysis`)).data}async getPortfolioBenchmarkComparison(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/benchmark-comparison`)).data}async getPortfolioAssetDetailSummary(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/asset-detail-summary`)).data}async getPortfolioPositions(t){return(await this.api.get(`/api/v1/portfolios/${t}/positions`)).data}async getPortfolioAnalyticsPerformance(t,n){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/performance`,{params:{period:n}})).data}async getPortfolioAnalyticsAllocation(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/allocation`)).data}async getPortfolioAnalyticsHistory(t,n){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/history`,{params:{period:n}})).data}async getPortfolioAnalyticsReport(t){return(await this.api.get(`/api/v1/portfolios/${t}/analytics/report`)).data}async getPortfolioCashFlows(t){return(await this.api.get(`/api/v1/portfolios/${t}/cash-flows`)).data}async createCashFlow(t,n){return(await this.api.post(`/api/v1/portfolios/${t}/cash-flows`,n)).data}async createTrade(t){return(await this.api.post("/api/v1/trades",t)).data}async getTrades(t,n){const a=new URLSearchParams({portfolioId:t});return n&&Object.entries(n).forEach(([i,o])=>{o&&a.append(i,o)}),(await this.api.get(`/api/v1/trades?${a}`)).data}async getTrade(t){return(await this.api.get(`/api/v1/trades/${t}`)).data}async updateTrade(t,n){return(await this.api.put(`/api/v1/trades/${t}`,n)).data}async deleteTrade(t){await this.api.delete(`/api/v1/trades/${t}`)}async getTradeDetails(t){return(await this.api.get(`/api/v1/trades/${t}/details`)).data}async getTradeAnalysis(t,n){const a=new URLSearchParams({portfolioId:t});n&&Object.entries(n).forEach(([o,l])=>{l&&a.append(o,l)});const s=`/api/v1/trades/analysis/portfolio?${a}`;return(await this.api.get(s)).data}async getTradingPerformance(t,n){const a=new URLSearchParams({portfolioId:t});return n&&Object.entries(n).forEach(([i,o])=>{o&&a.append(i,o)}),(await this.api.get(`/api/v1/trades/performance/portfolio?${a}`)).data}async getCurrentPositions(t,n){const a=new URLSearchParams;return n&&a.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/portfolios/${t}/positions?${a}`)).data}async getPositionByAsset(t,n,a){const s=new URLSearchParams;return a&&s.append("marketPrice",a.toString()),(await this.api.get(`/api/v1/portfolios/${t}/positions/${n}?${s}`)).data}async setRiskTargets(t,n){return(await this.api.post(`/api/v1/assets/${t}/targets`,n)).data}async getRiskTargets(t){return(await this.api.get(`/api/v1/assets/${t}/targets`)).data}async updateRiskTargets(t,n){return(await this.api.put(`/api/v1/assets/${t}/targets`,n)).data}async removeRiskTargets(t){await this.api.delete(`/api/v1/assets/${t}/targets`)}async getPortfolioRiskTargets(t){return(await this.api.get(`/api/v1/assets/targets/portfolio/${t}`)).data}async monitorRiskTargets(t,n){const a=new URLSearchParams;return t&&a.append("portfolioId",t),n&&a.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/assets/targets/monitor?${a}`)).data}async testConnection(){try{return await this.getHealth(),!0}catch(t){return console.error("API connection test failed:",t),!1}}}const Le=new Au,ca=e=>{const t=sn(),{data:n,isLoading:a,error:s,refetch:i}=Wt(["portfolios",e],()=>e?Le.getPortfolios(e):Promise.resolve([]),{enabled:!!e,staleTime:5*60*1e3,cacheTime:10*60*1e3}),o=hr(d=>Le.createPortfolio(d),{onSuccess:()=>{t.invalidateQueries(["portfolios",e])}}),l=hr(({id:d,data:u})=>Le.updatePortfolio(d,u),{onSuccess:()=>{t.invalidateQueries(["portfolios",e])}}),c=hr(d=>Le.deletePortfolio(d),{onSuccess:()=>{t.invalidateQueries(["portfolios",e])}});return{portfolios:n||[],isLoading:a,error:s,refetch:i,createPortfolio:o.mutate,updatePortfolio:l.mutate,deletePortfolio:c.mutate,isCreating:o.isLoading,isUpdating:l.isLoading,isDeleting:c.isLoading}},mi=e=>{const t=sn(),{data:n,isLoading:a,error:s,refetch:i}=Wt(["portfolio",e],()=>Le.getPortfolio(e),{enabled:!!e,staleTime:2*60*1e3,cacheTime:5*60*1e3}),o=hr(l=>Le.updatePortfolio(e,l),{onSuccess:()=>{t.invalidateQueries(["portfolio",e]),t.invalidateQueries("portfolios")}});return{portfolio:n,isLoading:a,error:s,refetch:i,updatePortfolio:o.mutate,isUpdating:o.isLoading}},Ru=e=>{const{data:t,isLoading:n,error:a}=Wt(["portfolio-nav",e],()=>Le.getPortfolioNav(e),{enabled:!!e,staleTime:6e4,refetchInterval:3e5}),{data:s,isLoading:i,error:o}=Wt(["portfolio-performance",e],()=>Le.getPortfolioPerformance(e),{enabled:!!e,staleTime:5*60*1e3}),{data:l,isLoading:c,error:d}=Wt(["portfolio-allocation",e],()=>Le.getPortfolioAllocation(e),{enabled:!!e,staleTime:5*60*1e3}),{data:u,isLoading:m,error:p}=Wt(["portfolio-positions",e],()=>Le.getPortfolioPositions(e),{enabled:!!e,staleTime:2*60*1e3});return _t.useEffect(()=>{console.log("usePortfolioAnalytics Debug:",{portfolioId:e,navData:t,performanceData:s,allocationData:l,positionsData:u,isNavLoading:n,isPerformanceLoading:i,isAllocationLoading:c,isPositionsLoading:m,navError:a,performanceError:o,allocationError:d,positionsError:p})},[e,t,s,l,u,n,i,c,m,a,o,d,p]),{navData:t,performanceData:s,allocationData:l,positionsData:u,isLoading:n||i||c||m,error:a||o||d||p}},Vs="86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",vn={id:Vs,accountId:Vs,name:"John Doe",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},Ls={"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5":{id:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",accountId:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",name:"John Doe (VND)",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"usd-account-123":{id:"usd-account-123",accountId:"usd-account-123",name:"Jane Smith (USD)",email:"jane.smith@example.com",baseCurrency:"USD",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"eur-account-456":{id:"eur-account-456",accountId:"eur-account-456",name:"Pierre Dubois (EUR)",email:"pierre.dubois@example.com",baseCurrency:"EUR",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"}},Pt=()=>{const[e,t]=x.useState(vn);return x.useEffect(()=>{const s=localStorage.getItem("currentAccountId"),i=s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s);if(i&&s!==e.accountId){const o=Ls[s]||vn;t(o)}else s&&!i&&(console.warn("Invalid account ID in localStorage, using default:",s),localStorage.removeItem("currentAccountId"),t(vn))},[e.accountId]),{currentAccount:e,switchAccount:s=>{localStorage.setItem("currentAccountId",s);const i=Ls[s]||vn;t(i)},getCurrentAccountId:()=>e.accountId,accountId:e.accountId,baseCurrency:e.baseCurrency}};function Re(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Z(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function J(e){Z(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Gn(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function On(e,t){Z(2,arguments);var n=J(e),a=Re(t);return isNaN(a)?new Date(NaN):(a&&n.setDate(n.getDate()+a),n)}function _n(e,t){Z(2,arguments);var n=J(e),a=Re(t);if(isNaN(a))return new Date(NaN);if(!a)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+a+1,0);var o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function da(e,t){Z(2,arguments);var n=J(e).getTime(),a=Re(t);return new Date(n+a)}var Eu=36e5;function Iu(e,t){Z(2,arguments);var n=Re(t);return da(e,n*Eu)}var Ou={};function Vt(){return Ou}function fr(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=Vt(),m=Re((n=(a=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=J(e),h=p.getDay(),g=(h<m?7:0)+h-m;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function Un(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Rr(e){Z(1,arguments);var t=J(e);return t.setHours(0,0,0,0),t}var _u=864e5;function Fu(e,t){Z(2,arguments);var n=Rr(e),a=Rr(t),s=n.getTime()-Un(n),i=a.getTime()-Un(a);return Math.round((s-i)/_u)}var Vu=6e4;function Lu(e,t){Z(2,arguments);var n=Re(t);return da(e,n*Vu)}function $u(e,t){Z(2,arguments);var n=Re(t);return da(e,n*1e3)}function Bu(e,t){Z(2,arguments);var n=Re(t),a=n*7;return On(e,a)}function $s(e,t){Z(2,arguments);var n=Re(t);return _n(e,n*12)}function Xr(e,t){Z(2,arguments);var n=J(e),a=J(t),s=n.getTime()-a.getTime();return s<0?-1:s>0?1:s}var ua=6e4,ha=36e5,Wu=1e3;function Uu(e,t){Z(2,arguments);var n=Rr(e),a=Rr(t);return n.getTime()===a.getTime()}function Hu(e){return Z(1,arguments),e instanceof Date||Gn(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function fi(e){if(Z(1,arguments),!Hu(e)&&typeof e!="number")return!1;var t=J(e);return!isNaN(Number(t))}function zu(e,t){Z(2,arguments);var n=J(e),a=J(t),s=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return s*12+i}function Yu(e,t){Z(2,arguments);var n=J(e),a=J(t);return n.getFullYear()-a.getFullYear()}function Bs(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function pi(e,t){Z(2,arguments);var n=J(e),a=J(t),s=Bs(n,a),i=Math.abs(Fu(n,a));n.setDate(n.getDate()-s*i);var o=+(Bs(n,a)===-s),l=s*(i-o);return l===0?0:l}function ma(e,t){return Z(2,arguments),J(e).getTime()-J(t).getTime()}var Ws={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},qu="trunc";function mn(e){return e?Ws[e]:Ws[qu]}function Qu(e,t,n){Z(2,arguments);var a=ma(e,t)/ha;return mn(void 0)(a)}function Ku(e,t,n){Z(2,arguments);var a=ma(e,t)/ua;return mn(void 0)(a)}function qa(e){Z(1,arguments);var t=J(e);return t.setHours(23,59,59,999),t}function Qa(e){Z(1,arguments);var t=J(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Gu(e){Z(1,arguments);var t=J(e);return qa(t).getTime()===Qa(t).getTime()}function xi(e,t){Z(2,arguments);var n=J(e),a=J(t),s=Xr(n,a),i=Math.abs(zu(n,a)),o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var l=Xr(n,a)===-s;Gu(J(e))&&i===1&&Xr(e,a)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function Xu(e,t,n){Z(2,arguments);var a=xi(e,t)/3;return mn(void 0)(a)}function Zu(e,t,n){Z(2,arguments);var a=ma(e,t)/1e3;return mn(void 0)(a)}function Ju(e,t,n){Z(2,arguments);var a=pi(e,t)/7;return mn(void 0)(a)}function eh(e,t){Z(2,arguments);var n=J(e),a=J(t),s=Xr(n,a),i=Math.abs(Yu(n,a));n.setFullYear(1584),a.setFullYear(1584);var o=Xr(n,a)===-s,l=s*(i-Number(o));return l===0?0:l}function th(e,t){var n;Z(1,arguments);var a=e||{},s=J(a.start),i=J(a.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var l=[],c=s;c.setHours(0,0,0,0);var d=Number((n=void 0)!==null&&n!==void 0?n:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)l.push(J(c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return l}function Us(e){Z(1,arguments);var t=J(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Na(e){Z(1,arguments);var t=J(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function bn(e){Z(1,arguments);var t=J(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ma(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=Vt(),m=Re((n=(a=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=J(e),h=p.getDay(),g=(h<m?-7:0)+6-(h-m);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function gi(e,t){Z(2,arguments);var n=Re(t);return da(e,-n)}var rh=864e5;function nh(e){Z(1,arguments);var t=J(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),s=n-a;return Math.floor(s/rh)+1}function Er(e){Z(1,arguments);var t=1,n=J(e),a=n.getUTCDay(),s=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function yi(e){Z(1,arguments);var t=J(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var s=Er(a),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Er(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function ah(e){Z(1,arguments);var t=yi(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=Er(n);return a}var sh=6048e5;function vi(e){Z(1,arguments);var t=J(e),n=Er(t).getTime()-ah(t).getTime();return Math.round(n/sh)+1}function yr(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=Vt(),m=Re((n=(a=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=J(e),h=p.getUTCDay(),g=(h<m?7:0)+h-m;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function os(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=J(e),m=u.getUTCFullYear(),p=Vt(),h=Re((n=(a=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&a!==void 0?a:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,h),g.setUTCHours(0,0,0,0);var v=yr(g,t),w=new Date(0);w.setUTCFullYear(m,0,h),w.setUTCHours(0,0,0,0);var C=yr(w,t);return u.getTime()>=v.getTime()?m+1:u.getTime()>=C.getTime()?m:m-1}function oh(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=Vt(),m=Re((n=(a=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=os(e,t),h=new Date(0);h.setUTCFullYear(p,0,m),h.setUTCHours(0,0,0,0);var g=yr(h,t);return g}var ih=6048e5;function bi(e,t){Z(1,arguments);var n=J(e),a=yr(n,t).getTime()-oh(n,t).getTime();return Math.round(a/ih)+1}function Se(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}var Zt={y:function(t,n){var a=t.getUTCFullYear(),s=a>0?a:1-a;return Se(n==="yy"?s%100:s,n.length)},M:function(t,n){var a=t.getUTCMonth();return n==="M"?String(a+1):Se(a+1,2)},d:function(t,n){return Se(t.getUTCDate(),n.length)},a:function(t,n){var a=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,n){return Se(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Se(t.getUTCHours(),n.length)},m:function(t,n){return Se(t.getUTCMinutes(),n.length)},s:function(t,n){return Se(t.getUTCSeconds(),n.length)},S:function(t,n){var a=n.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,a-3));return Se(i,n.length)}},wr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lh={G:function(t,n,a){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(t,n,a){if(n==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return a.ordinalNumber(i,{unit:"year"})}return Zt.y(t,n)},Y:function(t,n,a,s){var i=os(t,s),o=i>0?i:1-i;if(n==="YY"){var l=o%100;return Se(l,2)}return n==="Yo"?a.ordinalNumber(o,{unit:"year"}):Se(o,n.length)},R:function(t,n){var a=yi(t);return Se(a,n.length)},u:function(t,n){var a=t.getUTCFullYear();return Se(a,n.length)},Q:function(t,n,a){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Se(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,a){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Se(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,a){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Zt.M(t,n);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,a){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Se(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,a,s){var i=bi(t,s);return n==="wo"?a.ordinalNumber(i,{unit:"week"}):Se(i,n.length)},I:function(t,n,a){var s=vi(t);return n==="Io"?a.ordinalNumber(s,{unit:"week"}):Se(s,n.length)},d:function(t,n,a){return n==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):Zt.d(t,n)},D:function(t,n,a){var s=nh(t);return n==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):Se(s,n.length)},E:function(t,n,a){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,a,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Se(o,2);case"eo":return a.ordinalNumber(o,{unit:"day"});case"eee":return a.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"});case"eeee":default:return a.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,a,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Se(o,n.length);case"co":return a.ordinalNumber(o,{unit:"day"});case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"});case"cccc":default:return a.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,a){var s=t.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Se(i,n.length);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,a){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,a){var s=t.getUTCHours(),i;switch(s===12?i=wr.noon:s===0?i=wr.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,a){var s=t.getUTCHours(),i;switch(s>=17?i=wr.evening:s>=12?i=wr.afternoon:s>=4?i=wr.morning:i=wr.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,a){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return Zt.h(t,n)},H:function(t,n,a){return n==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Zt.H(t,n)},K:function(t,n,a){var s=t.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(s,{unit:"hour"}):Se(s,n.length)},k:function(t,n,a){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?a.ordinalNumber(s,{unit:"hour"}):Se(s,n.length)},m:function(t,n,a){return n==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Zt.m(t,n)},s:function(t,n,a){return n==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Zt.s(t,n)},S:function(t,n){return Zt.S(t,n)},X:function(t,n,a,s){var i=s._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return zs(o);case"XXXX":case"XX":return cr(o);case"XXXXX":case"XXX":default:return cr(o,":")}},x:function(t,n,a,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"x":return zs(o);case"xxxx":case"xx":return cr(o);case"xxxxx":case"xxx":default:return cr(o,":")}},O:function(t,n,a,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Hs(o,":");case"OOOO":default:return"GMT"+cr(o,":")}},z:function(t,n,a,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Hs(o,":");case"zzzz":default:return"GMT"+cr(o,":")}},t:function(t,n,a,s){var i=s._originalDate||t,o=Math.floor(i.getTime()/1e3);return Se(o,n.length)},T:function(t,n,a,s){var i=s._originalDate||t,o=i.getTime();return Se(o,n.length)}};function Hs(e,t){var n=e>0?"-":"+",a=Math.abs(e),s=Math.floor(a/60),i=a%60;if(i===0)return n+String(s);var o=t;return n+String(s)+o+Se(i,2)}function zs(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Se(Math.abs(e)/60,2)}return cr(e,t)}function cr(e,t){var n=t||"",a=e>0?"-":"+",s=Math.abs(e),i=Se(Math.floor(s/60),2),o=Se(s%60,2);return a+i+n+o}var Ys=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ji=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},ch=function(t,n){var a=t.match(/(P+)(p+)?/)||[],s=a[1],i=a[2];if(!i)return Ys(t,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Ys(s,n)).replace("{{time}}",ji(i,n))},Ka={p:ji,P:ch},dh=["D","DD"],uh=["YY","YYYY"];function wi(e){return dh.indexOf(e)!==-1}function Ci(e){return uh.indexOf(e)!==-1}function Hn(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mh=function(t,n,a){var s,i=hh[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};function Aa(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,a=e.formats[n]||e.formats[e.defaultWidth];return a}}var fh={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ph={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xh={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gh={date:Aa({formats:fh,defaultWidth:"full"}),time:Aa({formats:ph,defaultWidth:"full"}),dateTime:Aa({formats:xh,defaultWidth:"full"})},yh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vh=function(t,n,a,s){return yh[t]};function Lr(e){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",s;if(a==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var d=e.argumentCallback?e.argumentCallback(t):t;return s[d]}}var bh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jh={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ch={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Th={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ph={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dh=function(t,n){var a=Number(t),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Sh={ordinalNumber:Dh,era:Lr({values:bh,defaultWidth:"wide"}),quarter:Lr({values:jh,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Lr({values:wh,defaultWidth:"wide"}),day:Lr({values:Ch,defaultWidth:"wide"}),dayPeriod:Lr({values:Th,defaultWidth:"wide",formattingValues:Ph,defaultFormattingWidth:"wide"})};function $r(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Nh(l,function(m){return m.test(o)}):kh(l,function(m){return m.test(o)}),d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;var u=t.slice(o.length);return{value:d,rest:u}}}function kh(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function Nh(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function Mh(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(e.matchPattern);if(!a)return null;var s=a[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(s.length);return{value:o,rest:l}}}var Ah=/^(\d+)(th|st|nd|rd)?/i,Rh=/\d+/i,Eh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ih={any:[/^b/i,/^(a|c)/i]},Oh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_h={any:[/1/i,/2/i,/3/i,/4/i]},Fh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Lh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$h={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Bh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Uh={ordinalNumber:Mh({matchPattern:Ah,parsePattern:Rh,valueCallback:function(t){return parseInt(t,10)}}),era:$r({matchPatterns:Eh,defaultMatchWidth:"wide",parsePatterns:Ih,defaultParseWidth:"any"}),quarter:$r({matchPatterns:Oh,defaultMatchWidth:"wide",parsePatterns:_h,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:$r({matchPatterns:Fh,defaultMatchWidth:"wide",parsePatterns:Vh,defaultParseWidth:"any"}),day:$r({matchPatterns:Lh,defaultMatchWidth:"wide",parsePatterns:$h,defaultParseWidth:"any"}),dayPeriod:$r({matchPatterns:Bh,defaultMatchWidth:"any",parsePatterns:Wh,defaultParseWidth:"any"})},is={code:"en-US",formatDistance:mh,formatLong:gh,formatRelative:vh,localize:Sh,match:Uh,options:{weekStartsOn:0,firstWeekContainsDate:1}},Hh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yh=/^'([^]*?)'?$/,qh=/''/g,Qh=/[a-zA-Z]/;function er(e,t,n){var a,s,i,o,l,c,d,u,m,p,h,g,v,w,C,b,T,y;Z(2,arguments);var S=String(t),R=Vt(),k=(a=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:R.locale)!==null&&a!==void 0?a:is,E=Re((i=(o=(l=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:R.firstWeekContainsDate)!==null&&o!==void 0?o:(m=R.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=Re((h=(g=(v=(w=n==null?void 0:n.weekStartsOn)!==null&&w!==void 0?w:n==null||(C=n.locale)===null||C===void 0||(b=C.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&v!==void 0?v:R.weekStartsOn)!==null&&g!==void 0?g:(T=R.locale)===null||T===void 0||(y=T.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&h!==void 0?h:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var N=J(e);if(!fi(N))throw new RangeError("Invalid time value");var P=Un(N),D=gi(N,P),L={firstWeekContainsDate:E,weekStartsOn:M,locale:k,_originalDate:N},_=S.match(zh).map(function(A){var G=A[0];if(G==="p"||G==="P"){var U=Ka[G];return U(A,k.formatLong)}return A}).join("").match(Hh).map(function(A){if(A==="''")return"'";var G=A[0];if(G==="'")return Kh(A);var U=lh[G];if(U)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Ci(A)&&Hn(A,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&wi(A)&&Hn(A,t,String(e)),U(D,A,k.localize,L);if(G.match(Qh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+G+"`");return A}).join("");return _}function Kh(e){var t=e.match(Yh);return t?t[1].replace(qh,"'"):e}function Gh(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Xh(e,t){var n,a;Z(1,arguments);var s=J(e);if(isNaN(s.getTime()))throw new RangeError("Invalid time value");var i=String((n=t==null?void 0:t.format)!==null&&n!==void 0?n:"extended"),o=String((a=t==null?void 0:t.representation)!==null&&a!==void 0?a:"complete");if(i!=="extended"&&i!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(o!=="date"&&o!=="time"&&o!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var l="",c="",d=i==="extended"?"-":"",u=i==="extended"?":":"";if(o!=="time"){var m=Se(s.getDate(),2),p=Se(s.getMonth()+1,2),h=Se(s.getFullYear(),4);l="".concat(h).concat(d).concat(p).concat(d).concat(m)}if(o!=="date"){var g=s.getTimezoneOffset();if(g!==0){var v=Math.abs(g),w=Se(Math.floor(v/60),2),C=Se(v%60,2),b=g<0?"+":"-";c="".concat(b).concat(w,":").concat(C)}else c="Z";var T=Se(s.getHours(),2),y=Se(s.getMinutes(),2),S=Se(s.getSeconds(),2),R=l===""?"":"T",k=[T,y,S].join(u);l="".concat(l).concat(R).concat(k).concat(c)}return l}function Zh(e){Z(1,arguments);var t=J(e),n=t.getDate();return n}function Ti(e){Z(1,arguments);var t=J(e),n=t.getFullYear(),a=t.getMonth(),s=new Date(0);return s.setFullYear(n,a+1,0),s.setHours(0,0,0,0),s.getDate()}function Jh(e){Z(1,arguments);var t=J(e),n=t.getHours();return n}function em(e){Z(1,arguments);var t=J(e),n=t.getMilliseconds();return n}function tm(e){Z(1,arguments);var t=J(e),n=t.getMinutes();return n}function rm(e){Z(1,arguments);var t=J(e),n=t.getMonth();return n}function nm(e){Z(1,arguments);var t=J(e),n=t.getSeconds();return n}function am(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=J(e),m=u.getFullYear(),p=Vt(),h=Re((n=(a=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&a!==void 0?a:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,h),g.setHours(0,0,0,0);var v=fr(g,t),w=new Date(0);w.setFullYear(m,0,h),w.setHours(0,0,0,0);var C=fr(w,t);return u.getTime()>=v.getTime()?m+1:u.getTime()>=C.getTime()?m:m-1}function sm(e,t){var n,a,s,i,o,l,c,d;Z(1,arguments);var u=Vt(),m=Re((n=(a=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&a!==void 0?a:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=am(e,t),h=new Date(0);h.setFullYear(p,0,m),h.setHours(0,0,0,0);var g=fr(h,t);return g}var om=6048e5;function im(e,t){Z(1,arguments);var n=J(e),a=fr(n,t).getTime()-sm(n,t).getTime();return Math.round(a/om)+1}function lm(e){return Z(1,arguments),J(e).getFullYear()}function Ra(e,t){Z(2,arguments);var n=J(e),a=J(t);return n.getTime()>a.getTime()}function Br(e,t){Z(2,arguments);var n=J(e),a=J(t);return n.getTime()<a.getTime()}function cm(e,t){Z(2,arguments);var n=J(e),a=J(t);return n.getTime()===a.getTime()}function qs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function dm(e,t){if(e){if(typeof e=="string")return qs(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qs(e,t):void 0}}function Qs(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dm(e))||t){n&&(e=n);var a=0,s=function(){};return{s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(d){throw d},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var d=n.next();return o=d.done,d},e:function(d){l=!0,i=d},f:function(){try{o||n.return==null||n.return()}finally{if(l)throw i}}}}function Ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tl(e,t)}function zn(e){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zn(e)}function Pi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pi=function(){return!!e})()}function um(e,t){if(t&&(Gn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function Ie(e){var t=Pi();return function(){var n,a=zn(e);if(t){var s=zn(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return um(this,n)}}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hm(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,po(a.key),a)}}function Ne(e,t,n){return t&&hm(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e,t,n){return(t=po(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mm=10,Di=function(){function e(){ke(this,e),re(this,"priority",void 0),re(this,"subPriority",0)}return Ne(e,[{key:"validate",value:function(n,a){return!0}}]),e}(),fm=function(e){Ee(n,e);var t=Ie(n);function n(a,s,i,o,l){var c;return ke(this,n),c=t.call(this),c.value=a,c.validateValue=s,c.setValue=i,c.priority=o,l&&(c.subPriority=l),c}return Ne(n,[{key:"validate",value:function(s,i){return this.validateValue(s,this.value,i)}},{key:"set",value:function(s,i,o){return this.setValue(s,i,this.value,o)}}]),n}(Di),pm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",mm),re(ae(a),"subPriority",-1),a}return Ne(n,[{key:"set",value:function(s,i){if(i.timestampIsSet)return s;var o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}}]),n}(Di),Fe=function(){function e(){ke(this,e),re(this,"incompatibleTokens",void 0),re(this,"priority",void 0),re(this,"subPriority",void 0)}return Ne(e,[{key:"run",value:function(n,a,s,i){var o=this.parse(n,a,s,i);return o?{setter:new fm(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,a,s){return!0}}]),e}(),xm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",140),re(ae(a),"incompatibleTokens",["R","u","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"G":case"GG":case"GGG":return o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"});case"GGGGG":return o.era(s,{width:"narrow"});case"GGGG":default:return o.era(s,{width:"wide"})||o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"})}}},{key:"set",value:function(s,i,o){return i.era=o,s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Xe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Rt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ze(e,t){return e&&{value:t(e.value),rest:e.rest}}function qe(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Et(e,t){var n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};var a=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:a*(s*ha+i*ua+o*Wu),rest:t.slice(n[0].length)}}function Si(e){return qe(Xe.anyDigitsSigned,e)}function Ke(e,t){switch(e){case 1:return qe(Xe.singleDigit,t);case 2:return qe(Xe.twoDigits,t);case 3:return qe(Xe.threeDigits,t);case 4:return qe(Xe.fourDigits,t);default:return qe(new RegExp("^\\d{1,"+e+"}"),t)}}function Yn(e,t){switch(e){case 1:return qe(Xe.singleDigitSigned,t);case 2:return qe(Xe.twoDigitsSigned,t);case 3:return qe(Xe.threeDigitsSigned,t);case 4:return qe(Xe.fourDigitsSigned,t);default:return qe(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ls(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ki(e,t){var n=t>0,a=n?t:1-t,s;if(a<=50)s=e||100;else{var i=a+50,o=Math.floor(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return n?s:1-s}function Ni(e){return e%400===0||e%4===0&&e%100!==0}var gm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",130),re(ae(a),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){var l=function(d){return{year:d,isTwoDigitYear:i==="yy"}};switch(i){case"y":return Ze(Ke(4,s),l);case"yo":return Ze(o.ordinalNumber(s,{unit:"year"}),l);default:return Ze(Ke(i.length,s),l)}}},{key:"validate",value:function(s,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(s,i,o){var l=s.getUTCFullYear();if(o.isTwoDigitYear){var c=ki(o.year,l);return s.setUTCFullYear(c,0,1),s.setUTCHours(0,0,0,0),s}var d=!("era"in i)||i.era===1?o.year:1-o.year;return s.setUTCFullYear(d,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),ym=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",130),re(ae(a),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){var l=function(d){return{year:d,isTwoDigitYear:i==="YY"}};switch(i){case"Y":return Ze(Ke(4,s),l);case"Yo":return Ze(o.ordinalNumber(s,{unit:"year"}),l);default:return Ze(Ke(i.length,s),l)}}},{key:"validate",value:function(s,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(s,i,o,l){var c=os(s,l);if(o.isTwoDigitYear){var d=ki(o.year,c);return s.setUTCFullYear(d,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),yr(s,l)}var u=!("era"in i)||i.era===1?o.year:1-o.year;return s.setUTCFullYear(u,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),yr(s,l)}}]),n}(Fe),vm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",130),re(ae(a),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i){return Yn(i==="R"?4:i.length,s)}},{key:"set",value:function(s,i,o){var l=new Date(0);return l.setUTCFullYear(o,0,4),l.setUTCHours(0,0,0,0),Er(l)}}]),n}(Fe),bm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",130),re(ae(a),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i){return Yn(i==="u"?4:i.length,s)}},{key:"set",value:function(s,i,o){return s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),jm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",120),re(ae(a),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"Q":case"QQ":return Ke(i.length,s);case"Qo":return o.ordinalNumber(s,{unit:"quarter"});case"QQQ":return o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(s,{width:"wide",context:"formatting"})||o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=1&&i<=4}},{key:"set",value:function(s,i,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),wm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",120),re(ae(a),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"q":case"qq":return Ke(i.length,s);case"qo":return o.ordinalNumber(s,{unit:"quarter"});case"qqq":return o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(s,{width:"wide",context:"standalone"})||o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,i){return i>=1&&i<=4}},{key:"set",value:function(s,i,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Cm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),re(ae(a),"priority",110),a}return Ne(n,[{key:"parse",value:function(s,i,o){var l=function(d){return d-1};switch(i){case"M":return Ze(qe(Xe.month,s),l);case"MM":return Ze(Ke(2,s),l);case"Mo":return Ze(o.ordinalNumber(s,{unit:"month"}),l);case"MMM":return o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(s,{width:"wide",context:"formatting"})||o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=11}},{key:"set",value:function(s,i,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Tm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",110),re(ae(a),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){var l=function(d){return d-1};switch(i){case"L":return Ze(qe(Xe.month,s),l);case"LL":return Ze(Ke(2,s),l);case"Lo":return Ze(o.ordinalNumber(s,{unit:"month"}),l);case"LLL":return o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(s,{width:"wide",context:"standalone"})||o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=11}},{key:"set",value:function(s,i,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(Fe);function Pm(e,t,n){Z(2,arguments);var a=J(e),s=Re(t),i=bi(a,n)-s;return a.setUTCDate(a.getUTCDate()-i*7),a}var Dm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",100),re(ae(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"w":return qe(Xe.week,s);case"wo":return o.ordinalNumber(s,{unit:"week"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=53}},{key:"set",value:function(s,i,o,l){return yr(Pm(s,o,l),l)}}]),n}(Fe);function Sm(e,t){Z(2,arguments);var n=J(e),a=Re(t),s=vi(n)-a;return n.setUTCDate(n.getUTCDate()-s*7),n}var km=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",100),re(ae(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"I":return qe(Xe.week,s);case"Io":return o.ordinalNumber(s,{unit:"week"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=53}},{key:"set",value:function(s,i,o){return Er(Sm(s,o))}}]),n}(Fe),Nm=[31,28,31,30,31,30,31,31,30,31,30,31],Mm=[31,29,31,30,31,30,31,31,30,31,30,31],Am=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",90),re(ae(a),"subPriority",1),re(ae(a),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"d":return qe(Xe.date,s);case"do":return o.ordinalNumber(s,{unit:"date"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){var o=s.getUTCFullYear(),l=Ni(o),c=s.getUTCMonth();return l?i>=1&&i<=Mm[c]:i>=1&&i<=Nm[c]}},{key:"set",value:function(s,i,o){return s.setUTCDate(o),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Rm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",90),re(ae(a),"subpriority",1),re(ae(a),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"D":case"DD":return qe(Xe.dayOfYear,s);case"Do":return o.ordinalNumber(s,{unit:"date"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){var o=s.getUTCFullYear(),l=Ni(o);return l?i>=1&&i<=366:i>=1&&i<=365}},{key:"set",value:function(s,i,o){return s.setUTCMonth(0,o),s.setUTCHours(0,0,0,0),s}}]),n}(Fe);function cs(e,t,n){var a,s,i,o,l,c,d,u;Z(2,arguments);var m=Vt(),p=Re((a=(s=(i=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&s!==void 0?s:(d=m.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=J(e),g=Re(t),v=h.getUTCDay(),w=g%7,C=(w+7)%7,b=(C<p?7:0)+g-v;return h.setUTCDate(h.getUTCDate()+b),h}var Em=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",90),re(ae(a),"incompatibleTokens",["D","i","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"E":case"EE":case"EEE":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=6}},{key:"set",value:function(s,i,o,l){return s=cs(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Im=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",90),re(ae(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o,l){var c=function(u){var m=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+m};switch(i){case"e":case"ee":return Ze(Ke(i.length,s),c);case"eo":return Ze(o.ordinalNumber(s,{unit:"day"}),c);case"eee":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeeee":return o.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=6}},{key:"set",value:function(s,i,o,l){return s=cs(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Om=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",90),re(ae(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o,l){var c=function(u){var m=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+m};switch(i){case"c":case"cc":return Ze(Ke(i.length,s),c);case"co":return Ze(o.ordinalNumber(s,{unit:"day"}),c);case"ccc":return o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"ccccc":return o.day(s,{width:"narrow",context:"standalone"});case"cccccc":return o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(s,{width:"wide",context:"standalone"})||o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=6}},{key:"set",value:function(s,i,o,l){return s=cs(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Fe);function _m(e,t){Z(2,arguments);var n=Re(t);n%7===0&&(n=n-7);var a=1,s=J(e),i=s.getUTCDay(),o=n%7,l=(o+7)%7,c=(l<a?7:0)+n-i;return s.setUTCDate(s.getUTCDate()+c),s}var Fm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",90),re(ae(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){var l=function(d){return d===0?7:d};switch(i){case"i":case"ii":return Ke(i.length,s);case"io":return o.ordinalNumber(s,{unit:"day"});case"iii":return Ze(o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiii":return Ze(o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiiii":return Ze(o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiii":default:return Ze(o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(s,i){return i>=1&&i<=7}},{key:"set",value:function(s,i,o){return s=_m(s,o),s.setUTCHours(0,0,0,0),s}}]),n}(Fe),Vm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",80),re(ae(a),"incompatibleTokens",["b","B","H","k","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"a":case"aa":case"aaa":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,i,o){return s.setUTCHours(ls(o),0,0,0),s}}]),n}(Fe),Lm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",80),re(ae(a),"incompatibleTokens",["a","B","H","k","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"b":case"bb":case"bbb":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,i,o){return s.setUTCHours(ls(o),0,0,0),s}}]),n}(Fe),$m=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",80),re(ae(a),"incompatibleTokens",["a","b","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"B":case"BB":case"BBB":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,i,o){return s.setUTCHours(ls(o),0,0,0),s}}]),n}(Fe),Bm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",70),re(ae(a),"incompatibleTokens",["H","K","k","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"h":return qe(Xe.hour12h,s);case"ho":return o.ordinalNumber(s,{unit:"hour"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=12}},{key:"set",value:function(s,i,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):!l&&o===12?s.setUTCHours(0,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(Fe),Wm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",70),re(ae(a),"incompatibleTokens",["a","b","h","K","k","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"H":return qe(Xe.hour23h,s);case"Ho":return o.ordinalNumber(s,{unit:"hour"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=23}},{key:"set",value:function(s,i,o){return s.setUTCHours(o,0,0,0),s}}]),n}(Fe),Um=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",70),re(ae(a),"incompatibleTokens",["h","H","k","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"K":return qe(Xe.hour11h,s);case"Ko":return o.ordinalNumber(s,{unit:"hour"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=11}},{key:"set",value:function(s,i,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(Fe),Hm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",70),re(ae(a),"incompatibleTokens",["a","b","h","H","K","t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"k":return qe(Xe.hour24h,s);case"ko":return o.ordinalNumber(s,{unit:"hour"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=24}},{key:"set",value:function(s,i,o){var l=o<=24?o%24:o;return s.setUTCHours(l,0,0,0),s}}]),n}(Fe),zm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",60),re(ae(a),"incompatibleTokens",["t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"m":return qe(Xe.minute,s);case"mo":return o.ordinalNumber(s,{unit:"minute"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=59}},{key:"set",value:function(s,i,o){return s.setUTCMinutes(o,0,0),s}}]),n}(Fe),Ym=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",50),re(ae(a),"incompatibleTokens",["t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i,o){switch(i){case"s":return qe(Xe.second,s);case"so":return o.ordinalNumber(s,{unit:"second"});default:return Ke(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=59}},{key:"set",value:function(s,i,o){return s.setUTCSeconds(o,0),s}}]),n}(Fe),qm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",30),re(ae(a),"incompatibleTokens",["t","T"]),a}return Ne(n,[{key:"parse",value:function(s,i){var o=function(c){return Math.floor(c*Math.pow(10,-i.length+3))};return Ze(Ke(i.length,s),o)}},{key:"set",value:function(s,i,o){return s.setUTCMilliseconds(o),s}}]),n}(Fe),Qm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",10),re(ae(a),"incompatibleTokens",["t","T","x"]),a}return Ne(n,[{key:"parse",value:function(s,i){switch(i){case"X":return Et(Rt.basicOptionalMinutes,s);case"XX":return Et(Rt.basic,s);case"XXXX":return Et(Rt.basicOptionalSeconds,s);case"XXXXX":return Et(Rt.extendedOptionalSeconds,s);case"XXX":default:return Et(Rt.extended,s)}}},{key:"set",value:function(s,i,o){return i.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(Fe),Km=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",10),re(ae(a),"incompatibleTokens",["t","T","X"]),a}return Ne(n,[{key:"parse",value:function(s,i){switch(i){case"x":return Et(Rt.basicOptionalMinutes,s);case"xx":return Et(Rt.basic,s);case"xxxx":return Et(Rt.basicOptionalSeconds,s);case"xxxxx":return Et(Rt.extendedOptionalSeconds,s);case"xxx":default:return Et(Rt.extended,s)}}},{key:"set",value:function(s,i,o){return i.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(Fe),Gm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",40),re(ae(a),"incompatibleTokens","*"),a}return Ne(n,[{key:"parse",value:function(s){return Si(s)}},{key:"set",value:function(s,i,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Fe),Xm=function(e){Ee(n,e);var t=Ie(n);function n(){var a;ke(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i)),re(ae(a),"priority",20),re(ae(a),"incompatibleTokens","*"),a}return Ne(n,[{key:"parse",value:function(s){return Si(s)}},{key:"set",value:function(s,i,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Fe),Zm={G:new xm,y:new gm,Y:new ym,R:new vm,u:new bm,Q:new jm,q:new wm,M:new Cm,L:new Tm,w:new Dm,I:new km,d:new Am,D:new Rm,E:new Em,e:new Im,c:new Om,i:new Fm,a:new Vm,b:new Lm,B:new $m,h:new Bm,H:new Wm,K:new Um,k:new Hm,m:new zm,s:new Ym,S:new qm,X:new Qm,x:new Km,t:new Gm,T:new Xm},Jm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ef=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tf=/^'([^]*?)'?$/,rf=/''/g,nf=/\S/,af=/[a-zA-Z]/;function sf(e,t,n,a){var s,i,o,l,c,d,u,m,p,h,g,v,w,C,b,T,y,S;Z(3,arguments);var R=String(e),k=String(t),E=Vt(),M=(s=(i=a==null?void 0:a.locale)!==null&&i!==void 0?i:E.locale)!==null&&s!==void 0?s:is;if(!M.match)throw new RangeError("locale must contain match property");var N=Re((o=(l=(c=(d=a==null?void 0:a.firstWeekContainsDate)!==null&&d!==void 0?d:a==null||(u=a.locale)===null||u===void 0||(m=u.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&c!==void 0?c:E.firstWeekContainsDate)!==null&&l!==void 0?l:(p=E.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=Re((g=(v=(w=(C=a==null?void 0:a.weekStartsOn)!==null&&C!==void 0?C:a==null||(b=a.locale)===null||b===void 0||(T=b.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&w!==void 0?w:E.weekStartsOn)!==null&&v!==void 0?v:(y=E.locale)===null||y===void 0||(S=y.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&g!==void 0?g:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(k==="")return R===""?J(n):new Date(NaN);var D={firstWeekContainsDate:N,weekStartsOn:P,locale:M},L=[new pm],_=k.match(ef).map(function(oe){var ie=oe[0];if(ie in Ka){var ye=Ka[ie];return ye(oe,M.formatLong)}return oe}).join("").match(Jm),A=[],G=Qs(_),U;try{var B=function(){var ie=U.value;!(a!=null&&a.useAdditionalWeekYearTokens)&&Ci(ie)&&Hn(ie,k,e),!(a!=null&&a.useAdditionalDayOfYearTokens)&&wi(ie)&&Hn(ie,k,e);var ye=ie[0],ce=Zm[ye];if(ce){var ue=ce.incompatibleTokens;if(Array.isArray(ue)){var X=A.find(function(Be){return ue.includes(Be.token)||Be.token===ye});if(X)throw new RangeError("The format string mustn't contain `".concat(X.fullToken,"` and `").concat(ie,"` at the same time"))}else if(ce.incompatibleTokens==="*"&&A.length>0)throw new RangeError("The format string mustn't contain `".concat(ie,"` and any other token at the same time"));A.push({token:ye,fullToken:ie});var pe=ce.run(R,ie,M.match,D);if(!pe)return{v:new Date(NaN)};L.push(pe.setter),R=pe.rest}else{if(ye.match(af))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ye+"`");if(ie==="''"?ie="'":ye==="'"&&(ie=of(ie)),R.indexOf(ie)===0)R=R.slice(ie.length);else return{v:new Date(NaN)}}};for(G.s();!(U=G.n()).done;){var W=B();if(Gn(W)==="object")return W.v}}catch(oe){G.e(oe)}finally{G.f()}if(R.length>0&&nf.test(R))return new Date(NaN);var K=L.map(function(oe){return oe.priority}).sort(function(oe,ie){return ie-oe}).filter(function(oe,ie,ye){return ye.indexOf(oe)===ie}).map(function(oe){return L.filter(function(ie){return ie.priority===oe}).sort(function(ie,ye){return ye.subPriority-ie.subPriority})}).map(function(oe){return oe[0]}),be=J(n);if(isNaN(be.getTime()))return new Date(NaN);var ge=gi(be,Un(be)),te={},F=Qs(K),le;try{for(F.s();!(le=F.n()).done;){var me=le.value;if(!me.validate(ge,D))return new Date(NaN);var Q=me.set(ge,te,D);Array.isArray(Q)?(ge=Q[0],Gh(te,Q[1])):ge=Q}}catch(oe){F.e(oe)}finally{F.f()}return ge}function of(e){return e.match(tf)[1].replace(rf,"'")}function Ks(e){Z(1,arguments);var t=J(e);return t.setMinutes(0,0,0),t}function lf(e,t){Z(2,arguments);var n=Ks(e),a=Ks(t);return n.getTime()===a.getTime()}function cf(e,t){Z(2,arguments);var n=J(e),a=J(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function df(e,t){Z(2,arguments);var n=J(e),a=J(t);return n.getFullYear()===a.getFullYear()}function uf(e,t){Z(2,arguments);var n=J(e).getTime(),a=J(t.start).getTime(),s=J(t.end).getTime();if(!(a<=s))throw new RangeError("Invalid interval");return n>=a&&n<=s}function tr(e,t){var n;Z(1,arguments);var a=Re((n=void 0)!==null&&n!==void 0?n:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=pf(e),i;if(s.date){var o=xf(s.date,a);i=gf(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),c=0,d;if(s.time&&(c=yf(s.time),isNaN(c)))return new Date(NaN);if(s.timezone){if(d=vf(s.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(l+c),m=new Date(0);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return new Date(l+c+d)}var jn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},hf=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,mf=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ff=/^([+-])(\d{2})(?::?(\d{2}))?$/;function pf(e){var t={},n=e.split(jn.dateTimeDelimiter),a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],jn.timeZoneDelimiter.test(t.date)&&(t.date=e.split(jn.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){var s=jn.timezone.exec(a);s?(t.time=a.replace(s[1],""),t.timezone=s[1]):t.time=a}return t}function xf(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};var s=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((a[1]||a[2]).length)}}function gf(e,t){if(t===null)return new Date(NaN);var n=e.match(hf);if(!n)return new Date(NaN);var a=!!n[4],s=Wr(n[1]),i=Wr(n[2])-1,o=Wr(n[3]),l=Wr(n[4]),c=Wr(n[5])-1;if(a)return Tf(t,l,c)?bf(t,l,c):new Date(NaN);var d=new Date(0);return!wf(t,i,o)||!Cf(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,o)),d)}function Wr(e){return e?parseInt(e):1}function yf(e){var t=e.match(mf);if(!t)return NaN;var n=Ea(t[1]),a=Ea(t[2]),s=Ea(t[3]);return Pf(n,a,s)?n*ha+a*ua+s*1e3:NaN}function Ea(e){return e&&parseFloat(e.replace(",","."))||0}function vf(e){if(e==="Z")return 0;var t=e.match(ff);if(!t)return 0;var n=t[1]==="+"?-1:1,a=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Df(a,s)?n*(a*ha+s*ua):NaN}function bf(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var s=a.getUTCDay()||7,i=(t-1)*7+n+1-s;return a.setUTCDate(a.getUTCDate()+i),a}var jf=[31,null,31,30,31,30,31,31,30,31,30,31];function Mi(e){return e%400===0||e%4===0&&e%100!==0}function wf(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(jf[t]||(Mi(e)?29:28))}function Cf(e,t){return t>=1&&t<=(Mi(e)?366:365)}function Tf(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function Pf(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Df(e,t){return t>=0&&t<=59}function Sf(e,t){Z(2,arguments);var n=J(e),a=Re(t),s=n.getFullYear(),i=n.getDate(),o=new Date(0);o.setFullYear(s,a,15),o.setHours(0,0,0,0);var l=Ti(o);return n.setMonth(a,Math.min(i,l)),n}function kf(e,t){Z(2,arguments);var n=J(e),a=Re(t);return n.setDate(a),n}function Nf(e,t){Z(2,arguments);var n=J(e),a=Re(t);return n.setHours(a),n}function Mf(e,t){Z(2,arguments);var n=J(e),a=Re(t);return n.setMilliseconds(a),n}function Af(e,t){Z(2,arguments);var n=J(e),a=Re(t);return n.setMinutes(a),n}function Rf(e,t){Z(2,arguments);var n=J(e),a=Re(t);return n.setSeconds(a),n}function Ef(e,t){Z(2,arguments);var n=J(e),a=Re(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(a),n)}const Ai={USD:"$",VND:"₫",EUR:"€",GBP:"£",JPY:"¥",CNY:"¥",KRW:"₩",SGD:"S$",THB:"฿",IDR:"Rp",MYR:"RM",PHP:"₱",INR:"₹",AUD:"A$",CAD:"C$",CHF:"CHF",NZD:"NZ$"},q=(e,t="VND",n={},a="en-US")=>{a="en-US";const{compact:s=!1,precision:i=t==="VND"?0:2,showSymbol:o=!0}=n;(e==null||isNaN(e))&&(e=0);const l=new Intl.NumberFormat(a,{minimumFractionDigits:i,maximumFractionDigits:i,notation:s?"compact":"standard"}).format(e);if(o){const c=Ai[t]||t;return`${l} ${c}`}return l},dt=(e,t=2,n="en-US")=>(n="en-US",e==null||isNaN(e)?new Intl.NumberFormat(n,{minimumFractionDigits:t,maximumFractionDigits:t}).format(0):new Intl.NumberFormat(n,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)),fe=(e,t=2,n="en-US")=>(n="en-US",e==null||isNaN(e)?new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:t,maximumFractionDigits:t}).format(0):new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:t,maximumFractionDigits:t}).format(e/100)),wn=(e,t=2,n="en-US")=>(n="en-US",e==null||isNaN(e)?new Intl.NumberFormat(n,{minimumFractionDigits:t,maximumFractionDigits:t}).format(0)+"%":new Intl.NumberFormat(n,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)+"%"),fa=(e,t="MMM dd, yyyy")=>{try{const n=typeof e=="string"?tr(e):e;return er(n,t)}catch{return"Invalid Date"}},Ri=({portfolio:e,onView:t,onEdit:n})=>{const a=(Number(e.unrealizedPl)||0)>=0,s=(Number(e.realizedPl)||0)>=0,i=()=>{t(e.portfolioId)},o=c=>{c.stopPropagation(),n&&n(e.portfolioId)},l=c=>{c.stopPropagation(),i()};return r.jsxs("div",{className:"portfolio-card",onClick:i,children:[r.jsxs("div",{className:"portfolio-card__content",children:[r.jsxs("div",{className:"portfolio-card__header",children:[r.jsx("h2",{className:"portfolio-card__title",children:e.name}),r.jsx("span",{className:`portfolio-card__currency ${e.baseCurrency==="USD"?"portfolio-card__currency--primary":""}`,children:e.baseCurrency})]}),r.jsxs("div",{className:"portfolio-card__metrics",children:[r.jsxs("div",{className:"portfolio-card__total-value",children:[r.jsx(Ut,{className:"portfolio-card__total-value-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"portfolio-card__total-value-amount",children:q(Number(e.totalValue)||0,e.baseCurrency)}),r.jsx("div",{className:"portfolio-card__total-value-label",children:"Total Value"})]})]}),r.jsxs("div",{className:"portfolio-card__pl-section",children:[r.jsxs("div",{className:"portfolio-card__pl-item",children:[r.jsxs("div",{className:"portfolio-card__pl-header",children:[a?r.jsx(wt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):r.jsx(Ft,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),r.jsx("div",{className:`portfolio-card__pl-amount ${a?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:q(Number(e.unrealizedPl)||0,e.baseCurrency)})]}),r.jsx("div",{className:"portfolio-card__pl-label",children:"Unrealized P&L"})]}),r.jsxs("div",{className:"portfolio-card__pl-item",children:[r.jsxs("div",{className:"portfolio-card__pl-header",children:[s?r.jsx(wt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):r.jsx(Ft,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),r.jsx("div",{className:`portfolio-card__pl-amount ${s?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:q(Number(e.realizedPl)||0,e.baseCurrency)})]}),r.jsx("div",{className:"portfolio-card__pl-label",children:"Realized P&L"})]})]}),r.jsxs("div",{className:"portfolio-card__cash-balance",children:[r.jsx("div",{className:"portfolio-card__cash-label",children:"Cash Balance"}),r.jsx("div",{className:"portfolio-card__cash-amount",children:q(Number(e.cashBalance)||0,e.baseCurrency)})]})]})]}),r.jsxs("div",{className:"portfolio-card__actions",children:[r.jsxs("button",{className:"portfolio-card__view-btn",onClick:l,children:[r.jsx(xo,{}),"View Details"]}),n&&r.jsx("button",{className:"portfolio-card__edit-btn",onClick:o,children:"Edit"})]})]})},If=()=>{var C;const e=an(),{accountId:t}=Pt(),{portfolios:n,isLoading:a,error:s}=ca(t);if(a)return r.jsx(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:r.jsx(Ue,{})});if(s)return r.jsx(Ye,{severity:"error",sx:{mb:2},children:"Failed to load dashboard data. Please try again."});const i=n.length,o=n.reduce((b,T)=>{var y;return b+(parseFloat((y=T.totalValue)==null?void 0:y.toString())||0)},0),l=n.reduce((b,T)=>{var y;return b+(parseFloat((y=T.unrealizedPl)==null?void 0:y.toString())||0)},0),c=n.reduce((b,T)=>{var y;return b+(parseFloat((y=T.realizedPl)==null?void 0:y.toString())||0)},0),d=n.reduce((b,T)=>{var y;return b+(parseFloat((y=T.cashBalance)==null?void 0:y.toString())||0)},0),u=l+c,m=o>0?u/(o-u)*100:0,p=((C=n.find(b=>b.baseCurrency))==null?void 0:C.baseCurrency)||"VND",h=b=>{e(`/portfolios/${b}`)},g=b=>{e(`/portfolios/${b}/edit`)},v=()=>{e("/portfolios/new")},w=[{title:"Total Portfolios",value:i.toString(),icon:r.jsx(Ut,{}),color:"primary"},{title:"Total Value",value:q(o,p),icon:r.jsx(Pl,{}),color:"success"},{title:"Total P&L",value:q(u,p),icon:u>=0?r.jsx(wt,{}):r.jsx(Ft,{}),color:u>=0?"success":"error"},{title:"Total Return",value:fe(m),icon:m>=0?r.jsx(wt,{}):r.jsx(Ft,{}),color:m>=0?"success":"error"}];return r.jsxs(j,{children:[r.jsx(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"Dashboard"}),r.jsx(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Overview of your investment portfolios and performance"}),r.jsxs(I,{container:!0,spacing:3,sx:{mb:4},children:[r.jsx(I,{item:!0,xs:12,lg:8,children:r.jsx(I,{container:!0,spacing:3,sx:{height:"100%"},children:w.map((b,T)=>r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsx(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,children:[r.jsxs(j,{children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:b.title}),r.jsx(f,{variant:"h5",component:"div",children:b.value})]}),r.jsx(j,{sx:{color:`${b.color}.main`,display:"flex",alignItems:"center"},children:b.icon})]})})})},T))})}),n.length>0&&r.jsx(I,{item:!0,xs:12,lg:4,children:r.jsxs(at,{sx:{p:3,height:"fit-content"},children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Portfolio Insights"}),r.jsxs(j,{children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Average Portfolio Value:"}),r.jsx(f,{variant:"body2",fontWeight:"medium",children:q(o/n.length,p)})]}),r.jsxs(j,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Cash Allocation:"}),r.jsx(f,{variant:"body2",fontWeight:"medium",children:fe(d/o*100)})]}),r.jsxs(j,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Best Performer:"}),r.jsx(f,{variant:"body2",fontWeight:"medium",color:"success.main",children:n.length>0?n.reduce((b,T)=>(T.unrealizedPl||0)>(b.unrealizedPl||0)?T:b).name:"N/A"})]}),r.jsxs(j,{display:"flex",justifyContent:"space-between",py:1.5,children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Total Cash Balance:"}),r.jsx(f,{variant:"body2",fontWeight:"medium",children:q(d,p)})]})]})]})})]}),r.jsxs(j,{children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsx(f,{variant:"h5",component:"h2",children:"Your Portfolios"}),r.jsx(Qe,{variant:"contained",startIcon:r.jsx(Ot,{}),onClick:v,sx:{borderRadius:2},children:"Create Portfolio"})]}),n.length===0?r.jsxs(at,{sx:{p:4,textAlign:"center"},children:[r.jsx(Ut,{sx:{fontSize:64,color:"text.secondary",mb:2}}),r.jsx(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No portfolios found"}),r.jsx(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first portfolio to start tracking your investments"}),r.jsx(Qe,{variant:"contained",startIcon:r.jsx(Ot,{}),onClick:v,size:"large",sx:{borderRadius:2},children:"Create Your First Portfolio"})]}):r.jsx(I,{container:!0,spacing:3,children:n.map(b=>r.jsx(I,{item:!0,xs:12,sm:6,lg:4,xl:3,children:r.jsx(Ri,{portfolio:b,onView:h,onEdit:g})},b.portfolioId))})]})]})},Of=({onViewPortfolio:e,onEditPortfolio:t,onCreatePortfolio:n})=>{const{accountId:a}=Pt(),{portfolios:s,isLoading:i,error:o}=ca(a),[l,c]=x.useState(""),[d,u]=x.useState(""),m=s.filter(h=>{const g=h.name.toLowerCase().includes(l.toLowerCase()),v=!d||h.baseCurrency===d;return g&&v}),p=Array.from(new Set(s.map(h=>h.baseCurrency)));return i?r.jsx("div",{className:"portfolio-list",children:r.jsx("div",{className:"portfolio-list__loading",children:r.jsx(Ue,{})})}):o?r.jsx("div",{className:"portfolio-list",children:r.jsx("div",{className:"portfolio-list__error",children:"Failed to load portfolios. Please try again."})}):r.jsxs("div",{className:"portfolio-list",children:[r.jsxs("div",{className:"portfolio-list__header",children:[r.jsx("h1",{className:"portfolio-list__title",children:"Portfolios"}),n&&r.jsxs("button",{className:"portfolio-list__create-btn",onClick:n,children:[r.jsx(Ot,{}),"Create Portfolio"]})]}),r.jsxs("div",{className:"portfolio-list__filters",children:[r.jsx(ot,{label:"Search portfolios",variant:"outlined",size:"small",value:l,onChange:h=>c(h.target.value),InputProps:{startAdornment:r.jsx(go,{sx:{mr:1,color:"text.secondary"}})},className:"portfolio-list__search"}),r.jsxs(vt,{size:"small",className:"portfolio-list__currency-filter",children:[r.jsx(bt,{children:"Currency"}),r.jsxs(jt,{value:d,label:"Currency",onChange:h=>u(h.target.value),children:[r.jsx(xe,{value:"",children:"All Currencies"}),p.map(h=>r.jsx(xe,{value:h,children:h},h))]})]})]}),m.length===0?r.jsxs("div",{className:"portfolio-list__empty",children:[r.jsx("div",{className:"portfolio-list__empty-icon",children:"📊"}),r.jsx("h3",{className:"portfolio-list__empty-title",children:s.length===0?"No portfolios found. Create your first portfolio to get started.":"No portfolios match your search criteria."}),n&&s.length===0&&r.jsxs("button",{className:"portfolio-list__empty-btn",onClick:n,children:[r.jsx(Ot,{}),"Create Your First Portfolio"]})]}):r.jsx("div",{className:"portfolio-list__grid",children:m.map(h=>r.jsx(Ri,{portfolio:h,onView:e,onEdit:t},h.portfolioId))}),n&&r.jsx(yo,{color:"primary","aria-label":"add portfolio",onClick:n,className:"portfolio-list__fab",children:r.jsx(Ot,{})})]})};function Ei(e,t,n){return t===void 0&&(t={}),n===void 0&&(n={}),function(a,s,i){try{return Promise.resolve(function(o,l){try{var c=(t.context,Promise.resolve(e[n.mode==="sync"?"validateSync":"validate"](a,Object.assign({abortEarly:!1},t,{context:s}))).then(function(d){return i.shouldUseNativeValidation&&rc({},i),{values:n.raw?a:d,errors:{}}}))}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(!o.inner)throw o;return{values:{},errors:nc((l=o,c=!i.shouldUseNativeValidation&&i.criteriaMode==="all",(l.inner||[]).reduce(function(d,u){if(d[u.path]||(d[u.path]={message:u.message,type:u.type}),c){var m=d[u.path].types,p=m&&m[u.type];d[u.path]=ac(u.path,c,d,u.type,p?[].concat(p,u.message):u.message)}return d},{})),i)};var l,c}))}catch(o){return Promise.reject(o)}}}const _f=ko({name:dr().required("Portfolio name is required").min(2,"Name must be at least 2 characters"),baseCurrency:dr().required("Base currency is required"),accountId:dr().required("Account ID is required")}),Ff=[{code:"VND",name:"Vietnamese Dong"},{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"}],Vf=({open:e,onClose:t,onSubmit:n,initialData:a,isEditing:s=!1,isLoading:i=!1,error:o})=>{const{accountId:l}=Pt(),{control:c,handleSubmit:d,reset:u,formState:{errors:m}}=No({resolver:Ei(_f),defaultValues:{name:(a==null?void 0:a.name)||"",baseCurrency:(a==null?void 0:a.baseCurrency)||"VND",accountId:(a==null?void 0:a.accountId)||l}});_t.useEffect(()=>{e&&u({name:(a==null?void 0:a.name)||"",baseCurrency:(a==null?void 0:a.baseCurrency)||"VND",accountId:(a==null?void 0:a.accountId)||l})},[e,a,u,l]),_t.useEffect(()=>{e&&a&&u({name:a.name||"",baseCurrency:a.baseCurrency||"VND",accountId:a.accountId||l})},[a,e,u,l]);const p=g=>{n(g)},h=()=>{u(),t()};return r.jsxs(tn,{open:e,onClose:h,maxWidth:"sm",fullWidth:!0,children:[r.jsx(Xn,{children:s?"Edit Portfolio":"Create New Portfolio"}),r.jsxs("form",{onSubmit:d(p),children:[r.jsxs(rn,{children:[o&&r.jsx(Ye,{severity:"error",sx:{mb:2},children:o}),r.jsxs(j,{display:"flex",flexDirection:"column",gap:2,children:[r.jsx(gt,{name:"name",control:c,render:({field:g})=>{var v;return r.jsx(ot,{...g,label:"Portfolio Name",fullWidth:!0,error:!!m.name,helperText:(v=m.name)==null?void 0:v.message,placeholder:"e.g., Growth Portfolio, Retirement Fund"})}}),r.jsx(gt,{name:"baseCurrency",control:c,render:({field:g})=>r.jsxs(vt,{fullWidth:!0,error:!!m.baseCurrency,children:[r.jsx(bt,{children:"Base Currency"}),r.jsx(jt,{...g,label:"Base Currency",children:Ff.map(v=>r.jsxs(xe,{value:v.code,children:[v.code," - ",v.name]},v.code))}),m.baseCurrency&&r.jsx(j,{component:"span",sx:{color:"error.main",fontSize:"0.75rem",mt:.5,ml:1.75},children:m.baseCurrency.message})]})}),r.jsx(gt,{name:"accountId",control:c,render:({field:g})=>{var v;return r.jsx(ot,{...g,label:"Account ID",fullWidth:!0,error:!!m.accountId,helperText:(v=m.accountId)==null?void 0:v.message,placeholder:"Enter account ID",disabled:s})}})]})]}),r.jsxs(nn,{children:[r.jsx(Qe,{onClick:h,disabled:i,children:"Cancel"}),r.jsx(Qe,{type:"submit",variant:"contained",disabled:i,children:i?"Saving...":s?"Update":"Create"})]})]})]})},Lf=()=>{const e=an(),[t,n]=x.useState(!1),[a,s]=x.useState(null),[i,o]=x.useState(""),{accountId:l}=Pt(),{portfolios:c,createPortfolio:d,updatePortfolio:u,isCreating:m,isUpdating:p,isDeleting:h}=ca(l),g=y=>{e(`/portfolios/${y}`)},v=y=>{s(y),n(!0)},w=()=>{s(null),o(""),n(!0)},C=()=>{n(!1),s(null),o("")},b=async y=>{var S,R;try{o(""),a?await u({id:a,data:y}):await d(y),C()}catch(k){o(((R=(S=k.response)==null?void 0:S.data)==null?void 0:R.message)||"An error occurred. Please try again.")}},T=()=>{if(!a)return;const y=c.find(S=>S.portfolioId===a);if(y)return{name:y.name,baseCurrency:y.baseCurrency,accountId:y.accountId}};return r.jsxs(j,{children:[r.jsx(Of,{onViewPortfolio:g,onEditPortfolio:v,onCreatePortfolio:w}),r.jsx(Vf,{open:t,onClose:C,onSubmit:b,initialData:T(),isEditing:!!a,isLoading:m||p,error:i}),(m||p||h)&&r.jsxs(Ye,{severity:"info",sx:{mt:2},children:[m&&"Creating portfolio...",p&&"Updating portfolio...",h&&"Deleting portfolio..."]})]})},ds=(e,t)=>Wt(["trades",e,t],()=>Le.getTrades(e,t),{enabled:!!e,staleTime:2*60*1e3}),Ii=()=>{const e=sn();return hr(t=>Le.createTrade(t),{onSuccess:t=>{e.invalidateQueries("trades"),e.invalidateQueries("portfolios"),He.success("Trade created successfully!")},onError:t=>{var n,a;He.error(((a=(n=t.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to create trade")}})},$f=()=>{const e=sn();return hr(({id:t,data:n})=>Le.updateTrade(t,n),{onSuccess:()=>{e.invalidateQueries("trades"),e.invalidateQueries("portfolios"),He.success("Trade updated successfully!")},onError:t=>{var n,a;He.error(((a=(n=t.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update trade")}})},Bf=()=>{const e=sn();return hr(t=>Le.deleteTrade(t),{onSuccess:()=>{e.invalidateQueries("trades"),e.invalidateQueries("portfolios"),He.success("Trade deleted successfully!")},onError:t=>{var n,a;He.error(((a=(n=t.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to delete trade")}})},Wf=e=>Wt(["tradeDetails",e],()=>Le.getTradeDetails(e),{enabled:!!e,staleTime:2*60*1e3}),Uf=(e,t)=>{const n=["tradeAnalysis",e,(t==null?void 0:t.timeframe)||"ALL",(t==null?void 0:t.metric)||"pnl"];return Wt(n,()=>Le.getTradeAnalysis(e,t),{enabled:!!e,staleTime:0,cacheTime:0})},Gs=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],Hf=({data:e,baseCurrency:t})=>{const n=Object.entries(e.allocation).map(([i,o],l)=>({name:i.toUpperCase(),value:o.percentage,marketValue:o.value,color:Gs[l%Gs.length]})),a=({active:i,payload:o})=>{if(i&&o&&o.length){const l=o[0].payload;return r.jsxs(j,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:l.name}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Allocation: ",fe(l.value)]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Market Value: ",q(l.marketValue,t)]})]})}return null},s=({payload:i})=>r.jsx(j,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:1,mt:2},children:i.map((o,l)=>r.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(j,{sx:{width:12,height:12,backgroundColor:o.color,borderRadius:"50%"}}),r.jsxs(f,{variant:"caption",children:[o.value," (",fe(o.payload.value),")"]})]},l))});return!e||Object.keys(e.allocation).length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No asset allocation data available"})}):r.jsx(j,{sx:{height:400},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(Mo,{children:[r.jsx(Ao,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:i,value:o})=>`${i}: ${fe(o)}`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:n.map((i,o)=>r.jsx(on,{fill:i.color},`cell-${o}`))}),r.jsx(St,{content:r.jsx(a,{})}),r.jsx(ts,{content:r.jsx(s,{})})]})})})},zf=({portfolioId:e,baseCurrency:t,title:n="Performance Chart",showReferenceLine:a=!1,referenceValue:s=0})=>{const[i,o]=x.useState("1Y"),[l,c]=x.useState([]),[d,u]=x.useState(!0),[m,p]=x.useState(null);x.useEffect(()=>{(async()=>{try{u(!0),p(null);const w=await Le.getPortfolioPerformanceHistory(e,i);c(w.data)}catch(w){console.error("Error fetching performance data:",w),p("Failed to load performance data")}finally{u(!1)}})()},[e,i]);const h=({active:v,payload:w,label:C})=>v&&w&&w.length?r.jsxs(at,{sx:{p:2,boxShadow:3},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:fa(C)}),r.jsxs(f,{variant:"body2",color:"primary",children:["Value: ",q(w[0].value,t)]})]}):null,g=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric"});return d?r.jsxs(at,{sx:{p:3,textAlign:"center"},children:[r.jsx(Ue,{}),r.jsx(f,{variant:"body2",sx:{mt:2},children:"Loading performance data..."})]}):m?r.jsx(at,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"error",children:m})}):l.length===0?r.jsx(at,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):r.jsxs(at,{sx:{p:3},children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsx(f,{variant:"h6",children:n}),r.jsxs(vt,{size:"small",sx:{minWidth:120},children:[r.jsx(bt,{children:"Timeframe"}),r.jsxs(jt,{value:i,label:"Timeframe",onChange:v=>o(v.target.value),children:[r.jsx(xe,{value:"1M",children:"1 Month"}),r.jsx(xe,{value:"3M",children:"3 Months"}),r.jsx(xe,{value:"6M",children:"6 Months"}),r.jsx(xe,{value:"1Y",children:"1 Year"}),r.jsx(xe,{value:"2Y",children:"2 Years"}),r.jsx(xe,{value:"5Y",children:"5 Years"}),r.jsx(xe,{value:"ALL",children:"All Time"})]})]})]}),r.jsx(j,{sx:{height:400},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(ea,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"date",tickFormatter:g,tick:{fontSize:12}}),r.jsx(Yt,{tickFormatter:v=>q(v,t,{compact:!0}),tick:{fontSize:12}}),r.jsx(St,{content:r.jsx(h,{})}),r.jsx(Ar,{type:"monotone",dataKey:"value",stroke:"#1976d2",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#1976d2",strokeWidth:2}}),a&&r.jsx(Ro,{y:s,stroke:"#ff9800",strokeDasharray:"5 5",label:{value:"Reference",position:"top"}})]})})})]})},Yf=({data:e,baseCurrency:t,title:n="Risk-Return Analysis"})=>{const a=({active:s,payload:i})=>{if(s&&i&&i.length){const o=i[0].payload;return r.jsxs(at,{sx:{p:2,boxShadow:3},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:o.assetType.toUpperCase()}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Return: ",fe(o.return)]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Risk: ",fe(o.risk)]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Value: ",q(o.value,t)]})]})}return null};return e.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No risk-return data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:n}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Risk vs Return analysis of portfolio assets"}),r.jsx(j,{sx:{height:400},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(sc,{margin:{top:20,right:20,bottom:20,left:20},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{type:"number",dataKey:"risk",name:"Risk",tickFormatter:s=>fe(s),label:{value:"Risk (Volatility)",position:"insideBottom",offset:-10}}),r.jsx(Yt,{type:"number",dataKey:"return",name:"Return",tickFormatter:s=>fe(s),label:{value:"Return",angle:-90,position:"insideLeft"}}),r.jsx(St,{content:r.jsx(a,{})}),r.jsx(oc,{data:e,fill:"#1976d2",children:e.map((s,i)=>r.jsx(on,{fill:s.color},`cell-${i}`))})]})})})]})},qf=({data:e,baseCurrency:t,title:n="Asset Performance Comparison"})=>{const a=({active:s,payload:i})=>{if(s&&i&&i.length){const o=i[0].payload;return r.jsxs(at,{sx:{p:2,boxShadow:3},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:o.assetType.toUpperCase()}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Performance: ",fe(o.performance)]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Value: ",q(o.value,t)]})]})}return null};return e.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:n}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Performance comparison across asset types"}),r.jsx(j,{sx:{height:400},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(Eo,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"assetType",tick:{fontSize:12},tickFormatter:s=>s.toUpperCase()}),r.jsx(Yt,{tickFormatter:s=>fe(s),tick:{fontSize:12}}),r.jsx(St,{content:r.jsx(a,{})}),r.jsx(Ln,{dataKey:"performance",radius:[4,4,0,0],children:e.map((s,i)=>r.jsx(on,{fill:s.color},`cell-${i}`))})]})})})]})},Qf=({data:e,title:t="Risk Metrics Dashboard"})=>{const n=(d,u)=>{switch(u){case"var":return d>.1?"high":d>.05?"medium":"low";case"volatility":return d>.3?"high":d>.15?"medium":"low";case"drawdown":return d>.2?"high":d>.1?"medium":"low";case"ratio":return d>1.5?"excellent":d>1?"good":d>.5?"fair":"poor";default:return"medium"}},a=d=>{switch(d){case"excellent":case"low":return"success";case"good":return"info";case"fair":case"medium":return"warning";case"poor":case"high":return"error";default:return"default"}},s=d=>{switch(d){case"excellent":case"good":case"low":return r.jsx(Sl,{color:"success"});case"fair":case"medium":return r.jsx(Fa,{color:"warning"});case"poor":case"high":return r.jsx(Ft,{color:"error"});default:return r.jsx(Dl,{})}},i=n(e.var95,"var"),o=n(e.volatility,"volatility"),l=n(e.maxDrawdown,"drawdown"),c=n(e.sharpeRatio,"ratio");return r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:t}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Comprehensive risk analysis and portfolio health metrics"}),r.jsxs(I,{container:!0,spacing:3,children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Value at Risk (95%)"}),s(i)]}),r.jsx(f,{variant:"h4",color:"primary",fontWeight:"bold",children:fe(e.var95)}),r.jsx($e,{label:i.toUpperCase(),color:a(i),size:"small",sx:{mt:1}})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Sharpe Ratio"}),s(c)]}),r.jsx(f,{variant:"h4",color:"primary",fontWeight:"bold",children:e.sharpeRatio.toFixed(2)}),r.jsx($e,{label:c.toUpperCase(),color:a(c),size:"small",sx:{mt:1}})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Volatility"}),s(o)]}),r.jsx(f,{variant:"h4",color:"primary",fontWeight:"bold",children:fe(e.volatility)}),r.jsx($e,{label:o.toUpperCase(),color:a(o),size:"small",sx:{mt:1}})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Max Drawdown"}),s(l)]}),r.jsx(f,{variant:"h4",color:"primary",fontWeight:"bold",children:fe(e.maxDrawdown)}),r.jsx($e,{label:l.toUpperCase(),color:a(l),size:"small",sx:{mt:1}})]})})}),r.jsx(I,{item:!0,xs:12,children:r.jsx(Ce,{children:r.jsxs(Te,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Additional Risk Metrics"}),r.jsxs(I,{container:!0,spacing:3,children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"VaR (99%)"}),r.jsx(f,{variant:"h6",children:fe(e.var99)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Beta"}),r.jsx(f,{variant:"h6",children:e.beta.toFixed(2)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Calmar Ratio"}),r.jsx(f,{variant:"h6",children:e.calmarRatio.toFixed(2)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sortino Ratio"}),r.jsx(f,{variant:"h6",children:e.sortinoRatio.toFixed(2)})]})})]})]})})})]})]})},Kf=({data:e,title:t="Diversification Heatmap"})=>{const n=Array.from(new Set(e.flatMap(l=>[l.asset1,l.asset2]))),s=(()=>{const l={};return n.forEach(c=>{l[c]={},n.forEach(d=>{c===d?l[c][d]=1:l[c][d]=0})}),e.forEach(c=>{l[c.asset1][c.asset2]=c.correlation,l[c.asset2][c.asset1]=c.correlation}),l})(),i=l=>{const c=Math.abs(l);return c>=.8?"#d32f2f":c>=.6?"#f57c00":c>=.4?"#fbc02d":c>=.2?"#689f38":"#388e3c"},o=l=>Math.abs(l)*100;return n.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No diversification data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:t}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Correlation matrix showing diversification between asset types"}),r.jsx(j,{sx:{overflowX:"auto"},children:r.jsxs(j,{sx:{minWidth:400},children:[r.jsxs(I,{container:!0,spacing:.5,sx:{mb:1},children:[r.jsx(I,{item:!0,xs:2,children:r.jsx(j,{sx:{height:40}})}),n.map(l=>r.jsx(I,{item:!0,xs:2,children:r.jsx(j,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})},l))]}),n.map(l=>r.jsxs(I,{container:!0,spacing:.5,sx:{mb:.5},children:[r.jsx(I,{item:!0,xs:2,children:r.jsx(j,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})}),n.map(c=>{const d=s[l][c],u=l===c;return r.jsx(I,{item:!0,xs:2,children:r.jsx(Zn,{title:`${l} vs ${c}: ${fe(d)}`,arrow:!0,children:r.jsx(j,{sx:{height:40,backgroundColor:u?"#e0e0e0":i(d),opacity:u?.3:o(d)/100,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease","&:hover":{opacity:1,transform:"scale(1.05)"},borderRadius:1,border:"1px solid rgba(0,0,0,0.1)"},children:!u&&r.jsx(f,{variant:"caption",sx:{color:"white",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:fe(d)})})})},`${l}-${c}`)})]},l))]})}),r.jsxs(j,{sx:{mt:3,display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Correlation Level:"}),[{label:"High (≥0.8)",color:"#d32f2f"},{label:"Medium-High (0.6-0.8)",color:"#f57c00"},{label:"Medium (0.4-0.6)",color:"#fbc02d"},{label:"Low (0.2-0.4)",color:"#689f38"},{label:"Very Low (<0.2)",color:"#388e3c"}].map((l,c)=>r.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(j,{sx:{width:16,height:16,backgroundColor:l.color,borderRadius:.5,border:"1px solid rgba(0,0,0,0.1)"}}),r.jsx(f,{variant:"caption",color:"text.secondary",children:l.label})]},c))]})]})},Gf=({data:e,title:t="Asset Allocation Timeline"})=>{const n=["#1976d2","#dc004e","#9c27b0","#ff9800","#4caf50","#f44336","#00bcd4","#8bc34a"],a=e.length>0?Object.keys(e[0]).filter(o=>o!=="date"):[],s=({active:o,payload:l,label:c})=>o&&l&&l.length?r.jsxs(at,{sx:{p:2,boxShadow:3},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:fa(c)}),l.map((d,u)=>r.jsxs(f,{variant:"body2",color:d.color,children:[d.dataKey,": ",fe(d.value)]},u))]}):null,i=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No timeline data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:t}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Historical allocation changes over time"}),r.jsx(j,{sx:{height:400},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(ea,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"date",tickFormatter:i,tick:{fontSize:12}}),r.jsx(Yt,{tickFormatter:o=>`${o}%`,tick:{fontSize:12},domain:[0,100]}),r.jsx(St,{content:r.jsx(s,{})}),r.jsx(ts,{}),a.map((o,l)=>r.jsx(Ar,{type:"monotone",dataKey:o,stroke:n[l%n.length],strokeWidth:2,dot:!1,activeDot:{r:4}},o))]})})})]})},Xf=({data:e,baseCurrency:t,title:n="Cash Flow Analysis"})=>{const a=({active:d,payload:u,label:m})=>d&&u&&u.length?r.jsxs(at,{sx:{p:2,boxShadow:3},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:fa(m)}),u.map((p,h)=>r.jsxs(f,{variant:"body2",color:p.color,children:[p.name,": ",q(p.value,t)]},h))]}):null,s=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}),i=e.reduce((d,u)=>d+u.inflow,0),o=e.reduce((d,u)=>d+u.outflow,0),l=i-o,c=e.length>0?e[e.length-1].cumulativeBalance:0;return e.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No cash flow data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:n}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Portfolio cash flow analysis and balance tracking"}),r.jsxs(I,{container:!0,spacing:2,sx:{mb:3},children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(wt,{color:"success"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Total Inflow"})]}),r.jsx(f,{variant:"h6",color:"success.main",fontWeight:"bold",children:q(i,t)})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(Ft,{color:"error"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Total Outflow"})]}),r.jsx(f,{variant:"h6",color:"error.main",fontWeight:"bold",children:q(o,t)})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(Ut,{color:l>=0?"success":"error"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Net Flow"})]}),r.jsx(f,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:q(l,t)})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(Ut,{color:"primary"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Current Balance"})]}),r.jsx(f,{variant:"h6",color:"primary.main",fontWeight:"bold",children:q(c,t)})]})})})]}),r.jsx(j,{sx:{height:400,mb:3},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(ic,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"date",tickFormatter:s,tick:{fontSize:12}}),r.jsx(Yt,{tickFormatter:d=>q(d,t,{compact:!0}),tick:{fontSize:12}}),r.jsx(St,{content:r.jsx(a,{})}),r.jsx(Ln,{dataKey:"inflow",fill:"#4caf50",name:"Inflow"}),r.jsx(Ln,{dataKey:"outflow",fill:"#f44336",name:"Outflow"}),r.jsx(Ar,{type:"monotone",dataKey:"netFlow",stroke:"#1976d2",strokeWidth:3,name:"Net Flow",dot:{fill:"#1976d2",strokeWidth:2,r:4}})]})})}),r.jsxs(j,{sx:{height:300},children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Cumulative Balance"}),r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(lc,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"date",tickFormatter:s,tick:{fontSize:12}}),r.jsx(Yt,{tickFormatter:d=>q(d,t,{compact:!0}),tick:{fontSize:12}}),r.jsx(St,{content:r.jsx(a,{})}),r.jsx(cc,{type:"monotone",dataKey:"cumulativeBalance",stroke:"#1976d2",fill:"#1976d2",fillOpacity:.3,strokeWidth:2})]})})]})]})},Zf=({data:e,title:t="Benchmark Comparison",benchmarkName:n="Market Index"})=>{const a=({active:u,payload:m,label:p})=>{var h,g;return u&&m&&m.length?r.jsxs(at,{sx:{p:2,boxShadow:3},children:[r.jsx(f,{variant:"subtitle2",gutterBottom:!0,children:fa(p)}),m.map((v,w)=>r.jsxs(f,{variant:"body2",color:v.color,children:[v.name,": ",fe(v.value)]},w)),r.jsxs(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Difference: ",fe(((g=(h=m[0])==null?void 0:h.payload)==null?void 0:g.difference)||0)]})]}):null},s=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),i=e.length>0?e[e.length-1].portfolio-e[0].portfolio:0,o=e.length>0?e[e.length-1].benchmark-e[0].benchmark:0,l=i-o,c=Math.sqrt(e.reduce((u,m)=>u+Math.pow(m.difference,2),0)/e.length),d=c>0?l/c:0;return e.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No benchmark data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:t}),r.jsxs(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Portfolio performance vs ",n]}),r.jsxs(I,{container:!0,spacing:2,sx:{mb:3},children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(wt,{color:"primary"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Portfolio Return"})]}),r.jsx(f,{variant:"h6",color:i>=0?"success.main":"error.main",fontWeight:"bold",children:fe(i)})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(wt,{color:"info"}),r.jsxs(f,{variant:"subtitle2",color:"text.secondary",children:[n," Return"]})]}),r.jsx(f,{variant:"h6",color:o>=0?"success.main":"error.main",fontWeight:"bold",children:fe(o)})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(kl,{color:l>=0?"success":"error"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Excess Return"})]}),r.jsx(f,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:fe(l)}),r.jsx($e,{label:l>=0?"OUTPERFORMING":"UNDERPERFORMING",color:l>=0?"success":"error",size:"small",sx:{mt:1}})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:1,mb:1,children:[r.jsx(Ft,{color:"warning"}),r.jsx(f,{variant:"subtitle2",color:"text.secondary",children:"Tracking Error"})]}),r.jsx(f,{variant:"h6",color:"warning.main",fontWeight:"bold",children:fe(c)})]})})})]}),r.jsx(j,{sx:{height:400,mb:3},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(ea,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"date",tickFormatter:s,tick:{fontSize:12}}),r.jsx(Yt,{tickFormatter:u=>fe(u),tick:{fontSize:12}}),r.jsx(St,{content:r.jsx(a,{})}),r.jsx(ts,{}),r.jsx(Ar,{type:"monotone",dataKey:"portfolio",stroke:"#1976d2",strokeWidth:3,name:"Portfolio",dot:!1,activeDot:{r:6}}),r.jsx(Ar,{type:"monotone",dataKey:"benchmark",stroke:"#dc004e",strokeWidth:2,name:n,dot:!1,activeDot:{r:4},strokeDasharray:"5 5"}),r.jsx(Ro,{y:0,stroke:"#666",strokeDasharray:"2 2"})]})})}),r.jsxs(I,{container:!0,spacing:2,children:[r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(Ce,{children:r.jsxs(Te,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Risk-Adjusted Metrics"}),r.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Information Ratio:"}),r.jsx(f,{variant:"body2",fontWeight:"bold",children:d.toFixed(2)})]}),r.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Beta:"}),r.jsx(f,{variant:"body2",fontWeight:"bold",children:(Math.random()*.8+.6).toFixed(2)})]}),r.jsxs(j,{sx:{display:"flex",justifyContent:"space-between"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Alpha:"}),r.jsx(f,{variant:"body2",fontWeight:"bold",children:fe(l*.7)})]})]})})}),r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(Ce,{children:r.jsxs(Te,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Performance Summary"}),r.jsx(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:l>=0?`Your portfolio has outperformed the ${n} by ${fe(l)} over the selected period.`:`Your portfolio has underperformed the ${n} by ${fe(Math.abs(l))} over the selected period.`}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["The tracking error of ",fe(c)," indicates the level of deviation from the benchmark."]})]})})})]})]})},Xs=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],Jf=({data:e,baseCurrency:t,title:n="Asset Detail Summary"})=>{const a=e.map((i,o)=>({symbol:i.symbol,name:i.name,assetType:i.assetType,totalValue:i.totalValue,percentage:i.percentage,unrealizedPl:i.unrealizedPl,unrealizedPlPercentage:i.unrealizedPlPercentage,color:Xs[o%Xs.length]})),s=({active:i,payload:o})=>{if(i&&o&&o.length){const l=o[0].payload;return r.jsxs(j,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[r.jsxs(f,{variant:"subtitle2",gutterBottom:!0,children:[l.symbol," - ",l.name]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Allocation: ",fe(l.percentage)]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Value: ",q(l.totalValue,t)]}),r.jsxs(f,{variant:"body2",color:l.unrealizedPl>=0?"success.main":"error.main",children:["P&L: ",q(l.unrealizedPl,t)," (",fe(l.unrealizedPlPercentage),")"]})]})}return null};return!e||e.length===0?r.jsx(j,{sx:{p:3,textAlign:"center"},children:r.jsx(f,{variant:"h6",color:"text.secondary",children:"No asset detail data available"})}):r.jsxs(j,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:n}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Individual asset holdings with values and performance"}),r.jsx(j,{sx:{height:300,mb:3},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(Eo,{data:a,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Ht,{strokeDasharray:"3 3"}),r.jsx(zt,{dataKey:"symbol",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),r.jsx(Yt,{tickFormatter:i=>fe(i),tick:{fontSize:12}}),r.jsx(St,{content:r.jsx(s,{})}),r.jsx(Ln,{dataKey:"percentage",radius:[4,4,0,0],children:a.map((i,o)=>r.jsx(on,{fill:i.color},`cell-${o}`))})]})})}),r.jsx(I,{container:!0,spacing:2,children:a.map((i,o)=>r.jsx(I,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsx(Ce,{sx:{height:"100%"},children:r.jsxs(Te,{children:[r.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[r.jsxs(j,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(j,{sx:{width:16,height:16,backgroundColor:i.color,borderRadius:"50%",mr:1}}),r.jsx(f,{variant:"subtitle2",fontWeight:"bold",children:i.symbol})]}),r.jsx($e,{label:i.assetType,size:"small",color:"primary",variant:"outlined"})]}),r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:i.name}),r.jsx(f,{variant:"h6",color:"primary",fontWeight:"bold",gutterBottom:!0,children:fe(i.percentage)}),r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:q(i.totalValue,t)}),r.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"P&L:"}),r.jsx(f,{variant:"body2",fontWeight:"bold",color:i.unrealizedPl>=0?"success.main":"error.main",children:q(i.unrealizedPl,t)})]}),r.jsx(f,{variant:"caption",color:i.unrealizedPl>=0?"success.main":"error.main",sx:{display:"block",textAlign:"right"},children:fe(i.unrealizedPlPercentage)})]})})},o))}),r.jsx(j,{sx:{mt:3,p:3,backgroundColor:"#f5f5f5",borderRadius:2},children:r.jsxs(I,{container:!0,spacing:3,children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{textAlign:"center"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Assets"}),r.jsx(f,{variant:"h5",color:"primary",fontWeight:"bold",children:e.length})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{textAlign:"center"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),r.jsx(f,{variant:"h5",color:"primary",fontWeight:"bold",children:q(e.reduce((i,o)=>i+o.totalValue,0),t)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{textAlign:"center"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),r.jsx(f,{variant:"h5",fontWeight:"bold",color:e.reduce((i,o)=>i+o.unrealizedPl,0)>=0?"success.main":"error.main",children:q(e.reduce((i,o)=>i+o.unrealizedPl,0),t)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{textAlign:"center"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset Types"}),r.jsx(f,{variant:"h5",color:"primary",fontWeight:"bold",children:new Set(e.map(i=>i.assetType)).size})]})})]})})]})};function ep(e){return typeof e=="string"}function tp(e,t,n){return e===void 0||ep(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function rp(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function us(e,t,n){return typeof e=="function"?e(t,n):e}function np(...e){const t=x.useRef(void 0),n=x.useCallback(a=>{const s=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(a);return typeof l=="function"?l:()=>{o(null)}}return i.current=a,()=>{i.current=null}});return()=>{s.forEach(i=>i==null?void 0:i())}},e);return x.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=n(a))},e)}function Zs(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function ap(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:s,className:i}=e;if(!t){const h=st(n==null?void 0:n.className,i,s==null?void 0:s.className,a==null?void 0:a.className),g={...n==null?void 0:n.style,...s==null?void 0:s.style,...a==null?void 0:a.style},v={...n,...s,...a};return h.length>0&&(v.className=h),Object.keys(g).length>0&&(v.style=g),{props:v,internalRef:void 0}}const o=rp({...s,...a}),l=Zs(a),c=Zs(s),d=t(o),u=st(d==null?void 0:d.className,n==null?void 0:n.className,i,s==null?void 0:s.className,a==null?void 0:a.className),m={...d==null?void 0:d.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...a==null?void 0:a.style},p={...d,...n,...c,...l};return u.length>0&&(p.className=u),Object.keys(m).length>0&&(p.style=m),{props:p,internalRef:d.ref}}function et(e){var m;const{elementType:t,externalSlotProps:n,ownerState:a,skipResolvingSlotProps:s=!1,...i}=e,o=s?{}:us(n,a),{props:l,internalRef:c}=ap({...i,externalSlotProps:o}),d=np(c,o==null?void 0:o.ref,(m=e.additionalProps)==null?void 0:m.ref);return tp(t,{...l,ref:d},a)}const Ur=(e,t)=>e.length!==t.length?!1:t.every(n=>e.includes(n)),sp=({openTo:e,defaultOpenTo:t,views:n,defaultViews:a})=>{const s=n??a;let i;if(e!=null)i=e;else if(s.includes(t))i=t;else if(s.length>0)i=s[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:s,openTo:i}},qn=(e,t,n)=>{let a=t;return a=e.setHours(a,e.getHours(n)),a=e.setMinutes(a,e.getMinutes(n)),a=e.setSeconds(a,e.getSeconds(n)),a},Zr=({date:e,disableFuture:t,disablePast:n,maxDate:a,minDate:s,isDateDisabled:i,utils:o,timezone:l})=>{const c=qn(o,o.dateWithTimezone(void 0,l),e);n&&o.isBefore(s,c)&&(s=c),t&&o.isAfter(a,c)&&(a=c);let d=e,u=e;for(o.isBefore(e,s)&&(d=s,u=null),o.isAfter(e,a)&&(u&&(u=a),d=null);d||u;){if(d&&o.isAfter(d,a)&&(d=null),u&&o.isBefore(u,s)&&(u=null),d){if(!i(d))return d;d=o.addDays(d,1)}if(u){if(!i(u))return u;u=o.addDays(u,-1)}}return null},op=(e,t)=>t==null||!e.isValid(t)?null:t,Tt=(e,t,n)=>t==null||!e.isValid(t)?n:t,ip=(e,t,n)=>!e.isValid(t)&&t!=null&&!e.isValid(n)&&n!=null?!0:e.isEqual(t,n),hs=(e,t)=>{const a=[e.startOfYear(t)];for(;a.length<12;){const s=a[a.length-1];a.push(e.addMonths(s,1))}return a},Oi=(e,t,n)=>n==="date"?e.startOfDay(e.dateWithTimezone(void 0,t)):e.dateWithTimezone(void 0,t),lp=["year","month","day"],Js=e=>lp.includes(e),ms=(e,{format:t,views:n},a)=>{if(t!=null)return t;const s=e.formats;return Ur(n,["year"])?s.year:Ur(n,["month"])?s.month:Ur(n,["day"])?s.dayOfMonth:Ur(n,["month","year"])?`${s.month} ${s.year}`:Ur(n,["day","month"])?`${s.month} ${s.dayOfMonth}`:a?/en/.test(e.getCurrentLocaleCode())?s.normalDateWithWeekday:s.normalDate:s.keyboardDate},cp=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map(a=>e.addDays(n,a))},dp=["hours","minutes","seconds"],up=e=>dp.includes(e),eo=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),hp=(e,t)=>(n,a)=>e?t.isAfter(n,a):eo(n,t)>eo(a,t),At={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},mp=e=>Math.max(...e.map(t=>{var n;return(n=At[t.type])!=null?n:1})),Hr=(e,t,n)=>{if(t===At.year)return e.startOfYear(n);if(t===At.month)return e.startOfMonth(n);if(t===At.day)return e.startOfDay(n);let a=n;return t<At.minutes&&(a=e.setMinutes(a,0)),t<At.seconds&&(a=e.setSeconds(a,0)),t<At.milliseconds&&(a=e.setMilliseconds(a,0)),a},fp=({props:e,utils:t,granularity:n,timezone:a,getTodayDate:s})=>{var i;let o=s?s():Hr(t,n,Oi(t,a));e.minDate!=null&&t.isAfterDay(e.minDate,o)&&(o=Hr(t,n,e.minDate)),e.maxDate!=null&&t.isBeforeDay(e.maxDate,o)&&(o=Hr(t,n,e.maxDate));const l=hp((i=e.disableIgnoringDatePartForTimeValidation)!=null?i:!1,t);return e.minTime!=null&&l(e.minTime,o)&&(o=Hr(t,n,e.disableIgnoringDatePartForTimeValidation?e.minTime:qn(t,o,e.minTime))),e.maxTime!=null&&l(o,e.maxTime)&&(o=Hr(t,n,e.disableIgnoringDatePartForTimeValidation?e.maxTime:qn(t,o,e.maxTime))),o},_i=(e,t)=>{const n=e.formatTokenMap[t];if(n==null)throw new Error([`MUI: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},pp=e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},pa=(e,t,n)=>{const a=[],s=e.dateWithTimezone(void 0,t),i=e.startOfWeek(s),o=e.endOfWeek(s);let l=i;for(;e.isBefore(l,o);)a.push(l),l=e.addDays(l,1);return a.map(c=>e.formatByString(c,n))},Fi=(e,t,n,a)=>{switch(n){case"month":return hs(e,e.dateWithTimezone(void 0,t)).map(s=>e.formatByString(s,a));case"weekDay":return pa(e,t,a);case"meridiem":{const s=e.dateWithTimezone(void 0,t);return[e.startOfDay(s),e.endOfDay(s)].map(i=>e.formatByString(i,a))}default:return[]}},Vi=(e,t,n)=>{let a=t;for(a=Number(a).toString();a.length<n;)a=`0${a}`;return a},Li=(e,t,n,a,s)=>{if(s.type==="day"&&s.contentType==="digit-with-letter"){const o=e.setDate(a.longestMonth,n);return e.formatByString(o,s.format)}const i=n.toString();return s.hasLeadingZerosInInput?Vi(e,i,s.maxLength):i},xp=(e,t,n,a,s,i,o)=>{const l=pp(a),c=a==="Home",d=a==="End",u=n.value===""||c||d,m=()=>{const h=s[n.type]({currentDate:i,format:n.format,contentType:n.contentType}),g=b=>Li(e,t,b,h,n),v=n.type==="minutes"&&o!=null&&o.minutesStep?o.minutesStep:1;let C=parseInt(n.value,10)+l*v;if(u){if(n.type==="year"&&!d&&!c)return e.formatByString(e.dateWithTimezone(void 0,t),n.format);l>0||c?C=h.minimum:C=h.maximum}return C%v!==0&&((l<0||c)&&(C+=v-(v+C)%v),(l>0||d)&&(C-=C%v)),C>h.maximum?g(h.minimum+(C-h.maximum-1)%(h.maximum-h.minimum+1)):C<h.minimum?g(h.maximum-(h.minimum-C-1)%(h.maximum-h.minimum+1)):g(C)},p=()=>{const h=Fi(e,t,n.type,n.format);if(h.length===0)return n.value;if(u)return l>0||c?h[0]:h[h.length-1];const v=(h.indexOf(n.value)+h.length+l)%h.length;return h[v]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?m():p()},fs=(e,t)=>{let n=e.value||e.placeholder;const a=t==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return t==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(n=Number(n).toString()),["input-rtl","input-ltr"].includes(t)&&e.contentType==="digit"&&!a&&n.length===1&&(n=`${n}‎`),t==="input-rtl"&&(n=`⁨${n}⁩`),n},Tr=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),$i=(e,t)=>{let n=0,a=t?1:0;const s=[];for(let i=0;i<e.length;i+=1){const o=e[i],l=fs(o,t?"input-rtl":"input-ltr"),c=`${o.startSeparator}${l}${o.endSeparator}`,d=Tr(c).length,u=c.length,m=Tr(l),p=a+l.indexOf(m[0])+o.startSeparator.length,h=p+m.length;s.push(V({},o,{start:n,end:n+d,startInInput:p,endInInput:h})),n+=d,a+=u}return s},gp=(e,t,n,a,s)=>{switch(a.type){case"year":return n.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,t),s).length,format:s});case"month":return n.fieldMonthPlaceholder({contentType:a.contentType,format:s});case"day":return n.fieldDayPlaceholder({format:s});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:a.contentType,format:s});case"hours":return n.fieldHoursPlaceholder({format:s});case"minutes":return n.fieldMinutesPlaceholder({format:s});case"seconds":return n.fieldSecondsPlaceholder({format:s});case"meridiem":return n.fieldMeridiemPlaceholder({format:s});default:return s}},to=(e,t,n,a)=>e.formatByString(e.parse(t,n),a),Bi=(e,t,n)=>e.formatByString(e.dateWithTimezone(void 0,t),n).length===4,Wi=(e,t,n,a,s)=>{if(n!=="digit")return!1;const i=e.dateWithTimezone(void 0,t);switch(a){case"year":return Bi(e,t,s)?e.formatByString(e.setYear(i,1),s)==="0001":e.formatByString(e.setYear(i,2001),s)==="01";case"month":return e.formatByString(e.startOfYear(i),s).length>1;case"day":return e.formatByString(e.startOfMonth(i),s).length>1;case"weekDay":return e.formatByString(e.startOfWeek(i),s).length>1;case"hours":return e.formatByString(e.setHours(i,1),s).length>1;case"minutes":return e.formatByString(e.setMinutes(i,1),s).length>1;case"seconds":return e.formatByString(e.setSeconds(i,1),s).length>1;default:throw new Error("Invalid section type")}},yp=(e,t)=>{const n=[],{start:a,end:s}=e.escapedCharacters,i=new RegExp(`(\\${a}[^\\${s}]*\\${s})+`,"g");let o=null;for(;o=i.exec(t);)n.push({start:o.index,end:i.lastIndex-1});return n},ro=(e,t,n,a,s,i,o,l)=>{let c="";const d=[],u=e.date(),m=T=>{if(T==="")return null;const y=_i(e,T),S=Wi(e,t,y.contentType,y.type,T),R=o?S:y.contentType==="digit",k=s!=null&&e.isValid(s);let E=k?e.formatByString(s,T):"",M=null;if(R)if(S)M=E===""?e.formatByString(u,T).length:E.length;else{if(y.maxLength==null)throw new Error(`MUI: The token ${T} should have a 'maxDigitNumber' property on it's adapter`);M=y.maxLength,k&&(E=Vi(e,E,M))}return d.push(V({},y,{format:T,maxLength:M,value:E,placeholder:gp(e,t,n,y,T),hasLeadingZeros:S,hasLeadingZerosInFormat:S,hasLeadingZerosInInput:R,startSeparator:d.length===0?c:"",endSeparator:"",modified:!1})),null};let p=10,h=a,g=e.expandFormat(a);for(;g!==h;)if(h=g,g=e.expandFormat(h),p-=1,p<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const v=g,w=yp(e,v),C=new RegExp(`^(${Object.keys(e.formatTokenMap).sort((T,y)=>y.length-T.length).join("|")})`,"g");let b="";for(let T=0;T<v.length;T+=1){const y=w.find(M=>M.start<=T&&M.end>=T),S=v[T],R=y!=null,k=`${b}${v.slice(T)}`,E=C.test(k);!R&&S.match(/([A-Za-z]+)/)&&E?(b=k.slice(0,C.lastIndex),T+=C.lastIndex-1):R&&(y==null?void 0:y.start)===T||(y==null?void 0:y.end)===T||(m(b),b="",d.length===0?c+=S:d[d.length-1].endSeparator+=S)}return m(b),d.map(T=>{const y=S=>{let R=S;return l&&R!==null&&R.includes(" ")&&(R=`⁩${R}⁦`),i==="spacious"&&["/",".","-"].includes(R)&&(R=` ${R} `),R};return T.startSeparator=y(T.startSeparator),T.endSeparator=y(T.endSeparator),T})},vp=(e,t)=>{const n=t.some(l=>l.type==="day"),a=[],s=[];for(let l=0;l<t.length;l+=1){const c=t[l];n&&c.type==="weekDay"||(a.push(c.format),s.push(fs(c,"non-input")))}const i=a.join(" "),o=s.join(" ");return e.parse(o,i)},bp=(e,t)=>{const a=e.map(s=>{const i=fs(s,t?"input-rtl":"input-ltr");return`${s.startSeparator}${i}${s.endSeparator}`}).join("");return t?`⁦${a}⁩`:a},jp=(e,t)=>{const n=e.dateWithTimezone(void 0,t),a=e.endOfYear(n),s=e.endOfDay(n),{maxDaysInMonth:i,longestMonth:o}=hs(e,n).reduce((l,c)=>{const d=e.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:Bi(e,t,l)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(a)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&e.isValid(l)?e.getDaysInMonth(l):i,longestMonth:o}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=pa(e,t,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=e.getHours(s);return e.formatByString(e.endOfDay(n),l)!==c.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(n),l))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:e.getMinutes(s)}),seconds:()=>({minimum:0,maximum:e.getSeconds(s)}),meridiem:()=>({minimum:0,maximum:0})}},wp=(e,t,n,a,s)=>{switch(n.type){case"year":return e.setYear(s,e.getYear(a));case"month":return e.setMonth(s,e.getMonth(a));case"weekDay":{const i=pa(e,t,n.format),o=e.formatByString(a,n.format),l=i.indexOf(o),d=i.indexOf(n.value)-l;return e.addDays(a,d)}case"day":return e.setDate(s,e.getDate(a));case"meridiem":{const i=e.getHours(a)<12,o=e.getHours(s);return i&&o>=12?e.addHours(s,-12):!i&&o<12?e.addHours(s,12):s}case"hours":return e.setHours(s,e.getHours(a));case"minutes":return e.setMinutes(s,e.getMinutes(a));case"seconds":return e.setSeconds(s,e.getSeconds(a));default:return s}},no={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},ao=(e,t,n,a,s,i)=>[...a].sort((o,l)=>no[o.type]-no[l.type]).reduce((o,l)=>!i||l.modified?wp(e,t,l,n,o):o,s),Cp=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,Tp=(e,t)=>{const n={};if(!t)return e.forEach((c,d)=>{const u=d===0?null:d-1,m=d===e.length-1?null:d+1;n[d]={leftIndex:u,rightIndex:m}}),{neighbors:n,startIndex:0,endIndex:e.length-1};const a={},s={};let i=0,o=0,l=e.length-1;for(;l>=0;){o=e.findIndex((c,d)=>{var u;return d>=i&&((u=c.endSeparator)==null?void 0:u.includes(" "))&&c.endSeparator!==" / "}),o===-1&&(o=e.length-1);for(let c=o;c>=i;c-=1)s[c]=l,a[l]=c,l-=1;i=o+1}return e.forEach((c,d)=>{const u=s[d],m=u===0?null:a[u-1],p=u===e.length-1?null:a[u+1];n[d]={leftIndex:m,rightIndex:p}}),{neighbors:n,startIndex:a[0],endIndex:a[e.length-1]}},Pp=["value","referenceDate"],Qt={emptyValue:null,getTodayValue:Oi,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,a=Oe(e,Pp);return t!=null&&a.utils.isValid(t)?t:n??fp(a)},cleanValue:op,areValuesEqual:ip,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>t==null||!e.isValid(t)?null:e.getTimezone(t),setTimezone:(e,t,n)=>n==null?null:e.setTimezone(n,t)},Dp={updateReferenceValue:(e,t,n)=>t==null||!e.isValid(t)?n:t,getSectionsFromValue:(e,t,n,a,s)=>!e.isValid(t)&&!!n?n:$i(s(t),a),getValueStrFromSections:bp,getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:n=>n,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:n==null||!e.isValid(n)?t.referenceValue:n})}),parseValueStr:(e,t,n)=>n(e.trim(),t)},Sp=["localeText"],Ga=x.createContext(null),Pr=function(t){var n;const{localeText:a}=t,s=Oe(t,Sp),{utils:i,localeText:o}=(n=x.useContext(Ga))!=null?n:{utils:void 0,localeText:void 0},l=rt({props:s,name:"MuiLocalizationProvider"}),{children:c,dateAdapter:d,dateFormats:u,dateLibInstance:m,adapterLocale:p,localeText:h}=l,g=x.useMemo(()=>V({},h,o,a),[h,o,a]),v=x.useMemo(()=>{if(!d)return i||null;const b=new d({locale:p,formats:u,instance:m});if(!b.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return b},[d,p,u,m,i]),w=x.useMemo(()=>v?{minDate:v.date("1900-01-01T00:00:00.000"),maxDate:v.date("2099-12-31T00:00:00.000")}:null,[v]),C=x.useMemo(()=>({utils:v,defaultDates:w,localeText:g}),[w,v,g]);return r.jsx(Ga.Provider,{value:C,children:c})},kp=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:V({},e)}}}}),Ui={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,n)=>`Select ${e}. ${t===null?"No time selected":`Selected time is ${n.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose date, selected date is ${t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose time, selected time is ${t.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},Np=Ui;kp(Ui);const br=()=>{const e=x.useContext(Ga);if(e===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=x.useMemo(()=>V({},Np,e.localeText),[e.localeText]);return x.useMemo(()=>V({},e,{localeText:t}),[e,t])},We=()=>br().utils,fn=()=>br().defaultDates,or=()=>br().localeText,xa=e=>{const t=We(),n=x.useRef();return n.current===void 0&&(n.current=t.dateWithTimezone(void 0,e)),n.current};function Mp(e){return ut("MuiPickersToolbar",e)}ht("MuiPickersToolbar",["root","content"]);const Ap=e=>{const{classes:t,isLandscape:n}=e;return ct({root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]},Mp,t)},Rp=De("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>V({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3)},t.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),Ep=De("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})(({ownerState:e})=>{var t;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:e.isLandscape?"flex-start":"space-between",flexDirection:e.isLandscape?(t=e.landscapeDirection)!=null?t:"column":"row",flex:1,alignItems:e.isLandscape?"flex-start":"center"}}),Ip=x.forwardRef(function(t,n){const a=rt({props:t,name:"MuiPickersToolbar"}),{children:s,className:i,toolbarTitle:o,hidden:l,titleId:c}=a,d=a,u=Ap(d);return l?null:r.jsxs(Rp,{ref:n,className:st(u.root,i),ownerState:d,children:[r.jsx(f,{color:"text.secondary",variant:"overline",id:c,children:o}),r.jsx(Ep,{className:u.content,ownerState:d,children:s})]})});function Op(e){return ut("MuiDatePickerToolbar",e)}ht("MuiDatePickerToolbar",["root","title"]);const _p=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Fp=e=>{const{classes:t}=e;return ct({root:["root"],title:["title"]},Op,t)},Vp=De(Ip,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Lp=De(f,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,t)=>t.title})(({ownerState:e})=>V({},e.isLandscape&&{margin:"auto 16px auto auto"})),$p=x.forwardRef(function(t,n){const a=rt({props:t,name:"MuiDatePickerToolbar"}),{value:s,isLandscape:i,toolbarFormat:o,toolbarPlaceholder:l="––",views:c,className:d}=a,u=Oe(a,_p),m=We(),p=or(),h=Fp(a),g=x.useMemo(()=>{if(!s)return l;const w=ms(m,{format:o,views:c},!0);return m.formatByString(s,w)},[s,o,l,m,c]),v=a;return r.jsx(Vp,V({ref:n,toolbarTitle:p.datePickerToolbarTitle,isLandscape:i,className:st(h.root,d)},u,{children:r.jsx(Lp,{variant:"h4",align:i?"left":"center",ownerState:v,className:h.title,children:g})}))}),Hi=e=>{if(e!==void 0)return Object.keys(e).reduce((t,n)=>V({},t,{[`${n.slice(0,1).toLowerCase()}${n.slice(1)}`]:e[n]}),{})};function zi(e,t){var n,a,s,i;const o=We(),l=fn(),c=rt({props:e,name:t}),d=x.useMemo(()=>{var m;return((m=c.localeText)==null?void 0:m.toolbarTitle)==null?c.localeText:V({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})},[c.localeText]),u=(n=c.slots)!=null?n:Hi(c.components);return V({},c,{localeText:d},sp({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(a=c.disableFuture)!=null?a:!1,disablePast:(s=c.disablePast)!=null?s:!1,minDate:Tt(o,c.minDate,l.minDate),maxDate:Tt(o,c.maxDate,l.maxDate),slots:V({toolbar:$p},u),slotProps:(i=c.slotProps)!=null?i:c.componentsProps})}const Bp=ar(r.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Wp=ar(r.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),Up=ar(r.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),Hp=ar(r.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");ar(r.jsxs(x.Fragment,{children:[r.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),r.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");ar(r.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");ar(r.jsxs(x.Fragment,{children:[r.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),r.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const zp=ar(r.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function Yp(e){return ut("MuiPickersArrowSwitcher",e)}ht("MuiPickersArrowSwitcher",["root","spacer","button"]);const qp=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],Qp=["ownerState"],Kp=["ownerState"],Gp=De("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),Xp=De("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})(({theme:e})=>({width:e.spacing(3)})),so=De(Kt,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>V({},e.hidden&&{visibility:"hidden"})),Zp=e=>{const{classes:t}=e;return ct({root:["root"],spacer:["spacer"],button:["button"]},Yp,t)},Jp=x.forwardRef(function(t,n){var a,s,i,o;const c=vr().direction==="rtl",d=rt({props:t,name:"MuiPickersArrowSwitcher"}),{children:u,className:m,slots:p,slotProps:h,isNextDisabled:g,isNextHidden:v,onGoToNext:w,nextLabel:C,isPreviousDisabled:b,isPreviousHidden:T,onGoToPrevious:y,previousLabel:S}=d,R=Oe(d,qp),k=d,E=Zp(k),M={isDisabled:g,isHidden:v,goTo:w,label:C},N={isDisabled:b,isHidden:T,goTo:y,label:S},P=(a=p==null?void 0:p.previousIconButton)!=null?a:so,D=et({elementType:P,externalSlotProps:h==null?void 0:h.previousIconButton,additionalProps:{size:"medium",title:N.label,"aria-label":N.label,disabled:N.isDisabled,edge:"end",onClick:N.goTo},ownerState:V({},k,{hidden:N.isHidden}),className:E.button}),L=(s=p==null?void 0:p.nextIconButton)!=null?s:so,_=et({elementType:L,externalSlotProps:h==null?void 0:h.nextIconButton,additionalProps:{size:"medium",title:M.label,"aria-label":M.label,disabled:M.isDisabled,edge:"start",onClick:M.goTo},ownerState:V({},k,{hidden:M.isHidden}),className:E.button}),A=(i=p==null?void 0:p.leftArrowIcon)!=null?i:Wp,G=et({elementType:A,externalSlotProps:h==null?void 0:h.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),U=Oe(G,Qp),B=(o=p==null?void 0:p.rightArrowIcon)!=null?o:Up,W=et({elementType:B,externalSlotProps:h==null?void 0:h.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),K=Oe(W,Kp);return r.jsxs(Gp,V({ref:n,className:st(E.root,m),ownerState:k},R,{children:[r.jsx(P,V({},D,{children:c?r.jsx(B,V({},K)):r.jsx(A,V({},U))})),u?r.jsx(f,{variant:"subtitle1",component:"span",children:u}):r.jsx(Xp,{className:E.spacer,ownerState:k}),r.jsx(L,V({},_,{children:c?r.jsx(A,V({},U)):r.jsx(B,V({},K))}))]}))}),en=36,ga=2,ya=320,ex=280,ps=334,tx=De(tn)({[`& .${js.container}`]:{outline:0},[`& .${js.paper}`]:{outline:0,minWidth:ya}}),rx=De(rn)({"&:first-of-type":{padding:0}});function nx(e){var t,n;const{children:a,onDismiss:s,open:i,slots:o,slotProps:l}=e,c=(t=o==null?void 0:o.dialog)!=null?t:tx,d=(n=o==null?void 0:o.mobileTransition)!=null?n:Jn;return r.jsx(c,V({open:i,onClose:s},l==null?void 0:l.dialog,{TransitionComponent:d,TransitionProps:l==null?void 0:l.mobileTransition,PaperComponent:o==null?void 0:o.mobilePaper,PaperProps:l==null?void 0:l.mobilePaper,children:r.jsx(rx,{children:a})}))}function ax(e){return ut("MuiPickersPopper",e)}ht("MuiPickersPopper",["root","paper"]);function sx(e,t){return Array.isArray(t)?t.every(n=>e.indexOf(n)!==-1):e.indexOf(t)!==-1}const ox=(e,t)=>n=>{(n.key==="Enter"||n.key===" ")&&(e(n),n.preventDefault(),n.stopPropagation())},Qn=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?Qn(t.shadowRoot):t:null},ix="@media (pointer: fine)",lx="@media (prefers-reduced-motion: reduce)",Sr=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),oo=Sr&&Sr[1]?parseInt(Sr[1],10):null,io=Sr&&Sr[2]?parseInt(Sr[2],10):null,cx=oo&&oo<10||io&&io<13||!1,Yi=()=>Ja(lx,{defaultMatches:!1})||cx,dx=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],ux=e=>{const{classes:t}=e;return ct({root:["root"],paper:["paper"]},ax,t)},hx=De(Al,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({zIndex:e.zIndex.modal})),mx=De(at,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({ownerState:e})=>V({outline:0,transformOrigin:"top center"},e.placement.includes("top")&&{transformOrigin:"bottom center"}));function fx(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function px(e,t){const n=x.useRef(!1),a=x.useRef(!1),s=x.useRef(null),i=x.useRef(!1);x.useEffect(()=>{if(!e)return;function c(){i.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),i.current=!1}},[e]);const o=he(c=>{if(!i.current)return;const d=a.current;a.current=!1;const u=Pa(s.current);if(!s.current||"clientX"in c&&fx(c,u))return;if(n.current){n.current=!1;return}let m;c.composedPath?m=c.composedPath().indexOf(s.current)>-1:m=!u.documentElement.contains(c.target)||s.current.contains(c.target),!m&&!d&&t(c)}),l=()=>{a.current=!0};return x.useEffect(()=>{if(e){const c=Pa(s.current),d=()=>{n.current=!0};return c.addEventListener("touchstart",o),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",o),c.removeEventListener("touchmove",d)}}},[e,o]),x.useEffect(()=>{if(e){const c=Pa(s.current);return c.addEventListener("click",o),()=>{c.removeEventListener("click",o),a.current=!1}}},[e,o]),[s,l,l]}const xx=x.forwardRef((e,t)=>{const{PaperComponent:n,popperPlacement:a,ownerState:s,children:i,paperSlotProps:o,paperClasses:l,onPaperClick:c,onPaperTouchStart:d}=e,u=Oe(e,dx),m=V({},s,{placement:a}),p=et({elementType:n,externalSlotProps:o,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:l,ownerState:m});return r.jsx(n,V({},u,p,{onClick:h=>{var g;c(h),(g=p.onClick)==null||g.call(p,h)},onTouchStart:h=>{var g;d(h),(g=p.onTouchStart)==null||g.call(p,h)},ownerState:m,children:i}))});function gx(e){var t,n,a,s;const i=rt({props:e,name:"MuiPickersPopper"}),{anchorEl:o,children:l,containerRef:c=null,shouldRestoreFocus:d,onBlur:u,onDismiss:m,open:p,role:h,placement:g,slots:v,slotProps:w,reduceAnimations:C}=i;x.useEffect(()=>{function W(K){p&&(K.key==="Escape"||K.key==="Esc")&&m()}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[m,p]);const b=x.useRef(null);x.useEffect(()=>{h==="tooltip"||d&&!d()||(p?b.current=Qn(document):b.current&&b.current instanceof HTMLElement&&setTimeout(()=>{b.current instanceof HTMLElement&&b.current.focus()}))},[p,h,d]);const[T,y,S]=px(p,u??m),R=x.useRef(null),k=xr(R,c),E=xr(k,T),M=i,N=ux(M),P=Yi(),D=C??P,L=W=>{W.key==="Escape"&&(W.stopPropagation(),m())},_=((t=v==null?void 0:v.desktopTransition)!=null?t:D)?Jn:Nl,A=(n=v==null?void 0:v.desktopTrapFocus)!=null?n:Ml,G=(a=v==null?void 0:v.desktopPaper)!=null?a:mx,U=(s=v==null?void 0:v.popper)!=null?s:hx,B=et({elementType:U,externalSlotProps:w==null?void 0:w.popper,additionalProps:{transition:!0,role:h,open:p,anchorEl:o,placement:g,onKeyDown:L},className:N.root,ownerState:i});return r.jsx(U,V({},B,{children:({TransitionProps:W,placement:K})=>r.jsx(A,V({open:p,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:h==="tooltip",isEnabled:()=>!0},w==null?void 0:w.desktopTrapFocus,{children:r.jsx(_,V({},W,w==null?void 0:w.desktopTransition,{children:r.jsx(xx,{PaperComponent:G,ownerState:M,popperPlacement:K,ref:E,onPaperClick:y,onPaperTouchStart:S,paperClasses:N.paper,paperSlotProps:w==null?void 0:w.desktopPaper,children:l})}))}))}))}const xs=({timezone:e,value:t,defaultValue:n,onChange:a,valueManager:s})=>{var i,o;const l=We(),c=x.useRef(n),d=(i=t??c.current)!=null?i:s.emptyValue,u=x.useMemo(()=>s.getTimezone(l,d),[l,s,d]),m=he(v=>u==null?v:s.setTimezone(l,u,v)),p=(o=e??u)!=null?o:"default",h=x.useMemo(()=>s.setTimezone(l,p,d),[s,l,p,d]),g=he((v,...w)=>{const C=m(v);a==null||a(C,...w)});return{value:h,handleValueChange:g,timezone:p}},gs=({name:e,timezone:t,value:n,defaultValue:a,onChange:s,valueManager:i})=>{const[o,l]=nr({name:e,state:"value",controlled:n,default:a??i.emptyValue}),c=he((d,...u)=>{l(d),s==null||s(d,...u)});return xs({timezone:t,value:o,defaultValue:void 0,onChange:c,valueManager:i})};function qi(e,t,n,a){const{value:s,onError:i}=e,o=br(),l=x.useRef(a),c=t({adapter:o,value:s,props:e});return x.useEffect(()=>{i&&!n(c,l.current)&&i(c,s),l.current=c},[n,i,l,c,s]),c}const yx=e=>{const t=We(),n=or(),a=br(),i=vr().direction==="rtl",{valueManager:o,fieldValueManager:l,validator:c,internalProps:d,internalProps:{value:u,defaultValue:m,referenceDate:p,onChange:h,format:g,formatDensity:v="dense",selectedSections:w,onSelectedSectionsChange:C,shouldRespectLeadingZeros:b=!1,timezone:T}}=e,{timezone:y,value:S,handleValueChange:R}=xs({timezone:T,value:u,defaultValue:m,onChange:h,valueManager:o}),k=x.useMemo(()=>jp(t,y),[t,y]),E=x.useCallback((te,F=null)=>l.getSectionsFromValue(t,te,F,i,le=>ro(t,y,n,g,le,v,b,i)),[l,g,n,i,b,t,v,y]),M=x.useMemo(()=>l.getValueStrFromSections(E(o.emptyValue),i),[l,E,o.emptyValue,i]),[N,P]=x.useState(()=>{const te=E(S),F={sections:te,value:S,referenceValue:o.emptyValue,tempValueStrAndroid:null},le=mp(te),me=o.getInitialReferenceValue({referenceDate:p,value:S,utils:t,props:d,granularity:le,timezone:y});return V({},F,{referenceValue:me})}),[D,L]=nr({controlled:w,default:null,name:"useField",state:"selectedSectionIndexes"}),_=te=>{L(te),C==null||C(te),P(F=>V({},F,{selectedSectionQuery:null}))},A=x.useMemo(()=>{if(D==null)return null;if(D==="all")return{startIndex:0,endIndex:N.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof D=="number")return{startIndex:D,endIndex:D};if(typeof D=="string"){const te=N.sections.findIndex(F=>F.type===D);return{startIndex:te,endIndex:te}}return D},[D,N.sections]),G=({value:te,referenceValue:F,sections:le})=>{if(P(Q=>V({},Q,{sections:le,value:te,referenceValue:F,tempValueStrAndroid:null})),o.areValuesEqual(t,N.value,te))return;const me={validationError:c({adapter:a,value:te,props:V({},d,{value:te,timezone:y})})};R(te,me)},U=(te,F)=>{const le=[...N.sections];return le[te]=V({},le[te],{value:F,modified:!0}),$i(le,i)},B=()=>{G({value:o.emptyValue,referenceValue:N.referenceValue,sections:E(o.emptyValue)})},W=()=>{if(A==null)return;const te=N.sections[A.startIndex],F=l.getActiveDateManager(t,N,te),me=F.getSections(N.sections).filter(ye=>ye.value!=="").length===(te.value===""?0:1),Q=U(A.startIndex,""),oe=me?null:t.date(new Date("")),ie=F.getNewValuesFromNewActiveDate(oe);(oe!=null&&!t.isValid(oe))!=(F.date!=null&&!t.isValid(F.date))?G(V({},ie,{sections:Q})):P(ye=>V({},ye,ie,{sections:Q,tempValueStrAndroid:null}))},K=te=>{const F=(Q,oe)=>{const ie=t.parse(Q,g);if(ie==null||!t.isValid(ie))return null;const ye=ro(t,y,n,g,ie,v,b,i);return ao(t,y,ie,ye,oe,!1)},le=l.parseValueStr(te,N.referenceValue,F),me=l.updateReferenceValue(t,le,N.referenceValue);G({value:le,referenceValue:me,sections:E(le,N.sections)})},be=({activeSection:te,newSectionValue:F,shouldGoToNextSection:le})=>{le&&A&&A.startIndex<N.sections.length-1?_(A.startIndex+1):A&&A.startIndex!==A.endIndex&&_(A.startIndex);const me=l.getActiveDateManager(t,N,te),Q=U(A.startIndex,F),oe=me.getSections(Q),ie=vp(t,oe);let ye,ce;if(ie!=null&&t.isValid(ie)){const ue=ao(t,y,ie,oe,me.referenceDate,!0);ye=me.getNewValuesFromNewActiveDate(ue),ce=!0}else ye=me.getNewValuesFromNewActiveDate(ie),ce=(ie!=null&&!t.isValid(ie))!=(me.date!=null&&!t.isValid(me.date));return ce?G(V({},ye,{sections:Q})):P(ue=>V({},ue,ye,{sections:Q,tempValueStrAndroid:null}))},ge=te=>P(F=>V({},F,{tempValueStrAndroid:te}));return x.useEffect(()=>{const te=E(N.value);P(F=>V({},F,{sections:te}))},[g,t.locale]),x.useEffect(()=>{let te=!1;o.areValuesEqual(t,N.value,S)?te=o.getTimezone(t,N.value)!==o.getTimezone(t,S):te=!0,te&&P(F=>V({},F,{value:S,referenceValue:l.updateReferenceValue(t,S,F.referenceValue),sections:E(S)}))},[S]),{state:N,selectedSectionIndexes:A,setSelectedSections:_,clearValue:B,clearActiveSection:W,updateSectionValue:be,updateValueFromValueStr:K,setTempAndroidValueStr:ge,sectionsValueBoundaries:k,placeholder:M,timezone:y}},vx=5e3,Cr=e=>e.saveQuery!=null,bx=({sections:e,updateSectionValue:t,sectionsValueBoundaries:n,setTempAndroidValueStr:a,timezone:s})=>{const i=We(),[o,l]=x.useState(null),c=he(()=>l(null));x.useEffect(()=>{var h;o!=null&&((h=e[o.sectionIndex])==null?void 0:h.type)!==o.sectionType&&c()},[e,o,c]),x.useEffect(()=>{if(o!=null){const h=setTimeout(()=>c(),vx);return()=>{window.clearTimeout(h)}}return()=>{}},[o,c]);const d=({keyPressed:h,sectionIndex:g},v,w)=>{const C=h.toLowerCase(),b=e[g];if(o!=null&&(!w||w(o.value))&&o.sectionIndex===g){const y=`${o.value}${C}`,S=v(y,b);if(!Cr(S))return l({sectionIndex:g,value:y,sectionType:b.type}),S}const T=v(C,b);return Cr(T)&&!T.saveQuery?(c(),null):(l({sectionIndex:g,value:C,sectionType:b.type}),Cr(T)?null:T)},u=h=>{const g=(C,b,T)=>{const y=b.filter(S=>S.toLowerCase().startsWith(T));return y.length===0?{saveQuery:!1}:{sectionValue:y[0],shouldGoToNextSection:y.length===1}},v=(C,b,T,y)=>{const S=R=>Fi(i,s,b.type,R);if(b.contentType==="letter")return g(b.format,S(b.format),C);if(T&&y!=null&&_i(i,T).contentType==="letter"){const R=S(T),k=g(T,R,C);return Cr(k)?{saveQuery:!1}:V({},k,{sectionValue:y(k.sectionValue,R)})}return{saveQuery:!1}};return d(h,(C,b)=>{switch(b.type){case"month":{const T=y=>to(i,y,i.formats.month,b.format);return v(C,b,i.formats.month,T)}case"weekDay":{const T=(y,S)=>S.indexOf(y).toString();return v(C,b,i.formats.weekday,T)}case"meridiem":return v(C,b);default:return{saveQuery:!1}}})},m=h=>{const g=(w,C)=>{const b=+`${w}`,T=n[C.type]({currentDate:null,format:C.format,contentType:C.contentType});if(b>T.maximum)return{saveQuery:!1};if(b<T.minimum)return{saveQuery:!0};const y=+`${w}0`>T.maximum||w.length===T.maximum.toString().length;return{sectionValue:Li(i,s,b,T,C),shouldGoToNextSection:y}};return d(h,(w,C)=>{if(C.contentType==="digit"||C.contentType==="digit-with-letter")return g(w,C);if(C.type==="month"){Wi(i,s,"digit","month","MM");const b=g(w,{type:C.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Cr(b))return b;const T=to(i,b.sectionValue,"MM",C.format);return V({},b,{sectionValue:T})}if(C.type==="weekDay"){const b=g(w,C);if(Cr(b))return b;const T=pa(i,s,C.format)[Number(b.sectionValue)-1];return V({},b,{sectionValue:T})}return{saveQuery:!1}},w=>!Number.isNaN(Number(w)))};return{applyCharacterEditing:he(h=>{const g=e[h.sectionIndex],w=h.keyPressed!==" "&&!Number.isNaN(Number(h.keyPressed))?m(h):u(h);w==null?a(null):t({activeSection:g,newSectionValue:w.sectionValue,shouldGoToNextSection:w.shouldGoToNextSection})}),resetCharacterQuery:c}},jx=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],wx=e=>{const t=We(),{state:n,selectedSectionIndexes:a,setSelectedSections:s,clearValue:i,clearActiveSection:o,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:d,sectionsValueBoundaries:u,placeholder:m,timezone:p}=yx(e),{inputRef:h,internalProps:g,internalProps:{readOnly:v=!1,unstableFieldRef:w,minutesStep:C},forwardedProps:{onClick:b,onKeyDown:T,onFocus:y,onBlur:S,onMouseUp:R,onPaste:k,error:E,clearable:M,onClear:N,disabled:P},fieldValueManager:D,valueManager:L,validator:_}=e,A=Oe(e.forwardedProps,jx),{applyCharacterEditing:G,resetCharacterQuery:U}=bx({sections:n.sections,updateSectionValue:l,sectionsValueBoundaries:u,setTempAndroidValueStr:d,timezone:p}),B=x.useRef(null),W=xr(h,B),K=x.useRef(void 0),ge=vr().direction==="rtl",te=x.useMemo(()=>Tp(n.sections,ge),[n.sections,ge]),F=()=>{var H;if(v){s(null);return}const Y=(H=B.current.selectionStart)!=null?H:0;let we;Y<=n.sections[0].startInInput||Y>=n.sections[n.sections.length-1].endInInput?we=1:we=n.sections.findIndex(z=>z.startInInput-z.startSeparator.length>Y);const _e=we===-1?n.sections.length-1:we-1;s(_e)},le=he((H,...Y)=>{H.isDefaultPrevented()||(b==null||b(H,...Y),F())}),me=he(H=>{R==null||R(H),H.preventDefault()}),Q=he((...H)=>{y==null||y(...H);const Y=B.current;window.clearTimeout(K.current),K.current=setTimeout(()=>{!Y||Y!==B.current||a!=null||v||(Y.value.length&&Number(Y.selectionEnd)-Number(Y.selectionStart)===Y.value.length?s("all"):F())})}),oe=he((...H)=>{S==null||S(...H),s(null)}),ie=he(H=>{if(k==null||k(H),v){H.preventDefault();return}const Y=H.clipboardData.getData("text");if(a&&a.startIndex===a.endIndex){const we=n.sections[a.startIndex],_e=/^[a-zA-Z]+$/.test(Y),z=/^[0-9]+$/.test(Y),ee=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Y);if(we.contentType==="letter"&&_e||we.contentType==="digit"&&z||we.contentType==="digit-with-letter"&&ee){U(),l({activeSection:we,newSectionValue:Y,shouldGoToNextSection:!0}),H.preventDefault();return}if(_e||z){H.preventDefault();return}}H.preventDefault(),U(),c(Y)}),ye=he(H=>{if(v)return;const Y=H.target.value;if(Y===""){U(),i();return}const we=H.nativeEvent.data,_e=we&&we.length>1,z=_e?we:Y,ee=Tr(z);if(a==null||_e){c(_e?we:ee);return}let Pe;if(a.startIndex===0&&a.endIndex===n.sections.length-1&&ee.length===1)Pe=ee;else{const Me=Tr(D.getValueStrFromSections(n.sections,ge));let Ge=-1,nt=-1;for(let xt=0;xt<Me.length;xt+=1)Ge===-1&&Me[xt]!==ee[xt]&&(Ge=xt),nt===-1&&Me[Me.length-xt-1]!==ee[ee.length-xt-1]&&(nt=xt);const Lt=n.sections[a.startIndex];if(Ge<Lt.start||Me.length-nt-1>Lt.end)return;const ir=ee.length-Me.length+Lt.end-Tr(Lt.endSeparator||"").length;Pe=ee.slice(Lt.start+Tr(Lt.startSeparator||"").length,ir)}if(Pe.length===0){Cp()?d(z):(U(),o());return}G({keyPressed:Pe,sectionIndex:a.startIndex})}),ce=he(H=>{switch(T==null||T(H),!0){case(H.key==="a"&&(H.ctrlKey||H.metaKey)):{H.preventDefault(),s("all");break}case H.key==="ArrowRight":{if(H.preventDefault(),a==null)s(te.startIndex);else if(a.startIndex!==a.endIndex)s(a.endIndex);else{const Y=te.neighbors[a.startIndex].rightIndex;Y!==null&&s(Y)}break}case H.key==="ArrowLeft":{if(H.preventDefault(),a==null)s(te.endIndex);else if(a.startIndex!==a.endIndex)s(a.startIndex);else{const Y=te.neighbors[a.startIndex].leftIndex;Y!==null&&s(Y)}break}case H.key==="Delete":{if(H.preventDefault(),v)break;a==null||a.startIndex===0&&a.endIndex===n.sections.length-1?i():o(),U();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(H.key):{if(H.preventDefault(),v||a==null)break;const Y=n.sections[a.startIndex],we=D.getActiveDateManager(t,n,Y),_e=xp(t,p,Y,H.key,u,we.date,{minutesStep:C});l({activeSection:Y,newSectionValue:_e,shouldGoToNextSection:!1});break}}});Nr(()=>{if(!B.current)return;if(a==null){B.current.scrollLeft&&(B.current.scrollLeft=0);return}const H=n.sections[a.startIndex],Y=n.sections[a.endIndex];let we=H.startInInput,_e=Y.endInInput;if(a.shouldSelectBoundarySelectors&&(we-=H.startSeparator.length,_e+=Y.endSeparator.length),we!==B.current.selectionStart||_e!==B.current.selectionEnd){const z=B.current.scrollTop;B.current===Qn(document)&&B.current.setSelectionRange(we,_e),B.current.scrollTop=z}});const ue=qi(V({},g,{value:n.value,timezone:p}),_,L.isSameError,L.defaultErrorState),X=x.useMemo(()=>E!==void 0?E:L.hasError(ue),[L,ue,E]);x.useEffect(()=>{!X&&!a&&U()},[n.referenceValue,a,X]),x.useEffect(()=>(B.current&&B.current===document.activeElement&&s("all"),()=>window.clearTimeout(K.current)),[]),x.useEffect(()=>{n.tempValueStrAndroid!=null&&a!=null&&(U(),o())},[n.tempValueStrAndroid]);const pe=x.useMemo(()=>{var H;return(H=n.tempValueStrAndroid)!=null?H:D.getValueStrFromSections(n.sections,ge)},[n.sections,D,n.tempValueStrAndroid,ge]),Be=x.useMemo(()=>a==null||n.sections[a.startIndex].contentType==="letter"?"text":"numeric",[a,n.sections]),Ve=B.current&&B.current===Qn(document),tt=L.areValuesEqual(t,n.value,L.emptyValue),ne=!Ve&&tt;x.useImperativeHandle(w,()=>({getSections:()=>n.sections,getActiveSectionIndex:()=>{var H,Y,we;const _e=(H=B.current.selectionStart)!=null?H:0,z=(Y=B.current.selectionEnd)!=null?Y:0,ee=!!((we=B.current)!=null&&we.readOnly);if(_e===0&&z===0||ee)return null;const Pe=_e<=n.sections[0].startInInput?1:n.sections.findIndex(Me=>Me.startInInput-Me.startSeparator.length>_e);return Pe===-1?n.sections.length-1:Pe-1},setSelectedSections:H=>s(H)}));const ve=he((H,...Y)=>{var we;H.preventDefault(),N==null||N(H,...Y),i(),B==null||(we=B.current)==null||we.focus(),s(0)});return V({placeholder:m,autoComplete:"off",disabled:!!P},A,{value:ne?"":pe,inputMode:Be,readOnly:v,onClick:le,onFocus:Q,onBlur:oe,onPaste:ie,onChange:ye,onKeyDown:ce,onMouseUp:me,onClear:ve,error:X,ref:W,clearable:!!(M&&!tt&&!v&&!P)})},Cx=({open:e,onOpen:t,onClose:n})=>{const a=x.useRef(typeof e=="boolean").current,[s,i]=x.useState(!1);x.useEffect(()=>{if(a){if(typeof e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");i(e)}},[a,e]);const o=x.useCallback(l=>{a||i(l),l&&t&&t(),!l&&n&&n()},[a,t,n]);return{isOpen:s,setIsOpen:o}},Tx=e=>{const{action:t,hasChanged:n,dateState:a,isControlled:s}=e,i=!s&&!a.hasBeenModifiedSinceMount;return t.name==="setValueFromField"?!0:t.name==="setValueFromAction"?i&&["accept","today","clear"].includes(t.pickerAction)?!0:n(a.lastPublishedValue):t.name==="setValueFromView"&&t.selectionState!=="shallow"||t.name==="setValueFromShortcut"?i?!0:n(a.lastPublishedValue):!1},Px=e=>{const{action:t,hasChanged:n,dateState:a,isControlled:s,closeOnSelect:i}=e,o=!s&&!a.hasBeenModifiedSinceMount;return t.name==="setValueFromAction"?o&&["accept","today","clear"].includes(t.pickerAction)?!0:n(a.lastCommittedValue):t.name==="setValueFromView"&&t.selectionState==="finish"&&i?o?!0:n(a.lastCommittedValue):t.name==="setValueFromShortcut"?t.changeImportance==="accept"&&n(a.lastCommittedValue):!1},Dx=e=>{const{action:t,closeOnSelect:n}=e;return t.name==="setValueFromAction"?!0:t.name==="setValueFromView"?t.selectionState==="finish"&&n:t.name==="setValueFromShortcut"?t.changeImportance==="accept":!1},Sx=({props:e,valueManager:t,valueType:n,wrapperVariant:a,validator:s})=>{const{onAccept:i,onChange:o,value:l,defaultValue:c,closeOnSelect:d=a==="desktop",selectedSections:u,onSelectedSectionsChange:m,timezone:p}=e,{current:h}=x.useRef(c),{current:g}=x.useRef(l!==void 0),v=We(),w=br(),[C,b]=nr({controlled:u,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:T,setIsOpen:y}=Cx(e),[S,R]=x.useState(()=>{let Q;return l!==void 0?Q=l:h!==void 0?Q=h:Q=t.emptyValue,{draft:Q,lastPublishedValue:Q,lastCommittedValue:Q,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:k,handleValueChange:E}=xs({timezone:p,value:l,defaultValue:h,onChange:o,valueManager:t});qi(V({},e,{value:S.draft,timezone:k}),s,t.isSameError,t.defaultErrorState);const M=he(Q=>{const oe={action:Q,dateState:S,hasChanged:ue=>!t.areValuesEqual(v,Q.value,ue),isControlled:g,closeOnSelect:d},ie=Tx(oe),ye=Px(oe),ce=Dx(oe);if(R(ue=>V({},ue,{draft:Q.value,lastPublishedValue:ie?Q.value:ue.lastPublishedValue,lastCommittedValue:ye?Q.value:ue.lastCommittedValue,hasBeenModifiedSinceMount:!0})),ie){const X={validationError:Q.name==="setValueFromField"?Q.context.validationError:s({adapter:w,value:Q.value,props:V({},e,{value:Q.value,timezone:k})})};Q.name==="setValueFromShortcut"&&Q.shortcut!=null&&(X.shortcut=Q.shortcut),E(Q.value,X)}ye&&i&&i(Q.value),ce&&y(!1)});if(l!==void 0&&(S.lastControlledValue===void 0||!t.areValuesEqual(v,S.lastControlledValue,l))){const Q=t.areValuesEqual(v,S.draft,l);R(oe=>V({},oe,{lastControlledValue:l},Q?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const N=he(()=>{M({value:t.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),P=he(()=>{M({value:S.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),D=he(()=>{M({value:S.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),L=he(()=>{M({value:S.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),_=he(()=>{M({value:t.getTodayValue(v,k,n),name:"setValueFromAction",pickerAction:"today"})}),A=he(()=>y(!0)),G=he(()=>y(!1)),U=he((Q,oe="partial")=>M({name:"setValueFromView",value:Q,selectionState:oe})),B=he((Q,oe,ie)=>M({name:"setValueFromShortcut",value:Q,changeImportance:oe??"accept",shortcut:ie})),W=he((Q,oe)=>M({name:"setValueFromField",value:Q,context:oe})),K=he(Q=>{b(Q),m==null||m(Q)}),be={onClear:N,onAccept:P,onDismiss:D,onCancel:L,onSetToday:_,onOpen:A,onClose:G},ge={value:S.draft,onChange:W,selectedSections:C,onSelectedSectionsChange:K},te=x.useMemo(()=>t.cleanValue(v,S.draft),[v,t,S.draft]),F={value:te,onChange:U,onClose:G,open:T,onSelectedSectionsChange:K},me=V({},be,{value:te,onChange:U,onSelectShortcut:B,isValid:Q=>{const oe=s({adapter:w,value:Q,props:V({},e,{value:Q,timezone:k})});return!t.hasError(oe)}});return{open:T,fieldProps:ge,viewProps:F,layoutProps:me,actions:be}};function Qi({onChange:e,onViewChange:t,openTo:n,view:a,views:s,autoFocus:i,focusedView:o,onFocusedViewChange:l}){var c,d;const u=x.useRef(n),m=x.useRef(s),p=x.useRef(s.includes(n)?n:s[0]),[h,g]=nr({name:"useViews",state:"view",controlled:a,default:p.current}),v=x.useRef(i?h:null),[w,C]=nr({name:"useViews",state:"focusedView",controlled:o,default:v.current});x.useEffect(()=>{(u.current&&u.current!==n||m.current&&m.current.some(M=>!s.includes(M)))&&(g(s.includes(n)?n:s[0]),m.current=s,u.current=n)},[n,g,h,s]);const b=s.indexOf(h),T=(c=s[b-1])!=null?c:null,y=(d=s[b+1])!=null?d:null,S=he((M,N)=>{C(N?M:P=>M===P?null:P),l==null||l(M,N)}),R=he(M=>{S(M,!0),M!==h&&(g(M),t&&t(M))}),k=he(()=>{y&&R(y)}),E=he((M,N,P)=>{const D=N==="finish",L=P?s.indexOf(P)<s.length-1:!!y;if(e(M,D&&L?"partial":N,P),P&&P!==h){const A=s[s.indexOf(P)+1];A&&R(A)}else D&&k()});return{view:h,setView:R,focusedView:w,setFocusedView:S,nextView:y,previousView:T,defaultView:s.includes(n)?n:s[0],goToNextView:k,setValueAndGoToNextView:E}}const kx=["className","sx"],Nx=({props:e,propsFromPickerValue:t,additionalViewProps:n,inputRef:a,autoFocusView:s})=>{const{onChange:i,open:o,onSelectedSectionsChange:l,onClose:c}=t,{view:d,views:u,openTo:m,onViewChange:p,viewRenderers:h,timezone:g}=e,v=Oe(e,kx),{view:w,setView:C,defaultView:b,focusedView:T,setFocusedView:y,setValueAndGoToNextView:S}=Qi({view:d,views:u,openTo:m,onChange:i,onViewChange:p,autoFocus:s}),{hasUIView:R,viewModeLookup:k}=x.useMemo(()=>u.reduce((_,A)=>{let G;return h[A]!=null?G="UI":G="field",_.viewModeLookup[A]=G,G==="UI"&&(_.hasUIView=!0),_},{hasUIView:!1,viewModeLookup:{}}),[h,u]),E=x.useMemo(()=>u.reduce((_,A)=>h[A]!=null&&up(A)?_+1:_,0),[h,u]),M=k[w],N=he(()=>M==="UI"),[P,D]=x.useState(M==="UI"?w:null);return P!==w&&k[w]==="UI"&&D(w),Nr(()=>{M==="field"&&o&&(c(),setTimeout(()=>{a==null||a.current.focus(),l(w)}))},[w]),Nr(()=>{if(!o)return;let _=w;M==="field"&&P!=null&&(_=P),_!==b&&k[_]==="UI"&&k[b]==="UI"&&(_=b),_!==w&&C(_),y(_,!0)},[o]),{hasUIView:R,shouldRestoreFocus:N,layoutProps:{views:u,view:P,onViewChange:C},renderCurrentView:()=>{if(P==null)return null;const _=h[P];return _==null?null:_(V({},v,n,t,{views:u,timezone:g,onChange:S,view:P,onViewChange:C,focusedView:T,onFocusedViewChange:y,showViewSwitcher:E>1,timeViewsCount:E}))}}};function lo(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Mx=(e,t)=>{const[n,a]=x.useState(lo);return Nr(()=>{const i=()=>{a(lo())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),sx(e,["hours","minutes","seconds"])?!1:(t||n)==="landscape"},Ax=({props:e,propsFromPickerValue:t,propsFromPickerViews:n,wrapperVariant:a})=>{const{orientation:s}=e,i=Mx(n.views,s);return{layoutProps:V({},n,t,{isLandscape:i,wrapperVariant:a,disabled:e.disabled,readOnly:e.readOnly})}},Ki=({props:e,valueManager:t,valueType:n,wrapperVariant:a,inputRef:s,additionalViewProps:i,validator:o,autoFocusView:l})=>{const c=Sx({props:e,valueManager:t,valueType:n,wrapperVariant:a,validator:o}),d=Nx({props:e,inputRef:s,additionalViewProps:i,autoFocusView:l,propsFromPickerValue:c.viewProps}),u=Ax({props:e,wrapperVariant:a,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:u.layoutProps}};function Gi(e){return ut("MuiPickersLayout",e)}const Ia=ht("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Rx=["onAccept","onClear","onCancel","onSetToday","actions"];function Ex(e){const{onAccept:t,onClear:n,onCancel:a,onSetToday:s,actions:i}=e,o=Oe(e,Rx),l=or();if(i==null||i.length===0)return null;const c=i==null?void 0:i.map(d=>{switch(d){case"clear":return r.jsx(Qe,{onClick:n,children:l.clearButtonLabel},d);case"cancel":return r.jsx(Qe,{onClick:a,children:l.cancelButtonLabel},d);case"accept":return r.jsx(Qe,{onClick:t,children:l.okButtonLabel},d);case"today":return r.jsx(Qe,{onClick:s,children:l.todayButtonLabel},d);default:return null}});return r.jsx(nn,V({},o,{children:c}))}const Ix=["items","changeImportance","isLandscape","onChange","isValid"],Ox=["getValue"];function _x(e){const{items:t,changeImportance:n,onChange:a,isValid:s}=e,i=Oe(e,Ix);if(t==null||t.length===0)return null;const o=t.map(l=>{let{getValue:c}=l,d=Oe(l,Ox);const u=c({isValid:s});return{label:d.label,onClick:()=>{a(u,n,d)},disabled:!s(u)}});return r.jsx(ho,V({dense:!0,sx:[{maxHeight:ps,maxWidth:200,overflow:"auto"},...Array.isArray(i.sx)?i.sx:[i.sx]]},i,{children:o.map(l=>r.jsx(mo,{children:r.jsx($e,V({},l))},l.label))}))}function Fx(e){return e.view!==null}const Vx=e=>{const{classes:t,isLandscape:n}=e;return ct({root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},Gi,t)},Lx=e=>{var t,n;const{wrapperVariant:a,onAccept:s,onClear:i,onCancel:o,onSetToday:l,view:c,views:d,onViewChange:u,value:m,onChange:p,onSelectShortcut:h,isValid:g,isLandscape:v,disabled:w,readOnly:C,children:b,components:T,componentsProps:y,slots:S,slotProps:R}=e,k=S??Hi(T),E=R??y,M=Vx(e),N=(t=k==null?void 0:k.actionBar)!=null?t:Ex,P=et({elementType:N,externalSlotProps:E==null?void 0:E.actionBar,additionalProps:{onAccept:s,onClear:i,onCancel:o,onSetToday:l,actions:a==="desktop"?[]:["cancel","accept"],className:M.actionBar},ownerState:V({},e,{wrapperVariant:a})}),D=r.jsx(N,V({},P)),L=k==null?void 0:k.toolbar,_=et({elementType:L,externalSlotProps:E==null?void 0:E.toolbar,additionalProps:{isLandscape:v,onChange:p,value:m,view:c,onViewChange:u,views:d,disabled:w,readOnly:C,className:M.toolbar},ownerState:V({},e,{wrapperVariant:a})}),A=Fx(_)&&L?r.jsx(L,V({},_)):null,G=b,U=k==null?void 0:k.tabs,B=c&&U?r.jsx(U,V({view:c,onViewChange:u,className:M.tabs},E==null?void 0:E.tabs)):null,W=(n=k==null?void 0:k.shortcuts)!=null?n:_x,K=et({elementType:W,externalSlotProps:E==null?void 0:E.shortcuts,additionalProps:{isValid:g,isLandscape:v,onChange:h,className:M.shortcuts},ownerState:{isValid:g,isLandscape:v,onChange:h,className:M.shortcuts,wrapperVariant:a}}),be=c&&W?r.jsx(W,V({},K)):null;return{toolbar:A,content:G,tabs:B,actionBar:D,shortcuts:be}},$x=e=>{const{isLandscape:t,classes:n}=e;return ct({root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]},Gi,n)},Xi=De("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Ia.toolbar}`]:t.isLandscape?{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${Ia.shortcuts}`]:t.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${Ia.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));Xi.propTypes={as:O.elementType,ownerState:O.shape({isLandscape:O.bool.isRequired}).isRequired,sx:O.oneOfType([O.arrayOf(O.oneOfType([O.func,O.object,O.bool])),O.func,O.object])};const Bx=De("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),Zi=function(t){const n=rt({props:t,name:"MuiPickersLayout"}),{toolbar:a,content:s,tabs:i,actionBar:o,shortcuts:l}=Lx(n),{sx:c,className:d,isLandscape:u,ref:m,wrapperVariant:p}=n,h=n,g=$x(h);return r.jsxs(Xi,{ref:m,sx:c,className:st(d,g.root),ownerState:h,children:[u?l:a,u?a:l,r.jsx(Bx,{className:g.contentWrapper,children:p==="desktop"?r.jsxs(x.Fragment,{children:[s,i]}):r.jsxs(x.Fragment,{children:[i,s]})}),o]})};function Wx(e,{disableFuture:t,maxDate:n,timezone:a}){const s=We();return x.useMemo(()=>{const i=s.dateWithTimezone(void 0,a),o=s.startOfMonth(t&&s.isBefore(i,n)?i:n);return!s.isAfter(o,e)},[t,n,e,s,a])}function Ux(e,{disablePast:t,minDate:n,timezone:a}){const s=We();return x.useMemo(()=>{const i=s.dateWithTimezone(void 0,a),o=s.startOfMonth(t&&s.isAfter(i,n)?i:n);return!s.isBefore(o,e)},[t,n,e,s,a])}const Ji=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Hx=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],zx=["minDateTime","maxDateTime"],Yx=[...Ji,...Hx,...zx],el=e=>Yx.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{}),qx=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],Qx=(e,t)=>{const n=V({},e),a={},s=i=>{n.hasOwnProperty(i)&&(a[i]=n[i],delete n[i])};return qx.forEach(s),Ji.forEach(s),{forwardedProps:n,internalProps:a}},va=({props:e,value:t,adapter:n})=>{if(t===null)return null;const{shouldDisableDate:a,shouldDisableMonth:s,shouldDisableYear:i,disablePast:o,disableFuture:l,timezone:c}=e,d=n.utils.dateWithTimezone(void 0,c),u=Tt(n.utils,e.minDate,n.defaultDates.minDate),m=Tt(n.utils,e.maxDate,n.defaultDates.maxDate);switch(!0){case!n.utils.isValid(t):return"invalidDate";case!!(a&&a(t)):return"shouldDisableDate";case!!(s&&s(t)):return"shouldDisableMonth";case!!(i&&i(t)):return"shouldDisableYear";case!!(l&&n.utils.isAfterDay(t,d)):return"disableFuture";case!!(o&&n.utils.isBeforeDay(t,d)):return"disablePast";case!!(u&&n.utils.isBeforeDay(t,u)):return"minDate";case!!(m&&n.utils.isAfterDay(t,m)):return"maxDate";default:return null}};function Kx(e){return ut("MuiPickersDay",e)}const lr=ht("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),Gx=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],Xx=e=>{const{selected:t,disableMargin:n,disableHighlightToday:a,today:s,disabled:i,outsideCurrentMonth:o,showDaysOutsideCurrentMonth:l,classes:c}=e,d=o&&!l;return ct({root:["root",t&&!d&&"selected",i&&"disabled",!n&&"dayWithMargin",!a&&s&&"today",o&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Kx,c)},tl=({theme:e,ownerState:t})=>V({},e.typography.caption,{width:en,height:en,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Mr(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Mr(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${lr.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${lr.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${lr.disabled}:not(.${lr.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${lr.disabled}&.${lr.selected}`]:{opacity:.6}},!t.disableMargin&&{margin:`0 ${ga}px`},t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&{color:(e.vars||e).palette.text.secondary},!t.disableHighlightToday&&t.today&&{[`&:not(.${lr.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}),rl=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.today&&t.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},Zx=De(Rl,{name:"MuiPickersDay",slot:"Root",overridesResolver:rl})(tl),Jx=De("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:rl})(({theme:e,ownerState:t})=>V({},tl({theme:e,ownerState:t}),{opacity:0,pointerEvents:"none"})),zr=()=>{},eg=x.forwardRef(function(t,n){const a=rt({props:t,name:"MuiPickersDay"}),{autoFocus:s=!1,className:i,day:o,disabled:l=!1,disableHighlightToday:c=!1,disableMargin:d=!1,isAnimating:u,onClick:m,onDaySelect:p,onFocus:h=zr,onBlur:g=zr,onKeyDown:v=zr,onMouseDown:w=zr,onMouseEnter:C=zr,outsideCurrentMonth:b,selected:T=!1,showDaysOutsideCurrentMonth:y=!1,children:S,today:R=!1}=a,k=Oe(a,Gx),E=V({},a,{autoFocus:s,disabled:l,disableHighlightToday:c,disableMargin:d,selected:T,showDaysOutsideCurrentMonth:y,today:R}),M=Xx(E),N=We(),P=x.useRef(null),D=xr(P,n);Nr(()=>{s&&!l&&!u&&!b&&P.current.focus()},[s,l,u,b]);const L=A=>{w(A),b&&A.preventDefault()},_=A=>{l||p(o),b&&A.currentTarget.focus(),m&&m(A)};return b&&!y?r.jsx(Jx,{className:st(M.root,M.hiddenDaySpacingFiller,i),ownerState:E,role:k.role}):r.jsx(Zx,V({className:st(M.root,i),ref:D,centerRipple:!0,disabled:l,tabIndex:T?0:-1,onKeyDown:A=>v(A,o),onFocus:A=>h(A,o),onBlur:A=>g(A,o),onMouseEnter:A=>C(A,o),onClick:_,onMouseDown:L},k,{ownerState:E,children:S||N.format(o,"dayOfMonth")}))}),tg=x.memo(eg),rg=e=>ut("MuiPickersSlideTransition",e),Ct=ht("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),ng=["children","className","reduceAnimations","slideDirection","transKey","classes"],ag=e=>{const{classes:t,slideDirection:n}=e,a={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return ct(a,rg,t)},sg=De(vo,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${Ct["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${Ct["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${Ct.slideEnterActive}`]:t.slideEnterActive},{[`.${Ct.slideExit}`]:t.slideExit},{[`.${Ct["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${Ct["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Ct["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Ct["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Ct.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${Ct.slideExit}`]:{transform:"translate(0%)"},[`& .${Ct["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${Ct["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function og(e){const t=rt({props:e,name:"MuiPickersSlideTransition"}),{children:n,className:a,reduceAnimations:s,transKey:i}=t,o=Oe(t,ng),l=ag(t),c=vr();if(s)return r.jsx("div",{className:st(l.root,a),children:n});const d={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return r.jsx(sg,{className:st(l.root,a),childFactory:u=>x.cloneElement(u,{classNames:d}),role:"presentation",children:r.jsx(El,V({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:d},o,{children:n}),i)})}const nl=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:a,maxDate:s,disableFuture:i,disablePast:o,timezone:l})=>{const c=br();return x.useCallback(d=>va({adapter:c,value:d,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:a,maxDate:s,disableFuture:i,disablePast:o,timezone:l}})!==null,[c,e,t,n,a,s,i,o,l])},ig=e=>ut("MuiDayCalendar",e);ht("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const lg=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],cg=["ownerState"],dg=e=>{const{classes:t}=e;return ct({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},ig,t)},al=(en+ga*2)*6,ug=De("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),hg=De("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),mg=De(f,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),fg=De(f,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.disabled})),pg=De(f,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})(({theme:e})=>V({},e.typography.caption,{width:en,height:en,padding:0,margin:`0 ${ga}px`,color:e.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),xg=De("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:al}),gg=De(og,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:al}),yg=De("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),vg=De("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:`${ga}px 0`,display:"flex",justifyContent:"center"});function bg(e){var t,n,a;let{parentProps:s,day:i,focusableDay:o,selectedDays:l,isDateDisabled:c,currentMonthNumber:d,isViewFocused:u}=e,m=Oe(e,lg);const{disabled:p,disableHighlightToday:h,isMonthSwitchingAnimating:g,showDaysOutsideCurrentMonth:v,components:w,componentsProps:C,slots:b,slotProps:T,timezone:y}=s,S=We(),R=xa(y),k=o!==null&&S.isSameDay(i,o),E=l.some(U=>S.isSameDay(U,i)),M=S.isSameDay(i,R),N=(t=(n=b==null?void 0:b.day)!=null?n:w==null?void 0:w.Day)!=null?t:tg,P=et({elementType:N,externalSlotProps:(a=T==null?void 0:T.day)!=null?a:C==null?void 0:C.day,additionalProps:V({disableHighlightToday:h,showDaysOutsideCurrentMonth:v,role:"gridcell",isAnimating:g,"data-timestamp":S.toJsDate(i).valueOf()},m),ownerState:V({},s,{day:i,selected:E})}),D=Oe(P,cg),L=x.useMemo(()=>p||c(i),[p,c,i]),_=x.useMemo(()=>S.getMonth(i)!==d,[S,i,d]),A=x.useMemo(()=>{const U=S.startOfMonth(S.setMonth(i,d));return v?S.isSameDay(i,S.startOfWeek(U)):S.isSameDay(i,U)},[d,i,v,S]),G=x.useMemo(()=>{const U=S.endOfMonth(S.setMonth(i,d));return v?S.isSameDay(i,S.endOfWeek(U)):S.isSameDay(i,U)},[d,i,v,S]);return r.jsx(N,V({},D,{day:i,disabled:L,autoFocus:u&&k,today:M,outsideCurrentMonth:_,isFirstVisibleCell:A,isLastVisibleCell:G,selected:E,tabIndex:k?0:-1,"aria-selected":E,"aria-current":M?"date":void 0}))}function jg(e){const t=rt({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:n,className:a,currentMonth:s,selectedDays:i,focusedDay:o,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:u,reduceAnimations:m,renderLoading:p=()=>r.jsx("span",{children:"..."}),slideDirection:h,TransitionProps:g,disablePast:v,disableFuture:w,minDate:C,maxDate:b,shouldDisableDate:T,shouldDisableMonth:y,shouldDisableYear:S,dayOfWeekFormatter:R,hasFocus:k,onFocusedViewChange:E,gridLabelId:M,displayWeekNumber:N,fixedWeekNumber:P,autoFocus:D,timezone:L}=t,_=xa(L),A=We(),G=dg(t),B=vr().direction==="rtl",W=R||((ne,ve)=>A.format(ve,"weekdayShort").charAt(0).toUpperCase()),K=nl({shouldDisableDate:T,shouldDisableMonth:y,shouldDisableYear:S,minDate:C,maxDate:b,disablePast:v,disableFuture:w,timezone:L}),be=or(),[ge,te]=nr({name:"DayCalendar",state:"hasFocus",controlled:k,default:D??!1}),[F,le]=x.useState(()=>o||_),me=he(ne=>{u||c(ne)}),Q=ne=>{K(ne)||(n(ne),le(ne),E==null||E(!0),te(!0))},oe=he((ne,ve)=>{switch(ne.key){case"ArrowUp":Q(A.addDays(ve,-7)),ne.preventDefault();break;case"ArrowDown":Q(A.addDays(ve,7)),ne.preventDefault();break;case"ArrowLeft":{const H=A.addDays(ve,B?1:-1),Y=A.addMonths(ve,B?1:-1),we=Zr({utils:A,date:H,minDate:B?H:A.startOfMonth(Y),maxDate:B?A.endOfMonth(Y):H,isDateDisabled:K,timezone:L});Q(we||H),ne.preventDefault();break}case"ArrowRight":{const H=A.addDays(ve,B?-1:1),Y=A.addMonths(ve,B?-1:1),we=Zr({utils:A,date:H,minDate:B?A.startOfMonth(Y):H,maxDate:B?H:A.endOfMonth(Y),isDateDisabled:K,timezone:L});Q(we||H),ne.preventDefault();break}case"Home":Q(A.startOfWeek(ve)),ne.preventDefault();break;case"End":Q(A.endOfWeek(ve)),ne.preventDefault();break;case"PageUp":Q(A.addMonths(ve,1)),ne.preventDefault();break;case"PageDown":Q(A.addMonths(ve,-1)),ne.preventDefault();break}}),ie=he((ne,ve)=>Q(ve)),ye=he((ne,ve)=>{ge&&A.isSameDay(F,ve)&&(E==null||E(!1))}),ce=A.getMonth(s),ue=x.useMemo(()=>i.filter(ne=>!!ne).map(ne=>A.startOfDay(ne)),[A,i]),X=ce,pe=x.useMemo(()=>x.createRef(),[X]),Be=A.startOfWeek(_),Ve=x.useMemo(()=>{const ne=A.startOfMonth(s),ve=A.endOfMonth(s);return K(F)||A.isAfterDay(F,ve)||A.isBeforeDay(F,ne)?Zr({utils:A,date:F,minDate:ne,maxDate:ve,disablePast:v,disableFuture:w,isDateDisabled:K,timezone:L}):F},[s,w,v,F,K,A,L]),tt=x.useMemo(()=>{const ne=A.setTimezone(s,L),ve=A.getWeekArray(ne);let H=A.addMonths(ne,1);for(;P&&ve.length<P;){const Y=A.getWeekArray(H),we=A.isSameDay(ve[ve.length-1][0],Y[0][0]);Y.slice(we?1:0).forEach(_e=>{ve.length<P&&ve.push(_e)}),H=A.addMonths(H,1)}return ve},[s,P,A,L]);return r.jsxs(ug,{role:"grid","aria-labelledby":M,className:G.root,children:[r.jsxs(hg,{role:"row",className:G.header,children:[N&&r.jsx(fg,{variant:"caption",role:"columnheader","aria-label":be.calendarWeekNumberHeaderLabel,className:G.weekNumberLabel,children:be.calendarWeekNumberHeaderText}),cp(A,_).map((ne,ve)=>{var H;const Y=A.format(ne,"weekdayShort");return r.jsx(mg,{variant:"caption",role:"columnheader","aria-label":A.format(A.addDays(Be,ve),"weekday"),className:G.weekDayLabel,children:(H=W==null?void 0:W(Y,ne))!=null?H:Y},Y+ve.toString())})]}),l?r.jsx(xg,{className:G.loadingContainer,children:p()}):r.jsx(gg,V({transKey:X,onExited:d,reduceAnimations:m,slideDirection:h,className:st(a,G.slideTransition)},g,{nodeRef:pe,children:r.jsx(yg,{ref:pe,role:"rowgroup",className:G.monthContainer,children:tt.map((ne,ve)=>r.jsxs(vg,{role:"row",className:G.weekContainer,"aria-rowindex":ve+1,children:[N&&r.jsx(pg,{className:G.weekNumber,role:"rowheader","aria-label":be.calendarWeekNumberAriaLabelText(A.getWeekNumber(ne[0])),children:be.calendarWeekNumberText(A.getWeekNumber(ne[0]))}),ne.map((H,Y)=>r.jsx(bg,{parentProps:t,day:H,selectedDays:ue,focusableDay:Ve,onKeyDown:oe,onFocus:ie,onBlur:ye,onDaySelect:me,isDateDisabled:K,currentMonthNumber:ce,isViewFocused:ge,"aria-colindex":Y+1},H.toString()))]},`week-${ne[0]}`))})}))]})}const wg=(e,t,n)=>(a,s)=>{switch(s.type){case"changeMonth":return V({},a,{slideDirection:s.direction,currentMonth:s.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return V({},a,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(a.focusedDay!=null&&s.focusedDay!=null&&n.isSameDay(s.focusedDay,a.focusedDay))return a;const i=s.focusedDay!=null&&!t&&!n.isSameMonth(a.currentMonth,s.focusedDay);return V({},a,{focusedDay:s.focusedDay,isMonthSwitchingAnimating:i&&!e&&!s.withoutMonthSwitchingAnimation,currentMonth:i?n.startOfMonth(s.focusedDay):a.currentMonth,slideDirection:s.focusedDay!=null&&n.isAfterDay(s.focusedDay,a.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},Cg=e=>{const{value:t,referenceDate:n,defaultCalendarMonth:a,disableFuture:s,disablePast:i,disableSwitchToMonthOnDayFocus:o=!1,maxDate:l,minDate:c,onMonthChange:d,reduceAnimations:u,shouldDisableDate:m,timezone:p}=e,h=We(),g=x.useRef(wg(!!u,o,h)).current,v=x.useMemo(()=>{let k=null;return n?k=n:a&&(k=h.startOfMonth(a)),Qt.getInitialReferenceValue({value:t,utils:h,timezone:p,props:e,referenceDate:k,granularity:At.day})},[]),[w,C]=x.useReducer(g,{isMonthSwitchingAnimating:!1,focusedDay:v,currentMonth:h.startOfMonth(v),slideDirection:"left"}),b=x.useCallback(k=>{C(V({type:"changeMonth"},k)),d&&d(k.newMonth)},[d]),T=x.useCallback(k=>{const E=k;h.isSameMonth(E,w.currentMonth)||b({newMonth:h.startOfMonth(E),direction:h.isAfterDay(E,w.currentMonth)?"left":"right"})},[w.currentMonth,b,h]),y=nl({shouldDisableDate:m,minDate:c,maxDate:l,disableFuture:s,disablePast:i,timezone:p}),S=x.useCallback(()=>{C({type:"finishMonthSwitchingAnimation"})},[]),R=he((k,E)=>{y(k)||C({type:"changeFocusedDay",focusedDay:k,withoutMonthSwitchingAnimation:E})});return{referenceDate:v,calendarState:w,changeMonth:T,changeFocusedDay:R,isDateDisabled:y,onMonthSwitchingAnimationEnd:S,handleChangeMonth:b}},Tg=["props","getOpenDialogAriaText"],Pg=["ownerState"],Dg=["ownerState"],Sg=e=>{var t,n,a,s,i;let{props:o,getOpenDialogAriaText:l}=e,c=Oe(e,Tg);const{slots:d,slotProps:u,className:m,sx:p,format:h,formatDensity:g,timezone:v,name:w,label:C,inputRef:b,readOnly:T,disabled:y,autoFocus:S,localeText:R,reduceAnimations:k}=o,E=We(),M=x.useRef(null),N=x.useRef(null),P=es(),D=(t=u==null||(n=u.toolbar)==null?void 0:n.hidden)!=null?t:!1,{open:L,actions:_,hasUIView:A,layoutProps:G,renderCurrentView:U,shouldRestoreFocus:B,fieldProps:W}=Ki(V({},c,{props:o,inputRef:M,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),K=(a=d.inputAdornment)!=null?a:bo,be=et({elementType:K,externalSlotProps:u==null?void 0:u.inputAdornment,additionalProps:{position:"end"},ownerState:o}),ge=Oe(be,Pg),te=(s=d.openPickerButton)!=null?s:Kt,F=et({elementType:te,externalSlotProps:u==null?void 0:u.openPickerButton,additionalProps:{disabled:y||T,onClick:L?_.onClose:_.onOpen,"aria-label":l(W.value,E),edge:ge.position},ownerState:o}),le=Oe(F,Dg),me=d.openPickerIcon,Q=d.field,oe=et({elementType:Q,externalSlotProps:u==null?void 0:u.field,additionalProps:V({},W,D&&{id:P},{readOnly:T,disabled:y,className:m,sx:p,format:h,formatDensity:g,timezone:v,label:C,name:w,autoFocus:S&&!o.open,focused:L?!0:void 0}),ownerState:o});A&&(oe.InputProps=V({},oe.InputProps,{ref:N},!o.disableOpenPicker&&{[`${ge.position}Adornment`]:r.jsx(K,V({},ge,{children:r.jsx(te,V({},le,{children:r.jsx(me,V({},u==null?void 0:u.openPickerIcon))}))}))}));const ie=V({textField:d.textField,clearIcon:d.clearIcon,clearButton:d.clearButton},oe.slots),ye=(i=d.layout)!=null?i:Zi,ce=xr(M,oe.inputRef,b);let ue=P;D&&(C?ue=`${P}-label`:ue=void 0);const X=V({},u,{toolbar:V({},u==null?void 0:u.toolbar,{titleId:P}),popper:V({"aria-labelledby":ue},u==null?void 0:u.popper)});return{renderPicker:()=>r.jsxs(Pr,{localeText:R,children:[r.jsx(Q,V({},oe,{slots:ie,slotProps:X,inputRef:ce})),r.jsx(gx,V({role:"dialog",placement:"bottom-start",anchorEl:N.current},_,{open:L,slots:d,slotProps:X,shouldRestoreFocus:B,reduceAnimations:k,children:r.jsx(ye,V({},G,X==null?void 0:X.layout,{slots:d,slotProps:X,children:U()}))}))]})}},kg=e=>{var t,n,a;const s=We(),i=fn();return V({},e,{disablePast:(t=e.disablePast)!=null?t:!1,disableFuture:(n=e.disableFuture)!=null?n:!1,format:(a=e.format)!=null?a:s.formats.keyboardDate,minDate:Tt(s,e.minDate,i.minDate),maxDate:Tt(s,e.maxDate,i.maxDate)})},Ng=({props:e,inputRef:t})=>{const n=kg(e),{forwardedProps:a,internalProps:s}=Qx(n);return wx({inputRef:t,forwardedProps:a,internalProps:s,valueManager:Qt,fieldValueManager:Dp,validator:va})},Mg=["ownerState"],Ag=({clearable:e,fieldProps:t,InputProps:n,onClear:a,slots:s,slotProps:i,components:o,componentsProps:l})=>{var c,d,u,m,p,h;const g=or(),v=(c=(d=s==null?void 0:s.clearButton)!=null?d:o==null?void 0:o.ClearButton)!=null?c:Kt,w=et({elementType:v,externalSlotProps:(u=i==null?void 0:i.clearButton)!=null?u:l==null?void 0:l.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:g.fieldClearLabel}}),C=Oe(w,Mg),b=(m=(p=s==null?void 0:s.clearIcon)!=null?p:o==null?void 0:o.ClearIcon)!=null?m:zp,T=et({elementType:b,externalSlotProps:(h=i==null?void 0:i.clearIcon)!=null?h:l==null?void 0:l.clearIcon,ownerState:{}}),y=V({},n,{endAdornment:r.jsxs(x.Fragment,{children:[e&&r.jsx(bo,{position:"end",sx:{marginRight:n!=null&&n.endAdornment?-1:-1.5},children:r.jsx(v,V({},C,{onClick:a,children:r.jsx(b,V({fontSize:"small"},T))}))}),n==null?void 0:n.endAdornment]})}),S=V({},t,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(t.sx)?t.sx:[t.sx]]});return{InputProps:y,fieldProps:S}},Rg=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Eg=["inputRef"],Ig=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],sl=x.forwardRef(function(t,n){var a,s,i;const o=rt({props:t,name:"MuiDateField"}),{components:l,componentsProps:c,slots:d,slotProps:u,InputProps:m,inputProps:p}=o,h=Oe(o,Rg),g=o,v=(a=(s=d==null?void 0:d.textField)!=null?s:l==null?void 0:l.TextField)!=null?a:ot,w=et({elementType:v,externalSlotProps:(i=u==null?void 0:u.textField)!=null?i:c==null?void 0:c.textField,externalForwardedProps:h,ownerState:g}),{inputRef:C}=w,b=Oe(w,Eg);b.inputProps=V({},p,b.inputProps),b.InputProps=V({},m,b.InputProps);const T=Ng({props:b,inputRef:C}),{ref:y,onPaste:S,onKeyDown:R,inputMode:k,readOnly:E,clearable:M,onClear:N}=T,P=Oe(T,Ig),{InputProps:D,fieldProps:L}=Ag({onClear:N,clearable:M,fieldProps:P,InputProps:P.InputProps,slots:d,slotProps:u,components:l,componentsProps:c});return r.jsx(v,V({ref:n},L,{InputProps:V({},D,{readOnly:E}),inputProps:V({},P.inputProps,{inputMode:k,onPaste:S,onKeyDown:R,ref:y})}))}),Og=e=>ut("MuiPickersFadeTransitionGroup",e);ht("MuiPickersFadeTransitionGroup",["root"]);const _g=e=>{const{classes:t}=e;return ct({root:["root"]},Og,t)},Fg=De(vo,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"});function ol(e){const t=rt({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:a,reduceAnimations:s,transKey:i}=t,o=_g(t),l=vr();return s?n:r.jsx(Fg,{className:st(o.root,a),children:r.jsx(Jn,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:n},i)})}function Vg(e){return ut("MuiPickersMonth",e)}const Cn=ht("MuiPickersMonth",["root","monthButton","disabled","selected"]),Lg=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],$g=e=>{const{disabled:t,selected:n,classes:a}=e;return ct({root:["root"],monthButton:["monthButton",t&&"disabled",n&&"selected"]},Vg,a)},Bg=De("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({ownerState:e})=>({flexBasis:e.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Wg=De("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${Cn.disabled}`]:t.disabled},{[`&.${Cn.selected}`]:t.selected}]})(({theme:e})=>V({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Mr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Mr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Cn.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Cn.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),Ug=x.memo(function(t){const n=rt({props:t,name:"MuiPickersMonth"}),{autoFocus:a,children:s,disabled:i,selected:o,value:l,tabIndex:c,onClick:d,onKeyDown:u,onFocus:m,onBlur:p,"aria-current":h,"aria-label":g}=n,v=Oe(n,Lg),w=x.useRef(null),C=$g(n);return Nr(()=>{if(a){var b;(b=w.current)==null||b.focus()}},[a]),r.jsx(Bg,V({className:C.root,ownerState:n},v,{children:r.jsx(Wg,{ref:w,disabled:i,type:"button",role:"radio",tabIndex:i?-1:c,"aria-current":h,"aria-checked":o,"aria-label":g,onClick:b=>d(b,l),onKeyDown:b=>u(b,l),onFocus:b=>m(b,l),onBlur:b=>p(b,l),className:C.monthButton,ownerState:n,children:s})}))});function Hg(e){return ut("MuiMonthCalendar",e)}ht("MuiMonthCalendar",["root"]);const zg=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],Yg=e=>{const{classes:t}=e;return ct({root:["root"]},Hg,t)};function qg(e,t){const n=We(),a=fn(),s=rt({props:e,name:t});return V({disableFuture:!1,disablePast:!1},s,{minDate:Tt(n,s.minDate,a.minDate),maxDate:Tt(n,s.maxDate,a.maxDate)})}const Qg=De("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:ya,boxSizing:"border-box"}),Kg=x.forwardRef(function(t,n){const a=qg(t,"MuiMonthCalendar"),{className:s,value:i,defaultValue:o,referenceDate:l,disabled:c,disableFuture:d,disablePast:u,maxDate:m,minDate:p,onChange:h,shouldDisableMonth:g,readOnly:v,disableHighlightToday:w,autoFocus:C=!1,onMonthFocus:b,hasFocus:T,onFocusedViewChange:y,monthsPerRow:S=3,timezone:R,gridLabelId:k}=a,E=Oe(a,zg),{value:M,handleValueChange:N,timezone:P}=gs({name:"MonthCalendar",timezone:R,value:i,defaultValue:o,onChange:h,valueManager:Qt}),D=xa(P),L=jo(),_=We(),A=x.useMemo(()=>Qt.getInitialReferenceValue({value:M,utils:_,props:a,timezone:P,referenceDate:l,granularity:At.month}),[]),G=a,U=Yg(G),B=x.useMemo(()=>_.getMonth(D),[_,D]),W=x.useMemo(()=>M!=null?_.getMonth(M):w?null:_.getMonth(A),[M,_,w,A]),[K,be]=x.useState(()=>W||B),[ge,te]=nr({name:"MonthCalendar",state:"hasFocus",controlled:T,default:C??!1}),F=he(ce=>{te(ce),y&&y(ce)}),le=x.useCallback(ce=>{const ue=_.startOfMonth(u&&_.isAfter(D,p)?D:p),X=_.startOfMonth(d&&_.isBefore(D,m)?D:m),pe=_.startOfMonth(ce);return _.isBefore(pe,ue)||_.isAfter(pe,X)?!0:g?g(pe):!1},[d,u,m,p,D,g,_]),me=he((ce,ue)=>{if(v)return;const X=_.setMonth(M??A,ue);N(X)}),Q=he(ce=>{le(_.setMonth(M??A,ce))||(be(ce),F(!0),b&&b(ce))});x.useEffect(()=>{be(ce=>W!==null&&ce!==W?W:ce)},[W]);const oe=he((ce,ue)=>{switch(ce.key){case"ArrowUp":Q((12+ue-3)%12),ce.preventDefault();break;case"ArrowDown":Q((12+ue+3)%12),ce.preventDefault();break;case"ArrowLeft":Q((12+ue+(L.direction==="ltr"?-1:1))%12),ce.preventDefault();break;case"ArrowRight":Q((12+ue+(L.direction==="ltr"?1:-1))%12),ce.preventDefault();break}}),ie=he((ce,ue)=>{Q(ue)}),ye=he((ce,ue)=>{K===ue&&F(!1)});return r.jsx(Qg,V({ref:n,className:st(U.root,s),ownerState:G,role:"radiogroup","aria-labelledby":k},E,{children:hs(_,M??A).map(ce=>{const ue=_.getMonth(ce),X=_.format(ce,"monthShort"),pe=_.format(ce,"month"),Be=ue===W,Ve=c||le(ce);return r.jsx(Ug,{selected:Be,value:ue,onClick:me,onKeyDown:oe,autoFocus:ge&&ue===K,disabled:Ve,tabIndex:ue===K?0:-1,onFocus:ie,onBlur:ye,"aria-current":B===ue?"date":void 0,"aria-label":pe,monthsPerRow:S,children:X},X)})}))});function Gg(e){return ut("MuiPickersYear",e)}const Tn=ht("MuiPickersYear",["root","yearButton","selected","disabled"]),Xg=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],Zg=e=>{const{disabled:t,selected:n,classes:a}=e;return ct({root:["root"],yearButton:["yearButton",t&&"disabled",n&&"selected"]},Gg,a)},Jg=De("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({ownerState:e})=>({flexBasis:e.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),ey=De("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${Tn.disabled}`]:t.disabled},{[`&.${Tn.selected}`]:t.selected}]})(({theme:e})=>V({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:Mr(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Mr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Tn.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Tn.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),ty=x.memo(function(t){const n=rt({props:t,name:"MuiPickersYear"}),{autoFocus:a,className:s,children:i,disabled:o,selected:l,value:c,tabIndex:d,onClick:u,onKeyDown:m,onFocus:p,onBlur:h,"aria-current":g}=n,v=Oe(n,Xg),w=x.useRef(null),C=Zg(n);return x.useEffect(()=>{a&&w.current.focus()},[a]),r.jsx(Jg,V({className:st(C.root,s),ownerState:n},v,{children:r.jsx(ey,{ref:w,disabled:o,type:"button",role:"radio",tabIndex:o?-1:d,"aria-current":g,"aria-checked":l,onClick:b=>u(b,c),onKeyDown:b=>m(b,c),onFocus:b=>p(b,c),onBlur:b=>h(b,c),className:C.yearButton,ownerState:n,children:i})}))});function ry(e){return ut("MuiYearCalendar",e)}ht("MuiYearCalendar",["root"]);const ny=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],ay=e=>{const{classes:t}=e;return ct({root:["root"]},ry,t)};function sy(e,t){var n;const a=We(),s=fn(),i=rt({props:e,name:t});return V({disablePast:!1,disableFuture:!1},i,{yearsPerRow:(n=i.yearsPerRow)!=null?n:3,minDate:Tt(a,i.minDate,s.minDate),maxDate:Tt(a,i.maxDate,s.maxDate)})}const oy=De("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:ya,maxHeight:ex,boxSizing:"border-box",position:"relative"}),iy=x.forwardRef(function(t,n){const a=sy(t,"MuiYearCalendar"),{autoFocus:s,className:i,value:o,defaultValue:l,referenceDate:c,disabled:d,disableFuture:u,disablePast:m,maxDate:p,minDate:h,onChange:g,readOnly:v,shouldDisableYear:w,disableHighlightToday:C,onYearFocus:b,hasFocus:T,onFocusedViewChange:y,yearsPerRow:S,timezone:R,gridLabelId:k}=a,E=Oe(a,ny),{value:M,handleValueChange:N,timezone:P}=gs({name:"YearCalendar",timezone:R,value:o,defaultValue:l,onChange:g,valueManager:Qt}),D=xa(P),L=jo(),_=We(),A=x.useMemo(()=>Qt.getInitialReferenceValue({value:M,utils:_,props:a,timezone:P,referenceDate:c,granularity:At.year}),[]),G=a,U=ay(G),B=x.useMemo(()=>_.getYear(D),[_,D]),W=x.useMemo(()=>M!=null?_.getYear(M):C?null:_.getYear(A),[M,_,C,A]),[K,be]=x.useState(()=>W||B),[ge,te]=nr({name:"YearCalendar",state:"hasFocus",controlled:T,default:s??!1}),F=he(X=>{te(X),y&&y(X)}),le=x.useCallback(X=>{if(m&&_.isBeforeYear(X,D)||u&&_.isAfterYear(X,D)||h&&_.isBeforeYear(X,h)||p&&_.isAfterYear(X,p))return!0;if(!w)return!1;const pe=_.startOfYear(X);return w(pe)},[u,m,p,h,D,w,_]),me=he((X,pe)=>{if(v)return;const Be=_.setYear(M??A,pe);N(Be)}),Q=he(X=>{le(_.setYear(M??A,X))||(be(X),F(!0),b==null||b(X))});x.useEffect(()=>{be(X=>W!==null&&X!==W?W:X)},[W]);const oe=he((X,pe)=>{switch(X.key){case"ArrowUp":Q(pe-S),X.preventDefault();break;case"ArrowDown":Q(pe+S),X.preventDefault();break;case"ArrowLeft":Q(pe+(L.direction==="ltr"?-1:1)),X.preventDefault();break;case"ArrowRight":Q(pe+(L.direction==="ltr"?1:-1)),X.preventDefault();break}}),ie=he((X,pe)=>{Q(pe)}),ye=he((X,pe)=>{K===pe&&F(!1)}),ce=x.useRef(null),ue=xr(n,ce);return x.useEffect(()=>{if(s||ce.current===null)return;const X=ce.current.querySelector('[tabindex="0"]');if(!X)return;const pe=X.offsetHeight,Be=X.offsetTop,Ve=ce.current.clientHeight,tt=ce.current.scrollTop,ne=Be+pe;pe>Ve||Be<tt||(ce.current.scrollTop=ne-Ve/2-pe/2)},[s]),r.jsx(oy,V({ref:ue,className:st(U.root,i),ownerState:G,role:"radiogroup","aria-labelledby":k},E,{children:_.getYearRange(h,p).map(X=>{const pe=_.getYear(X),Be=pe===W,Ve=d||le(X);return r.jsx(ty,{selected:Be,value:pe,onClick:me,onKeyDown:oe,autoFocus:ge&&pe===K,disabled:Ve,tabIndex:pe===K?0:-1,onFocus:ie,onBlur:ye,"aria-current":B===pe?"date":void 0,yearsPerRow:S,children:_.format(X,"year")},_.format(X,"year"))})}))}),ly=e=>ut("MuiPickersCalendarHeader",e),cy=ht("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),dy=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],uy=["ownerState"],hy=e=>{const{classes:t}=e;return ct({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},ly,t)},my=De("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),fy=De("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>V({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),py=De("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),xy=De(Kt,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})(({ownerState:e})=>V({marginRight:"auto"},e.view==="year"&&{[`.${cy.switchViewIcon}`]:{transform:"rotate(180deg)"}})),gy=De(Bp,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),yy=x.forwardRef(function(t,n){var a,s,i,o;const l=or(),c=We(),d=rt({props:t,name:"MuiPickersCalendarHeader"}),{slots:u,slotProps:m,components:p,currentMonth:h,disabled:g,disableFuture:v,disablePast:w,maxDate:C,minDate:b,onMonthChange:T,onViewChange:y,view:S,reduceAnimations:R,views:k,labelId:E,className:M,timezone:N}=d,P=Oe(d,dy),D=d,L=hy(d),_=(a=(s=u==null?void 0:u.switchViewButton)!=null?s:p==null?void 0:p.SwitchViewButton)!=null?a:xy,A=et({elementType:_,externalSlotProps:m==null?void 0:m.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(S)},ownerState:D,className:L.switchViewButton}),G=(i=(o=u==null?void 0:u.switchViewIcon)!=null?o:p==null?void 0:p.SwitchViewIcon)!=null?i:gy,U=et({elementType:G,externalSlotProps:m==null?void 0:m.switchViewIcon,ownerState:void 0,className:L.switchViewIcon}),B=Oe(U,uy),W=()=>T(c.addMonths(h,1),"left"),K=()=>T(c.addMonths(h,-1),"right"),be=Wx(h,{disableFuture:v,maxDate:C,timezone:N}),ge=Ux(h,{disablePast:w,minDate:b,timezone:N}),te=()=>{if(!(k.length===1||!y||g))if(k.length===2)y(k.find(F=>F!==S)||k[0]);else{const F=k.indexOf(S)!==0?0:1;y(k[F])}};return k.length===1&&k[0]==="year"?null:r.jsxs(my,V({},P,{ownerState:D,className:st(M,L.root),ref:n,children:[r.jsxs(fy,{role:"presentation",onClick:te,ownerState:D,"aria-live":"polite",className:L.labelContainer,children:[r.jsx(ol,{reduceAnimations:R,transKey:c.format(h,"monthAndYear"),children:r.jsx(py,{id:E,ownerState:D,className:L.label,children:c.format(h,"monthAndYear")})}),k.length>1&&!g&&r.jsx(_,V({},A,{children:r.jsx(G,V({},B))}))]}),r.jsx(Jn,{in:S==="day",children:r.jsx(Jp,{slots:u,slotProps:m,onGoToPrevious:K,isPreviousDisabled:ge,previousLabel:l.previousMonth,onGoToNext:W,isNextDisabled:be,nextLabel:l.nextMonth})})]}))}),vy=De("div")({overflow:"hidden",width:ya,maxHeight:ps,display:"flex",flexDirection:"column",margin:"0 auto"}),by=e=>ut("MuiDateCalendar",e);ht("MuiDateCalendar",["root","viewTransitionContainer"]);const jy=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],wy=e=>{const{classes:t}=e;return ct({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},by,t)};function Cy(e,t){var n,a,s,i,o,l,c;const d=We(),u=fn(),m=Yi(),p=rt({props:e,name:t});return V({},p,{loading:(n=p.loading)!=null?n:!1,disablePast:(a=p.disablePast)!=null?a:!1,disableFuture:(s=p.disableFuture)!=null?s:!1,openTo:(i=p.openTo)!=null?i:"day",views:(o=p.views)!=null?o:["year","day"],reduceAnimations:(l=p.reduceAnimations)!=null?l:m,renderLoading:(c=p.renderLoading)!=null?c:()=>r.jsx("span",{children:"..."}),minDate:Tt(d,p.minDate,u.minDate),maxDate:Tt(d,p.maxDate,u.maxDate)})}const Ty=De(vy,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",height:ps}),Py=De(ol,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),Dy=x.forwardRef(function(t,n){var a,s,i;const o=We(),l=es(),c=Cy(t,"MuiDateCalendar"),{autoFocus:d,onViewChange:u,value:m,defaultValue:p,referenceDate:h,disableFuture:g,disablePast:v,defaultCalendarMonth:w,onChange:C,onYearChange:b,onMonthChange:T,reduceAnimations:y,shouldDisableDate:S,shouldDisableMonth:R,shouldDisableYear:k,view:E,views:M,openTo:N,className:P,disabled:D,readOnly:L,minDate:_,maxDate:A,disableHighlightToday:G,focusedView:U,onFocusedViewChange:B,showDaysOutsideCurrentMonth:W,fixedWeekNumber:K,dayOfWeekFormatter:be,components:ge,componentsProps:te,slots:F,slotProps:le,loading:me,renderLoading:Q,displayWeekNumber:oe,yearsPerRow:ie,monthsPerRow:ye,timezone:ce}=c,ue=Oe(c,jy),{value:X,handleValueChange:pe,timezone:Be}=gs({name:"DateCalendar",timezone:ce,value:m,defaultValue:p,onChange:C,valueManager:Qt}),{view:Ve,setView:tt,focusedView:ne,setFocusedView:ve,goToNextView:H,setValueAndGoToNextView:Y}=Qi({view:E,views:M,openTo:N,onChange:pe,onViewChange:u,autoFocus:d,focusedView:U,onFocusedViewChange:B}),{referenceDate:we,calendarState:_e,changeFocusedDay:z,changeMonth:ee,handleChangeMonth:Pe,isDateDisabled:Me,onMonthSwitchingAnimationEnd:Ge}=Cg({value:X,defaultCalendarMonth:w,referenceDate:h,reduceAnimations:y,onMonthChange:T,minDate:_,maxDate:A,shouldDisableDate:S,disablePast:v,disableFuture:g,timezone:Be}),nt=D&&X||_,Lt=D&&X||A,Gt=`${l}-grid-label`,ir=ne!==null,xt=(a=(s=F==null?void 0:F.calendarHeader)!=null?s:ge==null?void 0:ge.CalendarHeader)!=null?a:yy,ba=et({elementType:xt,externalSlotProps:(i=le==null?void 0:le.calendarHeader)!=null?i:te==null?void 0:te.calendarHeader,additionalProps:{views:M,view:Ve,currentMonth:_e.currentMonth,onViewChange:tt,onMonthChange:(ze,Nt)=>Pe({newMonth:ze,direction:Nt}),minDate:nt,maxDate:Lt,disabled:D,disablePast:v,disableFuture:g,reduceAnimations:y,timezone:Be,labelId:Gt,slots:F,slotProps:le},ownerState:c}),ja=he(ze=>{const Nt=o.startOfMonth(ze),Fr=o.endOfMonth(ze),Xt=Me(ze)?Zr({utils:o,date:ze,minDate:o.isBefore(_,Nt)?Nt:_,maxDate:o.isAfter(A,Fr)?Fr:A,disablePast:v,disableFuture:g,isDateDisabled:Me,timezone:Be}):ze;Xt?(Y(Xt,"finish"),T==null||T(Nt)):(H(),ee(Nt)),z(Xt,!0)}),wa=he(ze=>{const Nt=o.startOfYear(ze),Fr=o.endOfYear(ze),Xt=Me(ze)?Zr({utils:o,date:ze,minDate:o.isBefore(_,Nt)?Nt:_,maxDate:o.isAfter(A,Fr)?Fr:A,disablePast:v,disableFuture:g,isDateDisabled:Me,timezone:Be}):ze;Xt?(Y(Xt,"finish"),b==null||b(Xt)):(H(),ee(Nt)),z(Xt,!0)}),pn=he(ze=>pe(ze&&qn(o,ze,X??we),"finish",Ve));x.useEffect(()=>{X!=null&&o.isValid(X)&&ee(X)},[X]);const _r=c,xn=wy(_r),Ae={disablePast:v,disableFuture:g,maxDate:A,minDate:_},de={disableHighlightToday:G,readOnly:L,disabled:D,timezone:Be,gridLabelId:Gt},Ca=x.useRef(Ve);x.useEffect(()=>{Ca.current!==Ve&&(ne===Ca.current&&ve(Ve,!0),Ca.current=Ve)},[ne,ve,Ve]);const pl=x.useMemo(()=>[X],[X]);return r.jsxs(Ty,V({ref:n,className:st(xn.root,P),ownerState:_r},ue,{children:[r.jsx(xt,V({},ba)),r.jsx(Py,{reduceAnimations:y,className:xn.viewTransitionContainer,transKey:Ve,ownerState:_r,children:r.jsxs("div",{children:[Ve==="year"&&r.jsx(iy,V({},Ae,de,{value:X,onChange:wa,shouldDisableYear:k,hasFocus:ir,onFocusedViewChange:ze=>ve("year",ze),yearsPerRow:ie,referenceDate:we})),Ve==="month"&&r.jsx(Kg,V({},Ae,de,{hasFocus:ir,className:P,value:X,onChange:ja,shouldDisableMonth:R,onFocusedViewChange:ze=>ve("month",ze),monthsPerRow:ye,referenceDate:we})),Ve==="day"&&r.jsx(jg,V({},_e,Ae,de,{onMonthSwitchingAnimationEnd:Ge,onFocusedDayChange:z,reduceAnimations:y,selectedDays:pl,onSelectedDaysChange:pn,shouldDisableDate:S,shouldDisableMonth:R,shouldDisableYear:k,hasFocus:ir,onFocusedViewChange:ze=>ve("day",ze),showDaysOutsideCurrentMonth:W,fixedWeekNumber:K,dayOfWeekFormatter:be,displayWeekNumber:oe,components:ge,componentsProps:te,slots:F,slotProps:le,loading:me,renderLoading:Q}))]})})]}))}),kr=({view:e,onViewChange:t,views:n,focusedView:a,onFocusedViewChange:s,value:i,defaultValue:o,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:m,disablePast:p,minDate:h,maxDate:g,shouldDisableDate:v,shouldDisableMonth:w,shouldDisableYear:C,reduceAnimations:b,onMonthChange:T,monthsPerRow:y,onYearChange:S,yearsPerRow:R,defaultCalendarMonth:k,components:E,componentsProps:M,slots:N,slotProps:P,loading:D,renderLoading:L,disableHighlightToday:_,readOnly:A,disabled:G,showDaysOutsideCurrentMonth:U,dayOfWeekFormatter:B,sx:W,autoFocus:K,fixedWeekNumber:be,displayWeekNumber:ge,timezone:te})=>r.jsx(Dy,{view:e,onViewChange:t,views:n.filter(Js),focusedView:a&&Js(a)?a:null,onFocusedViewChange:s,value:i,defaultValue:o,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:m,disablePast:p,minDate:h,maxDate:g,shouldDisableDate:v,shouldDisableMonth:w,shouldDisableYear:C,reduceAnimations:b,onMonthChange:T,monthsPerRow:y,onYearChange:S,yearsPerRow:R,defaultCalendarMonth:k,components:E,componentsProps:M,slots:N,slotProps:P,loading:D,renderLoading:L,disableHighlightToday:_,readOnly:A,disabled:G,showDaysOutsideCurrentMonth:U,dayOfWeekFormatter:B,sx:W,autoFocus:K,fixedWeekNumber:be,displayWeekNumber:ge,timezone:te}),il=x.forwardRef(function(t,n){var a,s,i,o;const l=or(),c=We(),d=zi(t,"MuiDesktopDatePicker"),u=V({day:kr,month:kr,year:kr},d.viewRenderers),m=V({},d,{viewRenderers:u,format:ms(c,d,!1),yearsPerRow:(a=d.yearsPerRow)!=null?a:4,slots:V({openPickerIcon:Hp,field:sl},d.slots),slotProps:V({},d.slotProps,{field:h=>{var g;return V({},us((g=d.slotProps)==null?void 0:g.field,h),el(d),{ref:n})},toolbar:V({hidden:!0},(s=d.slotProps)==null?void 0:s.toolbar)})}),{renderPicker:p}=Sg({props:m,valueManager:Qt,valueType:"date",getOpenDialogAriaText:(i=(o=m.localeText)==null?void 0:o.openDatePickerDialogue)!=null?i:l.openDatePickerDialogue,validator:va});return p()});il.propTypes={autoFocus:O.bool,className:O.string,closeOnSelect:O.bool,components:O.object,componentsProps:O.object,dayOfWeekFormatter:O.func,defaultCalendarMonth:O.any,defaultValue:O.any,disabled:O.bool,disableFuture:O.bool,disableHighlightToday:O.bool,disableOpenPicker:O.bool,disablePast:O.bool,displayWeekNumber:O.bool,fixedWeekNumber:O.number,format:O.string,formatDensity:O.oneOf(["dense","spacious"]),inputRef:wo,label:O.node,loading:O.bool,localeText:O.object,maxDate:O.any,minDate:O.any,monthsPerRow:O.oneOf([3,4]),name:O.string,onAccept:O.func,onChange:O.func,onClose:O.func,onError:O.func,onMonthChange:O.func,onOpen:O.func,onSelectedSectionsChange:O.func,onViewChange:O.func,onYearChange:O.func,open:O.bool,openTo:O.oneOf(["day","month","year"]),orientation:O.oneOf(["landscape","portrait"]),readOnly:O.bool,reduceAnimations:O.bool,referenceDate:O.any,renderLoading:O.func,selectedSections:O.oneOfType([O.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),O.number,O.shape({endIndex:O.number.isRequired,startIndex:O.number.isRequired})]),shouldDisableDate:O.func,shouldDisableMonth:O.func,shouldDisableYear:O.func,showDaysOutsideCurrentMonth:O.bool,slotProps:O.object,slots:O.object,sx:O.oneOfType([O.arrayOf(O.oneOfType([O.func,O.object,O.bool])),O.func,O.object]),timezone:O.string,value:O.any,view:O.oneOf(["day","month","year"]),viewRenderers:O.shape({day:O.func,month:O.func,year:O.func}),views:O.arrayOf(O.oneOf(["day","month","year"]).isRequired),yearsPerRow:O.oneOf([3,4])};const Sy=["props","getOpenDialogAriaText"],ky=e=>{var t,n,a;let{props:s,getOpenDialogAriaText:i}=e,o=Oe(e,Sy);const{slots:l,slotProps:c,className:d,sx:u,format:m,formatDensity:p,timezone:h,name:g,label:v,inputRef:w,readOnly:C,disabled:b,localeText:T}=s,y=We(),S=x.useRef(null),R=es(),k=(t=c==null||(n=c.toolbar)==null?void 0:n.hidden)!=null?t:!1,{open:E,actions:M,layoutProps:N,renderCurrentView:P,fieldProps:D}=Ki(V({},o,{props:s,inputRef:S,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),L=l.field,_=et({elementType:L,externalSlotProps:c==null?void 0:c.field,additionalProps:V({},D,k&&{id:R},!(b||C)&&{onClick:M.onOpen,onKeyDown:ox(M.onOpen)},{readOnly:C??!0,disabled:b,className:d,sx:u,format:m,formatDensity:p,timezone:h,label:v,name:g}),ownerState:s});_.inputProps=V({},_.inputProps,{"aria-label":i(D.value,y)});const A=V({textField:l.textField},_.slots),G=(a=l.layout)!=null?a:Zi,U=xr(S,_.inputRef,w);let B=R;k&&(v?B=`${R}-label`:B=void 0);const W=V({},c,{toolbar:V({},c==null?void 0:c.toolbar,{titleId:R}),mobilePaper:V({"aria-labelledby":B},c==null?void 0:c.mobilePaper)});return{renderPicker:()=>r.jsxs(Pr,{localeText:T,children:[r.jsx(L,V({},_,{slots:A,slotProps:W,inputRef:U})),r.jsx(nx,V({},M,{open:E,slots:l,slotProps:W,children:r.jsx(G,V({},N,W==null?void 0:W.layout,{slots:l,slotProps:W,children:P()}))}))]})}},ll=x.forwardRef(function(t,n){var a,s,i;const o=or(),l=We(),c=zi(t,"MuiMobileDatePicker"),d=V({day:kr,month:kr,year:kr},c.viewRenderers),u=V({},c,{viewRenderers:d,format:ms(l,c,!1),slots:V({field:sl},c.slots),slotProps:V({},c.slotProps,{field:p=>{var h;return V({},us((h=c.slotProps)==null?void 0:h.field,p),el(c),{ref:n})},toolbar:V({hidden:!1},(a=c.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:m}=ky({props:u,valueManager:Qt,valueType:"date",getOpenDialogAriaText:(s=(i=u.localeText)==null?void 0:i.openDatePickerDialogue)!=null?s:o.openDatePickerDialogue,validator:va});return m()});ll.propTypes={autoFocus:O.bool,className:O.string,closeOnSelect:O.bool,components:O.object,componentsProps:O.object,dayOfWeekFormatter:O.func,defaultCalendarMonth:O.any,defaultValue:O.any,disabled:O.bool,disableFuture:O.bool,disableHighlightToday:O.bool,disableOpenPicker:O.bool,disablePast:O.bool,displayWeekNumber:O.bool,fixedWeekNumber:O.number,format:O.string,formatDensity:O.oneOf(["dense","spacious"]),inputRef:wo,label:O.node,loading:O.bool,localeText:O.object,maxDate:O.any,minDate:O.any,monthsPerRow:O.oneOf([3,4]),name:O.string,onAccept:O.func,onChange:O.func,onClose:O.func,onError:O.func,onMonthChange:O.func,onOpen:O.func,onSelectedSectionsChange:O.func,onViewChange:O.func,onYearChange:O.func,open:O.bool,openTo:O.oneOf(["day","month","year"]),orientation:O.oneOf(["landscape","portrait"]),readOnly:O.bool,reduceAnimations:O.bool,referenceDate:O.any,renderLoading:O.func,selectedSections:O.oneOfType([O.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),O.number,O.shape({endIndex:O.number.isRequired,startIndex:O.number.isRequired})]),shouldDisableDate:O.func,shouldDisableMonth:O.func,shouldDisableYear:O.func,showDaysOutsideCurrentMonth:O.bool,slotProps:O.object,slots:O.object,sx:O.oneOfType([O.arrayOf(O.oneOfType([O.func,O.object,O.bool])),O.func,O.object]),timezone:O.string,value:O.any,view:O.oneOf(["day","month","year"]),viewRenderers:O.shape({day:O.func,month:O.func,year:O.func}),views:O.arrayOf(O.oneOf(["day","month","year"]).isRequired),yearsPerRow:O.oneOf([3,4])};const Ny=["desktopModeMediaQuery"],My=x.forwardRef(function(t,n){const a=rt({props:t,name:"MuiDatePicker"}),{desktopModeMediaQuery:s=ix}=a,i=Oe(a,Ny);return Ja(s,{defaultMatches:!0})?r.jsx(il,V({ref:n},i)):r.jsx(ll,V({ref:n},i))});var Xa={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},a=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},s=function(c,d){var u=c.match(/(P+)(p+)?/)||[],m=u[1],p=u[2];if(!p)return n(c,d);var h;switch(m){case"P":h=d.dateTime({width:"short"});break;case"PP":h=d.dateTime({width:"medium"});break;case"PPP":h=d.dateTime({width:"long"});break;case"PPPP":default:h=d.dateTime({width:"full"});break}return h.replace("{{date}}",n(m,d)).replace("{{time}}",a(p,d))},i={p:a,P:s},o=i;t.default=o,e.exports=t.default})(Xa,Xa.exports);var Ay=Xa.exports;const Ry=Kl(Ay),Ey={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Iy={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Oy{constructor(t){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Ey,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=i=>typeof i>"u"?new Date:i===null?null:new Date(i),this.dateWithTimezone=i=>this.date(i),this.getTimezone=()=>"default",this.setTimezone=i=>i,this.toJsDate=i=>i,this.getCurrentLocaleCode=()=>{var i;return((i=this.locale)==null?void 0:i.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=i=>{const o=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return i.match(o).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=i=>this.expandFormat(i).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=i=>i===null,this.formatNumber=i=>i,this.getMeridiemText=i=>i==="am"?"AM":"PM";const{locale:n,formats:a,longFormatters:s}=t;this.locale=n,this.formats=V({},Iy,a),this.longFormatters=s}}class Pn extends Oy{constructor({locale:t,formats:n}={}){if(typeof On!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:t??is,formats:n,longFormatters:Ry}),this.parseISO=a=>tr(a),this.toISO=a=>Xh(a,{format:"extended"}),this.parse=(a,s)=>a===""?null:sf(a,s,new Date,{locale:this.locale}),this.isValid=a=>fi(this.date(a)),this.format=(a,s)=>this.formatByString(a,this.formats[s]),this.formatByString=(a,s)=>er(a,s,{locale:this.locale}),this.getDiff=(a,s,i)=>{switch(i){case"years":return eh(a,this.date(s));case"quarters":return Xu(a,this.date(s));case"months":return xi(a,this.date(s));case"weeks":return Ju(a,this.date(s));case"days":return pi(a,this.date(s));case"hours":return Qu(a,this.date(s));case"minutes":return Ku(a,this.date(s));case"seconds":return Zu(a,this.date(s));default:return ma(a,this.date(s))}},this.isEqual=(a,s)=>a===null&&s===null?!0:cm(a,s),this.isSameYear=(a,s)=>df(a,s),this.isSameMonth=(a,s)=>cf(a,s),this.isSameDay=(a,s)=>Uu(a,s),this.isSameHour=(a,s)=>lf(a,s),this.isAfter=(a,s)=>Ra(a,s),this.isAfterYear=(a,s)=>Ra(a,Na(s)),this.isAfterDay=(a,s)=>Ra(a,qa(s)),this.isBefore=(a,s)=>Br(a,s),this.isBeforeYear=(a,s)=>Br(a,bn(s)),this.isBeforeDay=(a,s)=>Br(a,Rr(s)),this.isWithinRange=(a,[s,i])=>uf(a,{start:s,end:i}),this.startOfYear=a=>bn(a),this.startOfMonth=a=>Us(a),this.startOfWeek=a=>fr(a,{locale:this.locale}),this.startOfDay=a=>Rr(a),this.endOfYear=a=>Na(a),this.endOfMonth=a=>Qa(a),this.endOfWeek=a=>Ma(a,{locale:this.locale}),this.endOfDay=a=>qa(a),this.addYears=(a,s)=>$s(a,s),this.addMonths=(a,s)=>_n(a,s),this.addWeeks=(a,s)=>Bu(a,s),this.addDays=(a,s)=>On(a,s),this.addHours=(a,s)=>Iu(a,s),this.addMinutes=(a,s)=>Lu(a,s),this.addSeconds=(a,s)=>$u(a,s),this.getYear=a=>lm(a),this.getMonth=a=>rm(a),this.getDate=a=>Zh(a),this.getHours=a=>Jh(a),this.getMinutes=a=>tm(a),this.getSeconds=a=>nm(a),this.getMilliseconds=a=>em(a),this.setYear=(a,s)=>Ef(a,s),this.setMonth=(a,s)=>Sf(a,s),this.setDate=(a,s)=>kf(a,s),this.setHours=(a,s)=>Nf(a,s),this.setMinutes=(a,s)=>Af(a,s),this.setSeconds=(a,s)=>Rf(a,s),this.setMilliseconds=(a,s)=>Mf(a,s),this.getDaysInMonth=a=>Ti(a),this.getNextMonth=a=>_n(a,1),this.getPreviousMonth=a=>_n(a,-1),this.getMonthArray=a=>{const i=[bn(a)];for(;i.length<12;){const o=i[i.length-1];i.push(this.getNextMonth(o))}return i},this.mergeDateAndTime=(a,s)=>this.setSeconds(this.setMinutes(this.setHours(a,this.getHours(s)),this.getMinutes(s)),this.getSeconds(s)),this.getWeekdays=()=>{const a=new Date;return th({start:fr(a,{locale:this.locale}),end:Ma(a,{locale:this.locale})}).map(s=>this.formatByString(s,"EEEEEE"))},this.getWeekArray=a=>{const s=fr(Us(a),{locale:this.locale}),i=Ma(Qa(a),{locale:this.locale});let o=0,l=s;const c=[];for(;Br(l,i);){const d=Math.floor(o/7);c[d]=c[d]||[],c[d].push(l),l=On(l,1),o+=1}return c},this.getWeekNumber=a=>im(a,{locale:this.locale}),this.getYearRange=(a,s)=>{const i=bn(a),o=Na(s),l=[];let c=i;for(;Br(c,o);)l.push(c),c=$s(c,1);return l}}}function cl(e,t){return!e||e===0?0:(t-e)/e*100}function dl(e){const{initialValue:t,currentValue:n,createdAt:a}=e,s=new Date(a),i=new Date,o=cl(t,n),l=Math.max(1,Math.floor((i.getTime()-s.getTime())/(1e3*60*60*24))),c=rr(o,l,1),d=rr(o,l,7),u=rr(o,l,30),m=rr(o,l,365);return{daily:Math.round(c*100)/100,weekly:Math.round(d*100)/100,monthly:Math.round(u*100)/100,yearly:Math.round(m*100)/100}}function rr(e,t,n){if(t<n)return e;const a=t/n;return e/a}function Dn(e,t){const n=dl(e),a=Fy(t);return{daily:Math.round(n.daily*a.daily*100)/100,weekly:Math.round(n.weekly*a.weekly*100)/100,monthly:Math.round(n.monthly*a.monthly*100)/100,yearly:Math.round(n.yearly*a.yearly*100)/100}}function _y(e){return{GOLD:.8,VFF:1.2,VESAF:1.1,SSISCA:1,HPG:1.3,VCB:.9}[e.toUpperCase()]||1}function Fy(e){const t=_y(e),n=new Date,a=n.getHours(),s=n.getDay(),i=a>=9&&a<=15?1+(t-1)*.5:.8,o=s>=1&&s<=5?1+(t-1)*.3:.9,l=1+(t-1)*.2,c=1+(t-1)*.1;return{daily:i,weekly:o,monthly:l,yearly:c}}function Sn(e,t){if(!t||t.length===0)return dl(e);const{currentValue:n}=e,a=t.filter(u=>u.side==="BUY").reduce((u,m)=>u+m.quantity*m.price,0),s=t.filter(u=>u.side==="SELL").reduce((u,m)=>u+m.quantity*m.price,0),i=a-s,o=cl(i,n),l=new Date(e.createdAt),d=Math.max(1,Math.floor((new Date().getTime()-l.getTime())/(1e3*60*60*24)));return{daily:rr(o,d,1),weekly:rr(o,d,7),monthly:rr(o,d,30),yearly:rr(o,d,365)}}function co(e){return e===0?"0.00%":e>0?`+${e.toFixed(2)}%`:`${e.toFixed(2)}%`}function uo(e){return e>0?"text-green-600":e<0?"text-red-600":"text-gray-600"}const ys=(e={})=>{const{initialFilters:t={},autoFetch:n=!0}=e,{accountId:a}=Pt(),[s,i]=x.useState([]),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,m]=x.useState({createdBy:a,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC",...t}),[p,h]=x.useState({page:1,limit:25,total:0,totalPages:0}),g=x.useCallback(async N=>{l(!0),d(null);try{const P=new URLSearchParams;Object.entries(N).forEach(([U,B])=>{B!=null&&B!==""&&P.append(U,B.toString())});const L=`${N.createdBy?`/api/v1/assets/user/${N.createdBy}`:"/api/v1/assets"}?${P.toString()}`,_=await fetch(L);if(!_.ok)throw new Error(`HTTP ${_.status}: ${_.statusText}`);const A=await _.json(),G=U=>{const B={initialValue:U.initialValue||0,currentValue:U.currentValue||0,createdAt:U.createdAt,updatedAt:U.updatedAt};let W;return U.trades&&U.trades.length>0?W=Sn(B,U.trades):W=Dn(B,U.symbol),{...U,createdAt:U.createdAt,updatedAt:U.updatedAt,initialValue:U.initialValue,initialQuantity:U.initialQuantity,currentValue:U.currentValue,currentQuantity:U.currentQuantity,hasTrades:U.hasTrades,displayName:U.displayName,totalValue:U.hasTrades?U.totalValue||U.currentValue||0:U.initialValue||0,totalQuantity:U.hasTrades?U.totalQuantity||U.currentQuantity||0:U.initialQuantity||0,currentPrice:U.currentPrice||0,avgCost:U.avgCost||0,quantity:U.hasTrades?U.currentQuantity||0:U.initialQuantity||0,performance:W}};if(Array.isArray(A)){const U=A.map(G);i(U),h({page:1,limit:U.length,total:U.length,totalPages:1})}else{const U=(A.data||[]).map(G);i(U),h({page:A.page||1,limit:A.limit||25,total:A.total||0,totalPages:A.totalPages||0})}}catch(P){console.error("Error fetching assets:",P),d(P instanceof Error?P.message:"Failed to fetch assets"),i([]),h({page:1,limit:25,total:0,totalPages:0})}finally{l(!1)}},[]),v=x.useCallback(N=>{m(N),n&&g(N)},[n]),w=x.useCallback((N,P)=>{const D={...u,[N]:P};v(D)},[u,v]),C=x.useCallback(()=>{v({createdBy:a,portfolioId:void 0,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC"})},[v,a]),b=x.useCallback(()=>{g(u)},[u,g]),T=x.useCallback(async()=>{l(!0),d(null);try{await g(u)}catch(N){console.error("forceRefresh error:",N);const P=N instanceof Error?N.message:"Failed to refresh assets";d(P)}finally{l(!1)}},[u,g]),y=x.useCallback(N=>{w("page",N)},[w]),S=x.useCallback(N=>{w("limit",N),w("page",1)},[w]),R=x.useCallback((N,P)=>{w("sortBy",N),w("sortOrder",P)},[w]),k=x.useCallback(async(N,P)=>{try{console.log("useAssets updateAsset called with:",{id:N,data:P}),l(!0),d(null);const D={...P};console.log("Mapped backend data:",D),console.log("Calling apiService.updateAsset...");const L=await Le.updateAsset(N,D);console.log("apiService.updateAsset result:",L);const _={initialValue:L.initialValue||0,currentValue:L.currentValue||0,createdAt:L.createdAt,updatedAt:L.updatedAt};let A;L.trades&&L.trades.length>0?A=Sn(_,L.trades):A=Dn(_,L.symbol);const G={...L,totalValue:L.hasTrades?L.totalValue||L.currentValue||0:L.initialValue||0,totalQuantity:L.hasTrades?L.totalQuantity||L.currentQuantity||0:L.initialQuantity||0,quantity:L.hasTrades?L.currentQuantity||0:L.initialQuantity||0,performance:A};return i(U=>{console.log("Previous assets:",U),console.log("Asset to update ID:",N),console.log("Frontend asset data:",G);const B=U.map(W=>{if(W.id===N){const K={...W,...G};return console.log("Updated asset:",K),K}return W});return console.log("New assets state:",B),B}),G}catch(D){console.error("Error in updateAsset:",D);const L=D instanceof Error?D.message:"Failed to update asset";throw d(L),D}finally{l(!1)}},[]),E=x.useCallback(async N=>{try{l(!0),d(null);const P=await Le.createAsset(N),D={initialValue:P.initialValue||0,currentValue:P.currentValue||0,createdAt:P.createdAt,updatedAt:P.updatedAt};let L;P.trades&&P.trades.length>0?L=Sn(D,P.trades):L=Dn(D,P.symbol);const _={...P,totalValue:P.hasTrades?P.totalValue||P.currentValue||0:P.initialValue||0,totalQuantity:P.hasTrades?P.totalQuantity||P.currentQuantity||0:P.initialQuantity||0,quantity:P.hasTrades?P.currentQuantity||0:P.initialQuantity||0,performance:L};return i(A=>[_,...A]),_}catch(P){const D=P instanceof Error?P.message:"Failed to create asset";throw d(D),P}finally{l(!1)}},[]),M=x.useCallback(async N=>{try{l(!0),d(null),await Le.deleteAsset(N),i(P=>P.filter(D=>D.id!==N)),h(P=>({...P,total:Math.max(0,P.total-1)}))}catch(P){const D=P instanceof Error?P.message:"Failed to delete asset";throw d(D),P}finally{l(!1)}},[u,g]);return x.useEffect(()=>{a&&u.createdBy!==a&&m(N=>({...N,createdBy:a}))},[a]),x.useEffect(()=>{n&&g(u)},[n,g,u]),x.useEffect(()=>{const N=setInterval(()=>{if(s.length>0){const P=s.map(D=>{const L={initialValue:D.initialValue||0,currentValue:D.currentValue||0,createdAt:D.createdAt,updatedAt:D.updatedAt};let _;return D.trades&&D.trades.length>0?_=Sn(L,D.trades):_=Dn(L,D.symbol),{...D,totalValue:D.hasTrades?D.totalValue||D.currentValue||0:D.initialValue||0,totalQuantity:D.hasTrades?D.totalQuantity||D.currentQuantity||0:D.initialQuantity||0,quantity:D.hasTrades?D.currentQuantity||0:D.initialQuantity||0,performance:_}});i(P)}},3e5);return()=>clearInterval(N)},[s]),{assets:s,loading:o,error:c,pagination:p,setFilters:v,updateFilter:w,clearFilters:C,refresh:b,forceRefresh:T,goToPage:y,setPageSize:S,setSorting:R,updateAsset:k,createAsset:E,deleteAsset:M}};var it=(e=>(e.BUY="BUY",e.SELL="SELL",e))(it||{}),mt=(e=>(e.MARKET="MARKET",e.LIMIT="LIMIT",e.STOP="STOP",e))(mt||{}),pr=(e=>(e.MANUAL="MANUAL",e.API="API",e.IMPORT="IMPORT",e))(pr||{}),ul=(e=>(e.STOCK="STOCK",e.BOND="BOND",e.ETF="ETF",e.MUTUAL_FUND="MUTUAL_FUND",e.CRYPTO="CRYPTO",e.COMMODITY="COMMODITY",e.REIT="REIT",e.GOLD="GOLD",e.DEPOSIT="DEPOSIT",e.CASH="CASH",e.OTHER="OTHER",e))(ul||{});const Za={STOCK:"Cổ phiếu",BOND:"Trái phiếu",ETF:"Quỹ ETF",MUTUAL_FUND:"Quỹ tương hỗ",CRYPTO:"Tiền điện tử",COMMODITY:"Hàng hóa",REIT:"Bất động sản",GOLD:"Vàng",DEPOSIT:"Tiền gửi",CASH:"Tiền mặt",OTHER:"Khác"},Vy=ko({portfolioId:dr().uuid("Invalid portfolio ID").required("Portfolio is required"),assetId:dr().uuid("Invalid asset ID").required("Asset is required"),tradeDate:dr().required("Trade date is required"),side:ws().oneOf(Object.values(it)).required("Trade side is required"),quantity:gn().positive("Quantity must be positive").min(.01,"Quantity must be at least 0.01").required("Quantity is required"),price:gn().positive("Price must be positive").min(.01,"Price must be at least 0.01").required("Price is required"),fee:gn().min(0,"Fee cannot be negative").optional(),tax:gn().min(0,"Tax cannot be negative").optional(),tradeType:ws().oneOf(Object.values(mt)).optional(),notes:dr().max(500,"Notes cannot exceed 500 characters").optional()}),kn=({field:e,label:t,error:n,helperText:a,disabled:s,inputProps:i,currency:o})=>{const[l,c]=x.useState(""),[d,u]=x.useState(!1),m=C=>{if(!C||C==="")return"";const b=typeof C=="string"?parseFloat(C):C;return isNaN(b)?"":dt(b,o==="VND"?0:2)},p=C=>{if(!C||C.trim()==="")return"";const b=C.replace(/,/g,"").trim(),T=parseFloat(b);return isNaN(T)?"":T.toString()},h=C=>{if(!C)return!0;const b=C.replace(/,/g,"").trim();return/^\d*\.?\d*$/.test(b)};x.useEffect(()=>{d||c(m(e.value))},[e.value,d]);const g=()=>{var b;u(!0);let C=((b=e.value)==null?void 0:b.toString())||"";C.includes(".")&&(C=C.replace(/\.?0+$/,""),C.endsWith(".")&&(C=C.slice(0,-1))),c(C)},v=()=>{u(!1);const C=p(l);C?e.onChange(parseFloat(C)):e.onChange("");const b=m(e.value);c(b)},w=C=>{const b=C.target.value;if(!h(b))return;c(b);const T=p(b);T?e.onChange(parseFloat(T)):b===""&&e.onChange("")};return r.jsx(ot,{value:l,onChange:w,onFocus:g,onBlur:v,label:t,type:"text",fullWidth:!0,error:n,helperText:a,disabled:s,inputProps:i,InputProps:{startAdornment:o?r.jsx(f,{variant:"body2",sx:{mr:1,color:"text.secondary"},children:Ai[o]||o}):void 0}})},Kn=({onSubmit:e,initialData:t,isLoading:n=!1,error:a,mode:s="create",defaultPortfolioId:i,showSubmitButton:o=!0,formRef:l})=>{const{accountId:c}=Pt(),{portfolios:d,isLoading:u,error:m}=ca(c),{assets:p,loading:h,error:g}=ys(),{control:v,handleSubmit:w,watch:C,setValue:b,formState:{errors:T,isValid:y}}=No({resolver:Ei(Vy),defaultValues:{portfolioId:(t==null?void 0:t.portfolioId)||i||"",assetId:(t==null?void 0:t.assetId)||"",tradeDate:(t==null?void 0:t.tradeDate)||new Date().toISOString(),side:(t==null?void 0:t.side)||it.BUY,quantity:(t==null?void 0:t.quantity)||0,price:(t==null?void 0:t.price)||0,fee:(t==null?void 0:t.fee)||0,tax:(t==null?void 0:t.tax)||0,tradeType:(t==null?void 0:t.tradeType)||mt.MARKET,notes:(t==null?void 0:t.notes)||""}}),S=C("quantity"),R=C("price"),k=C("fee")||0,E=C("tax")||0,M=C("portfolioId"),N=C("assetId"),P=d==null?void 0:d.find(B=>B.portfolioId===M),D=(P==null?void 0:P.baseCurrency)||"VND";x.useEffect(()=>{if(N&&p){const B=p.find(W=>W.id===N);B&&B.currentPrice&&B.currentPrice>0&&b("price",B.currentPrice)}},[N,p,b]);const L=x.useMemo(()=>{const B=Number(S)||0,W=Number(R)||0,K=Number(k)||0,be=Number(E)||0,ge=B*W,te=ge+K+be;return{value:ge,cost:te,fee:K,tax:be}},[S,R,k,E]);x.useEffect(()=>{t&&s==="edit"&&(b("portfolioId",t.portfolioId||""),b("assetId",t.assetId||""),b("tradeDate",t.tradeDate||new Date().toISOString()),b("side",t.side||it.BUY),b("quantity",t.quantity||0),b("price",t.price||0),b("fee",t.fee||0),b("tax",t.tax||0),b("tradeType",t.tradeType||mt.MARKET),b("notes",t.notes||""))},[t,s,b]);const _=async B=>{try{const W=C(),K={portfolioId:W.portfolioId,assetId:W.assetId,tradeDate:typeof W.tradeDate=="string"?W.tradeDate:W.tradeDate.toISOString(),side:W.side,quantity:W.quantity,price:W.price,fee:W.fee||0,tax:W.tax||0,tradeType:W.tradeType||mt.MARKET,notes:W.notes||""};await e(K)}catch(W){console.error("Error submitting trade form:",W)}},A=B=>B===it.BUY?"success":"error",G=B=>B===it.BUY?"↗":"↘",U=()=>{if(N&&p){const B=p.find(W=>W.id===N);B&&B.currentPrice&&B.currentPrice>0&&b("price",B.currentPrice)}};return u||h?r.jsx(Pr,{dateAdapter:Pn,children:r.jsx(Ce,{children:r.jsx(Te,{children:r.jsxs(j,{display:"flex",alignItems:"center",gap:2,mb:3,children:[r.jsx(Ue,{size:20}),r.jsx(f,{variant:"h5",children:"Loading trade form..."})]})})})}):!(d!=null&&d.length)&&!u?r.jsx(Pr,{dateAdapter:Pn,children:r.jsx(Ce,{children:r.jsxs(Te,{children:[r.jsx(Ye,{severity:"error",sx:{mb:3},children:"No portfolios available. Please create a portfolio first."}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:2},children:m?`Error: ${m}`:"No portfolios found. Please check if the backend is running and try again."})]})})}):!(p!=null&&p.length)&&!h?r.jsx(Pr,{dateAdapter:Pn,children:r.jsx(Ce,{children:r.jsxs(Te,{children:[r.jsx(Ye,{severity:"error",sx:{mb:3},children:"No assets available. Please create an asset first."}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:2},children:g?`Error: ${g}`:"No assets found. Please check if the backend is running and try again."})]})})}):r.jsxs(Pr,{dateAdapter:Pn,children:[a&&r.jsx(Ye,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:a}),r.jsxs("form",{ref:l,onSubmit:w(_),children:[r.jsxs(j,{mb:1.5,children:[r.jsx(f,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Basic Information"}),r.jsxs(I,{container:!0,spacing:1.5,children:[r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"portfolioId",control:v,render:({field:B})=>r.jsxs(vt,{fullWidth:!0,error:!!T.portfolioId,children:[r.jsx(bt,{children:"Portfolio *"}),r.jsx(jt,{...B,label:"Portfolio *",disabled:n||u,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:u?r.jsx(xe,{disabled:!0,children:"Loading portfolios..."}):(d==null?void 0:d.length)>0?d.map(W=>r.jsx(xe,{value:W.portfolioId,children:W.name},W.portfolioId)):r.jsx(xe,{disabled:!0,children:"No portfolios found"})}),T.portfolioId&&r.jsx(f,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:T.portfolioId.message})]})})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"assetId",control:v,render:({field:B})=>r.jsxs(vt,{fullWidth:!0,error:!!T.assetId,children:[r.jsx(bt,{children:"Asset *"}),r.jsx(jt,{...B,label:"Asset *",disabled:n||h,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:h?r.jsxs(xe,{disabled:!0,children:[r.jsx(Ue,{size:20}),r.jsx("span",{style:{marginLeft:8},children:"Loading assets..."})]}):(p==null?void 0:p.length)===0?r.jsx(xe,{disabled:!0,children:"No assets available"}):p==null?void 0:p.map(W=>r.jsxs(xe,{value:W.id,children:[W.symbol||"N/A"," - ",W.name]},W.id))}),T.assetId&&r.jsx(f,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:T.assetId.message})]})})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"tradeDate",control:v,render:({field:B})=>{var W;return r.jsx(My,{label:"Trade Date *",disabled:n,value:(()=>{try{if(!B.value)return new Date;if(typeof B.value=="string"){const K=new Date(B.value);return isNaN(K.getTime())?new Date:K}return B.value}catch{return new Date}})(),onChange:K=>{try{K&&!isNaN(K.getTime())?B.onChange(K.toISOString()):B.onChange(new Date().toISOString())}catch{B.onChange(new Date().toISOString())}},slotProps:{textField:{fullWidth:!0,error:!!T.tradeDate,helperText:(W=T.tradeDate)==null?void 0:W.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}}})}})})]})]}),r.jsxs(j,{mb:1.5,children:[r.jsx(f,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Details"}),r.jsxs(I,{container:!0,spacing:1.5,children:[r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"side",control:v,render:({field:B})=>r.jsxs(vt,{fullWidth:!0,error:!!T.side,children:[r.jsx(bt,{children:"Trade Side *"}),r.jsxs(jt,{...B,label:"Trade Side *",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[r.jsx(xe,{value:it.BUY,children:r.jsx(j,{display:"flex",alignItems:"center",gap:1,children:r.jsx(f,{color:"success.main",fontWeight:"medium",children:"↗ BUY"})})}),r.jsx(xe,{value:it.SELL,children:r.jsx(j,{display:"flex",alignItems:"center",gap:1,children:r.jsx(f,{color:"error.main",fontWeight:"medium",children:"↘ SELL"})})})]}),T.side&&r.jsx(f,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:T.side.message})]})})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"quantity",control:v,render:({field:B})=>{var W;return r.jsx(kn,{field:B,label:"Quantity *",error:!!T.quantity,helperText:(W=T.quantity)==null?void 0:W.message,disabled:n,inputProps:{step:"0.01",min:"0.01"}})}})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"price",control:v,render:({field:B})=>{var W;return r.jsxs(j,{sx:{position:"relative"},children:[r.jsx(kn,{field:B,label:`Price per Unit (${D}) *`,error:!!T.price,helperText:(W=T.price)==null?void 0:W.message,disabled:n,inputProps:{step:"0.01",min:"0.01"},currency:D}),N&&r.jsx(Zn,{title:"Refresh market price",children:r.jsx(Kt,{size:"small",onClick:U,disabled:n,sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",zIndex:1,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:r.jsx(Il,{fontSize:"small"})})})]})}})})]})]}),r.jsxs(j,{mb:1.5,children:[r.jsx(f,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Additional Information"}),r.jsxs(I,{container:!0,spacing:1.5,children:[r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"fee",control:v,render:({field:B})=>{var W;return r.jsx(kn,{field:B,label:`Trading Fee (${D})`,error:!!T.fee,helperText:(W=T.fee)==null?void 0:W.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:D})}})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"tax",control:v,render:({field:B})=>{var W;return r.jsx(kn,{field:B,label:`Tax (${D})`,error:!!T.tax,helperText:(W=T.tax)==null?void 0:W.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:D})}})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(gt,{name:"tradeType",control:v,render:({field:B})=>r.jsxs(vt,{fullWidth:!0,error:!!T.tradeType,children:[r.jsx(bt,{children:"Trade Type"}),r.jsxs(jt,{...B,label:"Trade Type",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[r.jsx(xe,{value:mt.MARKET,children:"Market Order"}),r.jsx(xe,{value:mt.LIMIT,children:"Limit Order"}),r.jsx(xe,{value:mt.STOP,children:"Stop Order"})]}),T.tradeType&&r.jsx(f,{variant:"caption",color:"error",children:T.tradeType.message})]})})}),r.jsx(I,{item:!0,xs:12,children:r.jsx(gt,{name:"notes",control:v,render:({field:B})=>{var W;return r.jsx(ot,{...B,label:"Notes",multiline:!0,rows:3,fullWidth:!0,error:!!T.notes,helperText:(W=T.notes)==null?void 0:W.message,disabled:n,placeholder:"Additional notes about this trade...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}})})]})]}),r.jsxs(j,{mb:2,p:1.5,sx:{bgcolor:"grey.50",borderRadius:2,border:1,borderColor:"grey.200"},children:[r.jsx(f,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Summary"}),r.jsxs(I,{container:!0,spacing:1.5,children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),r.jsx(f,{variant:"h6",fontWeight:"bold",color:"info.main",children:q(L.value,D)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),r.jsx(f,{variant:"h6",fontWeight:"bold",color:"warning.main",children:q(L.fee+L.tax,D)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),r.jsx(f,{variant:"h6",fontWeight:"bold",color:"primary.main",children:q(L.cost,D)})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Side"}),r.jsx($e,{label:C("side"),color:A(C("side")),icon:r.jsx("span",{children:G(C("side"))}),size:"small",sx:{fontWeight:600}})]})})]})]}),o&&r.jsx(j,{display:"flex",justifyContent:"flex-end",sx:{mt:2},children:r.jsx(Qe,{type:"submit",variant:"contained",disabled:!y||n,startIcon:n?r.jsx(Ue,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:n?"Processing...":s==="create"?"Create Trade":"Update Trade"})})]})]})},Ly=({open:e,onClose:t,onSubmit:n,initialData:a,isLoading:s=!1,error:i})=>{const o=x.useRef(null),l=async d=>{try{await n(d),t()}catch(u){console.error("Error updating trade:",u)}},c=()=>{o.current&&o.current.requestSubmit()};return r.jsxs(tn,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh",maxHeight:"85vh",overflow:"hidden"}},children:[r.jsx(Xn,{children:r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsx(f,{variant:"h6",children:"Edit Trade"}),r.jsx(Kt,{onClick:t,size:"small",children:r.jsx(Co,{})})]})}),r.jsx(rn,{dividers:!0,sx:{overflow:"auto",maxHeight:"calc(85vh - 100px)",p:0},children:r.jsx(j,{sx:{p:2},children:r.jsx(Kn,{onSubmit:l,initialData:a,isLoading:s,error:i,mode:"edit",showSubmitButton:!1,formRef:o})})}),r.jsxs(nn,{sx:{p:2},children:[r.jsx(Qe,{onClick:t,disabled:s,sx:{textTransform:"none"},children:"Cancel"}),r.jsx(Qe,{onClick:c,variant:"contained",disabled:s,startIcon:s?r.jsx(Ue,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:s?"Updating...":"Update Trade"})]})]})},$y=({trade:e,tradeDetails:t=[],onEdit:n,isLoading:a=!1})=>{const s=h=>h===it.BUY?"success":"error",i=h=>h===it.BUY?r.jsx(wt,{}):r.jsx(Ft,{}),o=h=>{switch(h){case mt.MARKET:return"primary";case mt.LIMIT:return"secondary";case mt.STOP:return"warning";default:return"default"}},l=h=>{switch(h){case pr.MANUAL:return"info";case pr.API:return"success";case pr.IMPORT:return"warning";default:return"default"}},c=t.reduce((h,g)=>h+g.matchedQty,0),d=t.reduce((h,g)=>h+g.pnl,0),u=e.quantity*e.price,m=(Number(e.fee)||0)+(Number(e.tax)||0),p=u+m;return r.jsxs(j,{children:[r.jsxs(j,{sx:{bgcolor:"grey.50",p:2,borderRadius:2,mb:2,border:1,borderColor:"grey.200"},children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(f,{variant:"h5",component:"h2",fontWeight:"bold",color:"primary",children:"Trade Details"}),r.jsxs(j,{display:"flex",gap:1,children:[r.jsx($e,{label:e.assetSymbol,color:"primary",variant:"outlined",size:"small",sx:{fontWeight:600}}),r.jsx($e,{label:e.side,color:s(e.side),icon:i(e.side),size:"small",sx:{fontWeight:600}}),r.jsx($e,{label:e.tradeType,color:o(e.tradeType),variant:"outlined",size:"small",sx:{fontWeight:600}})]})]}),r.jsx(j,{display:"flex",gap:1,children:n&&r.jsx(Qe,{variant:"contained",startIcon:r.jsx(To,{}),onClick:()=>n(e),sx:{textTransform:"none",fontWeight:600,px:3,py:1},children:"Edit Trade"})})]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:[e.assetName," • ",er(tr(e.tradeDate.toString()),"MMM dd, yyyy HH:mm")]})]}),r.jsxs(I,{container:!0,spacing:2,mb:2,children:[r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(Ce,{sx:{boxShadow:2,height:"100%"},children:r.jsxs(Te,{children:[r.jsx(f,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Basic Information"}),r.jsxs(I,{container:!0,spacing:1.5,children:[r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade ID"}),r.jsxs(f,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[e.tradeId.slice(0,8),"..."]})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Date & Time"}),r.jsx(f,{variant:"body2",fontWeight:"medium",children:er(tr(e.tradeDate.toString()),"MMM dd, yyyy HH:mm")})]}),r.jsxs(I,{item:!0,xs:12,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset"}),r.jsxs(f,{variant:"body2",fontWeight:"medium",children:[e.assetSymbol," - ",e.assetName]})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Type"}),r.jsx($e,{label:e.tradeType,color:o(e.tradeType),size:"small"})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Source"}),r.jsx($e,{label:e.source,color:l(e.source),size:"small"})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:"Created"}),r.jsx(f,{variant:"body2",children:er(tr(e.createdAt.toString()),"MMM dd, yyyy")})]})]})]})})}),r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(Ce,{sx:{boxShadow:2,height:"100%"},children:r.jsxs(Te,{children:[r.jsx(f,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Financial Metrics"}),(e.totalValue!==u||e.totalCost!==p)&&r.jsx(Ye,{severity:"info",sx:{mb:2,fontSize:"0.75rem"},children:r.jsxs(f,{variant:"caption",children:[r.jsx("strong",{children:"Note:"})," Values shown are calculated from quantity × price. Database values: Total Value: ",q(Number(e.totalValue)||0),", Total Cost: ",q(Number(e.totalCost)||0)]})}),r.jsxs(I,{container:!0,spacing:1.5,children:[r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Quantity"}),r.jsx(f,{variant:"subtitle1",fontWeight:"bold",children:dt(e.quantity,2)})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Price per Unit"}),r.jsx(f,{variant:"subtitle1",fontWeight:"bold",children:q(e.price)})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),r.jsx(f,{variant:"subtitle1",fontWeight:"bold",color:"info.main",children:q(u)})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),r.jsx(f,{variant:"subtitle1",fontWeight:"bold",color:"warning.main",children:q(m)})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),r.jsx(f,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:q(p)})]}),r.jsxs(I,{item:!0,xs:6,children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Realized P&L"}),r.jsx(f,{variant:"subtitle1",fontWeight:"bold",color:e.realizedPl&&e.realizedPl>=0?"success.main":"error.main",children:e.realizedPl?q(Number(e.realizedPl)||0):"N/A"})]})]})]})})})]}),e.notes&&r.jsx(j,{mb:2,children:r.jsx(Ce,{sx:{boxShadow:2},children:r.jsxs(Te,{sx:{p:2},children:[r.jsx(f,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Notes"}),r.jsx(Ye,{severity:"info",variant:"outlined",sx:{bgcolor:"info.50",borderColor:"info.200","& .MuiAlert-message":{width:"100%"}},children:r.jsx(f,{variant:"body1",children:e.notes})})]})})}),e.side===it.SELL&&t.length>0&&r.jsx(j,{mb:2,children:r.jsx(Ce,{sx:{boxShadow:2},children:r.jsxs(Te,{sx:{p:2},children:[r.jsx(f,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Trade Matching Details"}),r.jsxs(I,{container:!0,spacing:2,mb:2,children:[r.jsx(I,{item:!0,xs:12,sm:4,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"success.50",borderRadius:2},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Matched"}),r.jsx(f,{variant:"h6",fontWeight:"bold",color:"success.main",children:dt(c,2)})]})}),r.jsx(I,{item:!0,xs:12,sm:4,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"warning.50",borderRadius:2},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Remaining"}),r.jsx(f,{variant:"h6",fontWeight:"bold",color:"warning.main",children:dt(e.remainingQuantity||0,2)})]})}),r.jsx(I,{item:!0,xs:12,sm:4,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:d>=0?"success.50":"error.50",borderRadius:2},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Realized P&L"}),r.jsx(f,{variant:"h6",fontWeight:"bold",color:d>=0?"success.main":"error.main",children:q(d)})]})})]}),r.jsx(Yr,{component:at,variant:"outlined",sx:{borderRadius:2,boxShadow:1},children:r.jsxs(qr,{size:"small",children:[r.jsx(Qr,{children:r.jsxs(yt,{sx:{bgcolor:"grey.50"},children:[r.jsx(se,{sx:{fontWeight:600},children:"Buy Trade ID"}),r.jsx(se,{align:"right",sx:{fontWeight:600},children:"Matched Qty"}),r.jsx(se,{align:"right",sx:{fontWeight:600},children:"Buy Price"}),r.jsx(se,{align:"right",sx:{fontWeight:600},children:"Sell Price"}),r.jsx(se,{align:"right",sx:{fontWeight:600},children:"P&L"}),r.jsx(se,{sx:{fontWeight:600},children:"Matched Date"})]})}),r.jsx(Kr,{children:t.map(h=>r.jsxs(yt,{sx:{"&:nth-of-type(odd)":{bgcolor:"grey.25"},"&:hover":{bgcolor:"action.hover"}},children:[r.jsx(se,{children:r.jsxs(f,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[h.buyTradeId.slice(0,8),"..."]})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:dt(h.matchedQty,2)})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:q(h.buyPrice)})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:q(h.sellPrice)})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",color:h.pnl>=0?"success.main":"error.main",fontWeight:"bold",children:q(h.pnl)})}),r.jsx(se,{children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:er(tr(h.createdAt.toString()),"MMM dd, yyyy")})})]},h.detailId))})]})})]})})}),e.side===it.SELL&&(e.remainingQuantity||0)>0&&r.jsx(j,{mb:2,children:r.jsx(Ye,{severity:"warning",variant:"outlined",sx:{borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:r.jsxs(f,{variant:"body1",fontWeight:"medium",children:["⚠️ This sell trade has ",r.jsxs("strong",{children:[dt(e.remainingQuantity||0,2)," units"]})," remaining unmatched. Consider matching with available buy trades to realize P&L."]})})}),a&&r.jsx(j,{display:"flex",justifyContent:"center",py:4,children:r.jsx(f,{children:"Loading trade details..."})})]})},By=({open:e,onClose:t,onEdit:n,trade:a,tradeDetails:s=[],isLoading:i=!1,error:o})=>a?r.jsxs(tn,{open:e,onClose:t,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh",borderRadius:3,boxShadow:24}},children:[r.jsx(Xn,{sx:{bgcolor:"primary.50",borderBottom:1,borderColor:"divider",py:2},children:r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(j,{display:"flex",alignItems:"center",gap:2,children:[r.jsx(f,{variant:"h5",fontWeight:"bold",children:"Trade Details"}),a&&r.jsx(j,{display:"flex",gap:1,children:r.jsxs(f,{variant:"body2",color:"text.secondary",children:[a.assetSymbol," - ",a.assetName]})})]}),r.jsx(Kt,{onClick:t,size:"small",sx:{"&:hover":{bgcolor:"error.main",color:"white"}},children:r.jsx(Co,{})})]})}),r.jsxs(rn,{sx:{p:0},children:[o&&r.jsx(Ye,{severity:"error",sx:{m:2,mb:0},children:o}),i?r.jsx(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:r.jsxs(j,{textAlign:"center",children:[r.jsx(Ue,{size:40}),r.jsx(f,{variant:"h6",sx:{mt:2},children:"Loading trade details..."})]})}):r.jsx(j,{sx:{p:2},children:r.jsx($y,{trade:a,tradeDetails:s,onEdit:n,isLoading:i})})]}),r.jsx(nn,{sx:{bgcolor:"grey.50",borderTop:1,borderColor:"divider",py:1.5,px:2},children:r.jsx(Qe,{onClick:t,variant:"contained",sx:{textTransform:"none",px:3},children:"Close"})})]}):null,Wy=({trades:e,isLoading:t=!1,onEdit:n,onDelete:a,onView:s,onCreate:i,onPageChange:o,currentPage:l=1,totalPages:c=1,totalTrades:d=0})=>{const[u,m]=x.useState(""),[p,h]=x.useState("ALL"),[g,v]=x.useState("ALL"),[w,C]=x.useState("ALL"),[b,T]=x.useState(null),[y,S]=x.useState(null),R=x.useMemo(()=>e.filter(D=>{var U,B,W;const L=((U=D.assetSymbol)==null?void 0:U.toLowerCase().includes(u.toLowerCase()))||((B=D.assetName)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))||((W=D.notes)==null?void 0:W.toLowerCase().includes(u.toLowerCase())),_=p==="ALL"||D.side===p,A=g==="ALL"||D.tradeType===g,G=w==="ALL"||D.source===w;return L&&_&&A&&G}),[e,u,p,g,w]),k=(D,L)=>{T(D.currentTarget),S(L)},E=()=>{T(null),S(null)},M=D=>{if(y){switch(D){case"view":s==null||s(y);break;case"edit":n==null||n(y);break;case"delete":a==null||a(y);break}E()}},N=D=>D===it.BUY?"success":"error",P=D=>D===it.BUY?"↗":"↘";return r.jsxs(j,{sx:{p:3},children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"h5",component:"h2",gutterBottom:!0,children:"Trade History"}),r.jsx(f,{variant:"body2",color:"text.secondary",children:"Manage and track all your trading activities"})]}),r.jsxs(j,{display:"flex",gap:2,children:[r.jsx(Qe,{variant:"outlined",startIcon:r.jsx(Ol,{}),onClick:()=>{},sx:{textTransform:"none"},children:"Filters"}),r.jsx(Qe,{variant:"contained",startIcon:r.jsx(Ot,{}),onClick:i,sx:{textTransform:"none"},children:"New Trade"})]})]}),r.jsx(j,{sx:{mb:3},children:r.jsxs(I,{container:!0,spacing:2,mb:3,children:[r.jsx(I,{item:!0,xs:12,md:4,children:r.jsx(ot,{fullWidth:!0,placeholder:"Search trades by symbol, name, or notes...",value:u,onChange:D=>m(D.target.value),InputProps:{startAdornment:r.jsx(go,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(I,{item:!0,xs:12,md:2,children:r.jsxs(vt,{fullWidth:!0,children:[r.jsx(bt,{children:"Side"}),r.jsxs(jt,{value:p,label:"Side",onChange:D=>h(D.target.value),sx:{borderRadius:2},children:[r.jsx(xe,{value:"ALL",children:"All Sides"}),r.jsx(xe,{value:it.BUY,children:"Buy"}),r.jsx(xe,{value:it.SELL,children:"Sell"})]})]})}),r.jsx(I,{item:!0,xs:12,md:2,children:r.jsxs(vt,{fullWidth:!0,children:[r.jsx(bt,{children:"Type"}),r.jsxs(jt,{value:g,label:"Type",onChange:D=>v(D.target.value),sx:{borderRadius:2},children:[r.jsx(xe,{value:"ALL",children:"All Types"}),r.jsx(xe,{value:mt.MARKET,children:"Market"}),r.jsx(xe,{value:mt.LIMIT,children:"Limit"}),r.jsx(xe,{value:mt.STOP,children:"Stop"})]})]})}),r.jsx(I,{item:!0,xs:12,md:2,children:r.jsxs(vt,{fullWidth:!0,children:[r.jsx(bt,{children:"Source"}),r.jsxs(jt,{value:w,label:"Source",onChange:D=>C(D.target.value),sx:{borderRadius:2},children:[r.jsx(xe,{value:"ALL",children:"All Sources"}),r.jsx(xe,{value:pr.MANUAL,children:"Manual"}),r.jsx(xe,{value:pr.API,children:"API"}),r.jsx(xe,{value:pr.IMPORT,children:"Import"})]})]})}),r.jsx(I,{item:!0,xs:12,md:2,children:r.jsx(j,{display:"flex",alignItems:"center",height:"100%",children:r.jsx($e,{label:`${R.length} of ${d} trades`,color:"primary",variant:"outlined",size:"small"})})})]})}),r.jsx(Yr,{component:at,variant:"outlined",sx:{borderRadius:2,mb:3,boxShadow:1},children:r.jsxs(qr,{children:[r.jsx(Qr,{children:r.jsxs(yt,{sx:{bgcolor:"grey.50"},children:[r.jsx(se,{sx:{fontWeight:600,color:"text.primary"},children:"Date"}),r.jsx(se,{sx:{fontWeight:600,color:"text.primary"},children:"Asset"}),r.jsx(se,{sx:{fontWeight:600,color:"text.primary"},children:"Side"}),r.jsx(se,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Quantity"}),r.jsx(se,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Price"}),r.jsx(se,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Value"}),r.jsx(se,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Fees"}),r.jsx(se,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Cost"}),r.jsx(se,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"P&L"}),r.jsx(se,{align:"center",sx:{fontWeight:600,color:"text.primary"},children:"Actions"})]})}),r.jsx(Kr,{children:t?r.jsx(yt,{children:r.jsx(se,{colSpan:10,align:"center",sx:{py:6},children:r.jsxs(j,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[r.jsx(Ue,{size:40}),r.jsx(f,{color:"text.secondary",children:"Loading trades..."})]})})}):R.length===0?r.jsx(yt,{children:r.jsx(se,{colSpan:10,align:"center",sx:{py:6},children:r.jsxs(j,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[r.jsx(f,{variant:"h6",color:"text.secondary",children:"No trades found"}),r.jsx(f,{color:"text.secondary",children:"No trades match your current filter criteria."}),r.jsx(Qe,{variant:"outlined",startIcon:r.jsx(Ot,{}),onClick:i,sx:{mt:1},children:"Create First Trade"})]})})}):R.map(D=>{var L,_;return r.jsxs(yt,{hover:!0,onClick:()=>s==null?void 0:s(D),sx:{"&:hover":{bgcolor:"action.hover",cursor:"pointer"},"&:last-child td":{borderBottom:0}},children:[r.jsxs(se,{children:[r.jsx(f,{variant:"body2",children:er(tr(D.tradeDate.toString()),"MMM dd, yyyy")}),r.jsx(f,{variant:"caption",color:"text.secondary",children:er(tr(D.tradeDate.toString()),"HH:mm")})]}),r.jsx(se,{children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",fontWeight:"medium",children:D.assetSymbol||((L=D.asset)==null?void 0:L.symbol)||"N/A"}),r.jsx(f,{variant:"caption",color:"text.secondary",children:D.assetName||((_=D.asset)==null?void 0:_.name)||"N/A"})]})}),r.jsx(se,{children:r.jsx($e,{label:D.side,color:N(D.side),size:"small",icon:r.jsx("span",{style:{fontSize:"14px"},children:P(D.side)}),sx:{fontWeight:600,"& .MuiChip-icon":{marginLeft:.5}}})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",children:dt(D.quantity,2)})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",children:q(D.price)})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:q(Number(D.totalValue)||D.quantity*D.price)})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",children:q((Number(D.fee)||0)+(Number(D.tax)||0))})}),r.jsx(se,{align:"right",children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:q(Number(D.totalCost)||D.quantity*D.price+(Number(D.fee)||0)+(Number(D.tax)||0))})}),r.jsx(se,{align:"right",children:D.realizedPl!==void 0&&r.jsx(f,{variant:"body2",color:D.realizedPl>=0?"success.main":"error.main",fontWeight:"medium",children:q(Number(D.realizedPl)||0)})}),r.jsx(se,{align:"center",children:r.jsx(Zn,{title:"Actions",children:r.jsx(Kt,{size:"small",onClick:A=>k(A,D),sx:{"&:hover":{bgcolor:"primary.main",color:"white"}},children:r.jsx(_l,{})})})})]},D.tradeId)})})]})}),c>1&&r.jsx(j,{display:"flex",justifyContent:"center",mt:3,children:r.jsx(Fl,{count:c,page:l,onChange:(D,L)=>o==null?void 0:o(L),color:"primary",shape:"rounded",size:"large"})}),r.jsxs(Vl,{anchorEl:b,open:!!b,onClose:E,PaperProps:{sx:{borderRadius:2,boxShadow:3,minWidth:160}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[r.jsxs(xe,{onClick:()=>M("view"),sx:{py:1.5},children:[r.jsx(Nn,{children:r.jsx(xo,{fontSize:"small",color:"primary"})}),r.jsx(Mn,{children:"View Details"})]}),r.jsxs(xe,{onClick:()=>M("edit"),sx:{py:1.5},children:[r.jsx(Nn,{children:r.jsx(To,{fontSize:"small",color:"primary"})}),r.jsx(Mn,{children:"Edit Trade"})]}),r.jsxs(xe,{onClick:()=>M("delete"),sx:{py:1.5,color:"error.main"},children:[r.jsx(Nn,{children:r.jsx(Ll,{fontSize:"small",color:"error"})}),r.jsx(Mn,{children:"Delete Trade"})]})]})]})},hl=({portfolioId:e,onCreate:t,isCompactMode:n=!1})=>{var M;const[a,s]=x.useState({assetId:"",side:"",startDate:"",endDate:""}),[i,o]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState(null),{data:m,isLoading:p,error:h}=ds(e,a),g=Bf(),v=$f(),{data:w,isLoading:C,error:b}=Wf((d==null?void 0:d.tradeId)||""),T=N=>{s(N)},y=N=>{u(N),o(!0)},S=N=>{u(N),c(!0)},R=async N=>{if(window.confirm("Are you sure you want to delete this trade?"))try{await g.mutateAsync(N.tradeId)}catch(P){console.error("Error deleting trade:",P)}},k=()=>{o(!1),c(!1),u(null)},E=()=>{t&&t()};return p?r.jsxs(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[r.jsx(Ue,{}),r.jsx(f,{sx:{ml:2},children:"Loading trades..."})]}):h?r.jsx(Ye,{severity:"error",children:(h==null?void 0:h.message)||"Failed to load trades"}):r.jsxs(j,{sx:{p:n?1:0},children:[r.jsx(Wy,{trades:m||[],isLoading:p,error:h==null?void 0:h.message,onEdit:y,onView:S,onDelete:R,onCreate:E,onFiltersChange:T,filters:a,totalTrades:(m==null?void 0:m.length)||0}),r.jsx(Ly,{open:i,onClose:k,onSubmit:async N=>{if(d)try{await v.mutateAsync({id:d.tradeId,data:{...N,tradeDate:typeof N.tradeDate=="string"?N.tradeDate:N.tradeDate.toISOString()}}),k()}catch(P){console.error("Error updating trade:",P)}},initialData:d?{...d,tradeDate:typeof d.tradeDate=="string"?d.tradeDate:d.tradeDate.toISOString()}:void 0,isLoading:v.isLoading,error:(M=v.error)==null?void 0:M.message}),r.jsx(By,{open:l,onClose:k,onEdit:y,trade:d,tradeDetails:(w==null?void 0:w.tradeDetails)||[],isLoading:C,error:typeof b=="object"&&b!==null&&"message"in b?b.message:void 0})]})},Uy=e=>!e||typeof e!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),Hy=({analysis:e,currency:t="USD",isLoading:n=!1,error:a,selectedTimeframe:s="ALL",selectedMetric:i="pnl",onTimeframeChange:o,onMetricChange:l,isCompactMode:c=!1})=>{const[d,u]=x.useState("pie"),m=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98","#F4A460","#20B2AA","#FF6347","#4682B4","#D2691E"],h=(y=>{switch(y){case"VND":return"vi-VN";case"USD":return"en-US";case"EUR":return"de-DE";case"GBP":return"en-GB";case"JPY":return"ja-JP";default:return"en-US"}})(t),g=y=>y>=100?wn(y,1,h):(y>=10,wn(y,2,h)),v=x.useMemo(()=>{if(!e||!e.pnlSummary||!e.statistics||!e.riskMetrics||!Array.isArray(e.assetPerformance))return!1;if(e.pnlSummary.winRate!==void 0){const y=Number(e.pnlSummary.winRate);if(isNaN(y)||y<0||y>100)return!1}if(e.riskMetrics.volatility!==void 0){const y=Number(e.riskMetrics.volatility);if(isNaN(y)||y<0)return!1}return!0},[e]),w=x.useMemo(()=>e.monthlyPerformance.map(y=>{var S,R,k,E,M;return{month:y.month,pnl:parseFloat(((S=y.totalPl)==null?void 0:S.toString())||"0"),trades:y.tradesCount||0,winRate:y.winRate||0,totalVolume:parseFloat(((R=y.totalVolume)==null?void 0:R.toString())||"0"),winningTrades:y.winningTrades||0,losingTrades:y.losingTrades||0,formattedPnl:q(parseFloat(((k=y.totalPl)==null?void 0:k.toString())||"0"),t,{},h),formattedVolume:q(parseFloat(((E=y.totalVolume)==null?void 0:E.toString())||"0"),t,{},h),formattedWinRate:fe(y.winRate||0,1,h),color:parseFloat(((M=y.totalPl)==null?void 0:M.toString())||"0")>=0?"#00C49F":"#FF8042"}}),[e.monthlyPerformance,t,h]),C=x.useMemo(()=>{var R;if(console.log("🔍 Asset Performance Debug:",{hasAnalysis:!!e,hasAssetPerformance:!!(e!=null&&e.assetPerformance),isArray:Array.isArray(e==null?void 0:e.assetPerformance),assetPerformance:e==null?void 0:e.assetPerformance,length:(R=e==null?void 0:e.assetPerformance)==null?void 0:R.length}),!e.assetPerformance||!Array.isArray(e.assetPerformance))return console.log("Asset performance not available or not an array"),[];const y=e.assetPerformance.map((k,E)=>{var P,D,L,_,A,G;const M=parseFloat(((P=k.totalPl)==null?void 0:P.toString())||"0"),N=Math.abs(M);return{assetId:k.assetId||`asset-${E}`,name:k.assetSymbol||"Unknown",fullName:k.assetName||"Unknown Asset",value:N,originalValue:M,trades:k.tradesCount||0,winRate:k.winRate||0,totalVolume:parseFloat(((D=k.totalVolume)==null?void 0:D.toString())||"0"),quantity:parseFloat(((L=k.quantity)==null?void 0:L.toString())||"0"),avgCost:parseFloat(((_=k.avgCost)==null?void 0:_.toString())||"0"),marketValue:parseFloat(((A=k.marketValue)==null?void 0:A.toString())||"0"),color:m[E%m.length],formattedValue:q(M,t,{},h),formattedVolume:q(parseFloat(((G=k.totalVolume)==null?void 0:G.toString())||"0"),t,{},h),formattedWinRate:fe(k.winRate||0,1,h)}}),S=y.sort((k,E)=>E.value-k.value);return console.log("🔍 Asset Chart Data Processed:",{originalLength:y.length,sortedLength:S.length,sampleData:S.slice(0,3),allValues:S.map(k=>k.value),originalValues:S.map(k=>k.originalValue),hasPositiveValues:S.some(k=>k.value>0),colors:S.map(k=>k.color)}),S},[e.assetPerformance,t,h]),b=({active:y,payload:S,label:R})=>{var k;if(y&&S&&S.length){const E=(k=S[0])==null?void 0:k.payload;return r.jsxs(j,{sx:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:2,p:2,boxShadow:3,minWidth:200},children:[r.jsx(f,{variant:"subtitle2",fontWeight:"bold",color:"primary",gutterBottom:!0,children:R}),S.map((M,N)=>r.jsxs(j,{sx:{mb:.5},children:[r.jsxs(f,{variant:"body2",color:"text.secondary",children:[M.dataKey==="pnl"?"P&L":M.dataKey==="trades"?"Trades":M.dataKey==="winRate"?"Win Rate":M.dataKey==="value"?"Value":M.dataKey,":"]}),r.jsx(f,{variant:"body2",fontWeight:"bold",color:M.color,children:M.dataKey==="pnl"&&(E!=null&&E.formattedPnl)?E.formattedPnl:M.dataKey==="trades"?M.value:M.dataKey==="winRate"&&(E!=null&&E.formattedWinRate)?E.formattedWinRate:M.dataKey==="value"&&(E!=null&&E.formattedValue)?E.formattedValue:M.dataKey==="pnl"?q(M.value,t,{},h):M.value})]},N)),(E==null?void 0:E.fullName)&&r.jsx(j,{sx:{mt:1,pt:1,borderTop:"1px solid #f0f0f0"},children:r.jsx(f,{variant:"caption",color:"text.secondary",children:E.fullName})})]})}return null},T=({name:y,percent:S,payload:R})=>{const k=wn(S*100,1,h),E=(R==null?void 0:R.formattedValue)||q((R==null?void 0:R.value)||0,t,{},h);return S<.02?`${y}
${E}`:S<.05?`${y}
${k}
${E}`:`${y}
${k}
${E}`};return n?r.jsxs(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[r.jsx(Ue,{}),r.jsx(f,{sx:{ml:2},children:"Loading analysis..."})]}):a?r.jsx(Ye,{severity:"error",children:(a==null?void 0:a.message)||"Failed to load trade analysis"}):e?v?r.jsxs(j,{sx:{p:c?1:3},children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:c?2:4,children:[r.jsxs(j,{children:[r.jsx(f,{variant:c?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontSize:c?"0.9rem":void 0},children:"Trading Analysis"}),r.jsx(f,{variant:c?"body2":"body1",color:"text.secondary",sx:{fontSize:c?"0.75rem":void 0},children:"Comprehensive performance insights and analytics"})]}),r.jsxs(j,{display:"flex",gap:2,children:[r.jsxs(vt,{size:"small",sx:{minWidth:140},children:[r.jsx(bt,{children:"Timeframe"}),r.jsxs(jt,{value:s,label:"Timeframe",onChange:y=>o==null?void 0:o(y.target.value),sx:{borderRadius:2},children:[r.jsx(xe,{value:"ALL",children:"All Time"}),r.jsx(xe,{value:"1M",children:"1 Month"}),r.jsx(xe,{value:"3M",children:"3 Months"}),r.jsx(xe,{value:"6M",children:"6 Months"}),r.jsx(xe,{value:"1Y",children:"1 Year"})]})]}),r.jsxs(vt,{size:"small",sx:{minWidth:140},children:[r.jsx(bt,{children:"Metric"}),r.jsxs(jt,{value:i,label:"Metric",onChange:y=>l==null?void 0:l(y.target.value),sx:{borderRadius:2},children:[r.jsx(xe,{value:"pnl",children:"P&L"}),r.jsx(xe,{value:"trades",children:"Trades"}),r.jsx(xe,{value:"winrate",children:"Win Rate"})]})]})]})]}),r.jsxs(I,{container:!0,spacing:c?1:3,mb:c?2:4,children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:140,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),r.jsx(f,{variant:"h4",color:e.pnlSummary.totalPnl>=0?"success.main":"error.main",children:q(e.pnlSummary.totalPnl,t,{},h)})]}),r.jsx(j,{sx:{color:e.pnlSummary.totalPnl>=0?"success.main":"error.main",display:"flex",alignItems:"center"},children:r.jsx(wt,{})})]}),r.jsx(j,{display:"flex",alignItems:"center",gap:1,children:r.jsx($e,{label:`${fe(e.pnlSummary.winRate,1,h)} Win Rate`,color:e.pnlSummary.winRate>=50?"success":"warning",size:"small",variant:"outlined"})})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:140,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Trades"}),r.jsx(f,{variant:"h4",children:dt(e.statistics.totalTrades,0,h)})]}),r.jsx(j,{sx:{color:"primary.main",display:"flex",alignItems:"center"},children:r.jsx(Vn,{})})]}),r.jsxs(j,{display:"flex",gap:1,flexWrap:"wrap",children:[r.jsx($e,{label:`${e.statistics.buyTrades} Buy`,color:"success",size:"small",variant:"outlined"}),r.jsx($e,{label:`${e.statistics.sellTrades} Sell`,color:"error",size:"small",variant:"outlined"})]})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:140,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Volume"}),r.jsx(f,{variant:"h4",children:q(e.statistics.totalVolume,t,{},h)})]}),r.jsx(j,{sx:{color:"info.main",display:"flex",alignItems:"center"},children:r.jsx($l,{})})]}),r.jsxs(f,{variant:"body2",color:"text.secondary",children:["Avg: ",q(e.statistics.averagePrice,t,{},h)]})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:140,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sharpe Ratio"}),r.jsx(f,{variant:"h4",color:"primary",children:e.riskMetrics.sharpeRatio})]}),r.jsx(j,{sx:{color:"warning.main",display:"flex",alignItems:"center"},children:r.jsx(Bl,{})})]}),r.jsx(f,{variant:"body2",color:"text.secondary",children:"Risk-Adjusted Return"})]})})})]}),r.jsxs(I,{container:!0,spacing:3,mb:4,children:[r.jsx(I,{item:!0,xs:12,lg:8,children:r.jsx(Ce,{sx:{boxShadow:2,height:400},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[r.jsx(f,{variant:"h6",children:"Monthly Performance"}),r.jsx($e,{label:"P&L Trend",color:"primary",size:"small",variant:"outlined"})]}),r.jsx(j,{sx:{flex:1,minHeight:0},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(ea,{data:w,children:[r.jsx(Ht,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),r.jsx(zt,{dataKey:"month",tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"}}),r.jsx(Yt,{tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"},tickFormatter:y=>q(y,t,{},h)}),r.jsx(St,{content:r.jsx(b,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),r.jsx(Ar,{type:"monotone",dataKey:"pnl",stroke:"#1976d2",strokeWidth:3,dot:y=>{const{cx:S,cy:R,payload:k,index:E}=y;return r.jsx("circle",{cx:S,cy:R,r:4,fill:(k==null?void 0:k.color)||"#1976d2",stroke:"#fff",strokeWidth:2},`dot-${E}`)},activeDot:{r:6,stroke:"#1976d2",strokeWidth:2},name:"P&L"})]})})})]})})}),r.jsx(I,{item:!0,xs:12,lg:4,children:r.jsx(Ce,{sx:{boxShadow:2,height:400},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[r.jsx(f,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Asset Performance"}),r.jsxs(j,{display:"flex",gap:1,children:[r.jsx($e,{label:"Pie Chart",size:"small",color:d==="pie"?"primary":"default",onClick:()=>u("pie"),sx:{cursor:"pointer"}}),r.jsx($e,{label:"Compact List",size:"small",color:d==="compact"?"primary":"default",onClick:()=>u("compact"),sx:{cursor:"pointer"}})]})]}),C&&C.length>0&&C.some(y=>y.value>0)?r.jsx(j,{sx:{height:350,display:"flex",flexDirection:"column"},children:d==="pie"?r.jsx(j,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center","& .recharts-pie-label-text":{fontSize:"10px !important",fontWeight:"bold !important",fill:"#333 !important",textShadow:"1px 1px 2px rgba(255,255,255,0.8) !important"}},children:r.jsx(Dt,{width:"100%",height:"100%",children:r.jsxs(Mo,{children:[r.jsx(Ao,{data:C,cx:"50%",cy:"50%",labelLine:!1,label:T,outerRadius:90,innerRadius:35,fill:"#8884d8",dataKey:"value",minAngle:1,paddingAngle:1,children:C.map((y,S)=>r.jsx(on,{fill:y.color||m[S%m.length]},`cell-${S}`))}),r.jsx(St,{content:r.jsx(b,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})})}):r.jsx(j,{sx:{flex:1,overflow:"auto",border:"1px solid",borderColor:"grey.200",borderRadius:1,backgroundColor:"grey.50",p:2},children:r.jsx(j,{display:"flex",flexWrap:"wrap",gap:1,children:C.map((y,S)=>{const R=C.reduce((E,M)=>E+M.value,0),k=R>0?y.value/R*100:0;return r.jsx($e,{icon:r.jsx(j,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:y.color||m[S%m.length],border:"1px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.2)"}}),label:r.jsxs(j,{display:"flex",alignItems:"center",gap:.5,children:[r.jsx(f,{variant:"caption",fontWeight:"bold",children:y.name}),r.jsx(f,{variant:"caption",fontWeight:"bold",color:y.originalValue>=0?"success.main":"error.main",children:y.formattedValue}),r.jsxs(f,{variant:"caption",color:"primary",fontWeight:"bold",children:["(",fe(k,1,h),")"]})]}),variant:"outlined",sx:{height:32,backgroundColor:y.originalValue>=0?"success.50":"error.50",borderColor:"grey.300",borderWidth:1,"&:hover":{backgroundColor:y.originalValue>=0?"success.100":"error.100",transform:"scale(1.02)",borderColor:y.originalValue>=0?"success.main":"error.main"},transition:"all 0.2s ease-in-out"}},S)})})})}):r.jsxs(j,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:300,children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,children:"No asset performance data available"}),r.jsxs(f,{variant:"caption",color:"text.secondary",children:["Debug: assetChartData length = ",(C==null?void 0:C.length)||0]}),r.jsxs(f,{variant:"caption",color:"text.secondary",children:["Analysis has assetPerformance: ",e!=null&&e.assetPerformance?"Yes":"No"]}),r.jsxs(f,{variant:"caption",color:"text.secondary",children:["Has positive values: ",C!=null&&C.some(y=>y.value>0)?"Yes":"No"]}),r.jsxs(f,{variant:"caption",color:"text.secondary",children:["Values: ",C==null?void 0:C.map(y=>`${y.name}: ${y.value}`).join(", ")]})]})]})})})]}),r.jsx(I,{container:!0,spacing:3,mb:4,children:r.jsx(I,{item:!0,xs:12,children:r.jsx(Ce,{sx:{boxShadow:2},children:r.jsxs(Te,{children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[r.jsx(f,{variant:"h6",children:"Risk Metrics"}),r.jsx($e,{label:"Risk Assessment",color:"warning",size:"small",variant:"outlined"})]}),r.jsxs(I,{container:!0,spacing:3,children:[r.jsx(I,{item:!0,xs:6,sm:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:"primary",fontWeight:"bold",children:e.riskMetrics.sharpeRatio}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"Sharpe Ratio"})]})}),r.jsx(I,{item:!0,xs:6,sm:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:e.riskMetrics.volatility>200?"error.50":"warning.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:e.riskMetrics.volatility>200?"error.main":"warning.main",fontWeight:"bold",children:g(e.riskMetrics.volatility)}),r.jsxs(f,{variant:"body2",color:"text.secondary",mt:1,children:["Volatility",e.riskMetrics.volatility>200&&r.jsx(f,{variant:"caption",color:"error.main",display:"block",children:"⚠️ Extreme volatility"})]})]})}),r.jsx(I,{item:!0,xs:6,sm:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:"error.main",fontWeight:"bold",children:q(e.riskMetrics.var95,t,{},h)}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"VaR (95%)"})]})}),r.jsx(I,{item:!0,xs:6,sm:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:"error.main",fontWeight:"bold",children:q(e.riskMetrics.maxDrawdown,t,{},h)}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"Max Drawdown"})]})})]})]})})})}),r.jsxs(I,{container:!0,spacing:3,mb:4,children:[r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(Ce,{sx:{boxShadow:2,height:500},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[r.jsx(f,{variant:"h6",children:"Top Performing Trades"}),r.jsx($e,{label:"Best",color:"success",size:"small",variant:"outlined"})]}),r.jsx(Yr,{sx:{flex:1,overflow:"auto"},children:r.jsxs(qr,{size:"small",stickyHeader:!0,children:[r.jsx(Qr,{children:r.jsxs(yt,{sx:{bgcolor:"grey.50"},children:[r.jsx(se,{sx:{fontWeight:600},children:"Asset"}),r.jsx(se,{sx:{fontWeight:600},children:"Side"}),r.jsx(se,{sx:{fontWeight:600},children:"P&L"}),r.jsx(se,{sx:{fontWeight:600},children:"Date"})]})}),r.jsx(Kr,{children:e.topTrades.slice(0,5).map(y=>r.jsxs(yt,{children:[r.jsx(se,{children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),r.jsx(f,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),r.jsx(se,{children:r.jsx($e,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),r.jsx(se,{color:y.realizedPl>=0?"success.main":"error.main",children:q(Number(y.realizedPl)||0,t,{},h)}),r.jsx(se,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})}),r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(Ce,{sx:{boxShadow:2,height:500},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[r.jsx(f,{variant:"h6",children:"Worst Performing Trades"}),r.jsx($e,{label:"Worst",color:"error",size:"small",variant:"outlined"})]}),r.jsx(Yr,{sx:{flex:1,overflow:"auto"},children:r.jsxs(qr,{size:"small",stickyHeader:!0,children:[r.jsx(Qr,{children:r.jsxs(yt,{sx:{bgcolor:"grey.50"},children:[r.jsx(se,{sx:{fontWeight:600},children:"Asset"}),r.jsx(se,{sx:{fontWeight:600},children:"Side"}),r.jsx(se,{sx:{fontWeight:600},children:"P&L"}),r.jsx(se,{sx:{fontWeight:600},children:"Date"})]})}),r.jsx(Kr,{children:e.worstTrades.slice(0,5).map(y=>r.jsxs(yt,{children:[r.jsx(se,{children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),r.jsx(f,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),r.jsx(se,{children:r.jsx($e,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),r.jsx(se,{color:y.realizedPl>=0?"success.main":"error.main",children:q(Number(y.realizedPl)||0,t,{},h)}),r.jsx(se,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})})]}),r.jsx(I,{container:!0,spacing:3,children:r.jsx(I,{item:!0,xs:12,children:r.jsx(Ce,{children:r.jsxs(Te,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Asset Performance Details"}),r.jsx(Yr,{sx:{flex:1,overflow:"auto"},children:r.jsxs(qr,{stickyHeader:!0,children:[r.jsx(Qr,{children:r.jsxs(yt,{children:[r.jsx(se,{children:"Asset"}),r.jsx(se,{children:"Quantity"}),r.jsx(se,{children:"Avg Cost"}),r.jsx(se,{children:"Market Value"}),r.jsx(se,{children:"P&L"}),r.jsx(se,{children:"Trades"}),r.jsx(se,{children:"Win Rate"})]})}),r.jsx(Kr,{children:C&&C.length>0?C.map(y=>r.jsxs(yt,{hover:!0,children:[r.jsx(se,{children:r.jsxs(j,{children:[r.jsx(f,{variant:"body2",fontWeight:"bold",children:y.name}),r.jsx(f,{variant:"caption",color:"text.secondary",children:y.fullName})]})}),r.jsx(se,{children:r.jsx(f,{variant:"body2",children:dt(y.quantity,2,h)})}),r.jsx(se,{children:r.jsx(f,{variant:"body2",children:q(y.avgCost,t,{},h)})}),r.jsx(se,{children:r.jsx(f,{variant:"body2",children:q(y.marketValue,t,{},h)})}),r.jsx(se,{children:r.jsx(f,{variant:"body2",fontWeight:"bold",color:y.value>=0?"success.main":"error.main",children:y.formattedValue})}),r.jsx(se,{children:r.jsxs(j,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(f,{variant:"body2",children:y.trades}),r.jsx($e,{label:y.winRate>=50?"Win":"Loss",size:"small",color:y.winRate>=50?"success":"error",variant:"outlined"})]})}),r.jsx(se,{children:r.jsx(f,{variant:"body2",fontWeight:"bold",children:y.formattedWinRate})})]},y.assetId||y.name)):r.jsx(yt,{children:r.jsx(se,{colSpan:7,align:"center",sx:{py:4},children:r.jsx(f,{color:"text.secondary",children:"No asset performance data available"})})})})]})})]})})})})]}):r.jsx(Ye,{severity:"error",children:"Invalid analysis data format"}):r.jsx(Ye,{severity:"info",children:"No trade data available for analysis"})},ml=({portfolioId:e,isCompactMode:t=!1})=>{const[n,a]=x.useState("ALL"),[s,i]=x.useState("pnl");if(!Uy(e))return r.jsx(Ye,{severity:"error",children:"Invalid portfolio ID format"});const{portfolio:o,isLoading:l,error:c}=mi(e),d={timeframe:n,metric:s},{data:u,isLoading:m,error:p}=Uf(e,d);return console.log("🔍 TradeAnalysisContainer - Filters:",{selectedTimeframe:n,selectedMetric:s,portfolioId:e}),console.log("🔍 TradeAnalysisContainer - Analysis Data:",{hasAnalysis:!!u,analysisKeys:u?Object.keys(u):[],assetPerformance:u==null?void 0:u.assetPerformance,monthlyPerformance:u==null?void 0:u.monthlyPerformance,pnlSummary:u==null?void 0:u.pnlSummary,statistics:u==null?void 0:u.statistics,riskMetrics:u==null?void 0:u.riskMetrics}),l||m?r.jsxs(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[r.jsx(Ue,{}),r.jsx(f,{sx:{ml:2},children:"Loading analysis..."})]}):c?r.jsx(Ye,{severity:"error",children:(c==null?void 0:c.message)||"Failed to load portfolio information"}):p?r.jsx(Ye,{severity:"error",children:(p==null?void 0:p.message)||"Failed to load trade analysis"}):o?u?r.jsx(Hy,{analysis:u,currency:o.baseCurrency,selectedTimeframe:n,selectedMetric:s,onTimeframeChange:a,onMetricChange:i,isCompactMode:t}):r.jsx(Ye,{severity:"info",children:"No trade data available for analysis"}):r.jsx(Ye,{severity:"error",children:"Portfolio not found"})};function Oa(e){const{children:t,value:n,index:a,...s}=e;return r.jsx("div",{role:"tabpanel",hidden:n!==a,id:`portfolio-tabpanel-${a}`,"aria-labelledby":`portfolio-tab-${a}`,...s,children:n===a&&r.jsx(j,{sx:{p:3},children:t})})}const zy=()=>{const{portfolioId:e}=So(),t=an(),[n,a]=x.useState(1),[s,i]=x.useState(!1),[o,l]=x.useState(null),[c,d]=x.useState(!1),[u,m]=x.useState(null),[p,h]=x.useState(null),[g,v]=x.useState(!1),[w,C]=x.useState(null),[b,T]=x.useState(null),[y,S]=x.useState(!1),[R,k]=x.useState(null),[E,M]=x.useState(null),[N,P]=x.useState(!1),[D,L]=x.useState(null),[_,A]=x.useState(null),[G,U]=x.useState(!1),[B,W]=x.useState(null),[K,be]=x.useState(null),[ge,te]=x.useState(!1),[F,le]=x.useState(null),[me,Q]=x.useState(null),[oe,ie]=x.useState(!1),[ye,ce]=x.useState(null),[ue,X]=x.useState(null),[pe,Be]=x.useState(!1),[Ve,tt]=x.useState(null),[ne,ve]=x.useState(!1),H=(Ae,de)=>ne?de:Ae,{portfolio:Y,isLoading:we,error:_e}=mi(e),{navData:z,performanceData:ee,allocationData:Pe,isLoading:Me,error:Ge}=Ru(e);x.useEffect(()=>{(async()=>{if(e)try{d(!0),m(null);const de=await Le.getPortfolioRiskReturn(e);l(de)}catch(de){console.error("Error fetching risk-return data:",de),m("Failed to load risk-return data")}finally{d(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{v(!0),C(null);const de=await Le.getPortfolioAssetPerformance(e);h(de)}catch(de){console.error("Error fetching asset performance data:",de),C("Failed to load asset performance data")}finally{v(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{S(!0),k(null);const de=await Le.getPortfolioRiskMetrics(e);T(de)}catch(de){console.error("Error fetching risk metrics data:",de),k("Failed to load risk metrics data")}finally{S(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{P(!0),L(null);const de=await Le.getPortfolioDiversificationHeatmap(e);M(de)}catch(de){console.error("Error fetching diversification data:",de),L("Failed to load diversification data")}finally{P(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{U(!0),W(null);const de=await Le.getPortfolioAllocationTimeline(e);A(de)}catch(de){console.error("Error fetching allocation timeline data:",de),W("Failed to load allocation timeline data")}finally{U(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{te(!0),le(null);const de=await Le.getPortfolioCashFlowAnalysis(e);be(de)}catch(de){console.error("Error fetching cash flow data:",de),le("Failed to load cash flow data")}finally{te(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{ie(!0),ce(null);const de=await Le.getPortfolioBenchmarkComparison(e);Q(de)}catch(de){console.error("Error fetching benchmark data:",de),ce("Failed to load benchmark data")}finally{ie(!1)}})()},[e]),x.useEffect(()=>{(async()=>{if(e)try{Be(!0),tt(null);const de=await Le.getPortfolioAssetDetailSummary(e);X(de)}catch(de){console.error("Error fetching asset detail data:",de),tt("Failed to load asset detail data")}finally{Be(!1)}})()},[e]);const nt=Ii(),Gt=ds(e).data||[],ir=(Ae,de)=>{a(de)},xt=async Ae=>{try{await nt.mutateAsync(Ae),i(!1)}catch(de){console.error("Error creating trade:",de)}},ba=Gt.length,ja=Gt.reduce((Ae,de)=>Ae+(Number(de.quantity)*Number(de.price)||0),0),wa=Gt.reduce((Ae,de)=>Ae+(Number(de.fee)||0)+(Number(de.tax)||0),0),pn=Gt.reduce((Ae,de)=>Ae+(Number(de.realizedPl)||0),0),_r=[{title:"Total Trades",value:ba,color:"primary",icon:r.jsx(wt,{})},{title:"Total Volume",value:q(ja,(Y==null?void 0:Y.baseCurrency)||"VND"),color:"info",icon:r.jsx(Ut,{})},{title:"Fees & Taxes",value:q(wa,(Y==null?void 0:Y.baseCurrency)||"VND"),color:"warning",icon:r.jsx(Ft,{})},{title:"Realized P&L",value:q(pn,(Y==null?void 0:Y.baseCurrency)||"VND"),color:pn>=0?"success":"error",icon:r.jsx(wt,{})}];_t.useEffect(()=>{console.log("Portfolio Detail Debug:",{portfolio:Y,navData:z,performanceData:ee,allocationData:Pe,isAnalyticsLoading:Me,analyticsError:Ge})},[Y,z,ee,Pe,Me,Ge]);const xn=()=>{t("/portfolios")};return we?r.jsx(Gr,{maxWidth:"xl",children:r.jsx(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:r.jsx(Ue,{})})}):_e||!Y?r.jsx(Gr,{maxWidth:"xl",children:r.jsx(j,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:r.jsx(f,{color:"error",children:"Failed to load portfolio. Please try again."})})}):r.jsxs(Gr,{maxWidth:"xl",children:[r.jsx(j,{sx:{mb:4},children:r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"h4",gutterBottom:!0,children:Y.name}),r.jsx(f,{variant:"body1",color:"text.secondary",children:"Portfolio Management & Trading"})]}),r.jsxs(j,{display:"flex",gap:2,children:[r.jsx(Qe,{variant:"outlined",startIcon:r.jsx(Po,{}),onClick:xn,sx:{borderRadius:2,textTransform:"none"},children:"Back to Portfolios"}),r.jsx(Qe,{variant:"contained",startIcon:r.jsx(Ot,{}),onClick:()=>i(!0),sx:{borderRadius:2,textTransform:"none"},children:"New Trade"})]})]})}),r.jsxs(I,{container:!0,spacing:3,sx:{mb:4},children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:120,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Current NAV"}),r.jsx(f,{variant:"h5",component:"div",children:z?q(z.navValue,Y.baseCurrency):"N/A"})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:120,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Total Return"}),r.jsx(f,{variant:"h5",component:"div",color:((ee==null?void 0:ee.totalReturn)||0)>=0?"success.main":"error.main",children:ee?fe(ee.totalReturn):"N/A"})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:120,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Annualized Return"}),r.jsx(f,{variant:"h5",component:"div",color:((ee==null?void 0:ee.annualizedReturn)||0)>=0?"success.main":"error.main",children:ee?fe(ee.annualizedReturn):"N/A"})]})})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:120,boxShadow:2},children:r.jsxs(Te,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Base Currency"}),r.jsx(f,{variant:"h5",component:"div",children:Y.baseCurrency})]})})})]}),r.jsx(I,{container:!0,spacing:3,sx:{mb:4},children:_r.map((Ae,de)=>r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{sx:{height:120,boxShadow:2},children:r.jsx(Te,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(j,{children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:Ae.title}),r.jsx(f,{variant:"h5",component:"div",children:Ae.value})]}),r.jsx(j,{sx:{color:`${Ae.color}.main`,display:"flex",alignItems:"center"},children:Ae.icon})]})})})},de))}),r.jsxs(at,{sx:{width:"100%",mb:4},children:[r.jsx(j,{sx:{borderBottom:1,borderColor:"divider"},children:r.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:2,py:1},children:[r.jsxs(Do,{value:n,onChange:ir,"aria-label":"portfolio tabs",children:[r.jsx(Dr,{label:"Trading Management"}),r.jsx(Dr,{label:"Trading Analysis",defaultChecked:!0}),r.jsx(Dr,{label:"Asset Allocation"})]}),r.jsx(Zn,{title:ne?"Switch to Normal View":"Switch to Compact View",children:r.jsx(Wl,{control:r.jsx(zl,{checked:ne,onChange:Ae=>ve(Ae.target.checked),color:"primary",size:"small"}),label:r.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:.5},children:[ne?r.jsx(Ul,{fontSize:"small"}):r.jsx(Hl,{fontSize:"small"}),r.jsx(f,{variant:"caption",sx:{fontSize:"0.75rem"},children:ne?"Compact":"Normal"})]}),sx:{m:0}})})]})}),r.jsx(Oa,{value:n,index:0,children:r.jsx(j,{sx:{p:H(3,1)},children:r.jsx(I,{container:!0,spacing:H(3,1),children:r.jsx(I,{item:!0,xs:12,children:r.jsx(hl,{portfolioId:e,onCreate:()=>i(!0),isCompactMode:ne})})})})}),r.jsx(Oa,{value:n,index:1,children:r.jsx(j,{sx:{p:H(3,1)},children:r.jsxs(I,{container:!0,spacing:H(3,1),children:[r.jsx(I,{item:!0,xs:12,children:r.jsx(zf,{portfolioId:e,baseCurrency:Y.baseCurrency,title:"Portfolio Performance"})}),r.jsx(I,{item:!0,xs:12,children:r.jsx(ml,{portfolioId:e,isCompactMode:ne})})]})})}),r.jsx(Oa,{value:n,index:2,children:r.jsxs(j,{sx:{p:H(3,1),backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Portfolio Overview"}),r.jsxs(I,{container:!0,spacing:H(3,1),children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[r.jsx(f,{variant:"h4",color:"primary",fontWeight:"bold",children:q(Y.totalValue,Y.baseCurrency)}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Total Value"})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[r.jsx(f,{variant:"h4",color:"success.main",fontWeight:"bold",children:q(Y.unrealizedPl,Y.baseCurrency)}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Unrealized P&L"})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[r.jsx(f,{variant:"h4",color:"info.main",fontWeight:"bold",children:q(Y.cashBalance,Y.baseCurrency)}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Cash Balance"})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[r.jsx(f,{variant:"h4",color:"warning.main",fontWeight:"bold",children:Object.keys((Pe==null?void 0:Pe.allocation)||{}).length}),r.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Asset Classes"})]})})]})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Asset Allocation"}),r.jsxs(I,{container:!0,spacing:H(3,1),children:[r.jsx(I,{item:!0,xs:12,md:8,children:r.jsx(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:Me?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):Ge?r.jsx(f,{color:"error",children:"Failed to load allocation data"}):r.jsx(Hf,{data:Pe||{allocation:{},totalValue:0,assetCount:0},baseCurrency:Y.baseCurrency})})}),r.jsx(I,{item:!0,xs:12,md:4,children:r.jsxs(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:[r.jsx(f,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Allocation Summary"}),Pe&&Object.keys(Pe.allocation).length>0?r.jsxs(j,{children:[Object.entries(Pe.allocation).map(([Ae,de])=>r.jsxs(j,{sx:{mb:3},children:[r.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(f,{variant:"body1",fontWeight:"medium",children:Ae.toUpperCase()}),r.jsxs(f,{variant:"body1",fontWeight:"bold",color:"primary",children:[de.percentage.toFixed(1),"%"]})]}),r.jsx(j,{sx:{width:"100%",height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:r.jsx(j,{sx:{width:`${de.percentage}%`,height:"100%",backgroundColor:"#1976d2",transition:"width 0.3s ease"}})}),r.jsx(f,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:q(de.value,Y.baseCurrency)})]},Ae)),r.jsxs(j,{sx:{mt:3,pt:3,borderTop:"1px solid #e0e0e0",textAlign:"center"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Portfolio Value"}),r.jsx(f,{variant:"h5",color:"primary",fontWeight:"bold",children:q(Y.totalValue,Y.baseCurrency)})]})]}):r.jsx(f,{variant:"body2",color:"text.secondary",children:"No allocation data available"})]})})]})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Asset Detail Summary"}),r.jsx(j,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:pe?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):Ve?r.jsx(f,{color:"error",children:Ve}):r.jsx(Jf,{data:(ue==null?void 0:ue.data)||[],baseCurrency:Y.baseCurrency,title:"Individual Asset Holdings"})})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Risk & Performance Analysis"}),r.jsxs(I,{container:!0,spacing:H(3,1),children:[r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:c?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):u?r.jsx(f,{color:"error",children:u}):r.jsx(Yf,{data:(o==null?void 0:o.data)||[],baseCurrency:Y.baseCurrency,title:"Risk-Return Analysis"})})}),r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:g?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):w?r.jsx(f,{color:"error",children:w}):r.jsx(qf,{data:(p==null?void 0:p.data)||[],baseCurrency:Y.baseCurrency,title:"Asset Performance Comparison"})})})]})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Risk Metrics"}),r.jsx(j,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:y?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):R?r.jsx(f,{color:"error",children:R}):r.jsx(Qf,{data:(b==null?void 0:b.data)||{},baseCurrency:Y.baseCurrency,title:"Risk Metrics Dashboard"})})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Diversification & Timeline"}),r.jsxs(I,{container:!0,spacing:H(3,1),children:[r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:N?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):D?r.jsx(f,{color:"error",children:D}):r.jsx(Kf,{data:(E==null?void 0:E.data)||[],title:"Diversification Heatmap"})})}),r.jsx(I,{item:!0,xs:12,md:6,children:r.jsx(j,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:G?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):B?r.jsx(f,{color:"error",children:B}):r.jsx(Gf,{data:(_==null?void 0:_.data)||[],baseCurrency:Y.baseCurrency,title:"Allocation Timeline"})})})]})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Cash Flow Analysis"}),r.jsx(j,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:ge?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):F?r.jsx(f,{color:"error",children:F}):r.jsx(Xf,{data:(K==null?void 0:K.data)||[],baseCurrency:Y.baseCurrency,title:"Cash Flow Analysis"})})]}),r.jsxs(j,{sx:{mb:H(4,1)},children:[r.jsx(f,{variant:ne?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:ne?"0.9rem":void 0},children:"Benchmark Comparison"}),r.jsx(j,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:oe?r.jsx(j,{display:"flex",justifyContent:"center",p:4,children:r.jsx(Ue,{})}):ye?r.jsx(f,{color:"error",children:ye}):r.jsx(Zf,{data:(me==null?void 0:me.data)||[],baseCurrency:Y.baseCurrency,title:"Benchmark Comparison",benchmarkName:(me==null?void 0:me.benchmarkName)||"S&P 500"})})]})]})})]}),s&&r.jsx(j,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:()=>i(!1),children:r.jsx(j,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out"},onClick:Ae=>Ae.stopPropagation(),children:r.jsx(Kn,{onSubmit:xt,defaultPortfolioId:e})})})]})};function _a(e){const{children:t,value:n,index:a,...s}=e;return r.jsx("div",{role:"tabpanel",hidden:n!==a,id:`trading-tabpanel-${a}`,"aria-labelledby":`trading-tab-${a}`,...s,children:n===a&&r.jsx(j,{sx:{p:0},children:t})})}const Yy=()=>{var E,M;const{portfolioId:e}=So(),t=an(),[n,a]=x.useState(0),[s,i]=x.useState(!1),o=Ii(),c=ds(e).data||[],d=(N,P)=>{a(P)},u=()=>{t(`/portfolios/${e}`)},m=async N=>{try{await o.mutateAsync(N),i(!1)}catch(P){console.error("Error creating trade:",P)}},p=async N=>{const P={...N,tradeDate:N.tradeDate};await m(P)},h=()=>{i(!1)},g=()=>{a(2)},v=(c==null?void 0:c.length)||0,w=(c==null?void 0:c.filter(N=>N.side==="BUY").length)||0,C=(c==null?void 0:c.filter(N=>N.side==="SELL").length)||0,b=(c==null?void 0:c.reduce((N,P)=>N+(Number(P.totalValue)||0),0))||0,T=(c==null?void 0:c.reduce((N,P)=>N+(Number(P.fee)||0),0))||0,y=(c==null?void 0:c.reduce((N,P)=>N+(Number(P.tax)||0),0))||0,S=T+y,R=(c==null?void 0:c.reduce((N,P)=>N+(Number(P.realizedPl)||0),0))||0,k=[{title:"Total Trades",value:v.toString(),icon:r.jsx(Ut,{}),color:"primary"},{title:"Buy Orders",value:w.toString(),icon:r.jsx(wt,{}),color:"success"},{title:"Sell Orders",value:C.toString(),icon:r.jsx(Ft,{}),color:"error"},{title:"Total Volume",value:q(b),icon:r.jsx(Vn,{}),color:"info"}];return e?r.jsxs(Gr,{maxWidth:"xl",children:[r.jsx(j,{sx:{mb:4},children:r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[r.jsxs(j,{children:[r.jsx(f,{variant:"h4",gutterBottom:!0,children:"Trading Management"}),r.jsx(f,{variant:"body1",color:"text.secondary",children:"Manage your trades, analyze performance, and track positions"})]}),r.jsx(Qe,{variant:"outlined",startIcon:r.jsx(Po,{}),onClick:u,sx:{borderRadius:2,textTransform:"none",px:3,py:1},children:"Back to Portfolio"})]})}),r.jsx(I,{container:!0,spacing:3,sx:{mb:4},children:k.map((N,P)=>r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsx(Ce,{children:r.jsx(Te,{children:r.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(j,{children:[r.jsx(f,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:N.title}),r.jsx(f,{variant:"h5",component:"div",children:N.value})]}),r.jsx(j,{sx:{color:`${N.color}.main`,display:"flex",alignItems:"center"},children:N.icon})]})})})},P))}),r.jsx(I,{container:!0,spacing:3,sx:{mb:4},children:r.jsx(I,{item:!0,xs:12,children:r.jsx(Ce,{sx:{boxShadow:2},children:r.jsxs(Te,{children:[r.jsx(f,{variant:"h6",gutterBottom:!0,children:"Trading Performance"}),r.jsxs(I,{container:!0,spacing:3,children:[r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"grey.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:"text.primary",fontWeight:"bold",children:q(S)}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"Total Fees & Taxes"})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:R>=0?"success.50":"error.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:R>=0?"success.main":"error.main",fontWeight:"bold",children:q(R)}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"Realized P&L"})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"info.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:"info.main",fontWeight:"bold",children:q(b)}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"Total Volume"})]})}),r.jsx(I,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(j,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[r.jsx(f,{variant:"h4",color:"primary.main",fontWeight:"bold",children:v}),r.jsx(f,{variant:"body2",color:"text.secondary",mt:1,children:"Total Trades"})]})})]})]})})})}),r.jsxs(at,{sx:{width:"100%",boxShadow:2},children:[r.jsx(j,{sx:{borderBottom:1,borderColor:"divider",bgcolor:"grey.50"},children:r.jsxs(Do,{value:n,onChange:d,"aria-label":"trading tabs",variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500,minHeight:48},"& .Mui-selected":{color:"primary.main",fontWeight:600}},children:[r.jsx(Dr,{label:"Trade History",icon:r.jsx(Ut,{}),iconPosition:"start"}),r.jsx(Dr,{label:"Analysis",icon:r.jsx(Vn,{}),iconPosition:"start"}),r.jsx(Dr,{label:"Create Trade",icon:r.jsx(Ot,{}),iconPosition:"start"})]})}),r.jsx(_a,{value:n,index:0,children:r.jsx(hl,{portfolioId:e,onCreate:g})}),r.jsx(_a,{value:n,index:1,children:r.jsx(ml,{portfolioId:e})}),r.jsx(_a,{value:n,index:2,children:r.jsx(j,{sx:{p:2},children:r.jsx(Kn,{onSubmit:p,isLoading:o.isLoading,error:(E=o.error)==null?void 0:E.message,mode:"create",defaultPortfolioId:e})})})]}),r.jsx(yo,{color:"primary","aria-label":"add trade",sx:{position:"fixed",bottom:24,right:24,boxShadow:3,"&:hover":{boxShadow:6,transform:"scale(1.05)"},transition:"all 0.2s ease-in-out"},onClick:()=>i(!0),children:r.jsx(Ot,{})}),s&&r.jsx(j,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:h,children:r.jsx(j,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out","@keyframes modalSlideIn":{from:{opacity:0,transform:"translateY(-20px) scale(0.95)"},to:{opacity:1,transform:"translateY(0) scale(1)"}}},onClick:N=>N.stopPropagation(),children:r.jsx(Kn,{onSubmit:p,isLoading:o.isLoading,error:(M=o.error)==null?void 0:M.message,mode:"create",defaultPortfolioId:e})})})]}):r.jsx(Gr,{maxWidth:"lg",children:r.jsx(f,{variant:"h4",gutterBottom:!0,children:"Portfolio not found"})})};class qy{constructor(){}async makeRequest(t,n,a){try{return(await Le.api.request({method:t,url:n,data:a})).data}catch(s){throw this.handleServiceError(s)}}async createAsset(t){return this.makeRequest("POST","/api/v1/assets",t)}async getAssets(t={}){const n=new URLSearchParams;Object.entries(t).forEach(([s,i])=>{i!=null&&i!==""&&n.append(s,i.toString())});const a=`/api/v1/assets?${n.toString()}`;return this.makeRequest("GET",a)}async getAssetById(t){return this.makeRequest("GET",`/api/v1/assets/${t}`)}async updateAsset(t,n){console.log("AssetService.updateAsset called with:",{id:t,data:n}),console.log("Making PUT request to: /api/v1/assets/"+t);const a=await this.makeRequest("PUT",`/api/v1/assets/${t}`,n);return console.log("API response data:",a),a}async deleteAsset(t){await this.makeRequest("DELETE",`/api/v1/assets/${t}`)}async getAssetsByPortfolio(t,n={}){const a=new URLSearchParams;Object.entries(n).forEach(([i,o])=>{o!=null&&o!==""&&a.append(i,o.toString())});const s=`/api/v1/assets/portfolio/${t}?${a.toString()}`;return this.makeRequest("GET",s)}async searchAssets(t,n){const a=new URLSearchParams;a.append("q",t),n&&a.append("portfolioId",n);const s=`/api/v1/assets/search?${a.toString()}`;return(await this.makeRequest("GET",s)).data}async getAssetStatistics(t){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${t}/statistics`)).data}async getAssetAnalytics(t){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${t}/analytics`)).data}async getAssetPerformance(t,n="ALL"){const a=new URLSearchParams;a.append("period",n);const s=`/api/v1/assets/portfolio/${t}/performance?${a.toString()}`;return(await this.makeRequest("GET",s)).data}async getAssetAllocation(t){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${t}/allocation`)).data}async getAssetTypes(){return(await this.makeRequest("GET","/api/v1/assets/types")).types}async getAssetRiskMetrics(t){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${t}/risk`)).data}async getRecentAssets(t,n){const a=new URLSearchParams;t&&a.append("limit",t.toString()),n&&a.append("portfolioId",n);const s=`/api/v1/assets/recent?${a.toString()}`;return(await this.makeRequest("GET",s)).data}async getAssetsByValueRange(t,n,a){const s=new URLSearchParams;s.append("minValue",t.toString()),s.append("maxValue",n.toString()),a&&s.append("portfolioId",a);const i=`/api/v1/assets/value-range?${s.toString()}`;return(await this.makeRequest("GET",i)).data}async checkAssetExists(t){return(await this.makeRequest("GET",`/api/v1/assets/${t}/exists`)).data.exists}async getAssetCount(t){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${t}/count`)).data.count}async getTradeCount(t){return await this.makeRequest("GET",`/api/v1/assets/${t}/trades/count`)}async deleteAllTrades(t){return(await this.makeRequest("DELETE",`/api/v1/assets/${t}/trades`)).deletedCount}async forceDeleteAsset(t){await this.makeRequest("DELETE",`/api/v1/assets/${t}/force`)}handleServiceError(t){return t instanceof Error?{message:t.message,status:0,code:"NETWORK_ERROR"}:t}}const Fn=new qy,fl=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,i]=x.useState(null),o=x.useCallback(async()=>{try{a(!0),i(null);const c=await Fn.getAssetTypes();t(c)}catch(c){const d=c instanceof Error?c.message:"Failed to fetch asset types";i(d),console.error("Error fetching asset types:",c)}finally{a(!1)}},[]),l=x.useCallback(async()=>{await o()},[o]);return x.useEffect(()=>{o()},[o]),{assetTypes:e,loading:n,error:s,refresh:l}},Qy=(e,t,n="ASC")=>[...e].sort((a,s)=>{let i,o;switch(t){case"name":i=a.name.toLowerCase(),o=s.name.toLowerCase();break;case"type":i=a.type,o=s.type;break;case"totalValue":i=a.totalValue,o=s.totalValue;break;case"totalQuantity":i=a.totalQuantity,o=s.totalQuantity;break;case"createdAt":i=new Date(a.createdAt).getTime(),o=new Date(s.createdAt).getTime();break;case"updatedAt":i=new Date(a.updatedAt).getTime(),o=new Date(s.updatedAt).getTime();break;default:i=a.name.toLowerCase(),o=s.name.toLowerCase()}return i<o?n==="ASC"?-1:1:i>o?n==="ASC"?1:-1:0}),Ky=(e,t)=>{if(!t.trim())return e;const n=t.toLowerCase();return e.filter(a=>{var s,i;return a.name.toLowerCase().includes(n)||((s=a.symbol)==null?void 0:s.toLowerCase().includes(n))||((i=a.description)==null?void 0:i.toLowerCase().includes(n))})},Gy=(e,t)=>e.filter(n=>n.type===t),Xy=(e,t,n)=>e.filter(a=>(Number(a.totalValue)||0)>=t&&(Number(a.totalValue)||0)<=n),Zy=e=>{const t=e.currentValue?e.currentValue-(e.initialValue||0):0,n=e.currentQuantity?e.currentQuantity-(e.initialQuantity||0):0,a=(e.initialValue||0)>0?t/(e.initialValue||0)*100:0,s=(e.initialQuantity||0)>0?n/(e.initialQuantity||0)*100:0;return{valueChange:t,quantityChange:n,valueChangePercentage:a,quantityChangePercentage:s,isGaining:t>0,isLosing:t<0}},Jy=({portfolioId:e,initialFilters:t={},onAssetSelect:n,onAssetEdit:a,onAssetDelete:s,showActions:i=!0,className:o=""})=>{const{baseCurrency:l}=Pt(),c=x.useMemo(()=>({...t,...e&&{portfolioId:e}}),[e,t]),{assets:d,loading:u,error:m,pagination:p,clearFilters:h,refresh:g,goToPage:v,setPageSize:w,setSorting:C}=ys({initialFilters:c||{},autoFetch:!0}),{assetTypes:b}=fl(),[T,y]=x.useState(""),[S,R]=x.useState("ALL"),[k,E]=x.useState("name"),[M,N]=x.useState("ASC"),[P,D]=x.useState(!1),[L,_]=x.useState({min:"",max:""}),A=x.useMemo(()=>{let F=d;if(T&&(F=Ky(F,T)),S!=="ALL"&&(F=Gy(F,S)),L.min||L.max){const le=L.min?parseFloat(L.min):0,me=L.max?parseFloat(L.max):1/0;F=Xy(F,le,me)}return Qy(F,k,M)},[d,T,S,L,k,M]),G=F=>{y(F)},U=F=>{R(F)},B=F=>{k===F?N(M==="ASC"?"DESC":"ASC"):(E(F),N("ASC")),C(F,M)},W=(F,le)=>{_(me=>({...me,[F]:le}))},K=()=>{y(""),R("ALL"),_({min:"",max:""}),h()},be=F=>{v(F)},ge=F=>{w(F)},te=()=>{g()};return u&&d.length===0?r.jsx("div",{className:`asset-list ${o}`,children:r.jsxs("div",{className:"asset-list__loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading assets..."})]})}):m?r.jsx("div",{className:`asset-list ${o}`,children:r.jsxs("div",{className:"asset-list__error",children:[r.jsxs("p",{children:["Error: ",m]}),r.jsx("button",{onClick:te,className:"btn btn--primary",children:"Retry"})]})}):r.jsxs("div",{className:`asset-list ${o}`,children:[r.jsxs("div",{className:"asset-list__header",children:[r.jsxs("div",{className:"asset-list__title",children:[r.jsxs("h2",{children:["Assets (",p.total,")"]}),r.jsxs("button",{onClick:te,className:"btn btn--secondary btn--icon",disabled:u,children:[r.jsx("span",{className:"icon",children:"↻"}),"Refresh"]})]}),r.jsxs("div",{className:"asset-list__controls",children:[r.jsx("div",{className:"asset-list__search",children:r.jsx("input",{type:"text",placeholder:"Search assets...",value:T,onChange:F=>G(F.target.value),className:"input"})}),r.jsx("div",{className:"asset-list__filters",children:r.jsxs("button",{onClick:()=>D(!P),className:"btn btn--secondary",children:["Filters ",P?"▲":"▼"]})})]}),P&&r.jsxs("div",{className:"asset-list__advanced-filters",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Type:"}),r.jsxs("select",{value:S,onChange:F=>U(F.target.value),className:"select",children:[r.jsx("option",{value:"ALL",children:"All Types"}),b.map(F=>r.jsx("option",{value:F.value,children:F.label},F.value))]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Value Range:"}),r.jsxs("div",{className:"value-range",children:[r.jsx("input",{type:"number",placeholder:"Min",value:L.min,onChange:F=>W("min",F.target.value),className:"input input--small"}),r.jsx("span",{children:"to"}),r.jsx("input",{type:"number",placeholder:"Max",value:L.max,onChange:F=>W("max",F.target.value),className:"input input--small"})]})]}),r.jsx("button",{onClick:K,className:"btn btn--outline",children:"Clear Filters"})]})]}),r.jsx("div",{className:"asset-list__table-container",children:r.jsxs("table",{className:"asset-list__table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{className:"sortable",onClick:()=>B("name"),children:["Name ",k==="name"&&(M==="ASC"?"↑":"↓")]}),r.jsxs("th",{className:"sortable",onClick:()=>B("type"),children:["Type ",k==="type"&&(M==="ASC"?"↑":"↓")]}),r.jsxs("th",{className:"sortable",onClick:()=>B("totalValue"),children:["Value ",k==="totalValue"&&(M==="ASC"?"↑":"↓")]}),r.jsxs("th",{className:"sortable",onClick:()=>B("totalQuantity"),children:["Quantity ",k==="totalQuantity"&&(M==="ASC"?"↑":"↓")]}),r.jsxs("th",{className:"sortable",onClick:()=>B("currentPrice"),children:["Market Price ",k==="currentPrice"&&(M==="ASC"?"↑":"↓")]}),r.jsx("th",{children:"Performance"}),r.jsxs("th",{className:"sortable",onClick:()=>B("updatedAt"),children:["Updated ",k==="updatedAt"&&(M==="ASC"?"↑":"↓")]}),i&&r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:A.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:i?8:7,className:"asset-list__empty",children:"No assets found"})}):A.map(F=>{var me;const le=Zy(F);return r.jsxs("tr",{className:"asset-list__row",onClick:()=>n==null?void 0:n(F),children:[r.jsx("td",{className:"asset-list__cell asset-list__cell--name",children:r.jsxs("div",{className:"asset-name",children:[r.jsx("div",{className:"asset-name__primary",children:F.name}),F.symbol&&r.jsx("div",{className:"asset-name__secondary",children:F.symbol})]})}),r.jsx("td",{className:"asset-list__cell",children:r.jsx("span",{className:`asset-type asset-type--${F.type.toLowerCase()}`,children:((me=b.find(Q=>Q.value===F.type))==null?void 0:me.label)||F.type})}),r.jsx("td",{className:"asset-list__cell asset-list__cell--value",children:r.jsxs("div",{className:"value-display",children:[r.jsx("div",{className:"value-display__primary",children:q(Number(F.totalValue)||0)}),F.currentValue&&F.currentValue!==F.initialValue&&r.jsxs("div",{className:"value-display__secondary",children:["Initial: ",q(F.initialValue||0)]})]})}),r.jsx("td",{className:"asset-list__cell",children:r.jsxs("div",{className:"quantity-display",children:[r.jsx("div",{className:"quantity-display__primary",children:dt(Number(F.totalQuantity)||0,2)}),F.currentQuantity&&F.currentQuantity!==F.initialQuantity&&r.jsxs("div",{className:"quantity-display__secondary",children:["Initial: ",dt(F.initialQuantity||0,2)]})]})}),r.jsx("td",{className:"asset-list__cell",children:r.jsxs("div",{className:"price-display",children:[r.jsx("div",{className:"price-display__primary price-display__primary--current",children:q(Number(F.currentPrice)||0)}),F.avgCost!==void 0&&F.avgCost>0&&F.avgCost!==F.currentPrice&&r.jsxs("div",{className:"price-display__secondary",children:["Avg: ",q(Number(F.avgCost)||0)]})]})}),r.jsx("td",{className:"asset-list__cell",children:r.jsxs("div",{className:`performance ${le.isGaining?"performance--positive":le.isLosing?"performance--negative":""}`,children:[r.jsx("div",{className:"performance__value",children:q(le.valueChange,l)}),r.jsx("div",{className:"performance__percentage",children:fe(le.valueChangePercentage,2)})]})}),r.jsx("td",{className:"asset-list__cell",children:new Date(F.updatedAt).toLocaleDateString()}),i&&r.jsx("td",{className:"asset-list__cell asset-list__cell--actions",children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:Q=>{Q.stopPropagation(),a==null||a(F)},className:"btn btn--small btn--secondary",title:"Edit Asset",children:"✏️"}),r.jsx("button",{onClick:Q=>{Q.stopPropagation(),s==null||s(F)},className:"btn btn--small btn--danger",title:"Delete Asset",children:"🗑️"})]})})]},F.id)})})]})}),p.total>0&&r.jsxs("div",{className:"asset-list__pagination",children:[r.jsxs("div",{className:"pagination-info",children:["Showing ",(p.page-1)*p.limit+1," to"," ",Math.min(p.page*p.limit,p.total)," of"," ",p.total," assets"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsx("button",{onClick:()=>be(p.page-1),disabled:p.page<=1,className:"btn btn--secondary",children:"Previous"}),r.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(p.total/p.limit)},(F,le)=>le+1).filter(F=>{const le=p.page;return F===1||F===le||F===le-1||F===le+1||F===Math.ceil(p.total/p.limit)}).map((F,le,me)=>r.jsxs(_t.Fragment,{children:[le>0&&me[le-1]!==F-1&&r.jsx("span",{children:"..."}),r.jsx("button",{onClick:()=>be(F),className:`btn ${F===p.page?"btn--primary":"btn--secondary"}`,children:F})]},F))}),r.jsx("button",{onClick:()=>be(p.page+1),disabled:p.page>=Math.ceil(p.total/p.limit),className:"btn btn--secondary",children:"Next"})]}),r.jsxs("div",{className:"pagination-size",children:[r.jsx("label",{children:"Show:"}),r.jsxs("select",{value:p.limit,onChange:F=>ge(Number(F.target.value)),className:"select select--small",children:[r.jsx("option",{value:10,children:"10"}),r.jsx("option",{value:25,children:"25"}),r.jsx("option",{value:50,children:"50"}),r.jsx("option",{value:100,children:"100"})]})]})]})]})},ev=({performance:e,className:t="",showLabels:n=!0,compact:a=!1})=>{const s=[{key:"daily",label:"Hôm nay",value:e.daily},{key:"weekly",label:"Tuần",value:e.weekly},{key:"monthly",label:"Tháng",value:e.monthly},{key:"yearly",label:"Năm",value:e.yearly}];return a?r.jsx("div",{className:`asset-performance asset-performance--compact ${t}`,children:s.map(({key:i,label:o,value:l})=>r.jsxs("div",{className:"performance-metric performance-metric--compact",children:[n&&r.jsxs("span",{className:"performance-label",children:[o,":"]}),r.jsx("span",{className:`performance-value performance-value--compact ${uo(l)}`,children:co(l)})]},i))}):r.jsx("div",{className:`asset-performance asset-performance--grid ${t}`,children:s.map(({key:i,label:o,value:l})=>r.jsxs("div",{className:"performance-metric",children:[r.jsx("div",{className:"performance-label",children:o}),r.jsx("div",{className:`performance-value ${uo(l)}`,children:co(l)})]},i))})},tv=({asset:e,onEdit:t,onDelete:n,onView:a,showActions:s=!0,compact:i=!1,className:o=""})=>{const{baseCurrency:l}=Pt(),c={valueChange:(Number(e.totalValue)||0)-(Number(e.initialValue)||0),valueChangePercentage:e.initialValue?((Number(e.totalValue)||0)-(Number(e.initialValue)||0))/(Number(e.initialValue)||1)*100:0,isGaining:(Number(e.totalValue)||0)>(Number(e.initialValue)||0),isLosing:(Number(e.totalValue)||0)<(Number(e.initialValue)||0)},d=()=>{a==null||a(e)},u=p=>{p.stopPropagation(),t==null||t(e)},m=p=>{p.stopPropagation(),n==null||n(e)};return r.jsxs("div",{className:`asset-card ${i?"asset-card--compact":""} ${o}`,onClick:d,children:[r.jsxs("div",{className:"asset-card__header",children:[r.jsxs("div",{className:"asset-card__title",children:[r.jsx("h3",{className:"asset-card__name",children:e.name}),e.symbol&&r.jsx("span",{className:"asset-card__code",children:e.symbol})]}),r.jsx("div",{className:"asset-card__type",children:r.jsx("span",{className:`asset-type asset-type--${e.type.toLowerCase()}`,children:Za[e.type]||e.type})})]}),e.description&&!i&&r.jsx("div",{className:"asset-card__description",children:r.jsx("p",{children:e.description})}),r.jsxs("div",{className:"asset-card__content",children:[r.jsxs("div",{className:"asset-card__value",children:[r.jsxs("div",{className:"value-item",children:[r.jsx("label",{children:"Total Value"}),r.jsx("span",{className:"value-item__primary",children:q(Number(e.totalValue)||0,l)}),e.currentValue&&e.currentValue!==e.initialValue&&r.jsxs("span",{className:"value-item__secondary",children:["Initial: ",q(e.initialValue||0,l)]})]}),r.jsxs("div",{className:"value-item",children:[r.jsx("label",{children:"Quantity"}),r.jsx("span",{className:"value-item__primary",children:dt(Number(e.totalQuantity)||0,2)}),e.currentQuantity&&e.currentQuantity!==e.initialQuantity&&r.jsxs("span",{className:"value-item__secondary",children:["Initial: ",dt(e.initialQuantity||0,2)]})]})]}),r.jsxs("div",{className:"asset-card__performance",children:[r.jsxs("div",{className:"performance-item",children:[r.jsx("label",{children:"Performance"}),r.jsxs("div",{className:`performance ${c.isGaining?"performance--positive":c.isLosing?"performance--negative":""}`,children:[r.jsx("span",{className:"performance__value",children:q(c.valueChange,l)}),r.jsx("span",{className:"performance__percentage",children:fe(c.valueChangePercentage,2)})]})]}),e.performance&&r.jsx("div",{className:"performance-metrics",children:r.jsx(ev,{performance:e.performance,compact:!0,showLabels:!0,className:"mt-2"})})]}),!i&&r.jsxs("div",{className:"asset-card__info",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("label",{children:"Created"}),r.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"info-item",children:[r.jsx("label",{children:"Updated"}),r.jsx("span",{children:new Date(e.updatedAt).toLocaleDateString()})]}),r.jsxs("div",{className:"info-item",children:[r.jsx("label",{children:"Has Trades"}),r.jsx("span",{className:e.hasTrades?"status status--active":"status status--inactive",children:e.hasTrades?"Yes":"No"})]})]})]}),s&&r.jsxs("div",{className:"asset-card__actions",children:[r.jsx("button",{onClick:u,className:"btn btn--small btn--secondary",title:"Edit Asset",children:"✏️ Edit"}),r.jsx("button",{onClick:m,className:"btn btn--small btn--danger",title:"Delete Asset",children:"🗑️ Delete"})]}),r.jsxs("div",{className:"asset-card__indicators",children:[e.hasTrades&&r.jsx("span",{className:"indicator indicator--trades",title:"Has trading activity",children:"📈"}),c.isGaining&&r.jsx("span",{className:"indicator indicator--gaining",title:"Positive performance",children:"📈"}),c.isLosing&&r.jsx("span",{className:"indicator indicator--losing",title:"Negative performance",children:"📉"})]})]})},rv=({filters:e,onFiltersChange:t,onClearFilters:n,className:a="",showAdvanced:s=!1,onToggleAdvanced:i})=>{var M,N;const[o,l]=x.useState(e.search||""),[c,d]=x.useState(e.type||"ALL"),[u,m]=x.useState(e.sortBy||"name"),[p,h]=x.useState(e.sortOrder||"ASC"),[g,v]=x.useState({min:((M=e.minValue)==null?void 0:M.toString())||"",max:((N=e.maxValue)==null?void 0:N.toString())||""}),[w,C]=x.useState(e.limit||25);x.useEffect(()=>{var P,D;l(e.search||""),d(e.type||"ALL"),m(e.sortBy||"name"),h(e.sortOrder||"ASC"),v({min:((P=e.minValue)==null?void 0:P.toString())||"",max:((D=e.maxValue)==null?void 0:D.toString())||""}),C(e.limit||25)},[e]);const b=x.useCallback(P=>{l(P),t({...e,search:P||void 0})},[e,t]),T=x.useCallback(P=>{d(P),t({...e,type:P==="ALL"?void 0:P})},[e,t]),y=x.useCallback((P,D)=>{const L={...g,[P]:D};v(L);const _=L.min?parseFloat(L.min):void 0,A=L.max?parseFloat(L.max):void 0;t({...e,minValue:_,maxValue:A})},[e,t,g]),S=x.useCallback(P=>{C(P),t({...e,limit:P})},[e,t]),R=x.useCallback(()=>{l(""),d("ALL"),m("name"),h("ASC"),v({min:"",max:""}),C(25),n()},[n]),k=x.useCallback(()=>{i==null||i(!s)},[s,i]),E=o||c!=="ALL"||g.min||g.max;return r.jsxs("div",{className:`asset-filters ${a}`,children:[r.jsxs("div",{className:"asset-filters__basic",children:[r.jsxs("div",{className:"asset-filters__search",children:[r.jsx("input",{type:"text",placeholder:"Search assets...",value:o,onChange:P=>b(P.target.value),className:"input input--search"}),o&&r.jsx("button",{onClick:()=>b(""),className:"btn btn--icon btn--clear",title:"Clear search",children:"✕"})]}),r.jsx("div",{className:"asset-filters__type",children:r.jsxs("select",{value:c,onChange:P=>T(P.target.value),className:"select",children:[r.jsx("option",{value:"ALL",children:"All Types"}),Object.entries(Za).map(([P,D])=>r.jsx("option",{value:P,children:D},P))]})}),r.jsx("div",{className:"asset-filters__sort",children:r.jsxs("select",{value:`${u}-${p}`,onChange:P=>{const[D,L]=P.target.value.split("-");m(D),h(L),t({...e,sortBy:D,sortOrder:L})},className:"select",children:[r.jsx("option",{value:"name-ASC",children:"Name A-Z"}),r.jsx("option",{value:"name-DESC",children:"Name Z-A"}),r.jsx("option",{value:"totalValue-ASC",children:"Value Low-High"}),r.jsx("option",{value:"totalValue-DESC",children:"Value High-Low"}),r.jsx("option",{value:"totalQuantity-ASC",children:"Quantity Low-High"}),r.jsx("option",{value:"totalQuantity-DESC",children:"Quantity High-Low"}),r.jsx("option",{value:"updatedAt-ASC",children:"Oldest First"}),r.jsx("option",{value:"updatedAt-DESC",children:"Newest First"})]})}),r.jsx("div",{className:"asset-filters__limit",children:r.jsxs("select",{value:w,onChange:P=>S(Number(P.target.value)),className:"select select--small",children:[r.jsx("option",{value:10,children:"10 per page"}),r.jsx("option",{value:25,children:"25 per page"}),r.jsx("option",{value:50,children:"50 per page"}),r.jsx("option",{value:100,children:"100 per page"})]})}),r.jsxs("div",{className:"asset-filters__actions",children:[r.jsxs("button",{onClick:k,className:"btn btn--secondary",children:[s?"Hide":"Show"," Advanced"]}),E&&r.jsx("button",{onClick:R,className:"btn btn--outline",children:"Clear All"})]})]}),s&&r.jsxs("div",{className:"asset-filters__advanced",children:[r.jsx("div",{className:"asset-filters__advanced-header",children:r.jsx("h4",{children:"Advanced Filters"})}),r.jsxs("div",{className:"asset-filters__advanced-content",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Value Range"}),r.jsxs("div",{className:"value-range",children:[r.jsx("input",{type:"number",placeholder:"Min value",value:g.min,onChange:P=>y("min",P.target.value),className:"input input--small",min:"0",step:"0.01"}),r.jsx("span",{children:"to"}),r.jsx("input",{type:"number",placeholder:"Max value",value:g.max,onChange:P=>y("max",P.target.value),className:"input input--small",min:"0",step:"0.01"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Sort Options"}),r.jsxs("div",{className:"sort-options",children:[r.jsxs("div",{className:"sort-field",children:[r.jsx("label",{children:"Sort by:"}),r.jsxs("select",{value:u,onChange:P=>{m(P.target.value),t({...e,sortBy:P.target.value})},className:"select select--small",children:[r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"type",children:"Type"}),r.jsx("option",{value:"totalValue",children:"Total Value"}),r.jsx("option",{value:"totalQuantity",children:"Total Quantity"}),r.jsx("option",{value:"createdAt",children:"Created Date"}),r.jsx("option",{value:"updatedAt",children:"Updated Date"})]})]}),r.jsxs("div",{className:"sort-order",children:[r.jsx("label",{children:"Order:"}),r.jsxs("select",{value:p,onChange:P=>{h(P.target.value),t({...e,sortOrder:P.target.value})},className:"select select--small",children:[r.jsx("option",{value:"ASC",children:"Ascending"}),r.jsx("option",{value:"DESC",children:"Descending"})]})]})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Results per page"}),r.jsxs("select",{value:w,onChange:P=>S(Number(P.target.value)),className:"select select--small",children:[r.jsx("option",{value:10,children:"10"}),r.jsx("option",{value:25,children:"25"}),r.jsx("option",{value:50,children:"50"}),r.jsx("option",{value:100,children:"100"}),r.jsx("option",{value:250,children:"250"}),r.jsx("option",{value:500,children:"500"})]})]})]})]}),E&&r.jsx("div",{className:"asset-filters__summary",children:r.jsxs("div",{className:"active-filters",children:[r.jsx("span",{className:"active-filters__label",children:"Active filters:"}),r.jsxs("div",{className:"active-filters__tags",children:[o&&r.jsxs("span",{className:"filter-tag",children:['Search: "',o,'"',r.jsx("button",{onClick:()=>b(""),className:"filter-tag__remove",children:"✕"})]}),c!=="ALL"&&r.jsxs("span",{className:"filter-tag",children:["Type: ",Za[c],r.jsx("button",{onClick:()=>T("ALL"),className:"filter-tag__remove",children:"✕"})]}),g.min&&r.jsxs("span",{className:"filter-tag",children:["Min: ",g.min,r.jsx("button",{onClick:()=>y("min",""),className:"filter-tag__remove",children:"✕"})]}),g.max&&r.jsxs("span",{className:"filter-tag",children:["Max: ",g.max,r.jsx("button",{onClick:()=>y("max",""),className:"filter-tag__remove",children:"✕"})]})]})]})})]})},nv=({onSubmit:e,onCancel:t,userId:n,initialData:a,submitText:s="Create Asset",mode:i="create",loading:o=!1,className:l=""})=>{var S;const{accountId:c}=Pt(),d=n||c,u=i==="edit"||a&&a.symbol,{assetTypes:m,loading:p,error:h}=fl(),[g,v]=x.useState({name:"",symbol:"",type:((S=m[0])==null?void 0:S.value)||ul.STOCK,description:"",initialValue:void 0,initialQuantity:void 0,currentValue:void 0,currentQuantity:void 0,createdBy:d,updatedBy:d,...a}),[w,C]=x.useState({}),b=()=>{var k,E;const R={};return(k=g.name)!=null&&k.trim()||(R.name="Asset name is required"),!u&&!((E=g.symbol)!=null&&E.trim())&&(R.symbol="Asset symbol is required"),g.type||(R.type="Asset type is required"),C(R),Object.keys(R).length===0},T=R=>{R.preventDefault(),console.log("AssetForm handleSubmit called"),console.log("Form data:",g),console.log("Form validation result:",b()),b()?(console.log("Calling onSubmit with formData"),e(g)):console.log("Form validation failed")},y=R=>k=>{if(R==="initialValue"||R==="initialQuantity"||R==="currentValue"||R==="currentQuantity")return;const E=k.target.value;v(M=>({...M,[R]:E})),w[R]&&C(M=>({...M,[R]:""}))};return r.jsxs("div",{className:"asset-form",children:[r.jsxs("div",{className:"asset-form__header",children:[r.jsx("h2",{children:s}),r.jsx("button",{type:"button",onClick:t,className:"btn btn--secondary btn--icon","aria-label":"Close form",children:"✕"})]}),r.jsx("div",{className:"asset-form__content",children:r.jsxs(j,{component:"form",onSubmit:T,children:[r.jsxs(I,{container:!0,spacing:2,children:[r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Asset Name",value:g.name,onChange:y("name"),error:!!w.name,helperText:w.name,required:!0})}),!u&&r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Asset Symbol",value:g.symbol,onChange:y("symbol"),placeholder:"e.g., AAPL, HPG",error:!!w.symbol,helperText:"Symbol cannot be changed after creation. ",required:!0})}),u&&r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Asset Symbol",value:g.symbol||"",disabled:!0,helperText:"Symbol cannot be changed after creation"})}),r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsxs(vt,{fullWidth:!0,error:!!w.type,children:[r.jsx(bt,{children:"Asset Type"}),r.jsx(jt,{value:g.type,onChange:y("type"),label:"Asset Type",disabled:p,children:p?r.jsxs(xe,{disabled:!0,children:[r.jsx(Ue,{size:20,sx:{mr:1}}),"Loading asset types..."]}):h?r.jsx(xe,{disabled:!0,children:"Error loading asset types"}):m.map(R=>r.jsx(xe,{value:R.value,children:R.label},R.value))}),w.type&&r.jsx(Ye,{severity:"error",sx:{mt:1},children:w.type}),h&&r.jsx(Ye,{severity:"warning",sx:{mt:1},children:h})]})}),r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Currency",value:"VND",disabled:!0,helperText:"Currently only VND is supported"})}),r.jsx(I,{item:!0,xs:12,children:r.jsx(ot,{fullWidth:!0,label:"Description",value:g.description,onChange:y("description"),multiline:!0,rows:2,placeholder:"Optional description of the asset"})}),r.jsx(I,{item:!0,xs:12,children:r.jsxs(Ye,{severity:"info",sx:{mb:2},children:[r.jsx("strong",{children:"Computed Fields:"})," Initial value, initial quantity, current value, and current quantity are automatically calculated based on your trades and market prices. These fields will be updated when you create trades for this asset."]})}),r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Initial Value",type:"number",value:g.initialValue??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:0,step:.01},placeholder:g.initialValue?void 0:"No data available"})}),r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Initial Quantity",type:"number",value:g.initialQuantity??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:1e-4,step:1e-4},placeholder:g.initialQuantity?void 0:"No data available"})}),r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Current Value",type:"number",value:g.currentValue??"",disabled:!0,helperText:"Calculated from trades × current market price",inputProps:{min:0,step:.01},placeholder:g.currentValue?void 0:"No data available"})}),r.jsx(I,{item:!0,xs:12,sm:6,children:r.jsx(ot,{fullWidth:!0,label:"Current Quantity",type:"number",value:g.currentQuantity??"",disabled:!0,helperText:"Calculated from all trades",inputProps:{min:0,step:1e-4},placeholder:g.currentQuantity?void 0:"No data available"})})]}),r.jsxs("div",{className:"asset-form__actions",children:[r.jsx(Qe,{type:"button",variant:"outlined",onClick:t,size:"large",children:"Cancel"}),r.jsx(Qe,{type:"submit",variant:"contained",size:"large",disabled:o,children:o?"Đang xử lý...":s})]})]})})]})},av=({assets:e,statistics:t,onClose:n,className:a=""})=>{const{baseCurrency:s}=Pt(),i=_t.useMemo(()=>{const c=e.reduce((p,h)=>{var g;return p+(Number((g=h.performance)==null?void 0:g.daily)||0)},0),d=e.reduce((p,h)=>{var g;return p+(Number((g=h.performance)==null?void 0:g.weekly)||0)},0),u=e.reduce((p,h)=>{var g;return p+(Number((g=h.performance)==null?void 0:g.monthly)||0)},0),m=e.reduce((p,h)=>{var g;return p+(Number((g=h.performance)==null?void 0:g.yearly)||0)},0);return{averageDailyReturn:e.length>0?c/e.length:0,averageWeeklyReturn:e.length>0?d/e.length:0,averageMonthlyReturn:e.length>0?u/e.length:0,averageYearlyReturn:e.length>0?m/e.length:0}},[e]),o=_t.useMemo(()=>{const c=[{label:"Under ₫10K",min:0,max:1e4,count:0},{label:"₫10K - ₫50K",min:1e4,max:5e4,count:0},{label:"₫50K - ₫100K",min:5e4,max:1e5,count:0},{label:"₫100K - ₫500K",min:1e5,max:5e5,count:0},{label:"Over ₫500K",min:5e5,max:1/0,count:0}];return e.forEach(d=>{const u=Number(d.totalValue)||0,m=c.find(p=>u>=p.min&&u<p.max);m&&m.count++}),c},[e]),l=_t.useMemo(()=>[...e].filter(c=>{var d;return((d=c.performance)==null?void 0:d.yearly)!==void 0}).sort((c,d)=>{var u,m;return(((u=d.performance)==null?void 0:u.yearly)||0)-(((m=c.performance)==null?void 0:m.yearly)||0)}).slice(0,5),[e]);return r.jsxs("div",{className:`asset-analytics ${a}`,children:[r.jsxs("div",{className:"asset-analytics__header",children:[r.jsx("h3",{children:"Asset Analytics"}),n&&r.jsx("button",{onClick:n,className:"btn btn--secondary btn--icon","aria-label":"Close analytics",children:"✕"})]}),r.jsxs("div",{className:"asset-analytics__content",children:[r.jsxs("div",{className:"analytics-section",children:[r.jsx("h4",{children:"Performance Overview"}),r.jsxs("div",{className:"metrics-grid",children:[r.jsxs("div",{className:"metric-card",children:[r.jsxs("div",{className:"metric-card__value",children:[i.averageDailyReturn.toFixed(2),"%"]}),r.jsx("div",{className:"metric-card__label",children:"Avg Daily Return"})]}),r.jsxs("div",{className:"metric-card",children:[r.jsxs("div",{className:"metric-card__value",children:[i.averageWeeklyReturn.toFixed(2),"%"]}),r.jsx("div",{className:"metric-card__label",children:"Avg Weekly Return"})]}),r.jsxs("div",{className:"metric-card",children:[r.jsxs("div",{className:"metric-card__value",children:[i.averageMonthlyReturn.toFixed(2),"%"]}),r.jsx("div",{className:"metric-card__label",children:"Avg Monthly Return"})]}),r.jsxs("div",{className:"metric-card",children:[r.jsxs("div",{className:"metric-card__value",children:[i.averageYearlyReturn.toFixed(2),"%"]}),r.jsx("div",{className:"metric-card__label",children:"Avg Yearly Return"})]})]})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h4",{children:"Asset Type Distribution"}),r.jsx("div",{className:"distribution-chart",children:Object.entries(t.assetsByType).map(([c,d])=>{const u=t.totalAssets>0?d/t.totalAssets*100:0;return r.jsxs("div",{className:"distribution-item",children:[r.jsxs("div",{className:"distribution-item__label",children:[r.jsx("span",{className:"distribution-item__type",children:c}),r.jsx("span",{className:"distribution-item__count",children:d})]}),r.jsx("div",{className:"distribution-item__bar",children:r.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),r.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},c)})})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h4",{children:"Value Distribution"}),r.jsx("div",{className:"distribution-chart",children:o.map((c,d)=>{const u=t.totalAssets>0?c.count/t.totalAssets*100:0;return r.jsxs("div",{className:"distribution-item",children:[r.jsxs("div",{className:"distribution-item__label",children:[r.jsx("span",{className:"distribution-item__type",children:c.label}),r.jsx("span",{className:"distribution-item__count",children:c.count})]}),r.jsx("div",{className:"distribution-item__bar",children:r.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),r.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},d)})})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h4",{children:"Top Performers (Yearly)"}),r.jsx("div",{className:"performers-list",children:l.map((c,d)=>{var u,m;return r.jsxs("div",{className:"performer-item",children:[r.jsxs("div",{className:"performer-item__rank",children:["#",d+1]}),r.jsxs("div",{className:"performer-item__info",children:[r.jsx("div",{className:"performer-item__name",children:c.name}),r.jsx("div",{className:"performer-item__code",children:c.symbol})]}),r.jsxs("div",{className:"performer-item__performance",children:[r.jsx("div",{className:`performer-item__return ${(((u=c.performance)==null?void 0:u.yearly)||0)>=0?"positive":"negative"}`,children:fe(((m=c.performance)==null?void 0:m.yearly)||0,2)}),r.jsx("div",{className:"performer-item__value",children:q(Number(c.totalValue)||0,s)})]})]},c.id)})})]})]})]})},sv=({selectedAsset:e,editingAsset:t,deletingAsset:n,showCreateForm:a=!1,onClose:s,onSubmit:i,onDeleteConfirm:o,onEditAsset:l,portfolioId:c,className:d=""})=>{const{baseCurrency:u}=Pt(),m=()=>{s()},p=()=>{n&&o(n)},h=()=>{s()};return r.jsxs("div",{className:`asset-dialogs ${d}`,children:[e&&r.jsx("div",{className:"modal-overlay",onClick:m,children:r.jsx("div",{className:"modal-content",onClick:g=>g.stopPropagation(),children:r.jsxs("div",{className:"asset-dialog",children:[r.jsxs("div",{className:"asset-dialog__header",children:[r.jsx("h3",{children:"Asset Details"}),r.jsx("button",{onClick:m,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:"✕"})]}),r.jsx("div",{className:"asset-dialog__content",children:r.jsxs("div",{className:"asset-details",children:[r.jsxs("div",{className:"asset-details__section",children:[r.jsx("h4",{children:"Basic Information"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Name"}),r.jsx("span",{children:e.name})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Symbol"}),r.jsx("span",{children:e.symbol})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Type"}),r.jsx("span",{className:`asset-type-badge asset-type-badge--${e.type.toLowerCase()}`,children:e.type})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Description"}),r.jsx("span",{children:e.description||"No description"})]})]})]}),r.jsxs("div",{className:"asset-details__section",children:[r.jsx("h4",{children:"Financial Information"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Current Price"}),r.jsx("span",{className:"detail-value--highlight",children:q(e.currentPrice||e.currentValue||0,u)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Average Cost"}),r.jsx("span",{children:q(e.avgCost||0,u)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Quantity"}),r.jsx("span",{children:dt(e.quantity||e.totalQuantity||0,2)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Total Value"}),r.jsx("span",{className:"detail-value--highlight",children:q(Number(e.totalValue)||0,u)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Initial Value"}),r.jsx("span",{children:q(e.initialValue||0,u)})]})]})]}),r.jsxs("div",{className:"asset-details__section",children:[r.jsx("h4",{children:"Profit & Loss Analysis"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Unrealized P&L"}),r.jsx("span",{className:`detail-value ${(e.currentPrice||0)>=(e.avgCost||0)?"positive":"negative"}`,children:q(((e.currentPrice||0)-(e.avgCost||0))*(e.quantity||e.totalQuantity||0),u)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"P&L Percentage"}),r.jsx("span",{className:`detail-value ${(e.currentPrice||0)>=(e.avgCost||0)?"positive":"negative"}`,children:e.avgCost&&e.avgCost>0?fe(((e.currentPrice||0)-e.avgCost)/e.avgCost*100,2):"N/A"})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Cost Basis"}),r.jsx("span",{children:q((e.avgCost||0)*(e.quantity||e.totalQuantity||0),u)})]})]})]}),r.jsxs("div",{className:"asset-details__section",children:[r.jsx("h4",{children:"Performance"}),r.jsx("div",{className:"performance-grid",children:e.performance?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"performance-item",children:[r.jsx("label",{children:"Daily"}),r.jsx("span",{className:`performance-value ${(e.performance.daily||0)>=0?"positive":"negative"}`,children:fe(e.performance.daily||0,2)})]}),r.jsxs("div",{className:"performance-item",children:[r.jsx("label",{children:"Weekly"}),r.jsx("span",{className:`performance-value ${(e.performance.weekly||0)>=0?"positive":"negative"}`,children:fe(e.performance.weekly||0,2)})]}),r.jsxs("div",{className:"performance-item",children:[r.jsx("label",{children:"Monthly"}),r.jsx("span",{className:`performance-value ${(e.performance.monthly||0)>=0?"positive":"negative"}`,children:fe(e.performance.monthly||0,2)})]}),r.jsxs("div",{className:"performance-item",children:[r.jsx("label",{children:"Yearly"}),r.jsx("span",{className:`performance-value ${(e.performance.yearly||0)>=0?"positive":"negative"}`,children:fe(e.performance.yearly||0,2)})]})]}):r.jsx("div",{className:"performance-item",children:r.jsx("span",{children:"No performance data available"})})})]}),r.jsxs("div",{className:"asset-details__section",children:[r.jsx("h4",{children:"Metadata"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Created"}),r.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Last Updated"}),r.jsx("span",{children:new Date(e.updatedAt).toLocaleDateString()})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Asset ID"}),r.jsx("span",{children:e.id})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Asset Class"}),r.jsx("span",{children:e.assetClass})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Currency"}),r.jsx("span",{children:e.currency})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Status"}),r.jsx("span",{className:`status-badge ${e.isActive?"status-badge--active":"status-badge--inactive"}`,children:e.isActive?"Active":"Inactive"})]})]})]})]})}),r.jsxs("div",{className:"asset-dialog__actions",children:[r.jsx("button",{onClick:()=>{l&&e&&l(e)},className:"btn btn--secondary",disabled:!l,title:"Edit this asset",children:"✏️ Edit Asset"}),r.jsx("button",{onClick:()=>{o&&e&&o(e)},className:"btn btn--danger",title:"Delete this asset",children:"🗑️ Delete"}),r.jsx("button",{onClick:m,className:"btn btn--primary",children:"Close"})]})]})})}),n&&r.jsx("div",{className:"modal-overlay",onClick:h,children:r.jsx("div",{className:"modal-content modal-content--small",onClick:g=>g.stopPropagation(),children:r.jsxs("div",{className:"asset-dialog",children:[r.jsxs("div",{className:"asset-dialog__header",children:[r.jsx("h3",{children:"Delete Asset"}),r.jsx("button",{onClick:h,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:"✕"})]}),r.jsx("div",{className:"asset-dialog__content",children:r.jsxs("div",{className:"delete-confirmation",children:[r.jsx("div",{className:"delete-confirmation__icon",children:"⚠️"}),r.jsx("h4",{children:"Are you sure you want to delete this asset?"}),r.jsxs("p",{children:["This action cannot be undone. The asset ",r.jsx("strong",{children:n.name})," (",n.symbol,") will be permanently removed from your portfolio."]}),r.jsxs("div",{className:"delete-confirmation__details",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Total Value"}),r.jsx("span",{children:q(Number(n.totalValue)||0,u)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Quantity"}),r.jsx("span",{children:dt(n.quantity||n.totalQuantity||0,2)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Type"}),r.jsx("span",{children:n.type})]})]})]})}),r.jsxs("div",{className:"asset-dialog__actions",children:[r.jsx("button",{onClick:h,className:"btn btn--secondary",children:"Cancel"}),r.jsx("button",{onClick:p,className:"btn btn--danger",children:"Delete Asset"})]})]})})})]})},ov=({open:e,assetName:t,tradeCount:n,onConfirm:a,onCancel:s,isDeleting:i=!1})=>r.jsxs(tn,{open:e,onClose:s,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[r.jsx(Xn,{sx:{pb:1},children:r.jsxs(j,{display:"flex",alignItems:"center",gap:1,children:[r.jsx(Fa,{color:"warning"}),r.jsx(f,{variant:"h6",component:"div",children:n>0?"Delete Asset with Trades":"Delete Asset"})]})}),r.jsxs(rn,{sx:{pt:1},children:[r.jsx(Ye,{severity:"warning",sx:{mb:2},children:r.jsx(f,{variant:"body2",fontWeight:"medium",children:"This action cannot be undone!"})}),n>0?r.jsxs(r.Fragment,{children:[r.jsxs(f,{variant:"body1",paragraph:!0,children:["The asset ",r.jsxs("strong",{children:['"',t,'"']})," has ",r.jsx("strong",{children:n})," associated trade(s)."]}),r.jsx(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Deleting this asset will also permanently delete all associated trades. This action cannot be undone and may affect your portfolio calculations."}),r.jsxs(j,{sx:{bgcolor:"grey.50",p:2,borderRadius:1,border:"1px solid",borderColor:"grey.200"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:r.jsx("strong",{children:"What will be deleted:"})}),r.jsxs(f,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[r.jsxs("li",{children:['The asset "',t,'"']}),r.jsxs("li",{children:[n," trade record(s)"]}),r.jsx("li",{children:"All associated transaction history"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(f,{variant:"body1",paragraph:!0,children:["The asset ",r.jsxs("strong",{children:['"',t,'"']})," has no associated trades."]}),r.jsx(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This asset can be safely deleted without affecting any trading history. This action cannot be undone."}),r.jsxs(j,{sx:{bgcolor:"green.50",p:2,borderRadius:1,border:"1px solid",borderColor:"green.200"},children:[r.jsx(f,{variant:"body2",color:"text.secondary",children:r.jsx("strong",{children:"What will be deleted:"})}),r.jsxs(f,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[r.jsxs("li",{children:['The asset "',t,'"']}),r.jsx("li",{children:"No trade records (safe to delete)"})]})]})]})]}),r.jsxs(nn,{sx:{p:3,pt:1},children:[r.jsx(Qe,{onClick:s,disabled:i,variant:"outlined",size:"large",children:"Cancel"}),r.jsx(Qe,{onClick:a,disabled:i,variant:"contained",color:"error",size:"large",startIcon:i?r.jsx(Ue,{size:20}):r.jsx(Fa,{}),children:i?"Deleting...":n>0?"Delete Asset & Trades":"Delete Asset"})]})]}),iv=({portfolioId:e,className:t=""})=>{const{baseCurrency:n,accountId:a}=Pt(),[s,i]=x.useState("list"),[o,l]=x.useState(!1),[c,d]=x.useState(!1),[u,m]=x.useState(!1),[p,h]=x.useState(null),[g,v]=x.useState(null),[w,C]=x.useState(null),[b,T]=x.useState(!1),[y,S]=x.useState(!1),[R,k]=x.useState(null),[E,M]=x.useState(0),[N,P]=x.useState(null),[D,L]=x.useState(!1),_=x.useMemo(()=>({portfolioId:e,limit:25,sortBy:"name",sortOrder:"ASC"}),[e]),[A,G]=x.useState(_),{assets:U,loading:B,error:W,pagination:K,setFilters:be,clearFilters:ge,refresh:te,forceRefresh:F,goToPage:le,setPageSize:me,updateAsset:Q,createAsset:oe}=ys({initialFilters:_,autoFetch:!0}),ie=x.useCallback(z=>{G(z),be(z)},[be]),ye=x.useCallback(()=>{G(_),ge()},[_,ge]),ce=x.useCallback(()=>{i(z=>z==="list"?"grid":"list")},[]),ue=x.useCallback(z=>{l(z)},[]),X=x.useCallback(()=>{d(z=>!z)},[]),pe=x.useCallback(()=>{m(z=>!z)},[]),Be=x.useCallback(z=>{h(z)},[]),Ve=x.useCallback(z=>{console.log("handleAssetEdit called with asset:",z),v(z)},[]),tt=x.useCallback(()=>{h(null),v(null),C(null),m(!1),P(null)},[]),ne=x.useCallback(async(z,ee)=>{try{if(U.filter(Ge=>{var nt;return((nt=Ge.symbol)==null?void 0:nt.toLowerCase())===z.toLowerCase()&&Ge.id!==ee}).length>0)return!0;const Me=await fetch(`/api/v1/assets?symbol=${encodeURIComponent(z)}&createdBy=${a}`);if(Me.ok){const Ge=await Me.json(),nt=Ge.data||Ge;return Array.isArray(nt)&&nt.length>0}return!1}catch(Pe){return console.error("Error checking symbol:",Pe),!1}},[U,a]),ve=x.useCallback(async z=>{L(!0),P(null);try{if(console.log("Form submitted with data:",z),console.log("Editing asset:",g),!g&&z.symbol){console.log("Checking symbol uniqueness for:",z.symbol),console.log("Current assets:",U.map(Pe=>({symbol:Pe.symbol,id:Pe.id})));const ee=await ne(z.symbol);if(console.log("Symbol exists:",ee),ee){console.log("Setting form error: Symbol already exists"),P("Mã tài sản này đã tồn tại. Vui lòng chọn mã khác."),L(!1);return}}if(g){const ee={name:z.name,symbol:z.symbol,type:z.type,description:z.description,updatedBy:z.updatedBy||a};Object.keys(ee).forEach(Me=>{ee[Me]===void 0&&delete ee[Me],Me==="description"&&ee[Me]===""||ee[Me]===""&&delete ee[Me]});const Pe=await Q(g.id,ee);console.log("Update result:",Pe)}else{const ee={name:z.name,symbol:z.symbol,type:z.type,description:z.description,createdBy:z.createdBy||a,updatedBy:z.updatedBy||a};Object.keys(ee).forEach(Me=>{(ee[Me]===void 0||ee[Me]==="")&&delete ee[Me]}),console.log("Creating new asset"),console.log("Create data:",ee);const Pe=await oe(ee);console.log("Create result:",Pe)}tt()}catch(ee){console.error("Error saving asset:",ee);let Pe="Có lỗi xảy ra khi lưu tài sản";ee instanceof Error&&(ee.message.includes("already exists")?Pe="Mã tài sản này đã tồn tại. Vui lòng chọn mã khác.":ee.message.includes("required")?Pe="Vui lòng điền đầy đủ thông tin bắt buộc.":ee.message.includes("invalid")?Pe="Thông tin không hợp lệ. Vui lòng kiểm tra lại.":Pe=ee.message),P(Pe)}finally{L(!1)}},[g,Q,oe,tt,a]),H=x.useCallback(async z=>{try{const ee=await Fn.getTradeCount(z.id);k(z),M(ee.count),T(!0)}catch(ee){console.error("Error getting trade count:",ee),alert(`Error getting trade information: ${ee instanceof Error?ee.message:"Unknown error"}`)}},[]),Y=x.useCallback(async()=>{if(R){S(!0);try{E>0?await Fn.forceDeleteAsset(R.id):await Fn.deleteAsset(R.id),await new Promise(z=>setTimeout(z,500)),await F(),await new Promise(z=>setTimeout(z,100)),await F(),T(!1),k(null),tt()}catch(z){console.error("Error deleting asset:",z),alert(`Error deleting asset: ${z instanceof Error?z.message:"Unknown error"}`)}finally{S(!1)}}},[R,E,F,tt]),we=x.useCallback(()=>{T(!1),k(null),M(0)},[]),_e=x.useMemo(()=>{const z=U.length,ee=U.reduce((Ge,nt)=>Ge+(Number(nt.totalValue)||0),0),Pe=z>0?ee/z:0,Me=U.reduce((Ge,nt)=>(Ge[nt.type]=(Ge[nt.type]||0)+1,Ge),{});return{totalAssets:z,totalValue:ee,averageValue:Pe,assetsByType:Me}},[U]);return B&&U.length===0?r.jsx("div",{className:`asset-management ${t}`,children:r.jsxs("div",{className:"asset-management__loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading assets..."})]})}):W?r.jsx("div",{className:`asset-management ${t}`,children:r.jsxs("div",{className:"asset-management__error",children:[r.jsx("h2",{children:"Error Loading Assets"}),r.jsx("p",{children:W}),r.jsx("button",{onClick:te,className:"btn btn--primary",children:"Retry"})]})}):r.jsxs("div",{className:`asset-management ${t}`,children:[r.jsxs("div",{className:"asset-management__header",children:[r.jsxs("div",{className:"asset-management__title",children:[r.jsx("h1",{children:"Asset Management"}),r.jsx("p",{children:"Manage your portfolio assets"})]}),r.jsxs("div",{className:"asset-management__actions",children:[r.jsx("button",{onClick:X,className:`btn btn--secondary ${c?"btn--active":""}`,children:"📊 Analytics"}),r.jsx("button",{onClick:pe,className:"btn btn--primary",children:"➕ Add Asset"})]})]}),r.jsxs("div",{className:"asset-management__stats",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__value",children:_e.totalAssets}),r.jsx("div",{className:"stat-card__label",children:"Total Assets"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__value",children:q(_e.totalValue,n)}),r.jsx("div",{className:"stat-card__label",children:"Total Value"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__value",children:q(_e.averageValue,n)}),r.jsx("div",{className:"stat-card__label",children:"Average Value"})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-card__value",children:Object.keys(_e.assetsByType).length}),r.jsx("div",{className:"stat-card__label",children:"Asset Types"})]})]}),c&&r.jsx("div",{className:"asset-management__analytics",children:r.jsx(av,{assets:U,statistics:_e,onClose:X})}),r.jsx(rv,{filters:A,onFiltersChange:ie,onClearFilters:ye,showAdvanced:o,onToggleAdvanced:ue,className:"asset-management__filters"}),r.jsxs("div",{className:"asset-management__controls",children:[r.jsxs("div",{className:"asset-management__view-controls",children:[r.jsx("button",{onClick:ce,className:`btn btn--secondary ${s==="list"?"btn--active":""}`,children:"📋 List"}),r.jsx("button",{onClick:ce,className:`btn btn--secondary ${s==="grid"?"btn--active":""}`,children:"🔲 Grid"})]}),r.jsxs("div",{className:"asset-management__pagination-info",children:["Showing ",(K.page-1)*K.limit+1," to"," ",Math.min(K.page*K.limit,K.total)," of"," ",K.total," assets"]})]}),r.jsx("div",{className:"asset-management__content",children:s==="list"?r.jsx(Jy,{portfolioId:e,initialFilters:A,onAssetSelect:Be,onAssetEdit:Ve,onAssetDelete:H,showActions:!0,className:"asset-management__list"}):r.jsx("div",{className:"asset-management__grid",children:U.length===0?r.jsx("div",{className:"asset-management__empty",children:r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-state__icon",children:"📊"}),r.jsx("h3",{children:"No Assets Found"}),r.jsx("p",{children:"No assets match your current filters. Try adjusting your search criteria."}),r.jsx("button",{onClick:ye,className:"btn btn--primary",children:"Clear Filters"})]})}):r.jsx("div",{className:"asset-grid",children:U.map(z=>r.jsx(tv,{asset:z,onEdit:Ve,onDelete:H,onView:Be,showActions:!0,className:"asset-grid__item"},z.id))})})}),K.total>0&&r.jsxs("div",{className:"asset-management__pagination",children:[r.jsxs("div",{className:"pagination-controls",children:[r.jsx("button",{onClick:()=>le(K.page-1),disabled:K.page<=1,className:"btn btn--secondary",children:"Previous"}),r.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(K.total/K.limit)},(z,ee)=>ee+1).filter(z=>{const ee=K.page;return z===1||z===ee||z===ee-1||z===ee+1||z===Math.ceil(K.total/K.limit)}).map((z,ee,Pe)=>r.jsxs(_t.Fragment,{children:[ee>0&&Pe[ee-1]!==z-1&&r.jsx("span",{children:"..."}),r.jsx("button",{onClick:()=>le(z),className:`btn ${z===K.page?"btn--primary":"btn--secondary"}`,children:z})]},z))}),r.jsx("button",{onClick:()=>le(K.page+1),disabled:K.page>=Math.ceil(K.total/K.limit),className:"btn btn--secondary",children:"Next"})]}),r.jsxs("div",{className:"pagination-size",children:[r.jsx("label",{children:"Show:"}),r.jsxs("select",{value:K.limit,onChange:z=>me(Number(z.target.value)),className:"select select--small",children:[r.jsx("option",{value:10,children:"10"}),r.jsx("option",{value:25,children:"25"}),r.jsx("option",{value:50,children:"50"}),r.jsx("option",{value:100,children:"100"})]})]})]}),r.jsx(sv,{selectedAsset:p,editingAsset:g,deletingAsset:w,showCreateForm:!1,onClose:tt,onSubmit:ve,onDeleteConfirm:H,onEditAsset:Ve,portfolioId:e}),(u||g)&&r.jsx("div",{className:"modal-overlay",onClick:tt,children:r.jsxs("div",{className:"modal-content modal-content--form",onClick:z=>z.stopPropagation(),children:[N&&r.jsx("div",{className:"error-message",style:{backgroundColor:"#fee",color:"#c33",padding:"12px",margin:"0 0 16px 0",borderRadius:"4px",border:"1px solid #fcc",fontSize:"14px"},children:N}),r.jsx(nv,{userId:a,initialData:g?(()=>{const z={name:g.name||"",symbol:g.symbol||"",type:g.type,description:g.description||"",initialValue:g.initialValue||void 0,initialQuantity:g.initialQuantity||void 0,currentValue:g.currentValue||void 0,currentQuantity:g.currentQuantity||void 0,createdBy:g.createdBy||a,updatedBy:g.updatedBy||a};return console.log("Initial data for AssetForm:",z),console.log("Editing asset:",g),z})():void 0,submitText:g?"Update Asset":"Create Asset",mode:g?"edit":"create",onSubmit:ve,onCancel:tt,loading:D})]})}),r.jsx(ov,{open:b,assetName:(R==null?void 0:R.name)||"",tradeCount:E,onConfirm:Y,onCancel:we,isDeleting:y})]})},lv=Yl({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}}}}),cv=new ec({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}}),dv=()=>(x.useEffect(()=>()=>{},[]),r.jsx(tc,{client:cv,children:r.jsxs(ql,{theme:lv,children:[r.jsx(fo,{}),r.jsx(Xl,{children:r.jsx(ed,{children:r.jsx(j,{sx:{minHeight:"100vh"},children:r.jsxs(Zl,{children:[r.jsx($t,{path:"/",element:r.jsx(If,{})}),r.jsx($t,{path:"/portfolios",element:r.jsx(Lf,{})}),r.jsx($t,{path:"/portfolios/:portfolioId",element:r.jsx(zy,{})}),r.jsx($t,{path:"/portfolios/:portfolioId/trading",element:r.jsx(Yy,{})}),r.jsx($t,{path:"/assets",element:r.jsx(iv,{})}),r.jsx($t,{path:"/analytics",element:r.jsx("div",{children:"Analytics Page - Coming Soon"})}),r.jsx($t,{path:"/reports",element:r.jsx("div",{children:"Reports Page - Coming Soon"})}),r.jsx($t,{path:"/settings",element:r.jsx("div",{children:"Settings Page - Coming Soon"})}),r.jsx($t,{path:"*",element:r.jsx(Jl,{to:"/",replace:!0})})]})})})}),r.jsx(Zc,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}}),r.jsx(dc.ReactQueryDevtools,{initialIsOpen:!1})]})})),uv=Va.createRoot(document.getElementById("root"));uv.render(r.jsx(_t.StrictMode,{children:r.jsx(dv,{})}));
//# sourceMappingURL=index-CEDO4JkU.js.map
