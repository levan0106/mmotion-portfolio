var Al=Object.defineProperty;var Nl=(t,r,n)=>r in t?Al(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;var Oa=(t,r,n)=>Nl(t,typeof r!="symbol"?r+"":r,n);import{u as Er,b as ua,j as e,T as Os,d as h,L as ha,e as cn,f as Ml,g as $t,h as Wt,B as b,C as No,A as Rl,I as Et,M as El,D as _a,i as Il,k as Jt,l as Ol,G as _l,m as yt,n as zn,S as Mo,o as ss,p as Fl,q as ie,t as Ro,r as Dt,V as ma,s as He,v as ze,w as Ll,x as M,y as de,z as he,E as nt,F as Ce,H as Nt,J as $e,K as fa,N as Xe,O as Je,Q as et,R as ce,U as Eo,W as ar,X as xr,Y as or,Z as ir,$ as De,a0 as Vl,a1 as Yn,a2 as Ln,a3 as as,a4 as Ul,c as ht,_ as B,a5 as Fe,a6 as ct,a7 as vt,a8 as bt,a9 as ke,aa as pt,ab as gr,ac as os,ad as Fa,ae as Nr,af as Bl,ag as $l,ah as ge,ai as _s,aj as Wl,ak as pr,al as $r,P as U,am as Hl,an as Wr,ao as zl,ap as Io,aq as pa,ar as xa,as as Oo,at as _o,au as Hr,av as Fo,aw as is,ax as Kt,ay as Gt,az as Zt,aA as Ge,aB as z,aC as Xt,aD as Yl,aE as Lo,aF as ql,aG as Vo,aH as Uo,aI as Ql,aJ as Kl,aK as Vr,aL as Bo,aM as fn,aN as gt,aO as Gl,aP as Zl,aQ as Xl,aR as Jl,aS as Xr,aT as ec,aU as Ks,aV as $o,aW as tc,aX as Fs,aY as rc,aZ as nc,a_ as sc}from"./mui-Cq95TorA.js";import{d as ac,r as x,b as Ht,g as oc}from"./vendor-Cr2nE3UY.js";import{u as pn,a as ic,b as Wo,B as lc,R as cc,c as _t,N as dc}from"./router-DkWuIpoj.js";import{u as xn,a as Pt,b as Pr,Q as uc,c as hc}from"./query-DZb0HHX_.js";import{o as mc,r as fc,a as pc,c as ls,b as ut,u as cs,C as qe,d as La,e as ln}from"./forms-DotYSCGd.js";import{R as Mt,P as Ho,a as zo,C as gn,T as Rt,L as ga,b as ds,c as er,X as tr,Y as rr,d as zr,e as Yo,S as xc,f as gc,B as qo,g as qn,h as yc,A as vc,i as bc}from"./charts-DyBxAEVj.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Gs={},Va=ac;Gs.createRoot=Va.createRoot,Gs.hydrateRoot=Va.hydrateRoot;var Qo={exports:{}};Qo.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var jc=Qo.exports;let wc={data:""},Cc=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||wc,Tc=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Pc=/\/\*[^]*?\*\/|  +/g,Ua=/\n+/g,ur=(t,r)=>{let n="",s="",a="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+i+";":s+=o[1]=="f"?ur(i,o):o+"{"+ur(i,o[1]=="k"?"":r)+"}":typeof i=="object"?s+=ur(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=ur.p?ur.p(o,i):o+":"+i+";")}return n+(r&&a?r+"{"+a+"}":a)+s},qt={},Ko=t=>{if(typeof t=="object"){let r="";for(let n in t)r+=n+Ko(t[n]);return r}return t},Sc=(t,r,n,s,a)=>{let o=Ko(t),i=qt[o]||(qt[o]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(o));if(!qt[i]){let c=o!==t?t:(d=>{let u,f,p=[{}];for(;u=Tc.exec(d.replace(Pc,""));)u[4]?p.shift():u[3]?(f=u[3].replace(Ua," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(Ua," ").trim();return p[0]})(t);qt[i]=ur(a?{["@keyframes "+i]:c}:c,n?"":"."+i)}let l=n&&qt.g?qt.g:null;return n&&(qt.g=qt[i]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(qt[i],r,s,l),i},Dc=(t,r,n)=>t.reduce((s,a,o)=>{let i=r[o];if(i&&i.call){let l=i(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":ur(l,""):l===!1?"":l}return s+a+(i??"")},"");function us(t){let r=this||{},n=t.call?t(r.p):t;return Sc(n.unshift?n.raw?Dc(n,[].slice.call(arguments,1),r.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(r.p):a),{}):n,Cc(r.target),r.g,r.o,r.k)}let Go,Zs,Xs;us.bind({g:1});let nr=us.bind({k:1});function kc(t,r,n,s){ur.p=r,Go=t,Zs=n,Xs=s}function yr(t,r){let n=this||{};return function(){let s=arguments;function a(o,i){let l=Object.assign({},o),c=l.className||a.className;n.p=Object.assign({theme:Zs&&Zs()},l),n.o=/ *go\d+/.test(c),l.className=us.apply(n,s)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),Xs&&d[0]&&Xs(l),Go(d,l)}return a}}var Ac=t=>typeof t=="function",Qn=(t,r)=>Ac(t)?t(r):t,Nc=(()=>{let t=0;return()=>(++t).toString()})(),Zo=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),Mc=20,ya="default",Xo=(t,r)=>{let{toastLimit:n}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:s}=r;return Xo(t,{type:t.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=r;return{...t,toasts:t.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let o=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Vn=[],Jo={toasts:[],pausedAt:void 0,settings:{toastLimit:Mc}},Bt={},ei=(t,r=ya)=>{Bt[r]=Xo(Bt[r]||Jo,t),Vn.forEach(([n,s])=>{n===r&&s(Bt[r])})},ti=t=>Object.keys(Bt).forEach(r=>ei(t,r)),Rc=t=>Object.keys(Bt).find(r=>Bt[r].toasts.some(n=>n.id===t)),hs=(t=ya)=>r=>{ei(r,t)},Ec={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ic=(t={},r=ya)=>{let[n,s]=x.useState(Bt[r]||Jo),a=x.useRef(Bt[r]);x.useEffect(()=>(a.current!==Bt[r]&&s(Bt[r]),Vn.push([r,s]),()=>{let i=Vn.findIndex(([l])=>l===r);i>-1&&Vn.splice(i,1)}),[r]);let o=n.toasts.map(i=>{var l,c,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((l=t[i.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Ec[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...n,toasts:o}},Oc=(t,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Nc()}),yn=t=>(r,n)=>{let s=Oc(r,t,n);return hs(s.toasterId||Rc(s.id))({type:2,toast:s}),s.id},Qe=(t,r)=>yn("blank")(t,r);Qe.error=yn("error");Qe.success=yn("success");Qe.loading=yn("loading");Qe.custom=yn("custom");Qe.dismiss=(t,r)=>{let n={type:3,toastId:t};r?hs(r)(n):ti(n)};Qe.dismissAll=t=>Qe.dismiss(void 0,t);Qe.remove=(t,r)=>{let n={type:4,toastId:t};r?hs(r)(n):ti(n)};Qe.removeAll=t=>Qe.remove(void 0,t);Qe.promise=(t,r,n)=>{let s=Qe.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let o=r.success?Qn(r.success,a):void 0;return o?Qe.success(o,{id:s,...n,...n==null?void 0:n.success}):Qe.dismiss(s),a}).catch(a=>{let o=r.error?Qn(r.error,a):void 0;o?Qe.error(o,{id:s,...n,...n==null?void 0:n.error}):Qe.dismiss(s)}),t};var _c=1e3,Fc=(t,r="default")=>{let{toasts:n,pausedAt:s}=Ic(t,r),a=x.useRef(new Map).current,o=x.useCallback((f,p=_c)=>{if(a.has(f))return;let m=setTimeout(()=>{a.delete(f),i({type:4,toastId:f})},p);a.set(f,m)},[]);x.useEffect(()=>{if(s)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let g=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(g<0){m.visible&&Qe.dismiss(m.id);return}return setTimeout(()=>Qe.dismiss(m.id,r),g)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,s,r]);let i=x.useCallback(hs(r),[r]),l=x.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=x.useCallback((f,p)=>{i({type:1,toast:{id:f,height:p}})},[i]),d=x.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),u=x.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:g=8,defaultPosition:v}=p||{},P=n.filter(D=>(D.position||v)===(f.position||v)&&D.height),j=P.findIndex(D=>D.id===f.id),w=P.filter((D,y)=>y<j&&D.visible).length;return P.filter(D=>D.visible).slice(...m?[w+1]:[0,w]).reduce((D,y)=>D+(y.height||0)+g,0)},[n]);return x.useEffect(()=>{n.forEach(f=>{if(f.dismissed)o(f.id,f.removeDelay);else{let p=a.get(f.id);p&&(clearTimeout(p),a.delete(f.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Lc=nr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Vc=nr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Uc=nr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Bc=yr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Lc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Vc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Uc} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$c=nr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Wc=yr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${$c} 1s linear infinite;
`,Hc=nr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,zc=nr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Yc=yr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Hc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${zc} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qc=yr("div")`
  position: absolute;
`,Qc=yr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Kc=nr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gc=yr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Kc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Zc=({toast:t})=>{let{icon:r,type:n,iconTheme:s}=t;return r!==void 0?typeof r=="string"?x.createElement(Gc,null,r):r:n==="blank"?null:x.createElement(Qc,null,x.createElement(Wc,{...s}),n!=="loading"&&x.createElement(qc,null,n==="error"?x.createElement(Bc,{...s}):x.createElement(Yc,{...s})))},Xc=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Jc=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ed="0%{opacity:0;} 100%{opacity:1;}",td="0%{opacity:1;} 100%{opacity:0;}",rd=yr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,nd=yr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sd=(t,r)=>{let n=t.includes("top")?1:-1,[s,a]=Zo()?[ed,td]:[Xc(n),Jc(n)];return{animation:r?`${nr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ad=x.memo(({toast:t,position:r,style:n,children:s})=>{let a=t.height?sd(t.position||r||"top-center",t.visible):{opacity:0},o=x.createElement(Zc,{toast:t}),i=x.createElement(nd,{...t.ariaProps},Qn(t.message,t));return x.createElement(rd,{className:t.className,style:{...a,...n,...t.style}},typeof s=="function"?s({icon:o,message:i}):x.createElement(x.Fragment,null,o,i))});kc(x.createElement);var od=({id:t,className:r,style:n,onHeightUpdate:s,children:a})=>{let o=x.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return x.createElement("div",{ref:o,className:r,style:n},a)},id=(t,r)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Zo()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...s,...a}},ld=us`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Dn=16,cd=({reverseOrder:t,position:r="top-center",toastOptions:n,gutter:s,children:a,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=Fc(n,o);return x.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Dn,left:Dn,right:Dn,bottom:Dn,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||r,p=d.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:r}),m=id(f,p);return x.createElement(od,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?ld:"",style:m},u.type==="custom"?Qn(u.message,u):a?a(u):x.createElement(ad,{toast:u,position:f}))}))};const Or=240,dd=[{text:"Dashboard",icon:e.jsx(Il,{}),path:"/"},{text:"Portfolios",icon:e.jsx(Jt,{}),path:"/portfolios"},{text:"Assets",icon:e.jsx(Ol,{}),path:"/assets"},{text:"Global Assets",icon:e.jsx(_l,{}),path:"/global-assets"},{text:"Analytics",icon:e.jsx(yt,{}),path:"/analytics"},{text:"Reports",icon:e.jsx(zn,{}),path:"/reports"},{text:"Settings",icon:e.jsx(Mo,{}),path:"/settings"}],ud=({children:t})=>{const r=Er(),n=ua(r.breakpoints.down("md")),s=pn(),a=ic(),[o,i]=x.useState(!1),l=()=>{i(!o)},c=u=>{s(u),n&&i(!1)},d=e.jsxs("div",{children:[e.jsx(Os,{children:e.jsx(h,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Manager"})}),e.jsx(ha,{children:dd.map(u=>e.jsx(cn,{disablePadding:!0,children:e.jsxs(Ml,{selected:a.pathname===u.path,onClick:()=>c(u.path),children:[e.jsx($t,{children:u.icon}),e.jsx(Wt,{primary:u.text})]})},u.text))})]});return e.jsxs(b,{sx:{display:"flex"},children:[e.jsx(No,{}),e.jsx(Rl,{position:"fixed",sx:{width:{md:`calc(100% - ${Or}px)`},ml:{md:`${Or}px`}},children:e.jsxs(Os,{children:[e.jsx(Et,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,sx:{mr:2,display:{md:"none"}},children:e.jsx(El,{})}),e.jsx(h,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Management System"})]})}),e.jsxs(b,{component:"nav",sx:{width:{md:Or},flexShrink:{md:0}},"aria-label":"navigation",children:[e.jsx(_a,{variant:"temporary",open:o,onClose:l,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Or}},children:d}),e.jsx(_a,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Or}},open:!0,children:d})]}),e.jsxs(b,{component:"main",sx:{flexGrow:1,p:3,width:{md:`calc(100% - ${Or}px)`}},children:[e.jsx(Os,{}),t]})]})};function ri(t,r){return function(){return t.apply(r,arguments)}}const{toString:hd}=Object.prototype,{getPrototypeOf:va}=Object,{iterator:ms,toStringTag:ni}=Symbol,fs=(t=>r=>{const n=hd.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),It=t=>(t=t.toLowerCase(),r=>fs(r)===t),ps=t=>r=>typeof r===t,{isArray:Qr}=Array,hn=ps("undefined");function vn(t){return t!==null&&!hn(t)&&t.constructor!==null&&!hn(t.constructor)&&wt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const si=It("ArrayBuffer");function md(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&si(t.buffer),r}const fd=ps("string"),wt=ps("function"),ai=ps("number"),bn=t=>t!==null&&typeof t=="object",pd=t=>t===!0||t===!1,Un=t=>{if(fs(t)!=="object")return!1;const r=va(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(ni in t)&&!(ms in t)},xd=t=>{if(!bn(t)||vn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},gd=It("Date"),yd=It("File"),vd=It("Blob"),bd=It("FileList"),jd=t=>bn(t)&&wt(t.pipe),wd=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||wt(t.append)&&((r=fs(t))==="formdata"||r==="object"&&wt(t.toString)&&t.toString()==="[object FormData]"))},Cd=It("URLSearchParams"),[Td,Pd,Sd,Dd]=["ReadableStream","Request","Response","Headers"].map(It),kd=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jn(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,a;if(typeof t!="object"&&(t=[t]),Qr(t))for(s=0,a=t.length;s<a;s++)r.call(null,t[s],s,t);else{if(vn(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(s=0;s<i;s++)l=o[s],r.call(null,t[l],l,t)}}function oi(t,r){if(vn(t))return null;r=r.toLowerCase();const n=Object.keys(t);let s=n.length,a;for(;s-- >0;)if(a=n[s],r===a.toLowerCase())return a;return null}const Cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ii=t=>!hn(t)&&t!==Cr;function Js(){const{caseless:t}=ii(this)&&this||{},r={},n=(s,a)=>{const o=t&&oi(r,a)||a;Un(r[o])&&Un(s)?r[o]=Js(r[o],s):Un(s)?r[o]=Js({},s):Qr(s)?r[o]=s.slice():r[o]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&jn(arguments[s],n);return r}const Ad=(t,r,n,{allOwnKeys:s}={})=>(jn(r,(a,o)=>{n&&wt(a)?t[o]=ri(a,n):t[o]=a},{allOwnKeys:s}),t),Nd=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Md=(t,r,n,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},Rd=(t,r,n,s)=>{let a,o,i;const l={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)i=a[o],(!s||s(i,t,r))&&!l[i]&&(r[i]=t[i],l[i]=!0);t=n!==!1&&va(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},Ed=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const s=t.indexOf(r,n);return s!==-1&&s===n},Id=t=>{if(!t)return null;if(Qr(t))return t;let r=t.length;if(!ai(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},Od=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&va(Uint8Array)),_d=(t,r)=>{const s=(t&&t[ms]).call(t);let a;for(;(a=s.next())&&!a.done;){const o=a.value;r.call(t,o[0],o[1])}},Fd=(t,r)=>{let n;const s=[];for(;(n=t.exec(r))!==null;)s.push(n);return s},Ld=It("HTMLFormElement"),Vd=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,a){return s.toUpperCase()+a}),Ba=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),Ud=It("RegExp"),li=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),s={};jn(n,(a,o)=>{let i;(i=r(a,o,t))!==!1&&(s[o]=i||a)}),Object.defineProperties(t,s)},Bd=t=>{li(t,(r,n)=>{if(wt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(wt(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$d=(t,r)=>{const n={},s=a=>{a.forEach(o=>{n[o]=!0})};return Qr(t)?s(t):s(String(t).split(r)),n},Wd=()=>{},Hd=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function zd(t){return!!(t&&wt(t.append)&&t[ni]==="FormData"&&t[ms])}const Yd=t=>{const r=new Array(10),n=(s,a)=>{if(bn(s)){if(r.indexOf(s)>=0)return;if(vn(s))return s;if(!("toJSON"in s)){r[a]=s;const o=Qr(s)?[]:{};return jn(s,(i,l)=>{const c=n(i,a+1);!hn(c)&&(o[l]=c)}),r[a]=void 0,o}}return s};return n(t,0)},qd=It("AsyncFunction"),Qd=t=>t&&(bn(t)||wt(t))&&wt(t.then)&&wt(t.catch),ci=((t,r)=>t?setImmediate:r?((n,s)=>(Cr.addEventListener("message",({source:a,data:o})=>{a===Cr&&o===n&&s.length&&s.shift()()},!1),a=>{s.push(a),Cr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wt(Cr.postMessage)),Kd=typeof queueMicrotask<"u"?queueMicrotask.bind(Cr):typeof process<"u"&&process.nextTick||ci,Gd=t=>t!=null&&wt(t[ms]),$={isArray:Qr,isArrayBuffer:si,isBuffer:vn,isFormData:wd,isArrayBufferView:md,isString:fd,isNumber:ai,isBoolean:pd,isObject:bn,isPlainObject:Un,isEmptyObject:xd,isReadableStream:Td,isRequest:Pd,isResponse:Sd,isHeaders:Dd,isUndefined:hn,isDate:gd,isFile:yd,isBlob:vd,isRegExp:Ud,isFunction:wt,isStream:jd,isURLSearchParams:Cd,isTypedArray:Od,isFileList:bd,forEach:jn,merge:Js,extend:Ad,trim:kd,stripBOM:Nd,inherits:Md,toFlatObject:Rd,kindOf:fs,kindOfTest:It,endsWith:Ed,toArray:Id,forEachEntry:_d,matchAll:Fd,isHTMLForm:Ld,hasOwnProperty:Ba,hasOwnProp:Ba,reduceDescriptors:li,freezeMethods:Bd,toObjectSet:$d,toCamelCase:Vd,noop:Wd,toFiniteNumber:Hd,findKey:oi,global:Cr,isContextDefined:ii,isSpecCompliantForm:zd,toJSONObject:Yd,isAsyncFn:qd,isThenable:Qd,setImmediate:ci,asap:Kd,isIterable:Gd};function Te(t,r,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}$.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const di=Te.prototype,ui={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ui[t]={value:t}});Object.defineProperties(Te,ui);Object.defineProperty(di,"isAxiosError",{value:!0});Te.from=(t,r,n,s,a,o)=>{const i=Object.create(di);return $.toFlatObject(t,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Te.call(i,t.message,r,n,s,a),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const Zd=null;function ea(t){return $.isPlainObject(t)||$.isArray(t)}function hi(t){return $.endsWith(t,"[]")?t.slice(0,-2):t}function $a(t,r,n){return t?t.concat(r).map(function(a,o){return a=hi(a),!n&&o?"["+a+"]":a}).join(n?".":""):r}function Xd(t){return $.isArray(t)&&!t.some(ea)}const Jd=$.toFlatObject($,{},null,function(r){return/^is[A-Z]/.test(r)});function xs(t,r,n){if(!$.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,P){return!$.isUndefined(P[v])});const s=n.metaTokens,a=n.visitor||u,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(r);if(!$.isFunction(a))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if($.isDate(g))return g.toISOString();if($.isBoolean(g))return g.toString();if(!c&&$.isBlob(g))throw new Te("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(g)||$.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,P){let j=g;if(g&&!P&&typeof g=="object"){if($.endsWith(v,"{}"))v=s?v:v.slice(0,-2),g=JSON.stringify(g);else if($.isArray(g)&&Xd(g)||($.isFileList(g)||$.endsWith(v,"[]"))&&(j=$.toArray(g)))return v=hi(v),j.forEach(function(D,y){!($.isUndefined(D)||D===null)&&r.append(i===!0?$a([v],y,o):i===null?v:v+"[]",d(D))}),!1}return ea(g)?!0:(r.append($a(P,v,o),d(g)),!1)}const f=[],p=Object.assign(Jd,{defaultVisitor:u,convertValue:d,isVisitable:ea});function m(g,v){if(!$.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),$.forEach(g,function(j,w){(!($.isUndefined(j)||j===null)&&a.call(r,j,$.isString(w)?w.trim():w,v,p))===!0&&m(j,v?v.concat(w):[w])}),f.pop()}}if(!$.isObject(t))throw new TypeError("data must be an object");return m(t),r}function Wa(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function ba(t,r){this._pairs=[],t&&xs(t,this,r)}const mi=ba.prototype;mi.append=function(r,n){this._pairs.push([r,n])};mi.toString=function(r){const n=r?function(s){return r.call(this,s,Wa)}:Wa;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function eu(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fi(t,r,n){if(!r)return t;const s=n&&n.encode||eu;$.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(r,n):o=$.isURLSearchParams(r)?r.toString():new ba(r,n).toString(s),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Ha{constructor(){this.handlers=[]}use(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){$.forEach(this.handlers,function(s){s!==null&&r(s)})}}const pi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tu=typeof URLSearchParams<"u"?URLSearchParams:ba,ru=typeof FormData<"u"?FormData:null,nu=typeof Blob<"u"?Blob:null,su={isBrowser:!0,classes:{URLSearchParams:tu,FormData:ru,Blob:nu},protocols:["http","https","file","blob","url","data"]},ja=typeof window<"u"&&typeof document<"u",ta=typeof navigator=="object"&&navigator||void 0,au=ja&&(!ta||["ReactNative","NativeScript","NS"].indexOf(ta.product)<0),ou=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iu=ja&&window.location.href||"http://localhost",lu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ja,hasStandardBrowserEnv:au,hasStandardBrowserWebWorkerEnv:ou,navigator:ta,origin:iu},Symbol.toStringTag,{value:"Module"})),ft={...lu,...su};function cu(t,r){return xs(t,new ft.classes.URLSearchParams,{visitor:function(n,s,a,o){return ft.isNode&&$.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function du(t){return $.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function uu(t){const r={},n=Object.keys(t);let s;const a=n.length;let o;for(s=0;s<a;s++)o=n[s],r[o]=t[o];return r}function xi(t){function r(n,s,a,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=n.length;return i=!i&&$.isArray(a)?a.length:i,c?($.hasOwnProp(a,i)?a[i]=[a[i],s]:a[i]=s,!l):((!a[i]||!$.isObject(a[i]))&&(a[i]=[]),r(n,s,a[i],o)&&$.isArray(a[i])&&(a[i]=uu(a[i])),!l)}if($.isFormData(t)&&$.isFunction(t.entries)){const n={};return $.forEachEntry(t,(s,a)=>{r(du(s),a,n,0)}),n}return null}function hu(t,r,n){if($.isString(t))try{return(r||JSON.parse)(t),$.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const wn={transitional:pi,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const s=n.getContentType()||"",a=s.indexOf("application/json")>-1,o=$.isObject(r);if(o&&$.isHTMLForm(r)&&(r=new FormData(r)),$.isFormData(r))return a?JSON.stringify(xi(r)):r;if($.isArrayBuffer(r)||$.isBuffer(r)||$.isStream(r)||$.isFile(r)||$.isBlob(r)||$.isReadableStream(r))return r;if($.isArrayBufferView(r))return r.buffer;if($.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return cu(r,this.formSerializer).toString();if((l=$.isFileList(r))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return xs(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),hu(r)):r}],transformResponse:[function(r){const n=this.transitional||wn.transitional,s=n&&n.forcedJSONParsing,a=this.responseType==="json";if($.isResponse(r)||$.isReadableStream(r))return r;if(r&&$.isString(r)&&(s&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(l){if(i)throw l.name==="SyntaxError"?Te.from(l,Te.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ft.classes.FormData,Blob:ft.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],t=>{wn.headers[t]={}});const mu=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fu=t=>{const r={};let n,s,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),s=i.substring(a+1).trim(),!(!n||r[n]&&mu[n])&&(n==="set-cookie"?r[n]?r[n].push(s):r[n]=[s]:r[n]=r[n]?r[n]+", "+s:s)}),r},za=Symbol("internals");function Jr(t){return t&&String(t).trim().toLowerCase()}function Bn(t){return t===!1||t==null?t:$.isArray(t)?t.map(Bn):String(t)}function pu(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)r[s[1]]=s[2];return r}const xu=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ls(t,r,n,s,a){if($.isFunction(s))return s.call(this,r,n);if(a&&(r=n),!!$.isString(r)){if($.isString(s))return r.indexOf(s)!==-1;if($.isRegExp(s))return s.test(r)}}function gu(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,s)=>n.toUpperCase()+s)}function yu(t,r){const n=$.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(a,o,i){return this[s].call(this,r,a,o,i)},configurable:!0})})}let Ct=class{constructor(r){r&&this.set(r)}set(r,n,s){const a=this;function o(l,c,d){const u=Jr(c);if(!u)throw new Error("header name must be a non-empty string");const f=$.findKey(a,u);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||c]=Bn(l))}const i=(l,c)=>$.forEach(l,(d,u)=>o(d,u,c));if($.isPlainObject(r)||r instanceof this.constructor)i(r,n);else if($.isString(r)&&(r=r.trim())&&!xu(r))i(fu(r),n);else if($.isObject(r)&&$.isIterable(r)){let l={},c,d;for(const u of r){if(!$.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?$.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,n)}else r!=null&&o(n,r,s);return this}get(r,n){if(r=Jr(r),r){const s=$.findKey(this,r);if(s){const a=this[s];if(!n)return a;if(n===!0)return pu(a);if($.isFunction(n))return n.call(this,a,s);if($.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=Jr(r),r){const s=$.findKey(this,r);return!!(s&&this[s]!==void 0&&(!n||Ls(this,this[s],s,n)))}return!1}delete(r,n){const s=this;let a=!1;function o(i){if(i=Jr(i),i){const l=$.findKey(s,i);l&&(!n||Ls(s,s[l],l,n))&&(delete s[l],a=!0)}}return $.isArray(r)?r.forEach(o):o(r),a}clear(r){const n=Object.keys(this);let s=n.length,a=!1;for(;s--;){const o=n[s];(!r||Ls(this,this[o],o,r,!0))&&(delete this[o],a=!0)}return a}normalize(r){const n=this,s={};return $.forEach(this,(a,o)=>{const i=$.findKey(s,o);if(i){n[i]=Bn(a),delete n[o];return}const l=r?gu(o):String(o).trim();l!==o&&delete n[o],n[l]=Bn(a),s[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return $.forEach(this,(s,a)=>{s!=null&&s!==!1&&(n[a]=r&&$.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const s=new this(r);return n.forEach(a=>s.set(a)),s}static accessor(r){const s=(this[za]=this[za]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=Jr(i);s[l]||(yu(a,i),s[l]=!0)}return $.isArray(r)?r.forEach(o):o(r),this}};Ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Ct.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[n]=s}}});$.freezeMethods(Ct);function Vs(t,r){const n=this||wn,s=r||n,a=Ct.from(s.headers);let o=s.data;return $.forEach(t,function(l){o=l.call(n,o,a.normalize(),r?r.status:void 0)}),a.normalize(),o}function gi(t){return!!(t&&t.__CANCEL__)}function Kr(t,r,n){Te.call(this,t??"canceled",Te.ERR_CANCELED,r,n),this.name="CanceledError"}$.inherits(Kr,Te,{__CANCEL__:!0});function yi(t,r,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):r(new Te("Request failed with status code "+n.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vu(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function bu(t,r){t=t||10;const n=new Array(t),s=new Array(t);let a=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),u=s[o];i||(i=d),n[a]=c,s[a]=d;let f=o,p=0;for(;f!==a;)p+=n[f++],f=f%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),d-i<r)return;const m=u&&d-u;return m?Math.round(p*1e3/m):void 0}}function ju(t,r){let n=0,s=1e3/r,a,o;const i=(d,u=Date.now())=>{n=u,a=null,o&&(clearTimeout(o),o=null),t(...d)};return[(...d)=>{const u=Date.now(),f=u-n;f>=s?i(d,u):(a=d,o||(o=setTimeout(()=>{o=null,i(a)},s-f)))},()=>a&&i(a)]}const Kn=(t,r,n=3)=>{let s=0;const a=bu(50,250);return ju(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-s,d=a(c),u=i<=l;s=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(f)},n)},Ya=(t,r)=>{const n=t!=null;return[s=>r[0]({lengthComputable:n,total:t,loaded:s}),r[1]]},qa=t=>(...r)=>$.asap(()=>t(...r)),wu=ft.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,ft.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(ft.origin),ft.navigator&&/(msie|trident)/i.test(ft.navigator.userAgent)):()=>!0,Cu=ft.hasStandardBrowserEnv?{write(t,r,n,s,a,o){const i=[t+"="+encodeURIComponent(r)];$.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),$.isString(s)&&i.push("path="+s),$.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Tu(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Pu(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function vi(t,r,n){let s=!Tu(r);return t&&(s||n==!1)?Pu(t,r):r}const Qa=t=>t instanceof Ct?{...t}:t;function Mr(t,r){r=r||{};const n={};function s(d,u,f,p){return $.isPlainObject(d)&&$.isPlainObject(u)?$.merge.call({caseless:p},d,u):$.isPlainObject(u)?$.merge({},u):$.isArray(u)?u.slice():u}function a(d,u,f,p){if($.isUndefined(u)){if(!$.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function o(d,u){if(!$.isUndefined(u))return s(void 0,u)}function i(d,u){if($.isUndefined(u)){if(!$.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,f){if(f in r)return s(d,u);if(f in t)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,f)=>a(Qa(d),Qa(u),f,!0)};return $.forEach(Object.keys({...t,...r}),function(u){const f=c[u]||a,p=f(t[u],r[u],u);$.isUndefined(p)&&f!==l||(n[u]=p)}),n}const bi=t=>{const r=Mr({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=r;r.headers=i=Ct.from(i),r.url=fi(vi(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if($.isFormData(n)){if(ft.hasStandardBrowserEnv||ft.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(ft.hasStandardBrowserEnv&&(s&&$.isFunction(s)&&(s=s(r)),s||s!==!1&&wu(r.url))){const d=a&&o&&Cu.read(o);d&&i.set(a,d)}return r},Su=typeof XMLHttpRequest<"u",Du=Su&&function(t){return new Promise(function(n,s){const a=bi(t);let o=a.data;const i=Ct.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,f,p,m,g;function v(){m&&m(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let P=new XMLHttpRequest;P.open(a.method.toUpperCase(),a.url,!0),P.timeout=a.timeout;function j(){if(!P)return;const D=Ct.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:D,config:t,request:P};yi(function(N){n(N),v()},function(N){s(N),v()},A),P=null}"onloadend"in P?P.onloadend=j:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(j)},P.onabort=function(){P&&(s(new Te("Request aborted",Te.ECONNABORTED,t,P)),P=null)},P.onerror=function(){s(new Te("Network Error",Te.ERR_NETWORK,t,P)),P=null},P.ontimeout=function(){let y=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const A=a.transitional||pi;a.timeoutErrorMessage&&(y=a.timeoutErrorMessage),s(new Te(y,A.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,P)),P=null},o===void 0&&i.setContentType(null),"setRequestHeader"in P&&$.forEach(i.toJSON(),function(y,A){P.setRequestHeader(A,y)}),$.isUndefined(a.withCredentials)||(P.withCredentials=!!a.withCredentials),l&&l!=="json"&&(P.responseType=a.responseType),d&&([p,g]=Kn(d,!0),P.addEventListener("progress",p)),c&&P.upload&&([f,m]=Kn(c),P.upload.addEventListener("progress",f),P.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(u=D=>{P&&(s(!D||D.type?new Kr(null,t,P):D),P.abort(),P=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const w=vu(a.url);if(w&&ft.protocols.indexOf(w)===-1){s(new Te("Unsupported protocol "+w+":",Te.ERR_BAD_REQUEST,t));return}P.send(o||null)})},ku=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let s=new AbortController,a;const o=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Te?u:new Kr(u instanceof Error?u.message:u))}};let i=r&&setTimeout(()=>{i=null,o(new Te(`timeout ${r} of ms exceeded`,Te.ETIMEDOUT))},r);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>$.asap(l),c}},Au=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let s=0,a;for(;s<n;)a=s+r,yield t.slice(s,a),s=a},Nu=async function*(t,r){for await(const n of Mu(t))yield*Au(n,r)},Mu=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:s}=await r.read();if(n)break;yield s}}finally{await r.cancel()}},Ka=(t,r,n,s)=>{const a=Nu(t,r);let o=0,i,l=c=>{i||(i=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let f=u.byteLength;if(n){let p=o+=f;n(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},gs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ji=gs&&typeof ReadableStream=="function",Ru=gs&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),wi=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Eu=ji&&wi(()=>{let t=!1;const r=new Request(ft.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Ga=64*1024,ra=ji&&wi(()=>$.isReadableStream(new Response("").body)),Gn={stream:ra&&(t=>t.body)};gs&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Gn[r]&&(Gn[r]=$.isFunction(t[r])?n=>n[r]():(n,s)=>{throw new Te(`Response type '${r}' is not supported`,Te.ERR_NOT_SUPPORT,s)})})})(new Response);const Iu=async t=>{if(t==null)return 0;if($.isBlob(t))return t.size;if($.isSpecCompliantForm(t))return(await new Request(ft.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if($.isArrayBufferView(t)||$.isArrayBuffer(t))return t.byteLength;if($.isURLSearchParams(t)&&(t=t+""),$.isString(t))return(await Ru(t)).byteLength},Ou=async(t,r)=>{const n=$.toFiniteNumber(t.getContentLength());return n??Iu(r)},_u=gs&&(async t=>{let{url:r,method:n,data:s,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:f="same-origin",fetchOptions:p}=bi(t);d=d?(d+"").toLowerCase():"text";let m=ku([a,o&&o.toAbortSignal()],i),g;const v=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let P;try{if(c&&Eu&&n!=="get"&&n!=="head"&&(P=await Ou(u,s))!==0){let A=new Request(r,{method:"POST",body:s,duplex:"half"}),R;if($.isFormData(s)&&(R=A.headers.get("content-type"))&&u.setContentType(R),A.body){const[N,_]=Ya(P,Kn(qa(c)));s=Ka(A.body,Ga,N,_)}}$.isString(f)||(f=f?"include":"omit");const j="credentials"in Request.prototype;g=new Request(r,{...p,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:j?f:void 0});let w=await fetch(g,p);const D=ra&&(d==="stream"||d==="response");if(ra&&(l||D&&v)){const A={};["status","statusText","headers"].forEach(E=>{A[E]=w[E]});const R=$.toFiniteNumber(w.headers.get("content-length")),[N,_]=l&&Ya(R,Kn(qa(l),!0))||[];w=new Response(Ka(w.body,Ga,N,()=>{_&&_(),v&&v()}),A)}d=d||"text";let y=await Gn[$.findKey(Gn,d)||"text"](w,t);return!D&&v&&v(),await new Promise((A,R)=>{yi(A,R,{data:y,headers:Ct.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:g})})}catch(j){throw v&&v(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,t,g),{cause:j.cause||j}):Te.from(j,j&&j.code,t,g)}}),na={http:Zd,xhr:Du,fetch:_u};$.forEach(na,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Za=t=>`- ${t}`,Fu=t=>$.isFunction(t)||t===null||t===!1,Ci={getAdapter:t=>{t=$.isArray(t)?t:[t];const{length:r}=t;let n,s;const a={};for(let o=0;o<r;o++){n=t[o];let i;if(s=n,!Fu(n)&&(s=na[(i=String(n)).toLowerCase()],s===void 0))throw new Te(`Unknown adapter '${i}'`);if(s)break;a[i||"#"+o]=s}if(!s){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(Za).join(`
`):" "+Za(o[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:na};function Us(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Kr(null,t)}function Xa(t){return Us(t),t.headers=Ct.from(t.headers),t.data=Vs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ci.getAdapter(t.adapter||wn.adapter)(t).then(function(s){return Us(t),s.data=Vs.call(t,t.transformResponse,s),s.headers=Ct.from(s.headers),s},function(s){return gi(s)||(Us(t),s&&s.response&&(s.response.data=Vs.call(t,t.transformResponse,s.response),s.response.headers=Ct.from(s.response.headers))),Promise.reject(s)})}const Ti="1.11.0",ys={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{ys[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const Ja={};ys.transitional=function(r,n,s){function a(o,i){return"[Axios v"+Ti+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(r===!1)throw new Te(a(i," has been removed"+(n?" in "+n:"")),Te.ERR_DEPRECATED);return n&&!Ja[i]&&(Ja[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(o,i,l):!0}};ys.spelling=function(r){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Lu(t,r,n){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let a=s.length;for(;a-- >0;){const o=s[a],i=r[o];if(i){const l=t[o],c=l===void 0||i(l,o,t);if(c!==!0)throw new Te("option "+o+" must be "+c,Te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Te("Unknown option "+o,Te.ERR_BAD_OPTION)}}const $n={assertOptions:Lu,validators:ys},Ft=$n.validators;let Sr=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Ha,response:new Ha}}async request(r,n){try{return await this._request(r,n)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=Mr(this.defaults,n);const{transitional:s,paramsSerializer:a,headers:o}=n;s!==void 0&&$n.assertOptions(s,{silentJSONParsing:Ft.transitional(Ft.boolean),forcedJSONParsing:Ft.transitional(Ft.boolean),clarifyTimeoutError:Ft.transitional(Ft.boolean)},!1),a!=null&&($.isFunction(a)?n.paramsSerializer={serialize:a}:$n.assertOptions(a,{encode:Ft.function,serialize:Ft.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),$n.assertOptions(n,{baseUrl:Ft.spelling("baseURL"),withXsrfToken:Ft.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&$.merge(o.common,o[n.method]);o&&$.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),n.headers=Ct.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,f=0,p;if(!c){const g=[Xa.bind(this),void 0];for(g.unshift(...l),g.push(...d),p=g.length,u=Promise.resolve(n);f<p;)u=u.then(g[f++],g[f++]);return u}p=l.length;let m=n;for(f=0;f<p;){const g=l[f++],v=l[f++];try{m=g(m)}catch(P){v.call(this,P);break}}try{u=Xa.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(r){r=Mr(this.defaults,r);const n=vi(r.baseURL,r.url,r.allowAbsoluteUrls);return fi(n,r.params,r.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(r){Sr.prototype[r]=function(n,s){return this.request(Mr(s||{},{method:r,url:n,data:(s||{}).data}))}});$.forEach(["post","put","patch"],function(r){function n(s){return function(o,i,l){return this.request(Mr(l||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Sr.prototype[r]=n(),Sr.prototype[r+"Form"]=n(!0)});let Vu=class Pi{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(a);return i.cancel=function(){s.unsubscribe(o)},i},r(function(o,i,l){s.reason||(s.reason=new Kr(o,i,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=s=>{r.abort(s)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new Pi(function(a){r=a}),cancel:r}}};function Uu(t){return function(n){return t.apply(null,n)}}function Bu(t){return $.isObject(t)&&t.isAxiosError===!0}const sa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sa).forEach(([t,r])=>{sa[r]=t});function Si(t){const r=new Sr(t),n=ri(Sr.prototype.request,r);return $.extend(n,Sr.prototype,r,{allOwnKeys:!0}),$.extend(n,r,null,{allOwnKeys:!0}),n.create=function(a){return Si(Mr(t,a))},n}const ot=Si(wn);ot.Axios=Sr;ot.CanceledError=Kr;ot.CancelToken=Vu;ot.isCancel=gi;ot.VERSION=Ti;ot.toFormData=xs;ot.AxiosError=Te;ot.Cancel=ot.CanceledError;ot.all=function(r){return Promise.all(r)};ot.spread=Uu;ot.isAxiosError=Bu;ot.mergeConfig=Mr;ot.AxiosHeaders=Ct;ot.formToJSON=t=>xi($.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=Ci.getAdapter;ot.HttpStatusCode=sa;ot.default=ot;const{Axios:rb,AxiosError:nb,CanceledError:sb,isCancel:ab,CancelToken:ob,VERSION:ib,all:lb,Cancel:cb,isAxiosError:db,spread:ub,toFormData:hb,AxiosHeaders:mb,HttpStatusCode:fb,formToJSON:pb,getAdapter:xb,mergeConfig:gb}=ot;class $u{constructor(){Oa(this,"api");this.api=ot.create({baseURL:"http://localhost:3000",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(r=>{const n=localStorage.getItem("auth_token");return n&&(r.headers.Authorization=`Bearer ${n}`),r},r=>Promise.reject(r)),this.api.interceptors.response.use(r=>r,r=>{var n;return((n=r.response)==null?void 0:n.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(r)})}async getHealth(){return(await this.api.get("/health")).data}async getAssets(){return(await this.api.get("/api/v1/assets")).data}async createAsset(r){return(await this.api.post("/api/v1/assets",r)).data}async updateAsset(r,n){return(await this.api.put(`/api/v1/assets/${r}`,n)).data}async deleteAsset(r){await this.api.delete(`/api/v1/assets/${r}`)}async getPortfolios(r){return(await this.api.get(`/api/v1/portfolios?accountId=${r}`)).data}async getPortfolio(r){return(await this.api.get(`/api/v1/portfolios/${r}`)).data}async createPortfolio(r){return(await this.api.post("/api/v1/portfolios",r)).data}async updatePortfolio(r,n){return(await this.api.put(`/api/v1/portfolios/${r}`,n)).data}async deletePortfolio(r){await this.api.delete(`/api/v1/portfolios/${r}`)}async getPortfolioNav(r){return(await this.api.get(`/api/v1/portfolios/${r}/nav`)).data}async getPortfolioPerformance(r){return(await this.api.get(`/api/v1/portfolios/${r}/performance`)).data}async getPortfolioAllocation(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation`)).data}async getPortfolioPerformanceHistory(r,n){const s=n?{period:n}:{};return(await this.api.get(`/api/v1/portfolios/${r}/analytics/performance-history`,{params:s})).data}async getPortfolioRiskReturn(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/risk-return`)).data}async getPortfolioAssetPerformance(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/asset-performance`)).data}async getPortfolioRiskMetrics(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/risk-metrics`)).data}async getPortfolioDiversificationHeatmap(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/diversification-heatmap`)).data}async getPortfolioAllocationTimeline(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation-timeline`)).data}async getPortfolioCashFlowAnalysis(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/cash-flow-analysis`)).data}async getPortfolioBenchmarkComparison(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/benchmark-comparison`)).data}async getPortfolioAssetDetailSummary(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/asset-detail-summary`)).data}async getPortfolioPositions(r){return(await this.api.get(`/api/v1/portfolios/${r}/positions`)).data}async getPortfolioAnalyticsPerformance(r,n){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/performance`,{params:{period:n}})).data}async getPortfolioAnalyticsAllocation(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation`)).data}async getPortfolioAnalyticsHistory(r,n){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/history`,{params:{period:n}})).data}async getPortfolioAnalyticsReport(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/report`)).data}async getPortfolioCashFlows(r){return(await this.api.get(`/api/v1/portfolios/${r}/cash-flows`)).data}async createCashFlow(r,n){return(await this.api.post(`/api/v1/portfolios/${r}/cash-flows`,n)).data}async createTrade(r){return(await this.api.post("/api/v1/trades",r)).data}async getTrades(r,n){const s=new URLSearchParams({portfolioId:r});return n&&Object.entries(n).forEach(([o,i])=>{i&&s.append(o,i)}),(await this.api.get(`/api/v1/trades?${s}`)).data}async getTrade(r){return(await this.api.get(`/api/v1/trades/${r}`)).data}async updateTrade(r,n){return(await this.api.put(`/api/v1/trades/${r}`,n)).data}async deleteTrade(r){await this.api.delete(`/api/v1/trades/${r}`)}async getTradeDetails(r){return(await this.api.get(`/api/v1/trades/${r}/details`)).data}async getTradeAnalysis(r,n){const s=new URLSearchParams({portfolioId:r});n&&Object.entries(n).forEach(([i,l])=>{l&&s.append(i,l)});const a=`/api/v1/trades/analysis/portfolio?${s}`;return(await this.api.get(a)).data}async getTradingPerformance(r,n){const s=new URLSearchParams({portfolioId:r});return n&&Object.entries(n).forEach(([o,i])=>{i&&s.append(o,i)}),(await this.api.get(`/api/v1/trades/performance/portfolio?${s}`)).data}async getCurrentPositions(r,n){const s=new URLSearchParams;return n&&s.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/portfolios/${r}/positions?${s}`)).data}async getPositionByAsset(r,n,s){const a=new URLSearchParams;return s&&a.append("marketPrice",s.toString()),(await this.api.get(`/api/v1/portfolios/${r}/positions/${n}?${a}`)).data}async setRiskTargets(r,n){return(await this.api.post(`/api/v1/assets/${r}/targets`,n)).data}async getRiskTargets(r){return(await this.api.get(`/api/v1/assets/${r}/targets`)).data}async updateRiskTargets(r,n){return(await this.api.put(`/api/v1/assets/${r}/targets`,n)).data}async removeRiskTargets(r){await this.api.delete(`/api/v1/assets/${r}/targets`)}async getPortfolioRiskTargets(r){return(await this.api.get(`/api/v1/assets/targets/portfolio/${r}`)).data}async monitorRiskTargets(r,n){const s=new URLSearchParams;return r&&s.append("portfolioId",r),n&&s.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/assets/targets/monitor?${s}`)).data}async testConnection(){try{return await this.getHealth(),!0}catch(r){return console.error("API connection test failed:",r),!1}}}const Be=new $u,vs=t=>{const r=xn(),{data:n,isLoading:s,error:a,refetch:o}=Pt(["portfolios",t],()=>t?Be.getPortfolios(t):Promise.resolve([]),{enabled:!!t,staleTime:5*60*1e3,cacheTime:10*60*1e3}),i=Pr(d=>Be.createPortfolio(d),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}}),l=Pr(({id:d,data:u})=>Be.updatePortfolio(d,u),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}}),c=Pr(d=>Be.deletePortfolio(d),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}});return{portfolios:n||[],isLoading:s,error:a,refetch:o,createPortfolio:i.mutate,updatePortfolio:l.mutate,deletePortfolio:c.mutate,isCreating:i.isLoading,isUpdating:l.isLoading,isDeleting:c.isLoading}},Di=t=>{const r=xn(),{data:n,isLoading:s,error:a,refetch:o}=Pt(["portfolio",t],()=>Be.getPortfolio(t),{enabled:!!t,staleTime:2*60*1e3,cacheTime:5*60*1e3}),i=Pr(l=>Be.updatePortfolio(t,l),{onSuccess:()=>{r.invalidateQueries(["portfolio",t]),r.invalidateQueries("portfolios")}});return{portfolio:n,isLoading:s,error:a,refetch:o,updatePortfolio:i.mutate,isUpdating:i.isLoading}},Wu=t=>{const{data:r,isLoading:n,error:s}=Pt(["portfolio-nav",t],()=>Be.getPortfolioNav(t),{enabled:!!t,staleTime:6e4,refetchInterval:3e5}),{data:a,isLoading:o,error:i}=Pt(["portfolio-performance",t],()=>Be.getPortfolioPerformance(t),{enabled:!!t,staleTime:5*60*1e3}),{data:l,isLoading:c,error:d}=Pt(["portfolio-allocation",t],()=>Be.getPortfolioAllocation(t),{enabled:!!t,staleTime:5*60*1e3}),{data:u,isLoading:f,error:p}=Pt(["portfolio-positions",t],()=>Be.getPortfolioPositions(t),{enabled:!!t,staleTime:2*60*1e3});return Ht.useEffect(()=>{console.log("usePortfolioAnalytics Debug:",{portfolioId:t,navData:r,performanceData:a,allocationData:l,positionsData:u,isNavLoading:n,isPerformanceLoading:o,isAllocationLoading:c,isPositionsLoading:f,navError:s,performanceError:i,allocationError:d,positionsError:p})},[t,r,a,l,u,n,o,c,f,s,i,d,p]),{navData:r,performanceData:a,allocationData:l,positionsData:u,isLoading:n||o||c||f,error:s||i||d||p}},eo="86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",kn={id:eo,accountId:eo,name:"John Doe",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},to={"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5":{id:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",accountId:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",name:"John Doe (VND)",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"usd-account-123":{id:"usd-account-123",accountId:"usd-account-123",name:"Jane Smith (USD)",email:"jane.smith@example.com",baseCurrency:"USD",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"eur-account-456":{id:"eur-account-456",accountId:"eur-account-456",name:"Pierre Dubois (EUR)",email:"pierre.dubois@example.com",baseCurrency:"EUR",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"}},At=()=>{const[t,r]=x.useState(kn);return x.useEffect(()=>{const a=localStorage.getItem("currentAccountId"),o=a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a);if(o&&a!==t.accountId){const i=to[a]||kn;r(i)}else a&&!o&&(console.warn("Invalid account ID in localStorage, using default:",a),localStorage.removeItem("currentAccountId"),r(kn))},[t.accountId]),{currentAccount:t,switchAccount:a=>{localStorage.setItem("currentAccountId",a);const o=to[a]||kn;r(o)},getCurrentAccountId:()=>t.accountId,accountId:t.accountId,baseCurrency:t.baseCurrency}};function Ie(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function ee(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function te(t){ee(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||ss(t)==="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Wn(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Hn(t,r){ee(2,arguments);var n=te(t),s=Ie(r);if(isNaN(s))return new Date(NaN);if(!s)return n;var a=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+s+1,0);var i=o.getDate();return a>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}function bs(t,r){ee(2,arguments);var n=te(t).getTime(),s=Ie(r);return new Date(n+s)}var Hu=36e5;function zu(t,r){ee(2,arguments);var n=Ie(r);return bs(t,n*Hu)}var Yu={};function zt(){return Yu}function Dr(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=zt(),f=Ie((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=te(t),m=p.getDay(),g=(m<f?7:0)+m-f;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function Zn(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}function Yr(t){ee(1,arguments);var r=te(t);return r.setHours(0,0,0,0),r}var qu=864e5;function Qu(t,r){ee(2,arguments);var n=Yr(t),s=Yr(r),a=n.getTime()-Zn(n),o=s.getTime()-Zn(s);return Math.round((a-o)/qu)}var Ku=6e4;function Gu(t,r){ee(2,arguments);var n=Ie(r);return bs(t,n*Ku)}function Zu(t,r){ee(2,arguments);var n=Ie(r);return bs(t,n*1e3)}function Xu(t,r){ee(2,arguments);var n=Ie(r),s=n*7;return Wn(t,s)}function ro(t,r){ee(2,arguments);var n=Ie(r);return Hn(t,n*12)}function dn(t,r){ee(2,arguments);var n=te(t),s=te(r),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}var js=6e4,ws=36e5,Ju=1e3;function eh(t,r){ee(2,arguments);var n=Yr(t),s=Yr(r);return n.getTime()===s.getTime()}function th(t){return ee(1,arguments),t instanceof Date||ss(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ki(t){if(ee(1,arguments),!th(t)&&typeof t!="number")return!1;var r=te(t);return!isNaN(Number(r))}function rh(t,r){ee(2,arguments);var n=te(t),s=te(r),a=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return a*12+o}function nh(t,r){ee(2,arguments);var n=te(t),s=te(r);return n.getFullYear()-s.getFullYear()}function no(t,r){var n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function Ai(t,r){ee(2,arguments);var n=te(t),s=te(r),a=no(n,s),o=Math.abs(Qu(n,s));n.setDate(n.getDate()-a*o);var i=+(no(n,s)===-a),l=a*(o-i);return l===0?0:l}function Cs(t,r){return ee(2,arguments),te(t).getTime()-te(r).getTime()}var so={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(r){return r<0?Math.ceil(r):Math.floor(r)}},sh="trunc";function Cn(t){return t?so[t]:so[sh]}function ah(t,r,n){ee(2,arguments);var s=Cs(t,r)/ws;return Cn(void 0)(s)}function oh(t,r,n){ee(2,arguments);var s=Cs(t,r)/js;return Cn(void 0)(s)}function aa(t){ee(1,arguments);var r=te(t);return r.setHours(23,59,59,999),r}function oa(t){ee(1,arguments);var r=te(t),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function ih(t){ee(1,arguments);var r=te(t);return aa(r).getTime()===oa(r).getTime()}function Ni(t,r){ee(2,arguments);var n=te(t),s=te(r),a=dn(n,s),o=Math.abs(rh(n,s)),i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*o);var l=dn(n,s)===-a;ih(te(t))&&o===1&&dn(t,s)===1&&(l=!1),i=a*(o-Number(l))}return i===0?0:i}function lh(t,r,n){ee(2,arguments);var s=Ni(t,r)/3;return Cn(void 0)(s)}function ch(t,r,n){ee(2,arguments);var s=Cs(t,r)/1e3;return Cn(void 0)(s)}function dh(t,r,n){ee(2,arguments);var s=Ai(t,r)/7;return Cn(void 0)(s)}function uh(t,r){ee(2,arguments);var n=te(t),s=te(r),a=dn(n,s),o=Math.abs(nh(n,s));n.setFullYear(1584),s.setFullYear(1584);var i=dn(n,s)===-a,l=a*(o-Number(i));return l===0?0:l}function hh(t,r){var n;ee(1,arguments);var s=t||{},a=te(s.start),o=te(s.end),i=o.getTime();if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var l=[],c=a;c.setHours(0,0,0,0);var d=Number((n=void 0)!==null&&n!==void 0?n:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=i;)l.push(te(c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return l}function ao(t){ee(1,arguments);var r=te(t);return r.setDate(1),r.setHours(0,0,0,0),r}function Bs(t){ee(1,arguments);var r=te(t),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function An(t){ee(1,arguments);var r=te(t),n=new Date(0);return n.setFullYear(r.getFullYear(),0,1),n.setHours(0,0,0,0),n}function $s(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=zt(),f=Ie((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=te(t),m=p.getDay(),g=(m<f?-7:0)+6-(m-f);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function Mi(t,r){ee(2,arguments);var n=Ie(r);return bs(t,-n)}var mh=864e5;function fh(t){ee(1,arguments);var r=te(t),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var s=r.getTime(),a=n-s;return Math.floor(a/mh)+1}function qr(t){ee(1,arguments);var r=1,n=te(t),s=n.getUTCDay(),a=(s<r?7:0)+s-r;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Ri(t){ee(1,arguments);var r=te(t),n=r.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var a=qr(s),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=qr(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function ph(t){ee(1,arguments);var r=Ri(t),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var s=qr(n);return s}var xh=6048e5;function Ei(t){ee(1,arguments);var r=te(t),n=qr(r).getTime()-ph(r).getTime();return Math.round(n/xh)+1}function Rr(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=zt(),f=Ie((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=te(t),m=p.getUTCDay(),g=(m<f?7:0)+m-f;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function wa(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=te(t),f=u.getUTCFullYear(),p=zt(),m=Ie((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&s!==void 0?s:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,m),g.setUTCHours(0,0,0,0);var v=Rr(g,r),P=new Date(0);P.setUTCFullYear(f,0,m),P.setUTCHours(0,0,0,0);var j=Rr(P,r);return u.getTime()>=v.getTime()?f+1:u.getTime()>=j.getTime()?f:f-1}function gh(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=zt(),f=Ie((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=wa(t,r),m=new Date(0);m.setUTCFullYear(p,0,f),m.setUTCHours(0,0,0,0);var g=Rr(m,r);return g}var yh=6048e5;function Ii(t,r){ee(1,arguments);var n=te(t),s=Rr(n,r).getTime()-gh(n,r).getTime();return Math.round(s/yh)+1}function Ae(t,r){for(var n=t<0?"-":"",s=Math.abs(t).toString();s.length<r;)s="0"+s;return n+s}var dr={y:function(r,n){var s=r.getUTCFullYear(),a=s>0?s:1-s;return Ae(n==="yy"?a%100:a,n.length)},M:function(r,n){var s=r.getUTCMonth();return n==="M"?String(s+1):Ae(s+1,2)},d:function(r,n){return Ae(r.getUTCDate(),n.length)},a:function(r,n){var s=r.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(r,n){return Ae(r.getUTCHours()%12||12,n.length)},H:function(r,n){return Ae(r.getUTCHours(),n.length)},m:function(r,n){return Ae(r.getUTCMinutes(),n.length)},s:function(r,n){return Ae(r.getUTCSeconds(),n.length)},S:function(r,n){var s=n.length,a=r.getUTCMilliseconds(),o=Math.floor(a*Math.pow(10,s-3));return Ae(o,n.length)}},_r={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vh={G:function(r,n,s){var a=r.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(r,n,s){if(n==="yo"){var a=r.getUTCFullYear(),o=a>0?a:1-a;return s.ordinalNumber(o,{unit:"year"})}return dr.y(r,n)},Y:function(r,n,s,a){var o=wa(r,a),i=o>0?o:1-o;if(n==="YY"){var l=i%100;return Ae(l,2)}return n==="Yo"?s.ordinalNumber(i,{unit:"year"}):Ae(i,n.length)},R:function(r,n){var s=Ri(r);return Ae(s,n.length)},u:function(r,n){var s=r.getUTCFullYear();return Ae(s,n.length)},Q:function(r,n,s){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return Ae(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,n,s){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return Ae(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,n,s){var a=r.getUTCMonth();switch(n){case"M":case"MM":return dr.M(r,n);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(r,n,s){var a=r.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return Ae(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(r,n,s,a){var o=Ii(r,a);return n==="wo"?s.ordinalNumber(o,{unit:"week"}):Ae(o,n.length)},I:function(r,n,s){var a=Ei(r);return n==="Io"?s.ordinalNumber(a,{unit:"week"}):Ae(a,n.length)},d:function(r,n,s){return n==="do"?s.ordinalNumber(r.getUTCDate(),{unit:"date"}):dr.d(r,n)},D:function(r,n,s){var a=fh(r);return n==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):Ae(a,n.length)},E:function(r,n,s){var a=r.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(r,n,s,a){var o=r.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Ae(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(o,{width:"short",context:"formatting"});case"eeee":default:return s.day(o,{width:"wide",context:"formatting"})}},c:function(r,n,s,a){var o=r.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Ae(i,n.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(o,{width:"narrow",context:"standalone"});case"cccccc":return s.day(o,{width:"short",context:"standalone"});case"cccc":default:return s.day(o,{width:"wide",context:"standalone"})}},i:function(r,n,s){var a=r.getUTCDay(),o=a===0?7:a;switch(n){case"i":return String(o);case"ii":return Ae(o,n.length);case"io":return s.ordinalNumber(o,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(r,n,s){var a=r.getUTCHours(),o=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,n,s){var a=r.getUTCHours(),o;switch(a===12?o=_r.noon:a===0?o=_r.midnight:o=a/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,n,s){var a=r.getUTCHours(),o;switch(a>=17?o=_r.evening:a>=12?o=_r.afternoon:a>=4?o=_r.morning:o=_r.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,n,s){if(n==="ho"){var a=r.getUTCHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return dr.h(r,n)},H:function(r,n,s){return n==="Ho"?s.ordinalNumber(r.getUTCHours(),{unit:"hour"}):dr.H(r,n)},K:function(r,n,s){var a=r.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(a,{unit:"hour"}):Ae(a,n.length)},k:function(r,n,s){var a=r.getUTCHours();return a===0&&(a=24),n==="ko"?s.ordinalNumber(a,{unit:"hour"}):Ae(a,n.length)},m:function(r,n,s){return n==="mo"?s.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):dr.m(r,n)},s:function(r,n,s){return n==="so"?s.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):dr.s(r,n)},S:function(r,n){return dr.S(r,n)},X:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return io(i);case"XXXX":case"XX":return wr(i);case"XXXXX":case"XXX":default:return wr(i,":")}},x:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"x":return io(i);case"xxxx":case"xx":return wr(i);case"xxxxx":case"xxx":default:return wr(i,":")}},O:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+oo(i,":");case"OOOO":default:return"GMT"+wr(i,":")}},z:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+oo(i,":");case"zzzz":default:return"GMT"+wr(i,":")}},t:function(r,n,s,a){var o=a._originalDate||r,i=Math.floor(o.getTime()/1e3);return Ae(i,n.length)},T:function(r,n,s,a){var o=a._originalDate||r,i=o.getTime();return Ae(i,n.length)}};function oo(t,r){var n=t>0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),o=s%60;if(o===0)return n+String(a);var i=r;return n+String(a)+i+Ae(o,2)}function io(t,r){if(t%60===0){var n=t>0?"-":"+";return n+Ae(Math.abs(t)/60,2)}return wr(t,r)}function wr(t,r){var n=r||"",s=t>0?"-":"+",a=Math.abs(t),o=Ae(Math.floor(a/60),2),i=Ae(a%60,2);return s+o+n+i}var lo=function(r,n){switch(r){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Oi=function(r,n){switch(r){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},bh=function(r,n){var s=r.match(/(P+)(p+)?/)||[],a=s[1],o=s[2];if(!o)return lo(r,n);var i;switch(a){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",lo(a,n)).replace("{{time}}",Oi(o,n))},ia={p:Oi,P:bh},jh=["D","DD"],wh=["YY","YYYY"];function _i(t){return jh.indexOf(t)!==-1}function Fi(t){return wh.indexOf(t)!==-1}function Xn(t,r,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ch={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Th=function(r,n,s){var a,o=Ch[r];return typeof o=="string"?a=o:n===1?a=o.one:a=o.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function Ws(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):t.defaultWidth,s=t.formats[n]||t.formats[t.defaultWidth];return s}}var Ph={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dh={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kh={date:Ws({formats:Ph,defaultWidth:"full"}),time:Ws({formats:Sh,defaultWidth:"full"}),dateTime:Ws({formats:Dh,defaultWidth:"full"})},Ah={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Nh=function(r,n,s,a){return Ah[r]};function en(t){return function(r,n){var s=n!=null&&n.context?String(n.context):"standalone",a;if(s==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,i=n!=null&&n.width?String(n.width):o;a=t.formattingValues[i]||t.formattingValues[o]}else{var l=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(r):r;return a[d]}}var Mh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rh={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Eh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ih={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Oh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_h={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fh=function(r,n){var s=Number(r),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Lh={ordinalNumber:Fh,era:en({values:Mh,defaultWidth:"wide"}),quarter:en({values:Rh,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:en({values:Eh,defaultWidth:"wide"}),day:en({values:Ih,defaultWidth:"wide"}),dayPeriod:en({values:Oh,defaultWidth:"wide",formattingValues:_h,defaultFormattingWidth:"wide"})};function tn(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=r.match(a);if(!o)return null;var i=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Uh(l,function(f){return f.test(i)}):Vh(l,function(f){return f.test(i)}),d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;var u=r.slice(i.length);return{value:d,rest:u}}}function Vh(t,r){for(var n in t)if(t.hasOwnProperty(n)&&r(t[n]))return n}function Uh(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n}function Bh(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.match(t.matchPattern);if(!s)return null;var a=s[0],o=r.match(t.parsePattern);if(!o)return null;var i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;var l=r.slice(a.length);return{value:i,rest:l}}}var $h=/^(\d+)(th|st|nd|rd)?/i,Wh=/\d+/i,Hh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zh={any:[/^b/i,/^(a|c)/i]},Yh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qh={any:[/1/i,/2/i,/3/i,/4/i]},Qh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},em={ordinalNumber:Bh({matchPattern:$h,parsePattern:Wh,valueCallback:function(r){return parseInt(r,10)}}),era:tn({matchPatterns:Hh,defaultMatchWidth:"wide",parsePatterns:zh,defaultParseWidth:"any"}),quarter:tn({matchPatterns:Yh,defaultMatchWidth:"wide",parsePatterns:qh,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:tn({matchPatterns:Qh,defaultMatchWidth:"wide",parsePatterns:Kh,defaultParseWidth:"any"}),day:tn({matchPatterns:Gh,defaultMatchWidth:"wide",parsePatterns:Zh,defaultParseWidth:"any"}),dayPeriod:tn({matchPatterns:Xh,defaultMatchWidth:"any",parsePatterns:Jh,defaultParseWidth:"any"})},Ca={code:"en-US",formatDistance:Th,formatLong:kh,formatRelative:Nh,localize:Lh,match:em,options:{weekStartsOn:0,firstWeekContainsDate:1}},tm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nm=/^'([^]*?)'?$/,sm=/''/g,am=/[a-zA-Z]/;function hr(t,r,n){var s,a,o,i,l,c,d,u,f,p,m,g,v,P,j,w,D,y;ee(2,arguments);var A=String(r),R=zt(),N=(s=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:R.locale)!==null&&s!==void 0?s:Ca,_=Ie((o=(i=(l=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:R.firstWeekContainsDate)!==null&&i!==void 0?i:(f=R.locale)===null||f===void 0||(p=f.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Ie((m=(g=(v=(P=n==null?void 0:n.weekStartsOn)!==null&&P!==void 0?P:n==null||(j=n.locale)===null||j===void 0||(w=j.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&v!==void 0?v:R.weekStartsOn)!==null&&g!==void 0?g:(D=R.locale)===null||D===void 0||(y=D.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&m!==void 0?m:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var k=te(t);if(!ki(k))throw new RangeError("Invalid time value");var T=Zn(k),C=Mi(k,T),V={firstWeekContainsDate:_,weekStartsOn:E,locale:N,_originalDate:k},F=A.match(rm).map(function(I){var K=I[0];if(K==="p"||K==="P"){var W=ia[K];return W(I,N.formatLong)}return I}).join("").match(tm).map(function(I){if(I==="''")return"'";var K=I[0];if(K==="'")return om(I);var W=vh[K];if(W)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Fi(I)&&Xn(I,r,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&_i(I)&&Xn(I,r,String(t)),W(C,I,N.localize,V);if(K.match(am))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");return I}).join("");return F}function om(t){var r=t.match(nm);return r?r[1].replace(sm,"'"):t}function im(t,r){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t}function lm(t,r){var n,s;ee(1,arguments);var a=te(t);if(isNaN(a.getTime()))throw new RangeError("Invalid time value");var o=String((n=r==null?void 0:r.format)!==null&&n!==void 0?n:"extended"),i=String((s=r==null?void 0:r.representation)!==null&&s!==void 0?s:"complete");if(o!=="extended"&&o!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(i!=="date"&&i!=="time"&&i!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var l="",c="",d=o==="extended"?"-":"",u=o==="extended"?":":"";if(i!=="time"){var f=Ae(a.getDate(),2),p=Ae(a.getMonth()+1,2),m=Ae(a.getFullYear(),4);l="".concat(m).concat(d).concat(p).concat(d).concat(f)}if(i!=="date"){var g=a.getTimezoneOffset();if(g!==0){var v=Math.abs(g),P=Ae(Math.floor(v/60),2),j=Ae(v%60,2),w=g<0?"+":"-";c="".concat(w).concat(P,":").concat(j)}else c="Z";var D=Ae(a.getHours(),2),y=Ae(a.getMinutes(),2),A=Ae(a.getSeconds(),2),R=l===""?"":"T",N=[D,y,A].join(u);l="".concat(l).concat(R).concat(N).concat(c)}return l}function cm(t){ee(1,arguments);var r=te(t),n=r.getDate();return n}function Li(t){ee(1,arguments);var r=te(t),n=r.getFullYear(),s=r.getMonth(),a=new Date(0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function dm(t){ee(1,arguments);var r=te(t),n=r.getHours();return n}function um(t){ee(1,arguments);var r=te(t),n=r.getMilliseconds();return n}function hm(t){ee(1,arguments);var r=te(t),n=r.getMinutes();return n}function mm(t){ee(1,arguments);var r=te(t),n=r.getMonth();return n}function fm(t){ee(1,arguments);var r=te(t),n=r.getSeconds();return n}function pm(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=te(t),f=u.getFullYear(),p=zt(),m=Ie((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&s!==void 0?s:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(f+1,0,m),g.setHours(0,0,0,0);var v=Dr(g,r),P=new Date(0);P.setFullYear(f,0,m),P.setHours(0,0,0,0);var j=Dr(P,r);return u.getTime()>=v.getTime()?f+1:u.getTime()>=j.getTime()?f:f-1}function xm(t,r){var n,s,a,o,i,l,c,d;ee(1,arguments);var u=zt(),f=Ie((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=pm(t,r),m=new Date(0);m.setFullYear(p,0,f),m.setHours(0,0,0,0);var g=Dr(m,r);return g}var gm=6048e5;function ym(t,r){ee(1,arguments);var n=te(t),s=Dr(n,r).getTime()-xm(n,r).getTime();return Math.round(s/gm)+1}function vm(t){return ee(1,arguments),te(t).getFullYear()}function Hs(t,r){ee(2,arguments);var n=te(t),s=te(r);return n.getTime()>s.getTime()}function rn(t,r){ee(2,arguments);var n=te(t),s=te(r);return n.getTime()<s.getTime()}function bm(t,r){ee(2,arguments);var n=te(t),s=te(r);return n.getTime()===s.getTime()}function co(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,s=Array(r);n<r;n++)s[n]=t[n];return s}function jm(t,r){if(t){if(typeof t=="string")return co(t,r);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?co(t,r):void 0}}function uo(t,r){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=jm(t))||r){n&&(t=n);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return i=d.done,d},e:function(d){l=!0,o=d},f:function(){try{i||n.return==null||n.return()}finally{if(l)throw o}}}}function Oe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Fl(t,r)}function Jn(t){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jn(t)}function Vi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vi=function(){return!!t})()}function wm(t,r){if(r&&(ss(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ie(t)}function _e(t){var r=Vi();return function(){var n,s=Jn(t);if(r){var a=Jn(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return wm(this,n)}}function Ne(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Cm(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Ro(s.key),s)}}function Me(t,r,n){return r&&Cm(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ae(t,r,n){return(r=Ro(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Tm=10,Ui=function(){function t(){Ne(this,t),ae(this,"priority",void 0),ae(this,"subPriority",0)}return Me(t,[{key:"validate",value:function(n,s){return!0}}]),t}(),Pm=function(t){Oe(n,t);var r=_e(n);function n(s,a,o,i,l){var c;return Ne(this,n),c=r.call(this),c.value=s,c.validateValue=a,c.setValue=o,c.priority=i,l&&(c.subPriority=l),c}return Me(n,[{key:"validate",value:function(a,o){return this.validateValue(a,this.value,o)}},{key:"set",value:function(a,o,i){return this.setValue(a,o,this.value,i)}}]),n}(Ui),Sm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",Tm),ae(ie(s),"subPriority",-1),s}return Me(n,[{key:"set",value:function(a,o){if(o.timestampIsSet)return a;var i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}}]),n}(Ui),Ve=function(){function t(){Ne(this,t),ae(this,"incompatibleTokens",void 0),ae(this,"priority",void 0),ae(this,"subPriority",void 0)}return Me(t,[{key:"run",value:function(n,s,a,o){var i=this.parse(n,s,a,o);return i?{setter:new Pm(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(n,s,a){return!0}}]),t}(),Dm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",140),ae(ie(s),"incompatibleTokens",["R","u","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"G":case"GG":case"GGG":return i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"});case"GGGGG":return i.era(a,{width:"narrow"});case"GGGG":default:return i.era(a,{width:"wide"})||i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"})}}},{key:"set",value:function(a,o,i){return o.era=i,a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),st={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Vt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function at(t,r){return t&&{value:r(t.value),rest:t.rest}}function Ze(t,r){var n=r.match(t);return n?{value:parseInt(n[0],10),rest:r.slice(n[0].length)}:null}function Ut(t,r){var n=r.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:r.slice(1)};var s=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:s*(a*ws+o*js+i*Ju),rest:r.slice(n[0].length)}}function Bi(t){return Ze(st.anyDigitsSigned,t)}function tt(t,r){switch(t){case 1:return Ze(st.singleDigit,r);case 2:return Ze(st.twoDigits,r);case 3:return Ze(st.threeDigits,r);case 4:return Ze(st.fourDigits,r);default:return Ze(new RegExp("^\\d{1,"+t+"}"),r)}}function es(t,r){switch(t){case 1:return Ze(st.singleDigitSigned,r);case 2:return Ze(st.twoDigitsSigned,r);case 3:return Ze(st.threeDigitsSigned,r);case 4:return Ze(st.fourDigitsSigned,r);default:return Ze(new RegExp("^-?\\d{1,"+t+"}"),r)}}function Ta(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function $i(t,r){var n=r>0,s=n?r:1-r,a;if(s<=50)a=t||100;else{var o=s+50,i=Math.floor(o/100)*100,l=t>=o%100;a=t+i-(l?100:0)}return n?a:1-a}function Wi(t){return t%400===0||t%4===0&&t%100!==0}var km=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",130),ae(ie(s),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){var l=function(d){return{year:d,isTwoDigitYear:o==="yy"}};switch(o){case"y":return at(tt(4,a),l);case"yo":return at(i.ordinalNumber(a,{unit:"year"}),l);default:return at(tt(o.length,a),l)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,i){var l=a.getUTCFullYear();if(i.isTwoDigitYear){var c=$i(i.year,l);return a.setUTCFullYear(c,0,1),a.setUTCHours(0,0,0,0),a}var d=!("era"in o)||o.era===1?i.year:1-i.year;return a.setUTCFullYear(d,0,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Am=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",130),ae(ie(s),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){var l=function(d){return{year:d,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return at(tt(4,a),l);case"Yo":return at(i.ordinalNumber(a,{unit:"year"}),l);default:return at(tt(o.length,a),l)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,i,l){var c=wa(a,l);if(i.isTwoDigitYear){var d=$i(i.year,c);return a.setUTCFullYear(d,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Rr(a,l)}var u=!("era"in o)||o.era===1?i.year:1-i.year;return a.setUTCFullYear(u,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Rr(a,l)}}]),n}(Ve),Nm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",130),ae(ie(s),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o){return es(o==="R"?4:o.length,a)}},{key:"set",value:function(a,o,i){var l=new Date(0);return l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0),qr(l)}}]),n}(Ve),Mm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",130),ae(ie(s),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o){return es(o==="u"?4:o.length,a)}},{key:"set",value:function(a,o,i){return a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Rm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",120),ae(ie(s),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"Q":case"QQ":return tt(o.length,a);case"Qo":return i.ordinalNumber(a,{unit:"quarter"});case"QQQ":return i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(a,{width:"wide",context:"formatting"})||i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Em=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",120),ae(ie(s),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"q":case"qq":return tt(o.length,a);case"qo":return i.ordinalNumber(a,{unit:"quarter"});case"qqq":return i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(a,{width:"wide",context:"standalone"})||i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Im=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ae(ie(s),"priority",110),s}return Me(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d-1};switch(o){case"M":return at(Ze(st.month,a),l);case"MM":return at(tt(2,a),l);case"Mo":return at(i.ordinalNumber(a,{unit:"month"}),l);case"MMM":return i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(a,{width:"wide",context:"formatting"})||i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Om=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",110),ae(ie(s),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d-1};switch(o){case"L":return at(Ze(st.month,a),l);case"LL":return at(tt(2,a),l);case"Lo":return at(i.ordinalNumber(a,{unit:"month"}),l);case"LLL":return i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(a,{width:"wide",context:"standalone"})||i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),n}(Ve);function _m(t,r,n){ee(2,arguments);var s=te(t),a=Ie(r),o=Ii(s,n)-a;return s.setUTCDate(s.getUTCDate()-o*7),s}var Fm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",100),ae(ie(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"w":return Ze(st.week,a);case"wo":return i.ordinalNumber(a,{unit:"week"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,i,l){return Rr(_m(a,i,l),l)}}]),n}(Ve);function Lm(t,r){ee(2,arguments);var n=te(t),s=Ie(r),a=Ei(n)-s;return n.setUTCDate(n.getUTCDate()-a*7),n}var Vm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",100),ae(ie(s),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"I":return Ze(st.week,a);case"Io":return i.ordinalNumber(a,{unit:"week"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,i){return qr(Lm(a,i))}}]),n}(Ve),Um=[31,28,31,30,31,30,31,31,30,31,30,31],Bm=[31,29,31,30,31,30,31,31,30,31,30,31],$m=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",90),ae(ie(s),"subPriority",1),ae(ie(s),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"d":return Ze(st.date,a);case"do":return i.ordinalNumber(a,{unit:"date"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){var i=a.getUTCFullYear(),l=Wi(i),c=a.getUTCMonth();return l?o>=1&&o<=Bm[c]:o>=1&&o<=Um[c]}},{key:"set",value:function(a,o,i){return a.setUTCDate(i),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Wm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",90),ae(ie(s),"subpriority",1),ae(ie(s),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"D":case"DD":return Ze(st.dayOfYear,a);case"Do":return i.ordinalNumber(a,{unit:"date"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){var i=a.getUTCFullYear(),l=Wi(i);return l?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(a,o,i){return a.setUTCMonth(0,i),a.setUTCHours(0,0,0,0),a}}]),n}(Ve);function Pa(t,r,n){var s,a,o,i,l,c,d,u;ee(2,arguments);var f=zt(),p=Ie((s=(a=(o=(i=n==null?void 0:n.weekStartsOn)!==null&&i!==void 0?i:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&o!==void 0?o:f.weekStartsOn)!==null&&a!==void 0?a:(d=f.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=te(t),g=Ie(r),v=m.getUTCDay(),P=g%7,j=(P+7)%7,w=(j<p?7:0)+g-v;return m.setUTCDate(m.getUTCDate()+w),m}var Hm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",90),ae(ie(s),"incompatibleTokens",["D","i","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"E":case"EE":case"EEE":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Pa(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),zm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",90),ae(ie(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i,l){var c=function(u){var f=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+f};switch(o){case"e":case"ee":return at(tt(o.length,a),c);case"eo":return at(i.ordinalNumber(a,{unit:"day"}),c);case"eee":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Pa(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Ym=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",90),ae(ie(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i,l){var c=function(u){var f=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+f};switch(o){case"c":case"cc":return at(tt(o.length,a),c);case"co":return at(i.ordinalNumber(a,{unit:"day"}),c);case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(a,{width:"wide",context:"standalone"})||i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Pa(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}(Ve);function qm(t,r){ee(2,arguments);var n=Ie(r);n%7===0&&(n=n-7);var s=1,a=te(t),o=a.getUTCDay(),i=n%7,l=(i+7)%7,c=(l<s?7:0)+n-o;return a.setUTCDate(a.getUTCDate()+c),a}var Qm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",90),ae(ie(s),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d===0?7:d};switch(o){case"i":case"ii":return tt(o.length,a);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return at(i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l);case"iiiii":return at(i.day(a,{width:"narrow",context:"formatting"}),l);case"iiiiii":return at(i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l);case"iiii":default:return at(i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(a,o){return o>=1&&o<=7}},{key:"set",value:function(a,o,i){return a=qm(a,i),a.setUTCHours(0,0,0,0),a}}]),n}(Ve),Km=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",80),ae(ie(s),"incompatibleTokens",["b","B","H","k","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"a":case"aa":case"aaa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(Ta(i),0,0,0),a}}]),n}(Ve),Gm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",80),ae(ie(s),"incompatibleTokens",["a","B","H","k","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"b":case"bb":case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(Ta(i),0,0,0),a}}]),n}(Ve),Zm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",80),ae(ie(s),"incompatibleTokens",["a","b","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(Ta(i),0,0,0),a}}]),n}(Ve),Xm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",70),ae(ie(s),"incompatibleTokens",["H","K","k","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"h":return Ze(st.hour12h,a);case"ho":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=12}},{key:"set",value:function(a,o,i){var l=a.getUTCHours()>=12;return l&&i<12?a.setUTCHours(i+12,0,0,0):!l&&i===12?a.setUTCHours(0,0,0,0):a.setUTCHours(i,0,0,0),a}}]),n}(Ve),Jm=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",70),ae(ie(s),"incompatibleTokens",["a","b","h","K","k","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"H":return Ze(st.hour23h,a);case"Ho":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=23}},{key:"set",value:function(a,o,i){return a.setUTCHours(i,0,0,0),a}}]),n}(Ve),ef=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",70),ae(ie(s),"incompatibleTokens",["h","H","k","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"K":return Ze(st.hour11h,a);case"Ko":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){var l=a.getUTCHours()>=12;return l&&i<12?a.setUTCHours(i+12,0,0,0):a.setUTCHours(i,0,0,0),a}}]),n}(Ve),tf=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",70),ae(ie(s),"incompatibleTokens",["a","b","h","H","K","t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"k":return Ze(st.hour24h,a);case"ko":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=24}},{key:"set",value:function(a,o,i){var l=i<=24?i%24:i;return a.setUTCHours(l,0,0,0),a}}]),n}(Ve),rf=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",60),ae(ie(s),"incompatibleTokens",["t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"m":return Ze(st.minute,a);case"mo":return i.ordinalNumber(a,{unit:"minute"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,i){return a.setUTCMinutes(i,0,0),a}}]),n}(Ve),nf=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",50),ae(ie(s),"incompatibleTokens",["t","T"]),s}return Me(n,[{key:"parse",value:function(a,o,i){switch(o){case"s":return Ze(st.second,a);case"so":return i.ordinalNumber(a,{unit:"second"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,i){return a.setUTCSeconds(i,0),a}}]),n}(Ve),sf=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",30),ae(ie(s),"incompatibleTokens",["t","T"]),s}return Me(n,[{key:"parse",value:function(a,o){var i=function(c){return Math.floor(c*Math.pow(10,-o.length+3))};return at(tt(o.length,a),i)}},{key:"set",value:function(a,o,i){return a.setUTCMilliseconds(i),a}}]),n}(Ve),af=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",10),ae(ie(s),"incompatibleTokens",["t","T","x"]),s}return Me(n,[{key:"parse",value:function(a,o){switch(o){case"X":return Ut(Vt.basicOptionalMinutes,a);case"XX":return Ut(Vt.basic,a);case"XXXX":return Ut(Vt.basicOptionalSeconds,a);case"XXXXX":return Ut(Vt.extendedOptionalSeconds,a);case"XXX":default:return Ut(Vt.extended,a)}}},{key:"set",value:function(a,o,i){return o.timestampIsSet?a:new Date(a.getTime()-i)}}]),n}(Ve),of=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",10),ae(ie(s),"incompatibleTokens",["t","T","X"]),s}return Me(n,[{key:"parse",value:function(a,o){switch(o){case"x":return Ut(Vt.basicOptionalMinutes,a);case"xx":return Ut(Vt.basic,a);case"xxxx":return Ut(Vt.basicOptionalSeconds,a);case"xxxxx":return Ut(Vt.extendedOptionalSeconds,a);case"xxx":default:return Ut(Vt.extended,a)}}},{key:"set",value:function(a,o,i){return o.timestampIsSet?a:new Date(a.getTime()-i)}}]),n}(Ve),lf=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",40),ae(ie(s),"incompatibleTokens","*"),s}return Me(n,[{key:"parse",value:function(a){return Bi(a)}},{key:"set",value:function(a,o,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),n}(Ve),cf=function(t){Oe(n,t);var r=_e(n);function n(){var s;Ne(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ae(ie(s),"priority",20),ae(ie(s),"incompatibleTokens","*"),s}return Me(n,[{key:"parse",value:function(a){return Bi(a)}},{key:"set",value:function(a,o,i){return[new Date(i),{timestampIsSet:!0}]}}]),n}(Ve),df={G:new Dm,y:new km,Y:new Am,R:new Nm,u:new Mm,Q:new Rm,q:new Em,M:new Im,L:new Om,w:new Fm,I:new Vm,d:new $m,D:new Wm,E:new Hm,e:new zm,c:new Ym,i:new Qm,a:new Km,b:new Gm,B:new Zm,h:new Xm,H:new Jm,K:new ef,k:new tf,m:new rf,s:new nf,S:new sf,X:new af,x:new of,t:new lf,T:new cf},uf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mf=/^'([^]*?)'?$/,ff=/''/g,pf=/\S/,xf=/[a-zA-Z]/;function gf(t,r,n,s){var a,o,i,l,c,d,u,f,p,m,g,v,P,j,w,D,y,A;ee(3,arguments);var R=String(t),N=String(r),_=zt(),E=(a=(o=s==null?void 0:s.locale)!==null&&o!==void 0?o:_.locale)!==null&&a!==void 0?a:Ca;if(!E.match)throw new RangeError("locale must contain match property");var k=Ie((i=(l=(c=(d=s==null?void 0:s.firstWeekContainsDate)!==null&&d!==void 0?d:s==null||(u=s.locale)===null||u===void 0||(f=u.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&c!==void 0?c:_.firstWeekContainsDate)!==null&&l!==void 0?l:(p=_.locale)===null||p===void 0||(m=p.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=Ie((g=(v=(P=(j=s==null?void 0:s.weekStartsOn)!==null&&j!==void 0?j:s==null||(w=s.locale)===null||w===void 0||(D=w.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&P!==void 0?P:_.weekStartsOn)!==null&&v!==void 0?v:(y=_.locale)===null||y===void 0||(A=y.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&g!==void 0?g:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(N==="")return R===""?te(n):new Date(NaN);var C={firstWeekContainsDate:k,weekStartsOn:T,locale:E},V=[new Sm],F=N.match(hf).map(function(se){var le=se[0];if(le in ia){var je=ia[le];return je(se,E.formatLong)}return se}).join("").match(uf),I=[],K=uo(F),W;try{var O=function(){var le=W.value;!(s!=null&&s.useAdditionalWeekYearTokens)&&Fi(le)&&Xn(le,N,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&_i(le)&&Xn(le,N,t);var je=le[0],ue=df[je];if(ue){var xe=ue.incompatibleTokens;if(Array.isArray(xe)){var J=I.find(function(We){return xe.includes(We.token)||We.token===je});if(J)throw new RangeError("The format string mustn't contain `".concat(J.fullToken,"` and `").concat(le,"` at the same time"))}else if(ue.incompatibleTokens==="*"&&I.length>0)throw new RangeError("The format string mustn't contain `".concat(le,"` and any other token at the same time"));I.push({token:je,fullToken:le});var be=ue.run(R,le,E.match,C);if(!be)return{v:new Date(NaN)};V.push(be.setter),R=be.rest}else{if(je.match(xf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+je+"`");if(le==="''"?le="'":je==="'"&&(le=yf(le)),R.indexOf(le)===0)R=R.slice(le.length);else return{v:new Date(NaN)}}};for(K.s();!(W=K.n()).done;){var L=O();if(ss(L)==="object")return L.v}}catch(se){K.e(se)}finally{K.f()}if(R.length>0&&pf.test(R))return new Date(NaN);var q=V.map(function(se){return se.priority}).sort(function(se,le){return le-se}).filter(function(se,le,je){return je.indexOf(se)===le}).map(function(se){return V.filter(function(le){return le.priority===se}).sort(function(le,je){return je.subPriority-le.subPriority})}).map(function(se){return se[0]}),me=te(n);if(isNaN(me.getTime()))return new Date(NaN);var ye=Mi(me,Zn(me)),re={},S=uo(q),Y;try{for(S.s();!(Y=S.n()).done;){var pe=Y.value;if(!pe.validate(ye,C))return new Date(NaN);var Q=pe.set(ye,re,C);Array.isArray(Q)?(ye=Q[0],im(re,Q[1])):ye=Q}}catch(se){S.e(se)}finally{S.f()}return ye}function yf(t){return t.match(mf)[1].replace(ff,"'")}function ho(t){ee(1,arguments);var r=te(t);return r.setMinutes(0,0,0),r}function vf(t,r){ee(2,arguments);var n=ho(t),s=ho(r);return n.getTime()===s.getTime()}function bf(t,r){ee(2,arguments);var n=te(t),s=te(r);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function jf(t,r){ee(2,arguments);var n=te(t),s=te(r);return n.getFullYear()===s.getFullYear()}function wf(t,r){ee(2,arguments);var n=te(t).getTime(),s=te(r.start).getTime(),a=te(r.end).getTime();if(!(s<=a))throw new RangeError("Invalid interval");return n>=s&&n<=a}function mr(t,r){var n;ee(1,arguments);var s=Ie((n=void 0)!==null&&n!==void 0?n:2);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=Sf(t),o;if(a.date){var i=Df(a.date,s);o=kf(i.restDateString,i.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var l=o.getTime(),c=0,d;if(a.time&&(c=Af(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(d=Nf(a.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(l+c),f=new Date(0);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return new Date(l+c+d)}var Nn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Cf=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Tf=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Pf=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Sf(t){var r={},n=t.split(Nn.dateTimeDelimiter),s;if(n.length>2)return r;if(/:/.test(n[0])?s=n[0]:(r.date=n[0],s=n[1],Nn.timeZoneDelimiter.test(r.date)&&(r.date=t.split(Nn.timeZoneDelimiter)[0],s=t.substr(r.date.length,t.length))),s){var a=Nn.timezone.exec(s);a?(r.time=s.replace(a[1],""),r.timezone=a[1]):r.time=s}return r}function Df(t,r){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};var a=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function kf(t,r){if(r===null)return new Date(NaN);var n=t.match(Cf);if(!n)return new Date(NaN);var s=!!n[4],a=nn(n[1]),o=nn(n[2])-1,i=nn(n[3]),l=nn(n[4]),c=nn(n[5])-1;if(s)return Of(r,l,c)?Mf(r,l,c):new Date(NaN);var d=new Date(0);return!Ef(r,o,i)||!If(r,a)?new Date(NaN):(d.setUTCFullYear(r,o,Math.max(a,i)),d)}function nn(t){return t?parseInt(t):1}function Af(t){var r=t.match(Tf);if(!r)return NaN;var n=zs(r[1]),s=zs(r[2]),a=zs(r[3]);return _f(n,s,a)?n*ws+s*js+a*1e3:NaN}function zs(t){return t&&parseFloat(t.replace(",","."))||0}function Nf(t){if(t==="Z")return 0;var r=t.match(Pf);if(!r)return 0;var n=r[1]==="+"?-1:1,s=parseInt(r[2]),a=r[3]&&parseInt(r[3])||0;return Ff(s,a)?n*(s*ws+a*js):NaN}function Mf(t,r,n){var s=new Date(0);s.setUTCFullYear(t,0,4);var a=s.getUTCDay()||7,o=(r-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+o),s}var Rf=[31,null,31,30,31,30,31,31,30,31,30,31];function Hi(t){return t%400===0||t%4===0&&t%100!==0}function Ef(t,r,n){return r>=0&&r<=11&&n>=1&&n<=(Rf[r]||(Hi(t)?29:28))}function If(t,r){return r>=1&&r<=(Hi(t)?366:365)}function Of(t,r,n){return r>=1&&r<=53&&n>=0&&n<=6}function _f(t,r,n){return t===24?r===0&&n===0:n>=0&&n<60&&r>=0&&r<60&&t>=0&&t<25}function Ff(t,r){return r>=0&&r<=59}function Lf(t,r){ee(2,arguments);var n=te(t),s=Ie(r),a=n.getFullYear(),o=n.getDate(),i=new Date(0);i.setFullYear(a,s,15),i.setHours(0,0,0,0);var l=Li(i);return n.setMonth(s,Math.min(o,l)),n}function Vf(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return n.setDate(s),n}function Uf(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return n.setHours(s),n}function Bf(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return n.setMilliseconds(s),n}function $f(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return n.setMinutes(s),n}function Wf(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return n.setSeconds(s),n}function Hf(t,r){ee(2,arguments);var n=te(t),s=Ie(r);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}const zi={USD:"$",VND:"₫",EUR:"€",GBP:"£",JPY:"¥",CNY:"¥",KRW:"₩",SGD:"S$",THB:"฿",IDR:"Rp",MYR:"RM",PHP:"₱",INR:"₹",AUD:"A$",CAD:"C$",CHF:"CHF",NZD:"NZ$"},X=(t,r="VND",n={},s="en-US")=>{s="en-US";const{compact:a=!1,precision:o=r==="VND"?0:2,showSymbol:i=!0}=n;(t==null||isNaN(t))&&(t=0);const l=new Intl.NumberFormat(s,{minimumFractionDigits:o,maximumFractionDigits:o,notation:a?"compact":"standard"}).format(t);if(i){const c=zi[r]||r;return`${l} ${c}`}return l},xt=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(0):new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(t)),ve=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(0):new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(t/100)),Mn=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(0)+"%":new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(t)+"%"),Ts=(t,r="MMM dd, yyyy")=>{try{const n=typeof t=="string"?mr(t):t;return hr(n,r)}catch{return"Invalid Date"}},Yi=({portfolio:t,onView:r,onEdit:n})=>{const s=(Number(t.unrealizedPl)||0)>=0,a=(Number(t.realizedPl)||0)>=0,o=()=>{r(t.portfolioId)},i=c=>{c.stopPropagation(),n&&n(t.portfolioId)},l=c=>{c.stopPropagation(),o()};return e.jsxs("div",{className:"portfolio-card",onClick:o,children:[e.jsxs("div",{className:"portfolio-card__content",children:[e.jsxs("div",{className:"portfolio-card__header",children:[e.jsx("h2",{className:"portfolio-card__title",children:t.name}),e.jsx("span",{className:`portfolio-card__currency ${t.baseCurrency==="USD"?"portfolio-card__currency--primary":""}`,children:t.baseCurrency})]}),e.jsxs("div",{className:"portfolio-card__metrics",children:[e.jsxs("div",{className:"portfolio-card__total-value",children:[e.jsx(Jt,{className:"portfolio-card__total-value-icon"}),e.jsxs("div",{children:[e.jsx("div",{className:"portfolio-card__total-value-amount",children:X(Number(t.totalValue)||0,t.baseCurrency)}),e.jsx("div",{className:"portfolio-card__total-value-label",children:"Total Value"})]})]}),e.jsxs("div",{className:"portfolio-card__pl-section",children:[e.jsxs("div",{className:"portfolio-card__pl-item",children:[e.jsxs("div",{className:"portfolio-card__pl-header",children:[s?e.jsx(yt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):e.jsx(Dt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),e.jsx("div",{className:`portfolio-card__pl-amount ${s?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:X(Number(t.unrealizedPl)||0,t.baseCurrency)})]}),e.jsx("div",{className:"portfolio-card__pl-label",children:"Unrealized P&L"})]}),e.jsxs("div",{className:"portfolio-card__pl-item",children:[e.jsxs("div",{className:"portfolio-card__pl-header",children:[a?e.jsx(yt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):e.jsx(Dt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),e.jsx("div",{className:`portfolio-card__pl-amount ${a?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:X(Number(t.realizedPl)||0,t.baseCurrency)})]}),e.jsx("div",{className:"portfolio-card__pl-label",children:"Realized P&L"})]})]}),e.jsxs("div",{className:"portfolio-card__cash-balance",children:[e.jsx("div",{className:"portfolio-card__cash-label",children:"Cash Balance"}),e.jsx("div",{className:"portfolio-card__cash-amount",children:X(Number(t.cashBalance)||0,t.baseCurrency)})]})]})]}),e.jsxs("div",{className:"portfolio-card__actions",children:[e.jsxs("button",{className:"portfolio-card__view-btn",onClick:l,children:[e.jsx(ma,{}),"View Details"]}),n&&e.jsx("button",{className:"portfolio-card__edit-btn",onClick:i,children:"Edit"})]})]})},zf=()=>{var j;const t=pn(),{accountId:r}=At(),{portfolios:n,isLoading:s,error:a}=vs(r);if(s)return e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(He,{})});if(a)return e.jsx(ze,{severity:"error",sx:{mb:2},children:"Failed to load dashboard data. Please try again."});const o=n.length,i=n.reduce((w,D)=>{var y;return w+(parseFloat((y=D.totalValue)==null?void 0:y.toString())||0)},0),l=n.reduce((w,D)=>{var y;return w+(parseFloat((y=D.unrealizedPl)==null?void 0:y.toString())||0)},0),c=n.reduce((w,D)=>{var y;return w+(parseFloat((y=D.realizedPl)==null?void 0:y.toString())||0)},0),d=n.reduce((w,D)=>{var y;return w+(parseFloat((y=D.cashBalance)==null?void 0:y.toString())||0)},0),u=l+c,f=i>0?u/(i-u)*100:0,p=((j=n.find(w=>w.baseCurrency))==null?void 0:j.baseCurrency)||"VND",m=w=>{t(`/portfolios/${w}`)},g=w=>{t(`/portfolios/${w}/edit`)},v=()=>{t("/portfolios/new")},P=[{title:"Total Portfolios",value:o.toString(),icon:e.jsx(Jt,{}),color:"primary"},{title:"Total Value",value:X(i,p),icon:e.jsx(Ll,{}),color:"success"},{title:"Total P&L",value:X(u,p),icon:u>=0?e.jsx(yt,{}):e.jsx(Dt,{}),color:u>=0?"success":"error"},{title:"Total Return",value:ve(f),icon:f>=0?e.jsx(yt,{}):e.jsx(Dt,{}),color:f>=0?"success":"error"}];return e.jsxs(b,{children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Dashboard"}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Overview of your investment portfolios and performance"}),e.jsxs(M,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(M,{item:!0,xs:12,lg:8,children:e.jsx(M,{container:!0,spacing:3,sx:{height:"100%"},children:P.map((w,D)=>e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(de,{sx:{height:"100%"},children:e.jsx(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,children:[e.jsxs(b,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:w.title}),e.jsx(h,{variant:"h5",component:"div",children:w.value})]}),e.jsx(b,{sx:{color:`${w.color}.main`,display:"flex",alignItems:"center"},children:w.icon})]})})})},D))})}),n.length>0&&e.jsx(M,{item:!0,xs:12,lg:4,children:e.jsxs(nt,{sx:{p:3,height:"fit-content"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Portfolio Insights"}),e.jsxs(b,{children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Average Portfolio Value:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(i/n.length,p)})]}),e.jsxs(b,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Cash Allocation:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:ve(d/i*100)})]}),e.jsxs(b,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Best Performer:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",color:"success.main",children:n.length>0?n.reduce((w,D)=>(D.unrealizedPl||0)>(w.unrealizedPl||0)?D:w).name:"N/A"})]}),e.jsxs(b,{display:"flex",justifyContent:"space-between",py:1.5,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Total Cash Balance:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(d,p)})]})]})]})})]}),e.jsxs(b,{children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h5",component:"h2",children:"Your Portfolios"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:v,sx:{borderRadius:2},children:"Create Portfolio"})]}),n.length===0?e.jsxs(nt,{sx:{p:4,textAlign:"center"},children:[e.jsx(Jt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No portfolios found"}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first portfolio to start tracking your investments"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:v,size:"large",sx:{borderRadius:2},children:"Create Your First Portfolio"})]}):e.jsx(M,{container:!0,spacing:3,children:n.map(w=>e.jsx(M,{item:!0,xs:12,sm:6,lg:4,xl:3,children:e.jsx(Yi,{portfolio:w,onView:m,onEdit:g})},w.portfolioId))})]})]})},Yf=({onViewPortfolio:t,onEditPortfolio:r,onCreatePortfolio:n})=>{const{accountId:s}=At(),{portfolios:a,isLoading:o,error:i}=vs(s),[l,c]=x.useState(""),[d,u]=x.useState(""),f=a.filter(m=>{const g=m.name.toLowerCase().includes(l.toLowerCase()),v=!d||m.baseCurrency===d;return g&&v}),p=Array.from(new Set(a.map(m=>m.baseCurrency)));return o?e.jsx("div",{className:"portfolio-list",children:e.jsx("div",{className:"portfolio-list__loading",children:e.jsx(He,{})})}):i?e.jsx("div",{className:"portfolio-list",children:e.jsx("div",{className:"portfolio-list__error",children:"Failed to load portfolios. Please try again."})}):e.jsxs("div",{className:"portfolio-list",children:[e.jsxs("div",{className:"portfolio-list__header",children:[e.jsx("h1",{className:"portfolio-list__title",children:"Portfolios"}),n&&e.jsxs("button",{className:"portfolio-list__create-btn",onClick:n,children:[e.jsx(Nt,{}),"Create Portfolio"]})]}),e.jsxs("div",{className:"portfolio-list__filters",children:[e.jsx($e,{label:"Search portfolios",variant:"outlined",size:"small",value:l,onChange:m=>c(m.target.value),InputProps:{startAdornment:e.jsx(fa,{sx:{mr:1,color:"text.secondary"}})},className:"portfolio-list__search"}),e.jsxs(Xe,{size:"small",className:"portfolio-list__currency-filter",children:[e.jsx(Je,{children:"Currency"}),e.jsxs(et,{value:d,label:"Currency",onChange:m=>u(m.target.value),children:[e.jsx(ce,{value:"",children:"All Currencies"}),p.map(m=>e.jsx(ce,{value:m,children:m},m))]})]})]}),f.length===0?e.jsxs("div",{className:"portfolio-list__empty",children:[e.jsx("div",{className:"portfolio-list__empty-icon",children:"📊"}),e.jsx("h3",{className:"portfolio-list__empty-title",children:a.length===0?"No portfolios found. Create your first portfolio to get started.":"No portfolios match your search criteria."}),n&&a.length===0&&e.jsxs("button",{className:"portfolio-list__empty-btn",onClick:n,children:[e.jsx(Nt,{}),"Create Your First Portfolio"]})]}):e.jsx("div",{className:"portfolio-list__grid",children:f.map(m=>e.jsx(Yi,{portfolio:m,onView:t,onEdit:r},m.portfolioId))}),n&&e.jsx(Eo,{color:"primary","aria-label":"add portfolio",onClick:n,className:"portfolio-list__fab",children:e.jsx(Nt,{})})]})};function Ps(t,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),function(s,a,o){try{return Promise.resolve(function(i,l){try{var c=(r.context,Promise.resolve(t[n.mode==="sync"?"validateSync":"validate"](s,Object.assign({abortEarly:!1},r,{context:a}))).then(function(d){return o.shouldUseNativeValidation&&mc({},o),{values:n.raw?s:d,errors:{}}}))}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(!i.inner)throw i;return{values:{},errors:fc((l=i,c=!o.shouldUseNativeValidation&&o.criteriaMode==="all",(l.inner||[]).reduce(function(d,u){if(d[u.path]||(d[u.path]={message:u.message,type:u.type}),c){var f=d[u.path].types,p=f&&f[u.type];d[u.path]=pc(u.path,c,d,u.type,p?[].concat(p,u.message):u.message)}return d},{})),o)};var l,c}))}catch(i){return Promise.reject(i)}}}const qf=ls({name:ut().required("Portfolio name is required").min(2,"Name must be at least 2 characters"),baseCurrency:ut().required("Base currency is required"),accountId:ut().required("Account ID is required")}),Qf=[{code:"VND",name:"Vietnamese Dong"},{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"}],Kf=({open:t,onClose:r,onSubmit:n,initialData:s,isEditing:a=!1,isLoading:o=!1,error:i})=>{const{accountId:l}=At(),{control:c,handleSubmit:d,reset:u,formState:{errors:f}}=cs({resolver:Ps(qf),defaultValues:{name:(s==null?void 0:s.name)||"",baseCurrency:(s==null?void 0:s.baseCurrency)||"VND",accountId:(s==null?void 0:s.accountId)||l}});Ht.useEffect(()=>{t&&u({name:(s==null?void 0:s.name)||"",baseCurrency:(s==null?void 0:s.baseCurrency)||"VND",accountId:(s==null?void 0:s.accountId)||l})},[t,s,u,l]),Ht.useEffect(()=>{t&&s&&u({name:s.name||"",baseCurrency:s.baseCurrency||"VND",accountId:s.accountId||l})},[s,t,u,l]);const p=g=>{n(g)},m=()=>{u(),r()};return e.jsxs(ar,{open:t,onClose:m,maxWidth:"sm",fullWidth:!0,children:[e.jsx(xr,{children:a?"Edit Portfolio":"Create New Portfolio"}),e.jsxs("form",{onSubmit:d(p),children:[e.jsxs(or,{children:[i&&e.jsx(ze,{severity:"error",sx:{mb:2},children:i}),e.jsxs(b,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(qe,{name:"name",control:c,render:({field:g})=>{var v;return e.jsx($e,{...g,label:"Portfolio Name",fullWidth:!0,error:!!f.name,helperText:(v=f.name)==null?void 0:v.message,placeholder:"e.g., Growth Portfolio, Retirement Fund"})}}),e.jsx(qe,{name:"baseCurrency",control:c,render:({field:g})=>e.jsxs(Xe,{fullWidth:!0,error:!!f.baseCurrency,children:[e.jsx(Je,{children:"Base Currency"}),e.jsx(et,{...g,label:"Base Currency",children:Qf.map(v=>e.jsxs(ce,{value:v.code,children:[v.code," - ",v.name]},v.code))}),f.baseCurrency&&e.jsx(b,{component:"span",sx:{color:"error.main",fontSize:"0.75rem",mt:.5,ml:1.75},children:f.baseCurrency.message})]})}),e.jsx(qe,{name:"accountId",control:c,render:({field:g})=>{var v;return e.jsx($e,{...g,label:"Account ID",fullWidth:!0,error:!!f.accountId,helperText:(v=f.accountId)==null?void 0:v.message,placeholder:"Enter account ID",disabled:a})}})]})]}),e.jsxs(ir,{children:[e.jsx(Ce,{onClick:m,disabled:o,children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",disabled:o,children:o?"Saving...":a?"Update":"Create"})]})]})]})},Gf=()=>{const t=pn(),[r,n]=x.useState(!1),[s,a]=x.useState(null),[o,i]=x.useState(""),{accountId:l}=At(),{portfolios:c,createPortfolio:d,updatePortfolio:u,isCreating:f,isUpdating:p,isDeleting:m}=vs(l),g=y=>{t(`/portfolios/${y}`)},v=y=>{a(y),n(!0)},P=()=>{a(null),i(""),n(!0)},j=()=>{n(!1),a(null),i("")},w=async y=>{var A,R;try{i(""),s?await u({id:s,data:y}):await d(y),j()}catch(N){i(((R=(A=N.response)==null?void 0:A.data)==null?void 0:R.message)||"An error occurred. Please try again.")}},D=()=>{if(!s)return;const y=c.find(A=>A.portfolioId===s);if(y)return{name:y.name,baseCurrency:y.baseCurrency,accountId:y.accountId}};return e.jsxs(b,{children:[e.jsx(Yf,{onViewPortfolio:g,onEditPortfolio:v,onCreatePortfolio:P}),e.jsx(Kf,{open:r,onClose:j,onSubmit:w,initialData:D(),isEditing:!!s,isLoading:f||p,error:o}),(f||p||m)&&e.jsxs(ze,{severity:"info",sx:{mt:2},children:[f&&"Creating portfolio...",p&&"Updating portfolio...",m&&"Deleting portfolio..."]})]})},Sa=(t,r)=>Pt(["trades",t,r],()=>Be.getTrades(t,r),{enabled:!!t,staleTime:2*60*1e3}),qi=()=>{const t=xn();return Pr(r=>Be.createTrade(r),{onSuccess:r=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Qe.success("Trade created successfully!")},onError:r=>{var n,s;Qe.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to create trade")}})},Zf=()=>{const t=xn();return Pr(({id:r,data:n})=>Be.updateTrade(r,n),{onSuccess:()=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Qe.success("Trade updated successfully!")},onError:r=>{var n,s;Qe.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to update trade")}})},Xf=()=>{const t=xn();return Pr(r=>Be.deleteTrade(r),{onSuccess:()=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Qe.success("Trade deleted successfully!")},onError:r=>{var n,s;Qe.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to delete trade")}})},Jf=t=>Pt(["tradeDetails",t],()=>Be.getTradeDetails(t),{enabled:!!t,staleTime:2*60*1e3}),ep=(t,r)=>{const n=["tradeAnalysis",t,(r==null?void 0:r.timeframe)||"ALL",(r==null?void 0:r.metric)||"pnl"];return Pt(n,()=>Be.getTradeAnalysis(t,r),{enabled:!!t,staleTime:0,cacheTime:0})},mo=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],tp=({data:t,baseCurrency:r})=>{const n=Object.entries(t.allocation).map(([o,i],l)=>({name:o.toUpperCase(),value:i.percentage,marketValue:i.value,color:mo[l%mo.length]})),s=({active:o,payload:i})=>{if(o&&i&&i.length){const l=i[0].payload;return e.jsxs(b,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:l.name}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Allocation: ",ve(l.value)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Market Value: ",X(l.marketValue,r)]})]})}return null},a=({payload:o})=>e.jsx(b,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:1,mt:2},children:o.map((i,l)=>e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(b,{sx:{width:12,height:12,backgroundColor:i.color,borderRadius:"50%"}}),e.jsxs(h,{variant:"caption",children:[i.value," (",ve(i.payload.value),")"]})]},l))});return!t||Object.keys(t.allocation).length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset allocation data available"})}):e.jsx(b,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(Ho,{children:[e.jsx(zo,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,value:i})=>`${o}: ${ve(i)}`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:n.map((o,i)=>e.jsx(gn,{fill:o.color},`cell-${i}`))}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(ga,{content:e.jsx(a,{})})]})})})},rp=({portfolioId:t,baseCurrency:r,title:n="Performance Chart",showReferenceLine:s=!1,referenceValue:a=0})=>{const[o,i]=x.useState("1Y"),[l,c]=x.useState([]),[d,u]=x.useState(!0),[f,p]=x.useState(null);x.useEffect(()=>{(async()=>{try{u(!0),p(null);const P=await Be.getPortfolioPerformanceHistory(t,o);c(P.data)}catch(P){console.error("Error fetching performance data:",P),p("Failed to load performance data")}finally{u(!1)}})()},[t,o]);const m=({active:v,payload:P,label:j})=>v&&P&&P.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ts(j)}),e.jsxs(h,{variant:"body2",color:"primary",children:["Value: ",X(P[0].value,r)]})]}):null,g=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric"});return d?e.jsxs(nt,{sx:{p:3,textAlign:"center"},children:[e.jsx(He,{}),e.jsx(h,{variant:"body2",sx:{mt:2},children:"Loading performance data..."})]}):f?e.jsx(nt,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"error",children:f})}):l.length===0?e.jsx(nt,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):e.jsxs(nt,{sx:{p:3},children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h6",children:n}),e.jsxs(Xe,{size:"small",sx:{minWidth:120},children:[e.jsx(Je,{children:"Timeframe"}),e.jsxs(et,{value:o,label:"Timeframe",onChange:v=>i(v.target.value),children:[e.jsx(ce,{value:"1M",children:"1 Month"}),e.jsx(ce,{value:"3M",children:"3 Months"}),e.jsx(ce,{value:"6M",children:"6 Months"}),e.jsx(ce,{value:"1Y",children:"1 Year"}),e.jsx(ce,{value:"2Y",children:"2 Years"}),e.jsx(ce,{value:"5Y",children:"5 Years"}),e.jsx(ce,{value:"ALL",children:"All Time"})]})]})]}),e.jsx(b,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"date",tickFormatter:g,tick:{fontSize:12}}),e.jsx(rr,{tickFormatter:v=>X(v,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(m,{})}),e.jsx(zr,{type:"monotone",dataKey:"value",stroke:"#1976d2",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#1976d2",strokeWidth:2}}),s&&e.jsx(Yo,{y:a,stroke:"#ff9800",strokeDasharray:"5 5",label:{value:"Reference",position:"top"}})]})})})]})},np=({data:t,baseCurrency:r,title:n="Risk-Return Analysis"})=>{const s=({active:a,payload:o})=>{if(a&&o&&o.length){const i=o[0].payload;return e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:i.assetType.toUpperCase()}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Return: ",ve(i.return)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Risk: ",ve(i.risk)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",X(i.value,r)]})]})}return null};return t.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No risk-return data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Risk vs Return analysis of portfolio assets"}),e.jsx(b,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(xc,{margin:{top:20,right:20,bottom:20,left:20},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{type:"number",dataKey:"risk",name:"Risk",tickFormatter:a=>ve(a),label:{value:"Risk (Volatility)",position:"insideBottom",offset:-10}}),e.jsx(rr,{type:"number",dataKey:"return",name:"Return",tickFormatter:a=>ve(a),label:{value:"Return",angle:-90,position:"insideLeft"}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(gc,{data:t,fill:"#1976d2",children:t.map((a,o)=>e.jsx(gn,{fill:a.color},`cell-${o}`))})]})})})]})},sp=({data:t,baseCurrency:r,title:n="Asset Performance Comparison"})=>{const s=({active:a,payload:o})=>{if(a&&o&&o.length){const i=o[0].payload;return e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:i.assetType.toUpperCase()}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Performance: ",ve(i.performance)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",X(i.value,r)]})]})}return null};return t.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Performance comparison across asset types"}),e.jsx(b,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(qo,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"assetType",tick:{fontSize:12},tickFormatter:a=>a.toUpperCase()}),e.jsx(rr,{tickFormatter:a=>ve(a),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(qn,{dataKey:"performance",radius:[4,4,0,0],children:t.map((a,o)=>e.jsx(gn,{fill:a.color},`cell-${o}`))})]})})})]})},ap=({data:t,title:r="Risk Metrics Dashboard"})=>{const n=(d,u)=>{switch(u){case"var":return d>.1?"high":d>.05?"medium":"low";case"volatility":return d>.3?"high":d>.15?"medium":"low";case"drawdown":return d>.2?"high":d>.1?"medium":"low";case"ratio":return d>1.5?"excellent":d>1?"good":d>.5?"fair":"poor";default:return"medium"}},s=d=>{switch(d){case"excellent":case"low":return"success";case"good":return"info";case"fair":case"medium":return"warning";case"poor":case"high":return"error";default:return"default"}},a=d=>{switch(d){case"excellent":case"good":case"low":return e.jsx(Ln,{color:"success"});case"fair":case"medium":return e.jsx(Yn,{color:"warning"});case"poor":case"high":return e.jsx(Dt,{color:"error"});default:return e.jsx(Vl,{})}},o=n(t.var95,"var"),i=n(t.volatility,"volatility"),l=n(t.maxDrawdown,"drawdown"),c=n(t.sharpeRatio,"ratio");return e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Comprehensive risk analysis and portfolio health metrics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Value at Risk (95%)"}),a(o)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:ve(t.var95)}),e.jsx(De,{label:o.toUpperCase(),color:s(o),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Sharpe Ratio"}),a(c)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:t.sharpeRatio.toFixed(2)}),e.jsx(De,{label:c.toUpperCase(),color:s(c),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Volatility"}),a(i)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:ve(t.volatility)}),e.jsx(De,{label:i.toUpperCase(),color:s(i),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Max Drawdown"}),a(l)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:ve(t.maxDrawdown)}),e.jsx(De,{label:l.toUpperCase(),color:s(l),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Additional Risk Metrics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"VaR (99%)"}),e.jsx(h,{variant:"h6",children:ve(t.var99)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Beta"}),e.jsx(h,{variant:"h6",children:t.beta.toFixed(2)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Calmar Ratio"}),e.jsx(h,{variant:"h6",children:t.calmarRatio.toFixed(2)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sortino Ratio"}),e.jsx(h,{variant:"h6",children:t.sortinoRatio.toFixed(2)})]})})]})]})})})]})]})},op=({data:t,title:r="Diversification Heatmap"})=>{const n=Array.from(new Set(t.flatMap(l=>[l.asset1,l.asset2]))),a=(()=>{const l={};return n.forEach(c=>{l[c]={},n.forEach(d=>{c===d?l[c][d]=1:l[c][d]=0})}),t.forEach(c=>{l[c.asset1][c.asset2]=c.correlation,l[c.asset2][c.asset1]=c.correlation}),l})(),o=l=>{const c=Math.abs(l);return c>=.8?"#d32f2f":c>=.6?"#f57c00":c>=.4?"#fbc02d":c>=.2?"#689f38":"#388e3c"},i=l=>Math.abs(l)*100;return n.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No diversification data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Correlation matrix showing diversification between asset types"}),e.jsx(b,{sx:{overflowX:"auto"},children:e.jsxs(b,{sx:{minWidth:400},children:[e.jsxs(M,{container:!0,spacing:.5,sx:{mb:1},children:[e.jsx(M,{item:!0,xs:2,children:e.jsx(b,{sx:{height:40}})}),n.map(l=>e.jsx(M,{item:!0,xs:2,children:e.jsx(b,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})},l))]}),n.map(l=>e.jsxs(M,{container:!0,spacing:.5,sx:{mb:.5},children:[e.jsx(M,{item:!0,xs:2,children:e.jsx(b,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})}),n.map(c=>{const d=a[l][c],u=l===c;return e.jsx(M,{item:!0,xs:2,children:e.jsx(as,{title:`${l} vs ${c}: ${ve(d)}`,arrow:!0,children:e.jsx(b,{sx:{height:40,backgroundColor:u?"#e0e0e0":o(d),opacity:u?.3:i(d)/100,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease","&:hover":{opacity:1,transform:"scale(1.05)"},borderRadius:1,border:"1px solid rgba(0,0,0,0.1)"},children:!u&&e.jsx(h,{variant:"caption",sx:{color:"white",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:ve(d)})})})},`${l}-${c}`)})]},l))]})}),e.jsxs(b,{sx:{mt:3,display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Correlation Level:"}),[{label:"High (≥0.8)",color:"#d32f2f"},{label:"Medium-High (0.6-0.8)",color:"#f57c00"},{label:"Medium (0.4-0.6)",color:"#fbc02d"},{label:"Low (0.2-0.4)",color:"#689f38"},{label:"Very Low (<0.2)",color:"#388e3c"}].map((l,c)=>e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(b,{sx:{width:16,height:16,backgroundColor:l.color,borderRadius:.5,border:"1px solid rgba(0,0,0,0.1)"}}),e.jsx(h,{variant:"caption",color:"text.secondary",children:l.label})]},c))]})]})},ip=({data:t,title:r="Asset Allocation Timeline"})=>{const n=["#1976d2","#dc004e","#9c27b0","#ff9800","#4caf50","#f44336","#00bcd4","#8bc34a"],s=t.length>0?Object.keys(t[0]).filter(i=>i!=="date"):[],a=({active:i,payload:l,label:c})=>i&&l&&l.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ts(c)}),l.map((d,u)=>e.jsxs(h,{variant:"body2",color:d.color,children:[d.dataKey,": ",ve(d.value)]},u))]}):null,o=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No timeline data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Historical allocation changes over time"}),e.jsx(b,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"date",tickFormatter:o,tick:{fontSize:12}}),e.jsx(rr,{tickFormatter:i=>`${i}%`,tick:{fontSize:12},domain:[0,100]}),e.jsx(Rt,{content:e.jsx(a,{})}),e.jsx(ga,{}),s.map((i,l)=>e.jsx(zr,{type:"monotone",dataKey:i,stroke:n[l%n.length],strokeWidth:2,dot:!1,activeDot:{r:4}},i))]})})})]})},lp=({data:t,baseCurrency:r,title:n="Cash Flow Analysis"})=>{const s=({active:d,payload:u,label:f})=>d&&u&&u.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ts(f)}),u.map((p,m)=>e.jsxs(h,{variant:"body2",color:p.color,children:[p.name,": ",X(p.value,r)]},m))]}):null,a=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=t.reduce((d,u)=>d+u.inflow,0),i=t.reduce((d,u)=>d+u.outflow,0),l=o-i,c=t.length>0?t[t.length-1].cumulativeBalance:0;return t.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No cash flow data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Portfolio cash flow analysis and balance tracking"}),e.jsxs(M,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(yt,{color:"success"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Inflow"})]}),e.jsx(h,{variant:"h6",color:"success.main",fontWeight:"bold",children:X(o,r)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Dt,{color:"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Outflow"})]}),e.jsx(h,{variant:"h6",color:"error.main",fontWeight:"bold",children:X(i,r)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Jt,{color:l>=0?"success":"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Net Flow"})]}),e.jsx(h,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:X(l,r)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Jt,{color:"primary"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Current Balance"})]}),e.jsx(h,{variant:"h6",color:"primary.main",fontWeight:"bold",children:X(c,r)})]})})})]}),e.jsx(b,{sx:{height:400,mb:3},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(yc,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(rr,{tickFormatter:d=>X(d,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(qn,{dataKey:"inflow",fill:"#4caf50",name:"Inflow"}),e.jsx(qn,{dataKey:"outflow",fill:"#f44336",name:"Outflow"}),e.jsx(zr,{type:"monotone",dataKey:"netFlow",stroke:"#1976d2",strokeWidth:3,name:"Net Flow",dot:{fill:"#1976d2",strokeWidth:2,r:4}})]})})}),e.jsxs(b,{sx:{height:300},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Cumulative Balance"}),e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(vc,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(rr,{tickFormatter:d=>X(d,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(bc,{type:"monotone",dataKey:"cumulativeBalance",stroke:"#1976d2",fill:"#1976d2",fillOpacity:.3,strokeWidth:2})]})})]})]})},cp=({data:t,title:r="Benchmark Comparison",benchmarkName:n="Market Index"})=>{const s=({active:u,payload:f,label:p})=>{var m,g;return u&&f&&f.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ts(p)}),f.map((v,P)=>e.jsxs(h,{variant:"body2",color:v.color,children:[v.name,": ",ve(v.value)]},P)),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Difference: ",ve(((g=(m=f[0])==null?void 0:m.payload)==null?void 0:g.difference)||0)]})]}):null},a=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=t.length>0?t[t.length-1].portfolio-t[0].portfolio:0,i=t.length>0?t[t.length-1].benchmark-t[0].benchmark:0,l=o-i,c=Math.sqrt(t.reduce((u,f)=>u+Math.pow(f.difference,2),0)/t.length),d=c>0?l/c:0;return t.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No benchmark data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Portfolio performance vs ",n]}),e.jsxs(M,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(yt,{color:"primary"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Portfolio Return"})]}),e.jsx(h,{variant:"h6",color:o>=0?"success.main":"error.main",fontWeight:"bold",children:ve(o)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(yt,{color:"info"}),e.jsxs(h,{variant:"subtitle2",color:"text.secondary",children:[n," Return"]})]}),e.jsx(h,{variant:"h6",color:i>=0?"success.main":"error.main",fontWeight:"bold",children:ve(i)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Ul,{color:l>=0?"success":"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Excess Return"})]}),e.jsx(h,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:ve(l)}),e.jsx(De,{label:l>=0?"OUTPERFORMING":"UNDERPERFORMING",color:l>=0?"success":"error",size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Dt,{color:"warning"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Tracking Error"})]}),e.jsx(h,{variant:"h6",color:"warning.main",fontWeight:"bold",children:ve(c)})]})})})]}),e.jsx(b,{sx:{height:400,mb:3},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(rr,{tickFormatter:u=>ve(u),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(ga,{}),e.jsx(zr,{type:"monotone",dataKey:"portfolio",stroke:"#1976d2",strokeWidth:3,name:"Portfolio",dot:!1,activeDot:{r:6}}),e.jsx(zr,{type:"monotone",dataKey:"benchmark",stroke:"#dc004e",strokeWidth:2,name:n,dot:!1,activeDot:{r:4},strokeDasharray:"5 5"}),e.jsx(Yo,{y:0,stroke:"#666",strokeDasharray:"2 2"})]})})}),e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Risk-Adjusted Metrics"}),e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Information Ratio:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:d.toFixed(2)})]}),e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Beta:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:(Math.random()*.8+.6).toFixed(2)})]}),e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Alpha:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:ve(l*.7)})]})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Performance Summary"}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:l>=0?`Your portfolio has outperformed the ${n} by ${ve(l)} over the selected period.`:`Your portfolio has underperformed the ${n} by ${ve(Math.abs(l))} over the selected period.`}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["The tracking error of ",ve(c)," indicates the level of deviation from the benchmark."]})]})})})]})]})},fo=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],dp=({data:t,baseCurrency:r,title:n="Asset Detail Summary"})=>{const s=t.map((o,i)=>({symbol:o.symbol,name:o.name,assetType:o.assetType,totalValue:o.totalValue,percentage:o.percentage,unrealizedPl:o.unrealizedPl,unrealizedPlPercentage:o.unrealizedPlPercentage,color:fo[i%fo.length]})),a=({active:o,payload:i})=>{if(o&&i&&i.length){const l=i[0].payload;return e.jsxs(b,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[l.symbol," - ",l.name]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Allocation: ",ve(l.percentage)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",X(l.totalValue,r)]}),e.jsxs(h,{variant:"body2",color:l.unrealizedPl>=0?"success.main":"error.main",children:["P&L: ",X(l.unrealizedPl,r)," (",ve(l.unrealizedPlPercentage),")"]})]})}return null};return!t||t.length===0?e.jsx(b,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset detail data available"})}):e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Individual asset holdings with values and performance"}),e.jsx(b,{sx:{height:300,mb:3},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(qo,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(er,{strokeDasharray:"3 3"}),e.jsx(tr,{dataKey:"symbol",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(rr,{tickFormatter:o=>ve(o),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(a,{})}),e.jsx(qn,{dataKey:"percentage",radius:[4,4,0,0],children:s.map((o,i)=>e.jsx(gn,{fill:o.color},`cell-${i}`))})]})})}),e.jsx(M,{container:!0,spacing:2,children:s.map((o,i)=>e.jsx(M,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(de,{sx:{height:"100%"},children:e.jsxs(he,{children:[e.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(b,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(b,{sx:{width:16,height:16,backgroundColor:o.color,borderRadius:"50%",mr:1}}),e.jsx(h,{variant:"subtitle2",fontWeight:"bold",children:o.symbol})]}),e.jsx(De,{label:o.assetType,size:"small",color:"primary",variant:"outlined"})]}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:o.name}),e.jsx(h,{variant:"h6",color:"primary",fontWeight:"bold",gutterBottom:!0,children:ve(o.percentage)}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:X(o.totalValue,r)}),e.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"P&L:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",color:o.unrealizedPl>=0?"success.main":"error.main",children:X(o.unrealizedPl,r)})]}),e.jsx(h,{variant:"caption",color:o.unrealizedPl>=0?"success.main":"error.main",sx:{display:"block",textAlign:"right"},children:ve(o.unrealizedPlPercentage)})]})})},i))}),e.jsx(b,{sx:{mt:3,p:3,backgroundColor:"#f5f5f5",borderRadius:2},children:e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:t.length})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:X(t.reduce((o,i)=>o+i.totalValue,0),r)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),e.jsx(h,{variant:"h5",fontWeight:"bold",color:t.reduce((o,i)=>o+i.unrealizedPl,0)>=0?"success.main":"error.main",children:X(t.reduce((o,i)=>o+i.unrealizedPl,0),r)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset Types"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:new Set(t.map(o=>o.assetType)).size})]})})]})})]})};function up(t){return typeof t=="string"}function hp(t,r,n){return t===void 0||up(t)?r:{...r,ownerState:{...r.ownerState,...n}}}function mp(t,r=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(s=>s.match(/^on[A-Z]/)&&typeof t[s]=="function"&&!r.includes(s)).forEach(s=>{n[s]=t[s]}),n}function Da(t,r,n){return typeof t=="function"?t(r,n):t}function fp(...t){const r=x.useRef(void 0),n=x.useCallback(s=>{const a=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(s);return typeof l=="function"?l:()=>{i(null)}}return o.current=s,()=>{o.current=null}});return()=>{a.forEach(o=>o==null?void 0:o())}},t);return x.useMemo(()=>t.every(s=>s==null)?null:s=>{r.current&&(r.current(),r.current=void 0),s!=null&&(r.current=n(s))},t)}function po(t){if(t===void 0)return{};const r={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{r[n]=t[n]}),r}function pp(t){const{getSlotProps:r,additionalProps:n,externalSlotProps:s,externalForwardedProps:a,className:o}=t;if(!r){const m=ht(n==null?void 0:n.className,o,a==null?void 0:a.className,s==null?void 0:s.className),g={...n==null?void 0:n.style,...a==null?void 0:a.style,...s==null?void 0:s.style},v={...n,...a,...s};return m.length>0&&(v.className=m),Object.keys(g).length>0&&(v.style=g),{props:v,internalRef:void 0}}const i=mp({...a,...s}),l=po(s),c=po(a),d=r(i),u=ht(d==null?void 0:d.className,n==null?void 0:n.className,o,a==null?void 0:a.className,s==null?void 0:s.className),f={...d==null?void 0:d.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...s==null?void 0:s.style},p={...d,...n,...c,...l};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function it(t){var f;const{elementType:r,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:a=!1,...o}=t,i=a?{}:Da(n,s),{props:l,internalRef:c}=pp({...o,externalSlotProps:i}),d=fp(c,i==null?void 0:i.ref,(f=t.additionalProps)==null?void 0:f.ref);return hp(r,{...l,ref:d},s)}const sn=(t,r)=>t.length!==r.length?!1:r.every(n=>t.includes(n)),xp=({openTo:t,defaultOpenTo:r,views:n,defaultViews:s})=>{const a=n??s;let o;if(t!=null)o=t;else if(a.includes(r))o=r;else if(a.length>0)o=a[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:a,openTo:o}},ts=(t,r,n)=>{let s=r;return s=t.setHours(s,t.getHours(n)),s=t.setMinutes(s,t.getMinutes(n)),s=t.setSeconds(s,t.getSeconds(n)),s},un=({date:t,disableFuture:r,disablePast:n,maxDate:s,minDate:a,isDateDisabled:o,utils:i,timezone:l})=>{const c=ts(i,i.dateWithTimezone(void 0,l),t);n&&i.isBefore(a,c)&&(a=c),r&&i.isAfter(s,c)&&(s=c);let d=t,u=t;for(i.isBefore(t,a)&&(d=a,u=null),i.isAfter(t,s)&&(u&&(u=s),d=null);d||u;){if(d&&i.isAfter(d,s)&&(d=null),u&&i.isBefore(u,a)&&(u=null),d){if(!o(d))return d;d=i.addDays(d,1)}if(u){if(!o(u))return u;u=i.addDays(u,-1)}}return null},gp=(t,r)=>r==null||!t.isValid(r)?null:r,kt=(t,r,n)=>r==null||!t.isValid(r)?n:r,yp=(t,r,n)=>!t.isValid(r)&&r!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(r,n),ka=(t,r)=>{const s=[t.startOfYear(r)];for(;s.length<12;){const a=s[s.length-1];s.push(t.addMonths(a,1))}return s},Qi=(t,r,n)=>n==="date"?t.startOfDay(t.dateWithTimezone(void 0,r)):t.dateWithTimezone(void 0,r),vp=["year","month","day"],xo=t=>vp.includes(t),Aa=(t,{format:r,views:n},s)=>{if(r!=null)return r;const a=t.formats;return sn(n,["year"])?a.year:sn(n,["month"])?a.month:sn(n,["day"])?a.dayOfMonth:sn(n,["month","year"])?`${a.month} ${a.year}`:sn(n,["day","month"])?`${a.month} ${a.dayOfMonth}`:s?/en/.test(t.getCurrentLocaleCode())?a.normalDateWithWeekday:a.normalDate:a.keyboardDate},bp=(t,r)=>{const n=t.startOfWeek(r);return[0,1,2,3,4,5,6].map(s=>t.addDays(n,s))},jp=["hours","minutes","seconds"],wp=t=>jp.includes(t),go=(t,r)=>r.getHours(t)*3600+r.getMinutes(t)*60+r.getSeconds(t),Cp=(t,r)=>(n,s)=>t?r.isAfter(n,s):go(n,r)>go(s,r),Lt={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},Tp=t=>Math.max(...t.map(r=>{var n;return(n=Lt[r.type])!=null?n:1})),an=(t,r,n)=>{if(r===Lt.year)return t.startOfYear(n);if(r===Lt.month)return t.startOfMonth(n);if(r===Lt.day)return t.startOfDay(n);let s=n;return r<Lt.minutes&&(s=t.setMinutes(s,0)),r<Lt.seconds&&(s=t.setSeconds(s,0)),r<Lt.milliseconds&&(s=t.setMilliseconds(s,0)),s},Pp=({props:t,utils:r,granularity:n,timezone:s,getTodayDate:a})=>{var o;let i=a?a():an(r,n,Qi(r,s));t.minDate!=null&&r.isAfterDay(t.minDate,i)&&(i=an(r,n,t.minDate)),t.maxDate!=null&&r.isBeforeDay(t.maxDate,i)&&(i=an(r,n,t.maxDate));const l=Cp((o=t.disableIgnoringDatePartForTimeValidation)!=null?o:!1,r);return t.minTime!=null&&l(t.minTime,i)&&(i=an(r,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:ts(r,i,t.minTime))),t.maxTime!=null&&l(i,t.maxTime)&&(i=an(r,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:ts(r,i,t.maxTime))),i},Ki=(t,r)=>{const n=t.formatTokenMap[r];if(n==null)throw new Error([`MUI: The token "${r}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},Sp=t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},Ss=(t,r,n)=>{const s=[],a=t.dateWithTimezone(void 0,r),o=t.startOfWeek(a),i=t.endOfWeek(a);let l=o;for(;t.isBefore(l,i);)s.push(l),l=t.addDays(l,1);return s.map(c=>t.formatByString(c,n))},Gi=(t,r,n,s)=>{switch(n){case"month":return ka(t,t.dateWithTimezone(void 0,r)).map(a=>t.formatByString(a,s));case"weekDay":return Ss(t,r,s);case"meridiem":{const a=t.dateWithTimezone(void 0,r);return[t.startOfDay(a),t.endOfDay(a)].map(o=>t.formatByString(o,s))}default:return[]}},Zi=(t,r,n)=>{let s=r;for(s=Number(s).toString();s.length<n;)s=`0${s}`;return s},Xi=(t,r,n,s,a)=>{if(a.type==="day"&&a.contentType==="digit-with-letter"){const i=t.setDate(s.longestMonth,n);return t.formatByString(i,a.format)}const o=n.toString();return a.hasLeadingZerosInInput?Zi(t,o,a.maxLength):o},Dp=(t,r,n,s,a,o,i)=>{const l=Sp(s),c=s==="Home",d=s==="End",u=n.value===""||c||d,f=()=>{const m=a[n.type]({currentDate:o,format:n.format,contentType:n.contentType}),g=w=>Xi(t,r,w,m,n),v=n.type==="minutes"&&i!=null&&i.minutesStep?i.minutesStep:1;let j=parseInt(n.value,10)+l*v;if(u){if(n.type==="year"&&!d&&!c)return t.formatByString(t.dateWithTimezone(void 0,r),n.format);l>0||c?j=m.minimum:j=m.maximum}return j%v!==0&&((l<0||c)&&(j+=v-(v+j)%v),(l>0||d)&&(j-=j%v)),j>m.maximum?g(m.minimum+(j-m.maximum-1)%(m.maximum-m.minimum+1)):j<m.minimum?g(m.maximum-(m.minimum-j-1)%(m.maximum-m.minimum+1)):g(j)},p=()=>{const m=Gi(t,r,n.type,n.format);if(m.length===0)return n.value;if(u)return l>0||c?m[0]:m[m.length-1];const v=(m.indexOf(n.value)+m.length+l)%m.length;return m[v]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?f():p()},Na=(t,r)=>{let n=t.value||t.placeholder;const s=r==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return r==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(n=Number(n).toString()),["input-rtl","input-ltr"].includes(r)&&t.contentType==="digit"&&!s&&n.length===1&&(n=`${n}‎`),r==="input-rtl"&&(n=`⁨${n}⁩`),n},Lr=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),Ji=(t,r)=>{let n=0,s=r?1:0;const a=[];for(let o=0;o<t.length;o+=1){const i=t[o],l=Na(i,r?"input-rtl":"input-ltr"),c=`${i.startSeparator}${l}${i.endSeparator}`,d=Lr(c).length,u=c.length,f=Lr(l),p=s+l.indexOf(f[0])+i.startSeparator.length,m=p+f.length;a.push(B({},i,{start:n,end:n+d,startInInput:p,endInInput:m})),n+=d,s+=u}return a},kp=(t,r,n,s,a)=>{switch(s.type){case"year":return n.fieldYearPlaceholder({digitAmount:t.formatByString(t.dateWithTimezone(void 0,r),a).length,format:a});case"month":return n.fieldMonthPlaceholder({contentType:s.contentType,format:a});case"day":return n.fieldDayPlaceholder({format:a});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:s.contentType,format:a});case"hours":return n.fieldHoursPlaceholder({format:a});case"minutes":return n.fieldMinutesPlaceholder({format:a});case"seconds":return n.fieldSecondsPlaceholder({format:a});case"meridiem":return n.fieldMeridiemPlaceholder({format:a});default:return a}},yo=(t,r,n,s)=>t.formatByString(t.parse(r,n),s),el=(t,r,n)=>t.formatByString(t.dateWithTimezone(void 0,r),n).length===4,tl=(t,r,n,s,a)=>{if(n!=="digit")return!1;const o=t.dateWithTimezone(void 0,r);switch(s){case"year":return el(t,r,a)?t.formatByString(t.setYear(o,1),a)==="0001":t.formatByString(t.setYear(o,2001),a)==="01";case"month":return t.formatByString(t.startOfYear(o),a).length>1;case"day":return t.formatByString(t.startOfMonth(o),a).length>1;case"weekDay":return t.formatByString(t.startOfWeek(o),a).length>1;case"hours":return t.formatByString(t.setHours(o,1),a).length>1;case"minutes":return t.formatByString(t.setMinutes(o,1),a).length>1;case"seconds":return t.formatByString(t.setSeconds(o,1),a).length>1;default:throw new Error("Invalid section type")}},Ap=(t,r)=>{const n=[],{start:s,end:a}=t.escapedCharacters,o=new RegExp(`(\\${s}[^\\${a}]*\\${a})+`,"g");let i=null;for(;i=o.exec(r);)n.push({start:i.index,end:o.lastIndex-1});return n},vo=(t,r,n,s,a,o,i,l)=>{let c="";const d=[],u=t.date(),f=D=>{if(D==="")return null;const y=Ki(t,D),A=tl(t,r,y.contentType,y.type,D),R=i?A:y.contentType==="digit",N=a!=null&&t.isValid(a);let _=N?t.formatByString(a,D):"",E=null;if(R)if(A)E=_===""?t.formatByString(u,D).length:_.length;else{if(y.maxLength==null)throw new Error(`MUI: The token ${D} should have a 'maxDigitNumber' property on it's adapter`);E=y.maxLength,N&&(_=Zi(t,_,E))}return d.push(B({},y,{format:D,maxLength:E,value:_,placeholder:kp(t,r,n,y,D),hasLeadingZeros:A,hasLeadingZerosInFormat:A,hasLeadingZerosInInput:R,startSeparator:d.length===0?c:"",endSeparator:"",modified:!1})),null};let p=10,m=s,g=t.expandFormat(s);for(;g!==m;)if(m=g,g=t.expandFormat(m),p-=1,p<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const v=g,P=Ap(t,v),j=new RegExp(`^(${Object.keys(t.formatTokenMap).sort((D,y)=>y.length-D.length).join("|")})`,"g");let w="";for(let D=0;D<v.length;D+=1){const y=P.find(E=>E.start<=D&&E.end>=D),A=v[D],R=y!=null,N=`${w}${v.slice(D)}`,_=j.test(N);!R&&A.match(/([A-Za-z]+)/)&&_?(w=N.slice(0,j.lastIndex),D+=j.lastIndex-1):R&&(y==null?void 0:y.start)===D||(y==null?void 0:y.end)===D||(f(w),w="",d.length===0?c+=A:d[d.length-1].endSeparator+=A)}return f(w),d.map(D=>{const y=A=>{let R=A;return l&&R!==null&&R.includes(" ")&&(R=`⁩${R}⁦`),o==="spacious"&&["/",".","-"].includes(R)&&(R=` ${R} `),R};return D.startSeparator=y(D.startSeparator),D.endSeparator=y(D.endSeparator),D})},Np=(t,r)=>{const n=r.some(l=>l.type==="day"),s=[],a=[];for(let l=0;l<r.length;l+=1){const c=r[l];n&&c.type==="weekDay"||(s.push(c.format),a.push(Na(c,"non-input")))}const o=s.join(" "),i=a.join(" ");return t.parse(i,o)},Mp=(t,r)=>{const s=t.map(a=>{const o=Na(a,r?"input-rtl":"input-ltr");return`${a.startSeparator}${o}${a.endSeparator}`}).join("");return r?`⁦${s}⁩`:s},Rp=(t,r)=>{const n=t.dateWithTimezone(void 0,r),s=t.endOfYear(n),a=t.endOfDay(n),{maxDaysInMonth:o,longestMonth:i}=ka(t,n).reduce((l,c)=>{const d=t.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:el(t,r,l)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(s)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&t.isValid(l)?t.getDaysInMonth(l):o,longestMonth:i}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=Ss(t,r,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=t.getHours(a);return t.formatByString(t.endOfDay(n),l)!==c.toString()?{minimum:1,maximum:Number(t.formatByString(t.startOfDay(n),l))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:0})}},Ep=(t,r,n,s,a)=>{switch(n.type){case"year":return t.setYear(a,t.getYear(s));case"month":return t.setMonth(a,t.getMonth(s));case"weekDay":{const o=Ss(t,r,n.format),i=t.formatByString(s,n.format),l=o.indexOf(i),d=o.indexOf(n.value)-l;return t.addDays(s,d)}case"day":return t.setDate(a,t.getDate(s));case"meridiem":{const o=t.getHours(s)<12,i=t.getHours(a);return o&&i>=12?t.addHours(a,-12):!o&&i<12?t.addHours(a,12):a}case"hours":return t.setHours(a,t.getHours(s));case"minutes":return t.setMinutes(a,t.getMinutes(s));case"seconds":return t.setSeconds(a,t.getSeconds(s));default:return a}},bo={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},jo=(t,r,n,s,a,o)=>[...s].sort((i,l)=>bo[i.type]-bo[l.type]).reduce((i,l)=>!o||l.modified?Ep(t,r,l,n,i):i,a),Ip=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,Op=(t,r)=>{const n={};if(!r)return t.forEach((c,d)=>{const u=d===0?null:d-1,f=d===t.length-1?null:d+1;n[d]={leftIndex:u,rightIndex:f}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const s={},a={};let o=0,i=0,l=t.length-1;for(;l>=0;){i=t.findIndex((c,d)=>{var u;return d>=o&&((u=c.endSeparator)==null?void 0:u.includes(" "))&&c.endSeparator!==" / "}),i===-1&&(i=t.length-1);for(let c=i;c>=o;c-=1)a[c]=l,s[l]=c,l-=1;o=i+1}return t.forEach((c,d)=>{const u=a[d],f=u===0?null:s[u-1],p=u===t.length-1?null:s[u+1];n[d]={leftIndex:f,rightIndex:p}}),{neighbors:n,startIndex:s[0],endIndex:s[t.length-1]}},_p=["value","referenceDate"],sr={emptyValue:null,getTodayValue:Qi,getInitialReferenceValue:t=>{let{value:r,referenceDate:n}=t,s=Fe(t,_p);return r!=null&&s.utils.isValid(r)?r:n??Pp(s)},cleanValue:gp,areValuesEqual:yp,isSameError:(t,r)=>t===r,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,r)=>r==null||!t.isValid(r)?null:t.getTimezone(r),setTimezone:(t,r,n)=>n==null?null:t.setTimezone(n,r)},Fp={updateReferenceValue:(t,r,n)=>r==null||!t.isValid(r)?n:r,getSectionsFromValue:(t,r,n,s,a)=>!t.isValid(r)&&!!n?n:Ji(a(r),s),getValueStrFromSections:Mp,getActiveDateManager:(t,r)=>({date:r.value,referenceDate:r.referenceValue,getSections:n=>n,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:n==null||!t.isValid(n)?r.referenceValue:n})}),parseValueStr:(t,r,n)=>n(t.trim(),r)},Lp=["localeText"],la=x.createContext(null),Qt=function(r){var n;const{localeText:s}=r,a=Fe(r,Lp),{utils:o,localeText:i}=(n=x.useContext(la))!=null?n:{utils:void 0,localeText:void 0},l=ct({props:a,name:"MuiLocalizationProvider"}),{children:c,dateAdapter:d,dateFormats:u,dateLibInstance:f,adapterLocale:p,localeText:m}=l,g=x.useMemo(()=>B({},m,i,s),[m,i,s]),v=x.useMemo(()=>{if(!d)return o||null;const w=new d({locale:p,formats:u,instance:f});if(!w.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return w},[d,p,u,f,o]),P=x.useMemo(()=>v?{minDate:v.date("1900-01-01T00:00:00.000"),maxDate:v.date("2099-12-31T00:00:00.000")}:null,[v]),j=x.useMemo(()=>({utils:v,defaultDates:P,localeText:g}),[P,v,g]);return e.jsx(la.Provider,{value:j,children:c})},Vp=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:B({},t)}}}}),rl={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(t,r,n)=>`Select ${t}. ${r===null?"No time selected":`Selected time is ${n.format(r,"fullTime")}`}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:(t,r)=>t!==null&&r.isValid(t)?`Choose date, selected date is ${r.format(t,"fullDate")}`:"Choose date",openTimePickerDialogue:(t,r)=>t!==null&&r.isValid(t)?`Choose time, selected time is ${r.format(t,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},Up=rl;Vp(rl);const Ir=()=>{const t=x.useContext(la);if(t===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const r=x.useMemo(()=>B({},Up,t.localeText),[t.localeText]);return x.useMemo(()=>B({},t,{localeText:r}),[t,r])},Ye=()=>Ir().utils,Tn=()=>Ir().defaultDates,vr=()=>Ir().localeText,Ds=t=>{const r=Ye(),n=x.useRef();return n.current===void 0&&(n.current=r.dateWithTimezone(void 0,t)),n.current};function Bp(t){return vt("MuiPickersToolbar",t)}bt("MuiPickersToolbar",["root","content"]);const $p=t=>{const{classes:r,isLandscape:n}=t;return pt({root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]},Bp,r)},Wp=ke("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>B({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},r.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),Hp=ke("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(t,r)=>r.content})(({ownerState:t})=>{var r;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?(r=t.landscapeDirection)!=null?r:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}}),zp=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiPickersToolbar"}),{children:a,className:o,toolbarTitle:i,hidden:l,titleId:c}=s,d=s,u=$p(d);return l?null:e.jsxs(Wp,{ref:n,className:ht(u.root,o),ownerState:d,children:[e.jsx(h,{color:"text.secondary",variant:"overline",id:c,children:i}),e.jsx(Hp,{className:u.content,ownerState:d,children:a})]})});function Yp(t){return vt("MuiDatePickerToolbar",t)}bt("MuiDatePickerToolbar",["root","title"]);const qp=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Qp=t=>{const{classes:r}=t;return pt({root:["root"],title:["title"]},Yp,r)},Kp=ke(zp,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),Gp=ke(h,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(t,r)=>r.title})(({ownerState:t})=>B({},t.isLandscape&&{margin:"auto 16px auto auto"})),Zp=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiDatePickerToolbar"}),{value:a,isLandscape:o,toolbarFormat:i,toolbarPlaceholder:l="––",views:c,className:d}=s,u=Fe(s,qp),f=Ye(),p=vr(),m=Qp(s),g=x.useMemo(()=>{if(!a)return l;const P=Aa(f,{format:i,views:c},!0);return f.formatByString(a,P)},[a,i,l,f,c]),v=s;return e.jsx(Kp,B({ref:n,toolbarTitle:p.datePickerToolbarTitle,isLandscape:o,className:ht(m.root,d)},u,{children:e.jsx(Gp,{variant:"h4",align:o?"left":"center",ownerState:v,className:m.title,children:g})}))}),nl=t=>{if(t!==void 0)return Object.keys(t).reduce((r,n)=>B({},r,{[`${n.slice(0,1).toLowerCase()}${n.slice(1)}`]:t[n]}),{})};function sl(t,r){var n,s,a,o;const i=Ye(),l=Tn(),c=ct({props:t,name:r}),d=x.useMemo(()=>{var f;return((f=c.localeText)==null?void 0:f.toolbarTitle)==null?c.localeText:B({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})},[c.localeText]),u=(n=c.slots)!=null?n:nl(c.components);return B({},c,{localeText:d},xp({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(s=c.disableFuture)!=null?s:!1,disablePast:(a=c.disablePast)!=null?a:!1,minDate:kt(i,c.minDate,l.minDate),maxDate:kt(i,c.maxDate,l.maxDate),slots:B({toolbar:Zp},u),slotProps:(o=c.slotProps)!=null?o:c.componentsProps})}const Xp=gr(e.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Jp=gr(e.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),ex=gr(e.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),tx=gr(e.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");gr(e.jsxs(x.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");gr(e.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");gr(e.jsxs(x.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const rx=gr(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function nx(t){return vt("MuiPickersArrowSwitcher",t)}bt("MuiPickersArrowSwitcher",["root","spacer","button"]);const sx=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],ax=["ownerState"],ox=["ownerState"],ix=ke("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex"}),lx=ke("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(t,r)=>r.spacer})(({theme:t})=>({width:t.spacing(3)})),wo=ke(Et,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(t,r)=>r.button})(({ownerState:t})=>B({},t.hidden&&{visibility:"hidden"})),cx=t=>{const{classes:r}=t;return pt({root:["root"],spacer:["spacer"],button:["button"]},nx,r)},dx=x.forwardRef(function(r,n){var s,a,o,i;const c=Er().direction==="rtl",d=ct({props:r,name:"MuiPickersArrowSwitcher"}),{children:u,className:f,slots:p,slotProps:m,isNextDisabled:g,isNextHidden:v,onGoToNext:P,nextLabel:j,isPreviousDisabled:w,isPreviousHidden:D,onGoToPrevious:y,previousLabel:A}=d,R=Fe(d,sx),N=d,_=cx(N),E={isDisabled:g,isHidden:v,goTo:P,label:j},k={isDisabled:w,isHidden:D,goTo:y,label:A},T=(s=p==null?void 0:p.previousIconButton)!=null?s:wo,C=it({elementType:T,externalSlotProps:m==null?void 0:m.previousIconButton,additionalProps:{size:"medium",title:k.label,"aria-label":k.label,disabled:k.isDisabled,edge:"end",onClick:k.goTo},ownerState:B({},N,{hidden:k.isHidden}),className:_.button}),V=(a=p==null?void 0:p.nextIconButton)!=null?a:wo,F=it({elementType:V,externalSlotProps:m==null?void 0:m.nextIconButton,additionalProps:{size:"medium",title:E.label,"aria-label":E.label,disabled:E.isDisabled,edge:"start",onClick:E.goTo},ownerState:B({},N,{hidden:E.isHidden}),className:_.button}),I=(o=p==null?void 0:p.leftArrowIcon)!=null?o:Jp,K=it({elementType:I,externalSlotProps:m==null?void 0:m.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),W=Fe(K,ax),O=(i=p==null?void 0:p.rightArrowIcon)!=null?i:ex,L=it({elementType:O,externalSlotProps:m==null?void 0:m.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),q=Fe(L,ox);return e.jsxs(ix,B({ref:n,className:ht(_.root,f),ownerState:N},R,{children:[e.jsx(T,B({},C,{children:c?e.jsx(O,B({},q)):e.jsx(I,B({},W))})),u?e.jsx(h,{variant:"subtitle1",component:"span",children:u}):e.jsx(lx,{className:_.spacer,ownerState:N}),e.jsx(V,B({},F,{children:c?e.jsx(I,B({},W)):e.jsx(O,B({},q))}))]}))}),mn=36,ks=2,As=320,ux=280,Ma=334,hx=ke(ar)({[`& .${Fa.container}`]:{outline:0},[`& .${Fa.paper}`]:{outline:0,minWidth:As}}),mx=ke(or)({"&:first-of-type":{padding:0}});function fx(t){var r,n;const{children:s,onDismiss:a,open:o,slots:i,slotProps:l}=t,c=(r=i==null?void 0:i.dialog)!=null?r:hx,d=(n=i==null?void 0:i.mobileTransition)!=null?n:os;return e.jsx(c,B({open:o,onClose:a},l==null?void 0:l.dialog,{TransitionComponent:d,TransitionProps:l==null?void 0:l.mobileTransition,PaperComponent:i==null?void 0:i.mobilePaper,PaperProps:l==null?void 0:l.mobilePaper,children:e.jsx(mx,{children:s})}))}function px(t){return vt("MuiPickersPopper",t)}bt("MuiPickersPopper",["root","paper"]);function xx(t,r){return Array.isArray(r)?r.every(n=>t.indexOf(n)!==-1):t.indexOf(r)!==-1}const gx=(t,r)=>n=>{(n.key==="Enter"||n.key===" ")&&(t(n),n.preventDefault(),n.stopPropagation())},rs=(t=document)=>{const r=t.activeElement;return r?r.shadowRoot?rs(r.shadowRoot):r:null},yx="@media (pointer: fine)",vx="@media (prefers-reduced-motion: reduce)",Ur=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),Co=Ur&&Ur[1]?parseInt(Ur[1],10):null,To=Ur&&Ur[2]?parseInt(Ur[2],10):null,bx=Co&&Co<10||To&&To<13||!1,al=()=>ua(vx,{defaultMatches:!1})||bx,jx=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],wx=t=>{const{classes:r}=t;return pt({root:["root"],paper:["paper"]},px,r)},Cx=ke(Wl,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>({zIndex:t.zIndex.modal})),Tx=ke(nt,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(t,r)=>r.paper})(({ownerState:t})=>B({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"}));function Px(t,r){return r.documentElement.clientWidth<t.clientX||r.documentElement.clientHeight<t.clientY}function Sx(t,r){const n=x.useRef(!1),s=x.useRef(!1),a=x.useRef(null),o=x.useRef(!1);x.useEffect(()=>{if(!t)return;function c(){o.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),o.current=!1}},[t]);const i=ge(c=>{if(!o.current)return;const d=s.current;s.current=!1;const u=_s(a.current);if(!a.current||"clientX"in c&&Px(c,u))return;if(n.current){n.current=!1;return}let f;c.composedPath?f=c.composedPath().indexOf(a.current)>-1:f=!u.documentElement.contains(c.target)||a.current.contains(c.target),!f&&!d&&r(c)}),l=()=>{s.current=!0};return x.useEffect(()=>{if(t){const c=_s(a.current),d=()=>{n.current=!0};return c.addEventListener("touchstart",i),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",i),c.removeEventListener("touchmove",d)}}},[t,i]),x.useEffect(()=>{if(t){const c=_s(a.current);return c.addEventListener("click",i),()=>{c.removeEventListener("click",i),s.current=!1}}},[t,i]),[a,l,l]}const Dx=x.forwardRef((t,r)=>{const{PaperComponent:n,popperPlacement:s,ownerState:a,children:o,paperSlotProps:i,paperClasses:l,onPaperClick:c,onPaperTouchStart:d}=t,u=Fe(t,jx),f=B({},a,{placement:s}),p=it({elementType:n,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:r},className:l,ownerState:f});return e.jsx(n,B({},u,p,{onClick:m=>{var g;c(m),(g=p.onClick)==null||g.call(p,m)},onTouchStart:m=>{var g;d(m),(g=p.onTouchStart)==null||g.call(p,m)},ownerState:f,children:o}))});function kx(t){var r,n,s,a;const o=ct({props:t,name:"MuiPickersPopper"}),{anchorEl:i,children:l,containerRef:c=null,shouldRestoreFocus:d,onBlur:u,onDismiss:f,open:p,role:m,placement:g,slots:v,slotProps:P,reduceAnimations:j}=o;x.useEffect(()=>{function L(q){p&&(q.key==="Escape"||q.key==="Esc")&&f()}return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[f,p]);const w=x.useRef(null);x.useEffect(()=>{m==="tooltip"||d&&!d()||(p?w.current=rs(document):w.current&&w.current instanceof HTMLElement&&setTimeout(()=>{w.current instanceof HTMLElement&&w.current.focus()}))},[p,m,d]);const[D,y,A]=Sx(p,u??f),R=x.useRef(null),N=Nr(R,c),_=Nr(N,D),E=o,k=wx(E),T=al(),C=j??T,V=L=>{L.key==="Escape"&&(L.stopPropagation(),f())},F=((r=v==null?void 0:v.desktopTransition)!=null?r:C)?os:Bl,I=(n=v==null?void 0:v.desktopTrapFocus)!=null?n:$l,K=(s=v==null?void 0:v.desktopPaper)!=null?s:Tx,W=(a=v==null?void 0:v.popper)!=null?a:Cx,O=it({elementType:W,externalSlotProps:P==null?void 0:P.popper,additionalProps:{transition:!0,role:m,open:p,anchorEl:i,placement:g,onKeyDown:V},className:k.root,ownerState:o});return e.jsx(W,B({},O,{children:({TransitionProps:L,placement:q})=>e.jsx(I,B({open:p,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:m==="tooltip",isEnabled:()=>!0},P==null?void 0:P.desktopTrapFocus,{children:e.jsx(F,B({},L,P==null?void 0:P.desktopTransition,{children:e.jsx(Dx,{PaperComponent:K,ownerState:E,popperPlacement:q,ref:_,onPaperClick:y,onPaperTouchStart:A,paperClasses:k.paper,paperSlotProps:P==null?void 0:P.desktopPaper,children:l})}))}))}))}const Ra=({timezone:t,value:r,defaultValue:n,onChange:s,valueManager:a})=>{var o,i;const l=Ye(),c=x.useRef(n),d=(o=r??c.current)!=null?o:a.emptyValue,u=x.useMemo(()=>a.getTimezone(l,d),[l,a,d]),f=ge(v=>u==null?v:a.setTimezone(l,u,v)),p=(i=t??u)!=null?i:"default",m=x.useMemo(()=>a.setTimezone(l,p,d),[a,l,p,d]),g=ge((v,...P)=>{const j=f(v);s==null||s(j,...P)});return{value:m,handleValueChange:g,timezone:p}},Ea=({name:t,timezone:r,value:n,defaultValue:s,onChange:a,valueManager:o})=>{const[i,l]=pr({name:t,state:"value",controlled:n,default:s??o.emptyValue}),c=ge((d,...u)=>{l(d),a==null||a(d,...u)});return Ra({timezone:r,value:i,defaultValue:void 0,onChange:c,valueManager:o})};function ol(t,r,n,s){const{value:a,onError:o}=t,i=Ir(),l=x.useRef(s),c=r({adapter:i,value:a,props:t});return x.useEffect(()=>{o&&!n(c,l.current)&&o(c,a),l.current=c},[n,o,l,c,a]),c}const Ax=t=>{const r=Ye(),n=vr(),s=Ir(),o=Er().direction==="rtl",{valueManager:i,fieldValueManager:l,validator:c,internalProps:d,internalProps:{value:u,defaultValue:f,referenceDate:p,onChange:m,format:g,formatDensity:v="dense",selectedSections:P,onSelectedSectionsChange:j,shouldRespectLeadingZeros:w=!1,timezone:D}}=t,{timezone:y,value:A,handleValueChange:R}=Ra({timezone:D,value:u,defaultValue:f,onChange:m,valueManager:i}),N=x.useMemo(()=>Rp(r,y),[r,y]),_=x.useCallback((re,S=null)=>l.getSectionsFromValue(r,re,S,o,Y=>vo(r,y,n,g,Y,v,w,o)),[l,g,n,o,w,r,v,y]),E=x.useMemo(()=>l.getValueStrFromSections(_(i.emptyValue),o),[l,_,i.emptyValue,o]),[k,T]=x.useState(()=>{const re=_(A),S={sections:re,value:A,referenceValue:i.emptyValue,tempValueStrAndroid:null},Y=Tp(re),pe=i.getInitialReferenceValue({referenceDate:p,value:A,utils:r,props:d,granularity:Y,timezone:y});return B({},S,{referenceValue:pe})}),[C,V]=pr({controlled:P,default:null,name:"useField",state:"selectedSectionIndexes"}),F=re=>{V(re),j==null||j(re),T(S=>B({},S,{selectedSectionQuery:null}))},I=x.useMemo(()=>{if(C==null)return null;if(C==="all")return{startIndex:0,endIndex:k.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof C=="number")return{startIndex:C,endIndex:C};if(typeof C=="string"){const re=k.sections.findIndex(S=>S.type===C);return{startIndex:re,endIndex:re}}return C},[C,k.sections]),K=({value:re,referenceValue:S,sections:Y})=>{if(T(Q=>B({},Q,{sections:Y,value:re,referenceValue:S,tempValueStrAndroid:null})),i.areValuesEqual(r,k.value,re))return;const pe={validationError:c({adapter:s,value:re,props:B({},d,{value:re,timezone:y})})};R(re,pe)},W=(re,S)=>{const Y=[...k.sections];return Y[re]=B({},Y[re],{value:S,modified:!0}),Ji(Y,o)},O=()=>{K({value:i.emptyValue,referenceValue:k.referenceValue,sections:_(i.emptyValue)})},L=()=>{if(I==null)return;const re=k.sections[I.startIndex],S=l.getActiveDateManager(r,k,re),pe=S.getSections(k.sections).filter(je=>je.value!=="").length===(re.value===""?0:1),Q=W(I.startIndex,""),se=pe?null:r.date(new Date("")),le=S.getNewValuesFromNewActiveDate(se);(se!=null&&!r.isValid(se))!=(S.date!=null&&!r.isValid(S.date))?K(B({},le,{sections:Q})):T(je=>B({},je,le,{sections:Q,tempValueStrAndroid:null}))},q=re=>{const S=(Q,se)=>{const le=r.parse(Q,g);if(le==null||!r.isValid(le))return null;const je=vo(r,y,n,g,le,v,w,o);return jo(r,y,le,je,se,!1)},Y=l.parseValueStr(re,k.referenceValue,S),pe=l.updateReferenceValue(r,Y,k.referenceValue);K({value:Y,referenceValue:pe,sections:_(Y,k.sections)})},me=({activeSection:re,newSectionValue:S,shouldGoToNextSection:Y})=>{Y&&I&&I.startIndex<k.sections.length-1?F(I.startIndex+1):I&&I.startIndex!==I.endIndex&&F(I.startIndex);const pe=l.getActiveDateManager(r,k,re),Q=W(I.startIndex,S),se=pe.getSections(Q),le=Np(r,se);let je,ue;if(le!=null&&r.isValid(le)){const xe=jo(r,y,le,se,pe.referenceDate,!0);je=pe.getNewValuesFromNewActiveDate(xe),ue=!0}else je=pe.getNewValuesFromNewActiveDate(le),ue=(le!=null&&!r.isValid(le))!=(pe.date!=null&&!r.isValid(pe.date));return ue?K(B({},je,{sections:Q})):T(xe=>B({},xe,je,{sections:Q,tempValueStrAndroid:null}))},ye=re=>T(S=>B({},S,{tempValueStrAndroid:re}));return x.useEffect(()=>{const re=_(k.value);T(S=>B({},S,{sections:re}))},[g,r.locale]),x.useEffect(()=>{let re=!1;i.areValuesEqual(r,k.value,A)?re=i.getTimezone(r,k.value)!==i.getTimezone(r,A):re=!0,re&&T(S=>B({},S,{value:A,referenceValue:l.updateReferenceValue(r,A,S.referenceValue),sections:_(A)}))},[A]),{state:k,selectedSectionIndexes:I,setSelectedSections:F,clearValue:O,clearActiveSection:L,updateSectionValue:me,updateValueFromValueStr:q,setTempAndroidValueStr:ye,sectionsValueBoundaries:N,placeholder:E,timezone:y}},Nx=5e3,Fr=t=>t.saveQuery!=null,Mx=({sections:t,updateSectionValue:r,sectionsValueBoundaries:n,setTempAndroidValueStr:s,timezone:a})=>{const o=Ye(),[i,l]=x.useState(null),c=ge(()=>l(null));x.useEffect(()=>{var m;i!=null&&((m=t[i.sectionIndex])==null?void 0:m.type)!==i.sectionType&&c()},[t,i,c]),x.useEffect(()=>{if(i!=null){const m=setTimeout(()=>c(),Nx);return()=>{window.clearTimeout(m)}}return()=>{}},[i,c]);const d=({keyPressed:m,sectionIndex:g},v,P)=>{const j=m.toLowerCase(),w=t[g];if(i!=null&&(!P||P(i.value))&&i.sectionIndex===g){const y=`${i.value}${j}`,A=v(y,w);if(!Fr(A))return l({sectionIndex:g,value:y,sectionType:w.type}),A}const D=v(j,w);return Fr(D)&&!D.saveQuery?(c(),null):(l({sectionIndex:g,value:j,sectionType:w.type}),Fr(D)?null:D)},u=m=>{const g=(j,w,D)=>{const y=w.filter(A=>A.toLowerCase().startsWith(D));return y.length===0?{saveQuery:!1}:{sectionValue:y[0],shouldGoToNextSection:y.length===1}},v=(j,w,D,y)=>{const A=R=>Gi(o,a,w.type,R);if(w.contentType==="letter")return g(w.format,A(w.format),j);if(D&&y!=null&&Ki(o,D).contentType==="letter"){const R=A(D),N=g(D,R,j);return Fr(N)?{saveQuery:!1}:B({},N,{sectionValue:y(N.sectionValue,R)})}return{saveQuery:!1}};return d(m,(j,w)=>{switch(w.type){case"month":{const D=y=>yo(o,y,o.formats.month,w.format);return v(j,w,o.formats.month,D)}case"weekDay":{const D=(y,A)=>A.indexOf(y).toString();return v(j,w,o.formats.weekday,D)}case"meridiem":return v(j,w);default:return{saveQuery:!1}}})},f=m=>{const g=(P,j)=>{const w=+`${P}`,D=n[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(w>D.maximum)return{saveQuery:!1};if(w<D.minimum)return{saveQuery:!0};const y=+`${P}0`>D.maximum||P.length===D.maximum.toString().length;return{sectionValue:Xi(o,a,w,D,j),shouldGoToNextSection:y}};return d(m,(P,j)=>{if(j.contentType==="digit"||j.contentType==="digit-with-letter")return g(P,j);if(j.type==="month"){tl(o,a,"digit","month","MM");const w=g(P,{type:j.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Fr(w))return w;const D=yo(o,w.sectionValue,"MM",j.format);return B({},w,{sectionValue:D})}if(j.type==="weekDay"){const w=g(P,j);if(Fr(w))return w;const D=Ss(o,a,j.format)[Number(w.sectionValue)-1];return B({},w,{sectionValue:D})}return{saveQuery:!1}},P=>!Number.isNaN(Number(P)))};return{applyCharacterEditing:ge(m=>{const g=t[m.sectionIndex],P=m.keyPressed!==" "&&!Number.isNaN(Number(m.keyPressed))?f(m):u(m);P==null?s(null):r({activeSection:g,newSectionValue:P.sectionValue,shouldGoToNextSection:P.shouldGoToNextSection})}),resetCharacterQuery:c}},Rx=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],Ex=t=>{const r=Ye(),{state:n,selectedSectionIndexes:s,setSelectedSections:a,clearValue:o,clearActiveSection:i,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:d,sectionsValueBoundaries:u,placeholder:f,timezone:p}=Ax(t),{inputRef:m,internalProps:g,internalProps:{readOnly:v=!1,unstableFieldRef:P,minutesStep:j},forwardedProps:{onClick:w,onKeyDown:D,onFocus:y,onBlur:A,onMouseUp:R,onPaste:N,error:_,clearable:E,onClear:k,disabled:T},fieldValueManager:C,valueManager:V,validator:F}=t,I=Fe(t.forwardedProps,Rx),{applyCharacterEditing:K,resetCharacterQuery:W}=Mx({sections:n.sections,updateSectionValue:l,sectionsValueBoundaries:u,setTempAndroidValueStr:d,timezone:p}),O=x.useRef(null),L=Nr(m,O),q=x.useRef(void 0),ye=Er().direction==="rtl",re=x.useMemo(()=>Op(n.sections,ye),[n.sections,ye]),S=()=>{var H;if(v){a(null);return}const Z=(H=O.current.selectionStart)!=null?H:0;let Pe;Z<=n.sections[0].startInInput||Z>=n.sections[n.sections.length-1].endInInput?Pe=1:Pe=n.sections.findIndex(G=>G.startInInput-G.startSeparator.length>Z);const Le=Pe===-1?n.sections.length-1:Pe-1;a(Le)},Y=ge((H,...Z)=>{H.isDefaultPrevented()||(w==null||w(H,...Z),S())}),pe=ge(H=>{R==null||R(H),H.preventDefault()}),Q=ge((...H)=>{y==null||y(...H);const Z=O.current;window.clearTimeout(q.current),q.current=setTimeout(()=>{!Z||Z!==O.current||s!=null||v||(Z.value.length&&Number(Z.selectionEnd)-Number(Z.selectionStart)===Z.value.length?a("all"):S())})}),se=ge((...H)=>{A==null||A(...H),a(null)}),le=ge(H=>{if(N==null||N(H),v){H.preventDefault();return}const Z=H.clipboardData.getData("text");if(s&&s.startIndex===s.endIndex){const Pe=n.sections[s.startIndex],Le=/^[a-zA-Z]+$/.test(Z),G=/^[0-9]+$/.test(Z),ne=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Z);if(Pe.contentType==="letter"&&Le||Pe.contentType==="digit"&&G||Pe.contentType==="digit-with-letter"&&ne){W(),l({activeSection:Pe,newSectionValue:Z,shouldGoToNextSection:!0}),H.preventDefault();return}if(Le||G){H.preventDefault();return}}H.preventDefault(),W(),c(Z)}),je=ge(H=>{if(v)return;const Z=H.target.value;if(Z===""){W(),o();return}const Pe=H.nativeEvent.data,Le=Pe&&Pe.length>1,G=Le?Pe:Z,ne=Lr(G);if(s==null||Le){c(Le?Pe:ne);return}let Se;if(s.startIndex===0&&s.endIndex===n.sections.length-1&&ne.length===1)Se=ne;else{const Re=Lr(C.getValueStrFromSections(n.sections,ye));let rt=-1,dt=-1;for(let Tt=0;Tt<Re.length;Tt+=1)rt===-1&&Re[Tt]!==ne[Tt]&&(rt=Tt),dt===-1&&Re[Re.length-Tt-1]!==ne[ne.length-Tt-1]&&(dt=Tt);const Yt=n.sections[s.startIndex];if(rt<Yt.start||Re.length-dt-1>Yt.end)return;const br=ne.length-Re.length+Yt.end-Lr(Yt.endSeparator||"").length;Se=ne.slice(Yt.start+Lr(Yt.startSeparator||"").length,br)}if(Se.length===0){Ip()?d(G):(W(),i());return}K({keyPressed:Se,sectionIndex:s.startIndex})}),ue=ge(H=>{switch(D==null||D(H),!0){case(H.key==="a"&&(H.ctrlKey||H.metaKey)):{H.preventDefault(),a("all");break}case H.key==="ArrowRight":{if(H.preventDefault(),s==null)a(re.startIndex);else if(s.startIndex!==s.endIndex)a(s.endIndex);else{const Z=re.neighbors[s.startIndex].rightIndex;Z!==null&&a(Z)}break}case H.key==="ArrowLeft":{if(H.preventDefault(),s==null)a(re.endIndex);else if(s.startIndex!==s.endIndex)a(s.startIndex);else{const Z=re.neighbors[s.startIndex].leftIndex;Z!==null&&a(Z)}break}case H.key==="Delete":{if(H.preventDefault(),v)break;s==null||s.startIndex===0&&s.endIndex===n.sections.length-1?o():i(),W();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(H.key):{if(H.preventDefault(),v||s==null)break;const Z=n.sections[s.startIndex],Pe=C.getActiveDateManager(r,n,Z),Le=Dp(r,p,Z,H.key,u,Pe.date,{minutesStep:j});l({activeSection:Z,newSectionValue:Le,shouldGoToNextSection:!1});break}}});$r(()=>{if(!O.current)return;if(s==null){O.current.scrollLeft&&(O.current.scrollLeft=0);return}const H=n.sections[s.startIndex],Z=n.sections[s.endIndex];let Pe=H.startInInput,Le=Z.endInInput;if(s.shouldSelectBoundarySelectors&&(Pe-=H.startSeparator.length,Le+=Z.endSeparator.length),Pe!==O.current.selectionStart||Le!==O.current.selectionEnd){const G=O.current.scrollTop;O.current===rs(document)&&O.current.setSelectionRange(Pe,Le),O.current.scrollTop=G}});const xe=ol(B({},g,{value:n.value,timezone:p}),F,V.isSameError,V.defaultErrorState),J=x.useMemo(()=>_!==void 0?_:V.hasError(xe),[V,xe,_]);x.useEffect(()=>{!J&&!s&&W()},[n.referenceValue,s,J]),x.useEffect(()=>(O.current&&O.current===document.activeElement&&a("all"),()=>window.clearTimeout(q.current)),[]),x.useEffect(()=>{n.tempValueStrAndroid!=null&&s!=null&&(W(),i())},[n.tempValueStrAndroid]);const be=x.useMemo(()=>{var H;return(H=n.tempValueStrAndroid)!=null?H:C.getValueStrFromSections(n.sections,ye)},[n.sections,C,n.tempValueStrAndroid,ye]),We=x.useMemo(()=>s==null||n.sections[s.startIndex].contentType==="letter"?"text":"numeric",[s,n.sections]),Ue=O.current&&O.current===rs(document),lt=V.areValuesEqual(r,n.value,V.emptyValue),oe=!Ue&&lt;x.useImperativeHandle(P,()=>({getSections:()=>n.sections,getActiveSectionIndex:()=>{var H,Z,Pe;const Le=(H=O.current.selectionStart)!=null?H:0,G=(Z=O.current.selectionEnd)!=null?Z:0,ne=!!((Pe=O.current)!=null&&Pe.readOnly);if(Le===0&&G===0||ne)return null;const Se=Le<=n.sections[0].startInInput?1:n.sections.findIndex(Re=>Re.startInInput-Re.startSeparator.length>Le);return Se===-1?n.sections.length-1:Se-1},setSelectedSections:H=>a(H)}));const we=ge((H,...Z)=>{var Pe;H.preventDefault(),k==null||k(H,...Z),o(),O==null||(Pe=O.current)==null||Pe.focus(),a(0)});return B({placeholder:f,autoComplete:"off",disabled:!!T},I,{value:oe?"":be,inputMode:We,readOnly:v,onClick:Y,onFocus:Q,onBlur:se,onPaste:le,onChange:je,onKeyDown:ue,onMouseUp:pe,onClear:we,error:J,ref:L,clearable:!!(E&&!lt&&!v&&!T)})},Ix=({open:t,onOpen:r,onClose:n})=>{const s=x.useRef(typeof t=="boolean").current,[a,o]=x.useState(!1);x.useEffect(()=>{if(s){if(typeof t!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");o(t)}},[s,t]);const i=x.useCallback(l=>{s||o(l),l&&r&&r(),!l&&n&&n()},[s,r,n]);return{isOpen:a,setIsOpen:i}},Ox=t=>{const{action:r,hasChanged:n,dateState:s,isControlled:a}=t,o=!a&&!s.hasBeenModifiedSinceMount;return r.name==="setValueFromField"?!0:r.name==="setValueFromAction"?o&&["accept","today","clear"].includes(r.pickerAction)?!0:n(s.lastPublishedValue):r.name==="setValueFromView"&&r.selectionState!=="shallow"||r.name==="setValueFromShortcut"?o?!0:n(s.lastPublishedValue):!1},_x=t=>{const{action:r,hasChanged:n,dateState:s,isControlled:a,closeOnSelect:o}=t,i=!a&&!s.hasBeenModifiedSinceMount;return r.name==="setValueFromAction"?i&&["accept","today","clear"].includes(r.pickerAction)?!0:n(s.lastCommittedValue):r.name==="setValueFromView"&&r.selectionState==="finish"&&o?i?!0:n(s.lastCommittedValue):r.name==="setValueFromShortcut"?r.changeImportance==="accept"&&n(s.lastCommittedValue):!1},Fx=t=>{const{action:r,closeOnSelect:n}=t;return r.name==="setValueFromAction"?!0:r.name==="setValueFromView"?r.selectionState==="finish"&&n:r.name==="setValueFromShortcut"?r.changeImportance==="accept":!1},Lx=({props:t,valueManager:r,valueType:n,wrapperVariant:s,validator:a})=>{const{onAccept:o,onChange:i,value:l,defaultValue:c,closeOnSelect:d=s==="desktop",selectedSections:u,onSelectedSectionsChange:f,timezone:p}=t,{current:m}=x.useRef(c),{current:g}=x.useRef(l!==void 0),v=Ye(),P=Ir(),[j,w]=pr({controlled:u,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:D,setIsOpen:y}=Ix(t),[A,R]=x.useState(()=>{let Q;return l!==void 0?Q=l:m!==void 0?Q=m:Q=r.emptyValue,{draft:Q,lastPublishedValue:Q,lastCommittedValue:Q,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:N,handleValueChange:_}=Ra({timezone:p,value:l,defaultValue:m,onChange:i,valueManager:r});ol(B({},t,{value:A.draft,timezone:N}),a,r.isSameError,r.defaultErrorState);const E=ge(Q=>{const se={action:Q,dateState:A,hasChanged:xe=>!r.areValuesEqual(v,Q.value,xe),isControlled:g,closeOnSelect:d},le=Ox(se),je=_x(se),ue=Fx(se);if(R(xe=>B({},xe,{draft:Q.value,lastPublishedValue:le?Q.value:xe.lastPublishedValue,lastCommittedValue:je?Q.value:xe.lastCommittedValue,hasBeenModifiedSinceMount:!0})),le){const J={validationError:Q.name==="setValueFromField"?Q.context.validationError:a({adapter:P,value:Q.value,props:B({},t,{value:Q.value,timezone:N})})};Q.name==="setValueFromShortcut"&&Q.shortcut!=null&&(J.shortcut=Q.shortcut),_(Q.value,J)}je&&o&&o(Q.value),ue&&y(!1)});if(l!==void 0&&(A.lastControlledValue===void 0||!r.areValuesEqual(v,A.lastControlledValue,l))){const Q=r.areValuesEqual(v,A.draft,l);R(se=>B({},se,{lastControlledValue:l},Q?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const k=ge(()=>{E({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),T=ge(()=>{E({value:A.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),C=ge(()=>{E({value:A.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),V=ge(()=>{E({value:A.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),F=ge(()=>{E({value:r.getTodayValue(v,N,n),name:"setValueFromAction",pickerAction:"today"})}),I=ge(()=>y(!0)),K=ge(()=>y(!1)),W=ge((Q,se="partial")=>E({name:"setValueFromView",value:Q,selectionState:se})),O=ge((Q,se,le)=>E({name:"setValueFromShortcut",value:Q,changeImportance:se??"accept",shortcut:le})),L=ge((Q,se)=>E({name:"setValueFromField",value:Q,context:se})),q=ge(Q=>{w(Q),f==null||f(Q)}),me={onClear:k,onAccept:T,onDismiss:C,onCancel:V,onSetToday:F,onOpen:I,onClose:K},ye={value:A.draft,onChange:L,selectedSections:j,onSelectedSectionsChange:q},re=x.useMemo(()=>r.cleanValue(v,A.draft),[v,r,A.draft]),S={value:re,onChange:W,onClose:K,open:D,onSelectedSectionsChange:q},pe=B({},me,{value:re,onChange:W,onSelectShortcut:O,isValid:Q=>{const se=a({adapter:P,value:Q,props:B({},t,{value:Q,timezone:N})});return!r.hasError(se)}});return{open:D,fieldProps:ye,viewProps:S,layoutProps:pe,actions:me}};function il({onChange:t,onViewChange:r,openTo:n,view:s,views:a,autoFocus:o,focusedView:i,onFocusedViewChange:l}){var c,d;const u=x.useRef(n),f=x.useRef(a),p=x.useRef(a.includes(n)?n:a[0]),[m,g]=pr({name:"useViews",state:"view",controlled:s,default:p.current}),v=x.useRef(o?m:null),[P,j]=pr({name:"useViews",state:"focusedView",controlled:i,default:v.current});x.useEffect(()=>{(u.current&&u.current!==n||f.current&&f.current.some(E=>!a.includes(E)))&&(g(a.includes(n)?n:a[0]),f.current=a,u.current=n)},[n,g,m,a]);const w=a.indexOf(m),D=(c=a[w-1])!=null?c:null,y=(d=a[w+1])!=null?d:null,A=ge((E,k)=>{j(k?E:T=>E===T?null:T),l==null||l(E,k)}),R=ge(E=>{A(E,!0),E!==m&&(g(E),r&&r(E))}),N=ge(()=>{y&&R(y)}),_=ge((E,k,T)=>{const C=k==="finish",V=T?a.indexOf(T)<a.length-1:!!y;if(t(E,C&&V?"partial":k,T),T&&T!==m){const I=a[a.indexOf(T)+1];I&&R(I)}else C&&N()});return{view:m,setView:R,focusedView:P,setFocusedView:A,nextView:y,previousView:D,defaultView:a.includes(n)?n:a[0],goToNextView:N,setValueAndGoToNextView:_}}const Vx=["className","sx"],Ux=({props:t,propsFromPickerValue:r,additionalViewProps:n,inputRef:s,autoFocusView:a})=>{const{onChange:o,open:i,onSelectedSectionsChange:l,onClose:c}=r,{view:d,views:u,openTo:f,onViewChange:p,viewRenderers:m,timezone:g}=t,v=Fe(t,Vx),{view:P,setView:j,defaultView:w,focusedView:D,setFocusedView:y,setValueAndGoToNextView:A}=il({view:d,views:u,openTo:f,onChange:o,onViewChange:p,autoFocus:a}),{hasUIView:R,viewModeLookup:N}=x.useMemo(()=>u.reduce((F,I)=>{let K;return m[I]!=null?K="UI":K="field",F.viewModeLookup[I]=K,K==="UI"&&(F.hasUIView=!0),F},{hasUIView:!1,viewModeLookup:{}}),[m,u]),_=x.useMemo(()=>u.reduce((F,I)=>m[I]!=null&&wp(I)?F+1:F,0),[m,u]),E=N[P],k=ge(()=>E==="UI"),[T,C]=x.useState(E==="UI"?P:null);return T!==P&&N[P]==="UI"&&C(P),$r(()=>{E==="field"&&i&&(c(),setTimeout(()=>{s==null||s.current.focus(),l(P)}))},[P]),$r(()=>{if(!i)return;let F=P;E==="field"&&T!=null&&(F=T),F!==w&&N[F]==="UI"&&N[w]==="UI"&&(F=w),F!==P&&j(F),y(F,!0)},[i]),{hasUIView:R,shouldRestoreFocus:k,layoutProps:{views:u,view:T,onViewChange:j},renderCurrentView:()=>{if(T==null)return null;const F=m[T];return F==null?null:F(B({},v,n,r,{views:u,timezone:g,onChange:A,view:T,onViewChange:j,focusedView:D,onFocusedViewChange:y,showViewSwitcher:_>1,timeViewsCount:_}))}}};function Po(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Bx=(t,r)=>{const[n,s]=x.useState(Po);return $r(()=>{const o=()=>{s(Po())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),xx(t,["hours","minutes","seconds"])?!1:(r||n)==="landscape"},$x=({props:t,propsFromPickerValue:r,propsFromPickerViews:n,wrapperVariant:s})=>{const{orientation:a}=t,o=Bx(n.views,a);return{layoutProps:B({},n,r,{isLandscape:o,wrapperVariant:s,disabled:t.disabled,readOnly:t.readOnly})}},ll=({props:t,valueManager:r,valueType:n,wrapperVariant:s,inputRef:a,additionalViewProps:o,validator:i,autoFocusView:l})=>{const c=Lx({props:t,valueManager:r,valueType:n,wrapperVariant:s,validator:i}),d=Ux({props:t,inputRef:a,additionalViewProps:o,autoFocusView:l,propsFromPickerValue:c.viewProps}),u=$x({props:t,wrapperVariant:s,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:u.layoutProps}};function cl(t){return vt("MuiPickersLayout",t)}const Ys=bt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Wx=["onAccept","onClear","onCancel","onSetToday","actions"];function Hx(t){const{onAccept:r,onClear:n,onCancel:s,onSetToday:a,actions:o}=t,i=Fe(t,Wx),l=vr();if(o==null||o.length===0)return null;const c=o==null?void 0:o.map(d=>{switch(d){case"clear":return e.jsx(Ce,{onClick:n,children:l.clearButtonLabel},d);case"cancel":return e.jsx(Ce,{onClick:s,children:l.cancelButtonLabel},d);case"accept":return e.jsx(Ce,{onClick:r,children:l.okButtonLabel},d);case"today":return e.jsx(Ce,{onClick:a,children:l.todayButtonLabel},d);default:return null}});return e.jsx(ir,B({},i,{children:c}))}const zx=["items","changeImportance","isLandscape","onChange","isValid"],Yx=["getValue"];function qx(t){const{items:r,changeImportance:n,onChange:s,isValid:a}=t,o=Fe(t,zx);if(r==null||r.length===0)return null;const i=r.map(l=>{let{getValue:c}=l,d=Fe(l,Yx);const u=c({isValid:a});return{label:d.label,onClick:()=>{s(u,n,d)},disabled:!a(u)}});return e.jsx(ha,B({dense:!0,sx:[{maxHeight:Ma,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:i.map(l=>e.jsx(cn,{children:e.jsx(De,B({},l))},l.label))}))}function Qx(t){return t.view!==null}const Kx=t=>{const{classes:r,isLandscape:n}=t;return pt({root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},cl,r)},Gx=t=>{var r,n;const{wrapperVariant:s,onAccept:a,onClear:o,onCancel:i,onSetToday:l,view:c,views:d,onViewChange:u,value:f,onChange:p,onSelectShortcut:m,isValid:g,isLandscape:v,disabled:P,readOnly:j,children:w,components:D,componentsProps:y,slots:A,slotProps:R}=t,N=A??nl(D),_=R??y,E=Kx(t),k=(r=N==null?void 0:N.actionBar)!=null?r:Hx,T=it({elementType:k,externalSlotProps:_==null?void 0:_.actionBar,additionalProps:{onAccept:a,onClear:o,onCancel:i,onSetToday:l,actions:s==="desktop"?[]:["cancel","accept"],className:E.actionBar},ownerState:B({},t,{wrapperVariant:s})}),C=e.jsx(k,B({},T)),V=N==null?void 0:N.toolbar,F=it({elementType:V,externalSlotProps:_==null?void 0:_.toolbar,additionalProps:{isLandscape:v,onChange:p,value:f,view:c,onViewChange:u,views:d,disabled:P,readOnly:j,className:E.toolbar},ownerState:B({},t,{wrapperVariant:s})}),I=Qx(F)&&V?e.jsx(V,B({},F)):null,K=w,W=N==null?void 0:N.tabs,O=c&&W?e.jsx(W,B({view:c,onViewChange:u,className:E.tabs},_==null?void 0:_.tabs)):null,L=(n=N==null?void 0:N.shortcuts)!=null?n:qx,q=it({elementType:L,externalSlotProps:_==null?void 0:_.shortcuts,additionalProps:{isValid:g,isLandscape:v,onChange:m,className:E.shortcuts},ownerState:{isValid:g,isLandscape:v,onChange:m,className:E.shortcuts,wrapperVariant:s}}),me=c&&L?e.jsx(L,B({},q)):null;return{toolbar:I,content:K,tabs:O,actionBar:C,shortcuts:me}},Zx=t=>{const{isLandscape:r,classes:n}=t;return pt({root:["root",r&&"landscape"],contentWrapper:["contentWrapper"]},cl,n)},dl=ke("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Ys.toolbar}`]:r.isLandscape?{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${Ys.shortcuts}`]:r.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${Ys.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));dl.propTypes={as:U.elementType,ownerState:U.shape({isLandscape:U.bool.isRequired}).isRequired,sx:U.oneOfType([U.arrayOf(U.oneOfType([U.func,U.object,U.bool])),U.func,U.object])};const Xx=ke("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(t,r)=>r.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),ul=function(r){const n=ct({props:r,name:"MuiPickersLayout"}),{toolbar:s,content:a,tabs:o,actionBar:i,shortcuts:l}=Gx(n),{sx:c,className:d,isLandscape:u,ref:f,wrapperVariant:p}=n,m=n,g=Zx(m);return e.jsxs(dl,{ref:f,sx:c,className:ht(d,g.root),ownerState:m,children:[u?l:s,u?s:l,e.jsx(Xx,{className:g.contentWrapper,children:p==="desktop"?e.jsxs(x.Fragment,{children:[a,o]}):e.jsxs(x.Fragment,{children:[o,a]})}),i]})};function Jx(t,{disableFuture:r,maxDate:n,timezone:s}){const a=Ye();return x.useMemo(()=>{const o=a.dateWithTimezone(void 0,s),i=a.startOfMonth(r&&a.isBefore(o,n)?o:n);return!a.isAfter(i,t)},[r,n,t,a,s])}function eg(t,{disablePast:r,minDate:n,timezone:s}){const a=Ye();return x.useMemo(()=>{const o=a.dateWithTimezone(void 0,s),i=a.startOfMonth(r&&a.isAfter(o,n)?o:n);return!a.isBefore(i,t)},[r,n,t,a,s])}const hl=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],tg=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],rg=["minDateTime","maxDateTime"],ng=[...hl,...tg,...rg],ml=t=>ng.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{}),sg=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],ag=(t,r)=>{const n=B({},t),s={},a=o=>{n.hasOwnProperty(o)&&(s[o]=n[o],delete n[o])};return sg.forEach(a),hl.forEach(a),{forwardedProps:n,internalProps:s}},Ns=({props:t,value:r,adapter:n})=>{if(r===null)return null;const{shouldDisableDate:s,shouldDisableMonth:a,shouldDisableYear:o,disablePast:i,disableFuture:l,timezone:c}=t,d=n.utils.dateWithTimezone(void 0,c),u=kt(n.utils,t.minDate,n.defaultDates.minDate),f=kt(n.utils,t.maxDate,n.defaultDates.maxDate);switch(!0){case!n.utils.isValid(r):return"invalidDate";case!!(s&&s(r)):return"shouldDisableDate";case!!(a&&a(r)):return"shouldDisableMonth";case!!(o&&o(r)):return"shouldDisableYear";case!!(l&&n.utils.isAfterDay(r,d)):return"disableFuture";case!!(i&&n.utils.isBeforeDay(r,d)):return"disablePast";case!!(u&&n.utils.isBeforeDay(r,u)):return"minDate";case!!(f&&n.utils.isAfterDay(r,f)):return"maxDate";default:return null}};function og(t){return vt("MuiPickersDay",t)}const jr=bt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),ig=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],lg=t=>{const{selected:r,disableMargin:n,disableHighlightToday:s,today:a,disabled:o,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:c}=t,d=i&&!l;return pt({root:["root",r&&!d&&"selected",o&&"disabled",!n&&"dayWithMargin",!s&&a&&"today",i&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},og,c)},fl=({theme:t,ownerState:r})=>B({},t.typography.caption,{width:mn,height:mn,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Wr(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Wr(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${jr.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${jr.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${jr.disabled}:not(.${jr.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${jr.disabled}&.${jr.selected}`]:{opacity:.6}},!r.disableMargin&&{margin:`0 ${ks}px`},r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!r.disableHighlightToday&&r.today&&{[`&:not(.${jr.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}),pl=(t,r)=>{const{ownerState:n}=t;return[r.root,!n.disableMargin&&r.dayWithMargin,!n.disableHighlightToday&&n.today&&r.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&r.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&r.hiddenDaySpacingFiller]},cg=ke(Hl,{name:"MuiPickersDay",slot:"Root",overridesResolver:pl})(fl),dg=ke("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:pl})(({theme:t,ownerState:r})=>B({},fl({theme:t,ownerState:r}),{opacity:0,pointerEvents:"none"})),on=()=>{},ug=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiPickersDay"}),{autoFocus:a=!1,className:o,day:i,disabled:l=!1,disableHighlightToday:c=!1,disableMargin:d=!1,isAnimating:u,onClick:f,onDaySelect:p,onFocus:m=on,onBlur:g=on,onKeyDown:v=on,onMouseDown:P=on,onMouseEnter:j=on,outsideCurrentMonth:w,selected:D=!1,showDaysOutsideCurrentMonth:y=!1,children:A,today:R=!1}=s,N=Fe(s,ig),_=B({},s,{autoFocus:a,disabled:l,disableHighlightToday:c,disableMargin:d,selected:D,showDaysOutsideCurrentMonth:y,today:R}),E=lg(_),k=Ye(),T=x.useRef(null),C=Nr(T,n);$r(()=>{a&&!l&&!u&&!w&&T.current.focus()},[a,l,u,w]);const V=I=>{P(I),w&&I.preventDefault()},F=I=>{l||p(i),w&&I.currentTarget.focus(),f&&f(I)};return w&&!y?e.jsx(dg,{className:ht(E.root,E.hiddenDaySpacingFiller,o),ownerState:_,role:N.role}):e.jsx(cg,B({className:ht(E.root,o),ref:C,centerRipple:!0,disabled:l,tabIndex:D?0:-1,onKeyDown:I=>v(I,i),onFocus:I=>m(I,i),onBlur:I=>g(I,i),onMouseEnter:I=>j(I,i),onClick:F,onMouseDown:V},N,{ownerState:_,children:A||k.format(i,"dayOfMonth")}))}),hg=x.memo(ug),mg=t=>vt("MuiPickersSlideTransition",t),St=bt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),fg=["children","className","reduceAnimations","slideDirection","transKey","classes"],pg=t=>{const{classes:r,slideDirection:n}=t,s={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return pt(s,mg,r)},xg=ke(Io,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,r)=>[r.root,{[`.${St["slideEnter-left"]}`]:r["slideEnter-left"]},{[`.${St["slideEnter-right"]}`]:r["slideEnter-right"]},{[`.${St.slideEnterActive}`]:r.slideEnterActive},{[`.${St.slideExit}`]:r.slideExit},{[`.${St["slideExitActiveLeft-left"]}`]:r["slideExitActiveLeft-left"]},{[`.${St["slideExitActiveLeft-right"]}`]:r["slideExitActiveLeft-right"]}]})(({theme:t})=>{const r=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${St["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${St["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${St.slideEnterActive}`]:{transform:"translate(0%)",transition:r},[`& .${St.slideExit}`]:{transform:"translate(0%)"},[`& .${St["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:r,zIndex:0},[`& .${St["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:r,zIndex:0}}});function gg(t){const r=ct({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:s,reduceAnimations:a,transKey:o}=r,i=Fe(r,fg),l=pg(r),c=Er();if(a)return e.jsx("div",{className:ht(l.root,s),children:n});const d={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return e.jsx(xg,{className:ht(l.root,s),childFactory:u=>x.cloneElement(u,{classNames:d}),role:"presentation",children:e.jsx(zl,B({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:d},i,{children:n}),o)})}const xl=({shouldDisableDate:t,shouldDisableMonth:r,shouldDisableYear:n,minDate:s,maxDate:a,disableFuture:o,disablePast:i,timezone:l})=>{const c=Ir();return x.useCallback(d=>Ns({adapter:c,value:d,props:{shouldDisableDate:t,shouldDisableMonth:r,shouldDisableYear:n,minDate:s,maxDate:a,disableFuture:o,disablePast:i,timezone:l}})!==null,[c,t,r,n,s,a,o,i,l])},yg=t=>vt("MuiDayCalendar",t);bt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const vg=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],bg=["ownerState"],jg=t=>{const{classes:r}=t;return pt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},yg,r)},gl=(mn+ks*2)*6,wg=ke("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),Cg=ke("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(t,r)=>r.header})({display:"flex",justifyContent:"center",alignItems:"center"}),Tg=ke(h,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(t,r)=>r.weekDayLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),Pg=ke(h,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(t,r)=>r.weekNumberLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled})),Sg=ke(h,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(t,r)=>r.weekNumber})(({theme:t})=>B({},t.typography.caption,{width:mn,height:mn,padding:0,margin:`0 ${ks}px`,color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Dg=ke("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(t,r)=>r.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:gl}),kg=ke(gg,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(t,r)=>r.slideTransition})({minHeight:gl}),Ag=ke("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(t,r)=>r.monthContainer})({overflow:"hidden"}),Ng=ke("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(t,r)=>r.weekContainer})({margin:`${ks}px 0`,display:"flex",justifyContent:"center"});function Mg(t){var r,n,s;let{parentProps:a,day:o,focusableDay:i,selectedDays:l,isDateDisabled:c,currentMonthNumber:d,isViewFocused:u}=t,f=Fe(t,vg);const{disabled:p,disableHighlightToday:m,isMonthSwitchingAnimating:g,showDaysOutsideCurrentMonth:v,components:P,componentsProps:j,slots:w,slotProps:D,timezone:y}=a,A=Ye(),R=Ds(y),N=i!==null&&A.isSameDay(o,i),_=l.some(W=>A.isSameDay(W,o)),E=A.isSameDay(o,R),k=(r=(n=w==null?void 0:w.day)!=null?n:P==null?void 0:P.Day)!=null?r:hg,T=it({elementType:k,externalSlotProps:(s=D==null?void 0:D.day)!=null?s:j==null?void 0:j.day,additionalProps:B({disableHighlightToday:m,showDaysOutsideCurrentMonth:v,role:"gridcell",isAnimating:g,"data-timestamp":A.toJsDate(o).valueOf()},f),ownerState:B({},a,{day:o,selected:_})}),C=Fe(T,bg),V=x.useMemo(()=>p||c(o),[p,c,o]),F=x.useMemo(()=>A.getMonth(o)!==d,[A,o,d]),I=x.useMemo(()=>{const W=A.startOfMonth(A.setMonth(o,d));return v?A.isSameDay(o,A.startOfWeek(W)):A.isSameDay(o,W)},[d,o,v,A]),K=x.useMemo(()=>{const W=A.endOfMonth(A.setMonth(o,d));return v?A.isSameDay(o,A.endOfWeek(W)):A.isSameDay(o,W)},[d,o,v,A]);return e.jsx(k,B({},C,{day:o,disabled:V,autoFocus:u&&N,today:E,outsideCurrentMonth:F,isFirstVisibleCell:I,isLastVisibleCell:K,selected:_,tabIndex:N?0:-1,"aria-selected":_,"aria-current":E?"date":void 0}))}function Rg(t){const r=ct({props:t,name:"MuiDayCalendar"}),{onFocusedDayChange:n,className:s,currentMonth:a,selectedDays:o,focusedDay:i,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:u,reduceAnimations:f,renderLoading:p=()=>e.jsx("span",{children:"..."}),slideDirection:m,TransitionProps:g,disablePast:v,disableFuture:P,minDate:j,maxDate:w,shouldDisableDate:D,shouldDisableMonth:y,shouldDisableYear:A,dayOfWeekFormatter:R,hasFocus:N,onFocusedViewChange:_,gridLabelId:E,displayWeekNumber:k,fixedWeekNumber:T,autoFocus:C,timezone:V}=r,F=Ds(V),I=Ye(),K=jg(r),O=Er().direction==="rtl",L=R||((oe,we)=>I.format(we,"weekdayShort").charAt(0).toUpperCase()),q=xl({shouldDisableDate:D,shouldDisableMonth:y,shouldDisableYear:A,minDate:j,maxDate:w,disablePast:v,disableFuture:P,timezone:V}),me=vr(),[ye,re]=pr({name:"DayCalendar",state:"hasFocus",controlled:N,default:C??!1}),[S,Y]=x.useState(()=>i||F),pe=ge(oe=>{u||c(oe)}),Q=oe=>{q(oe)||(n(oe),Y(oe),_==null||_(!0),re(!0))},se=ge((oe,we)=>{switch(oe.key){case"ArrowUp":Q(I.addDays(we,-7)),oe.preventDefault();break;case"ArrowDown":Q(I.addDays(we,7)),oe.preventDefault();break;case"ArrowLeft":{const H=I.addDays(we,O?1:-1),Z=I.addMonths(we,O?1:-1),Pe=un({utils:I,date:H,minDate:O?H:I.startOfMonth(Z),maxDate:O?I.endOfMonth(Z):H,isDateDisabled:q,timezone:V});Q(Pe||H),oe.preventDefault();break}case"ArrowRight":{const H=I.addDays(we,O?-1:1),Z=I.addMonths(we,O?-1:1),Pe=un({utils:I,date:H,minDate:O?I.startOfMonth(Z):H,maxDate:O?H:I.endOfMonth(Z),isDateDisabled:q,timezone:V});Q(Pe||H),oe.preventDefault();break}case"Home":Q(I.startOfWeek(we)),oe.preventDefault();break;case"End":Q(I.endOfWeek(we)),oe.preventDefault();break;case"PageUp":Q(I.addMonths(we,1)),oe.preventDefault();break;case"PageDown":Q(I.addMonths(we,-1)),oe.preventDefault();break}}),le=ge((oe,we)=>Q(we)),je=ge((oe,we)=>{ye&&I.isSameDay(S,we)&&(_==null||_(!1))}),ue=I.getMonth(a),xe=x.useMemo(()=>o.filter(oe=>!!oe).map(oe=>I.startOfDay(oe)),[I,o]),J=ue,be=x.useMemo(()=>x.createRef(),[J]),We=I.startOfWeek(F),Ue=x.useMemo(()=>{const oe=I.startOfMonth(a),we=I.endOfMonth(a);return q(S)||I.isAfterDay(S,we)||I.isBeforeDay(S,oe)?un({utils:I,date:S,minDate:oe,maxDate:we,disablePast:v,disableFuture:P,isDateDisabled:q,timezone:V}):S},[a,P,v,S,q,I,V]),lt=x.useMemo(()=>{const oe=I.setTimezone(a,V),we=I.getWeekArray(oe);let H=I.addMonths(oe,1);for(;T&&we.length<T;){const Z=I.getWeekArray(H),Pe=I.isSameDay(we[we.length-1][0],Z[0][0]);Z.slice(Pe?1:0).forEach(Le=>{we.length<T&&we.push(Le)}),H=I.addMonths(H,1)}return we},[a,T,I,V]);return e.jsxs(wg,{role:"grid","aria-labelledby":E,className:K.root,children:[e.jsxs(Cg,{role:"row",className:K.header,children:[k&&e.jsx(Pg,{variant:"caption",role:"columnheader","aria-label":me.calendarWeekNumberHeaderLabel,className:K.weekNumberLabel,children:me.calendarWeekNumberHeaderText}),bp(I,F).map((oe,we)=>{var H;const Z=I.format(oe,"weekdayShort");return e.jsx(Tg,{variant:"caption",role:"columnheader","aria-label":I.format(I.addDays(We,we),"weekday"),className:K.weekDayLabel,children:(H=L==null?void 0:L(Z,oe))!=null?H:Z},Z+we.toString())})]}),l?e.jsx(Dg,{className:K.loadingContainer,children:p()}):e.jsx(kg,B({transKey:J,onExited:d,reduceAnimations:f,slideDirection:m,className:ht(s,K.slideTransition)},g,{nodeRef:be,children:e.jsx(Ag,{ref:be,role:"rowgroup",className:K.monthContainer,children:lt.map((oe,we)=>e.jsxs(Ng,{role:"row",className:K.weekContainer,"aria-rowindex":we+1,children:[k&&e.jsx(Sg,{className:K.weekNumber,role:"rowheader","aria-label":me.calendarWeekNumberAriaLabelText(I.getWeekNumber(oe[0])),children:me.calendarWeekNumberText(I.getWeekNumber(oe[0]))}),oe.map((H,Z)=>e.jsx(Mg,{parentProps:r,day:H,selectedDays:xe,focusableDay:Ue,onKeyDown:se,onFocus:le,onBlur:je,onDaySelect:pe,isDateDisabled:q,currentMonthNumber:ue,isViewFocused:ye,"aria-colindex":Z+1},H.toString()))]},`week-${oe[0]}`))})}))]})}const Eg=(t,r,n)=>(s,a)=>{switch(a.type){case"changeMonth":return B({},s,{slideDirection:a.direction,currentMonth:a.newMonth,isMonthSwitchingAnimating:!t});case"finishMonthSwitchingAnimation":return B({},s,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(s.focusedDay!=null&&a.focusedDay!=null&&n.isSameDay(a.focusedDay,s.focusedDay))return s;const o=a.focusedDay!=null&&!r&&!n.isSameMonth(s.currentMonth,a.focusedDay);return B({},s,{focusedDay:a.focusedDay,isMonthSwitchingAnimating:o&&!t&&!a.withoutMonthSwitchingAnimation,currentMonth:o?n.startOfMonth(a.focusedDay):s.currentMonth,slideDirection:a.focusedDay!=null&&n.isAfterDay(a.focusedDay,s.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},Ig=t=>{const{value:r,referenceDate:n,defaultCalendarMonth:s,disableFuture:a,disablePast:o,disableSwitchToMonthOnDayFocus:i=!1,maxDate:l,minDate:c,onMonthChange:d,reduceAnimations:u,shouldDisableDate:f,timezone:p}=t,m=Ye(),g=x.useRef(Eg(!!u,i,m)).current,v=x.useMemo(()=>{let N=null;return n?N=n:s&&(N=m.startOfMonth(s)),sr.getInitialReferenceValue({value:r,utils:m,timezone:p,props:t,referenceDate:N,granularity:Lt.day})},[]),[P,j]=x.useReducer(g,{isMonthSwitchingAnimating:!1,focusedDay:v,currentMonth:m.startOfMonth(v),slideDirection:"left"}),w=x.useCallback(N=>{j(B({type:"changeMonth"},N)),d&&d(N.newMonth)},[d]),D=x.useCallback(N=>{const _=N;m.isSameMonth(_,P.currentMonth)||w({newMonth:m.startOfMonth(_),direction:m.isAfterDay(_,P.currentMonth)?"left":"right"})},[P.currentMonth,w,m]),y=xl({shouldDisableDate:f,minDate:c,maxDate:l,disableFuture:a,disablePast:o,timezone:p}),A=x.useCallback(()=>{j({type:"finishMonthSwitchingAnimation"})},[]),R=ge((N,_)=>{y(N)||j({type:"changeFocusedDay",focusedDay:N,withoutMonthSwitchingAnimation:_})});return{referenceDate:v,calendarState:P,changeMonth:D,changeFocusedDay:R,isDateDisabled:y,onMonthSwitchingAnimationEnd:A,handleChangeMonth:w}},Og=["props","getOpenDialogAriaText"],_g=["ownerState"],Fg=["ownerState"],Lg=t=>{var r,n,s,a,o;let{props:i,getOpenDialogAriaText:l}=t,c=Fe(t,Og);const{slots:d,slotProps:u,className:f,sx:p,format:m,formatDensity:g,timezone:v,name:P,label:j,inputRef:w,readOnly:D,disabled:y,autoFocus:A,localeText:R,reduceAnimations:N}=i,_=Ye(),E=x.useRef(null),k=x.useRef(null),T=pa(),C=(r=u==null||(n=u.toolbar)==null?void 0:n.hidden)!=null?r:!1,{open:V,actions:F,hasUIView:I,layoutProps:K,renderCurrentView:W,shouldRestoreFocus:O,fieldProps:L}=ll(B({},c,{props:i,inputRef:E,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),q=(s=d.inputAdornment)!=null?s:xa,me=it({elementType:q,externalSlotProps:u==null?void 0:u.inputAdornment,additionalProps:{position:"end"},ownerState:i}),ye=Fe(me,_g),re=(a=d.openPickerButton)!=null?a:Et,S=it({elementType:re,externalSlotProps:u==null?void 0:u.openPickerButton,additionalProps:{disabled:y||D,onClick:V?F.onClose:F.onOpen,"aria-label":l(L.value,_),edge:ye.position},ownerState:i}),Y=Fe(S,Fg),pe=d.openPickerIcon,Q=d.field,se=it({elementType:Q,externalSlotProps:u==null?void 0:u.field,additionalProps:B({},L,C&&{id:T},{readOnly:D,disabled:y,className:f,sx:p,format:m,formatDensity:g,timezone:v,label:j,name:P,autoFocus:A&&!i.open,focused:V?!0:void 0}),ownerState:i});I&&(se.InputProps=B({},se.InputProps,{ref:k},!i.disableOpenPicker&&{[`${ye.position}Adornment`]:e.jsx(q,B({},ye,{children:e.jsx(re,B({},Y,{children:e.jsx(pe,B({},u==null?void 0:u.openPickerIcon))}))}))}));const le=B({textField:d.textField,clearIcon:d.clearIcon,clearButton:d.clearButton},se.slots),je=(o=d.layout)!=null?o:ul,ue=Nr(E,se.inputRef,w);let xe=T;C&&(j?xe=`${T}-label`:xe=void 0);const J=B({},u,{toolbar:B({},u==null?void 0:u.toolbar,{titleId:T}),popper:B({"aria-labelledby":xe},u==null?void 0:u.popper)});return{renderPicker:()=>e.jsxs(Qt,{localeText:R,children:[e.jsx(Q,B({},se,{slots:le,slotProps:J,inputRef:ue})),e.jsx(kx,B({role:"dialog",placement:"bottom-start",anchorEl:k.current},F,{open:V,slots:d,slotProps:J,shouldRestoreFocus:O,reduceAnimations:N,children:e.jsx(je,B({},K,J==null?void 0:J.layout,{slots:d,slotProps:J,children:W()}))}))]})}},Vg=t=>{var r,n,s;const a=Ye(),o=Tn();return B({},t,{disablePast:(r=t.disablePast)!=null?r:!1,disableFuture:(n=t.disableFuture)!=null?n:!1,format:(s=t.format)!=null?s:a.formats.keyboardDate,minDate:kt(a,t.minDate,o.minDate),maxDate:kt(a,t.maxDate,o.maxDate)})},Ug=({props:t,inputRef:r})=>{const n=Vg(t),{forwardedProps:s,internalProps:a}=ag(n);return Ex({inputRef:r,forwardedProps:s,internalProps:a,valueManager:sr,fieldValueManager:Fp,validator:Ns})},Bg=["ownerState"],$g=({clearable:t,fieldProps:r,InputProps:n,onClear:s,slots:a,slotProps:o,components:i,componentsProps:l})=>{var c,d,u,f,p,m;const g=vr(),v=(c=(d=a==null?void 0:a.clearButton)!=null?d:i==null?void 0:i.ClearButton)!=null?c:Et,P=it({elementType:v,externalSlotProps:(u=o==null?void 0:o.clearButton)!=null?u:l==null?void 0:l.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:g.fieldClearLabel}}),j=Fe(P,Bg),w=(f=(p=a==null?void 0:a.clearIcon)!=null?p:i==null?void 0:i.ClearIcon)!=null?f:rx,D=it({elementType:w,externalSlotProps:(m=o==null?void 0:o.clearIcon)!=null?m:l==null?void 0:l.clearIcon,ownerState:{}}),y=B({},n,{endAdornment:e.jsxs(x.Fragment,{children:[t&&e.jsx(xa,{position:"end",sx:{marginRight:n!=null&&n.endAdornment?-1:-1.5},children:e.jsx(v,B({},j,{onClick:s,children:e.jsx(w,B({fontSize:"small"},D))}))}),n==null?void 0:n.endAdornment]})}),A=B({},r,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(r.sx)?r.sx:[r.sx]]});return{InputProps:y,fieldProps:A}},Wg=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Hg=["inputRef"],zg=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],yl=x.forwardRef(function(r,n){var s,a,o;const i=ct({props:r,name:"MuiDateField"}),{components:l,componentsProps:c,slots:d,slotProps:u,InputProps:f,inputProps:p}=i,m=Fe(i,Wg),g=i,v=(s=(a=d==null?void 0:d.textField)!=null?a:l==null?void 0:l.TextField)!=null?s:$e,P=it({elementType:v,externalSlotProps:(o=u==null?void 0:u.textField)!=null?o:c==null?void 0:c.textField,externalForwardedProps:m,ownerState:g}),{inputRef:j}=P,w=Fe(P,Hg);w.inputProps=B({},p,w.inputProps),w.InputProps=B({},f,w.InputProps);const D=Ug({props:w,inputRef:j}),{ref:y,onPaste:A,onKeyDown:R,inputMode:N,readOnly:_,clearable:E,onClear:k}=D,T=Fe(D,zg),{InputProps:C,fieldProps:V}=$g({onClear:k,clearable:E,fieldProps:T,InputProps:T.InputProps,slots:d,slotProps:u,components:l,componentsProps:c});return e.jsx(v,B({ref:n},V,{InputProps:B({},C,{readOnly:_}),inputProps:B({},T.inputProps,{inputMode:N,onPaste:A,onKeyDown:R,ref:y})}))}),Yg=t=>vt("MuiPickersFadeTransitionGroup",t);bt("MuiPickersFadeTransitionGroup",["root"]);const qg=t=>{const{classes:r}=t;return pt({root:["root"]},Yg,r)},Qg=ke(Io,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"block",position:"relative"});function vl(t){const r=ct({props:t,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:s,reduceAnimations:a,transKey:o}=r,i=qg(r),l=Er();return a?n:e.jsx(Qg,{className:ht(i.root,s),children:e.jsx(os,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:n},o)})}function Kg(t){return vt("MuiPickersMonth",t)}const Rn=bt("MuiPickersMonth",["root","monthButton","disabled","selected"]),Gg=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],Zg=t=>{const{disabled:r,selected:n,classes:s}=t;return pt({root:["root"],monthButton:["monthButton",r&&"disabled",n&&"selected"]},Kg,s)},Xg=ke("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(t,r)=>[r.root]})(({ownerState:t})=>({flexBasis:t.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Jg=ke("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(t,r)=>[r.monthButton,{[`&.${Rn.disabled}`]:r.disabled},{[`&.${Rn.selected}`]:r.selected}]})(({theme:t})=>B({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Wr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Wr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Rn.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Rn.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),ey=x.memo(function(r){const n=ct({props:r,name:"MuiPickersMonth"}),{autoFocus:s,children:a,disabled:o,selected:i,value:l,tabIndex:c,onClick:d,onKeyDown:u,onFocus:f,onBlur:p,"aria-current":m,"aria-label":g}=n,v=Fe(n,Gg),P=x.useRef(null),j=Zg(n);return $r(()=>{if(s){var w;(w=P.current)==null||w.focus()}},[s]),e.jsx(Xg,B({className:j.root,ownerState:n},v,{children:e.jsx(Jg,{ref:P,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":m,"aria-checked":i,"aria-label":g,onClick:w=>d(w,l),onKeyDown:w=>u(w,l),onFocus:w=>f(w,l),onBlur:w=>p(w,l),className:j.monthButton,ownerState:n,children:a})}))});function ty(t){return vt("MuiMonthCalendar",t)}bt("MuiMonthCalendar",["root"]);const ry=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],ny=t=>{const{classes:r}=t;return pt({root:["root"]},ty,r)};function sy(t,r){const n=Ye(),s=Tn(),a=ct({props:t,name:r});return B({disableFuture:!1,disablePast:!1},a,{minDate:kt(n,a.minDate,s.minDate),maxDate:kt(n,a.maxDate,s.maxDate)})}const ay=ke("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:As,boxSizing:"border-box"}),oy=x.forwardRef(function(r,n){const s=sy(r,"MuiMonthCalendar"),{className:a,value:o,defaultValue:i,referenceDate:l,disabled:c,disableFuture:d,disablePast:u,maxDate:f,minDate:p,onChange:m,shouldDisableMonth:g,readOnly:v,disableHighlightToday:P,autoFocus:j=!1,onMonthFocus:w,hasFocus:D,onFocusedViewChange:y,monthsPerRow:A=3,timezone:R,gridLabelId:N}=s,_=Fe(s,ry),{value:E,handleValueChange:k,timezone:T}=Ea({name:"MonthCalendar",timezone:R,value:o,defaultValue:i,onChange:m,valueManager:sr}),C=Ds(T),V=Oo(),F=Ye(),I=x.useMemo(()=>sr.getInitialReferenceValue({value:E,utils:F,props:s,timezone:T,referenceDate:l,granularity:Lt.month}),[]),K=s,W=ny(K),O=x.useMemo(()=>F.getMonth(C),[F,C]),L=x.useMemo(()=>E!=null?F.getMonth(E):P?null:F.getMonth(I),[E,F,P,I]),[q,me]=x.useState(()=>L||O),[ye,re]=pr({name:"MonthCalendar",state:"hasFocus",controlled:D,default:j??!1}),S=ge(ue=>{re(ue),y&&y(ue)}),Y=x.useCallback(ue=>{const xe=F.startOfMonth(u&&F.isAfter(C,p)?C:p),J=F.startOfMonth(d&&F.isBefore(C,f)?C:f),be=F.startOfMonth(ue);return F.isBefore(be,xe)||F.isAfter(be,J)?!0:g?g(be):!1},[d,u,f,p,C,g,F]),pe=ge((ue,xe)=>{if(v)return;const J=F.setMonth(E??I,xe);k(J)}),Q=ge(ue=>{Y(F.setMonth(E??I,ue))||(me(ue),S(!0),w&&w(ue))});x.useEffect(()=>{me(ue=>L!==null&&ue!==L?L:ue)},[L]);const se=ge((ue,xe)=>{switch(ue.key){case"ArrowUp":Q((12+xe-3)%12),ue.preventDefault();break;case"ArrowDown":Q((12+xe+3)%12),ue.preventDefault();break;case"ArrowLeft":Q((12+xe+(V.direction==="ltr"?-1:1))%12),ue.preventDefault();break;case"ArrowRight":Q((12+xe+(V.direction==="ltr"?1:-1))%12),ue.preventDefault();break}}),le=ge((ue,xe)=>{Q(xe)}),je=ge((ue,xe)=>{q===xe&&S(!1)});return e.jsx(ay,B({ref:n,className:ht(W.root,a),ownerState:K,role:"radiogroup","aria-labelledby":N},_,{children:ka(F,E??I).map(ue=>{const xe=F.getMonth(ue),J=F.format(ue,"monthShort"),be=F.format(ue,"month"),We=xe===L,Ue=c||Y(ue);return e.jsx(ey,{selected:We,value:xe,onClick:pe,onKeyDown:se,autoFocus:ye&&xe===q,disabled:Ue,tabIndex:xe===q?0:-1,onFocus:le,onBlur:je,"aria-current":O===xe?"date":void 0,"aria-label":be,monthsPerRow:A,children:J},J)})}))});function iy(t){return vt("MuiPickersYear",t)}const En=bt("MuiPickersYear",["root","yearButton","selected","disabled"]),ly=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],cy=t=>{const{disabled:r,selected:n,classes:s}=t;return pt({root:["root"],yearButton:["yearButton",r&&"disabled",n&&"selected"]},iy,s)},dy=ke("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(t,r)=>[r.root]})(({ownerState:t})=>({flexBasis:t.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),uy=ke("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(t,r)=>[r.yearButton,{[`&.${En.disabled}`]:r.disabled},{[`&.${En.selected}`]:r.selected}]})(({theme:t})=>B({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:Wr(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Wr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${En.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${En.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),hy=x.memo(function(r){const n=ct({props:r,name:"MuiPickersYear"}),{autoFocus:s,className:a,children:o,disabled:i,selected:l,value:c,tabIndex:d,onClick:u,onKeyDown:f,onFocus:p,onBlur:m,"aria-current":g}=n,v=Fe(n,ly),P=x.useRef(null),j=cy(n);return x.useEffect(()=>{s&&P.current.focus()},[s]),e.jsx(dy,B({className:ht(j.root,a),ownerState:n},v,{children:e.jsx(uy,{ref:P,disabled:i,type:"button",role:"radio",tabIndex:i?-1:d,"aria-current":g,"aria-checked":l,onClick:w=>u(w,c),onKeyDown:w=>f(w,c),onFocus:w=>p(w,c),onBlur:w=>m(w,c),className:j.yearButton,ownerState:n,children:o})}))});function my(t){return vt("MuiYearCalendar",t)}bt("MuiYearCalendar",["root"]);const fy=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],py=t=>{const{classes:r}=t;return pt({root:["root"]},my,r)};function xy(t,r){var n;const s=Ye(),a=Tn(),o=ct({props:t,name:r});return B({disablePast:!1,disableFuture:!1},o,{yearsPerRow:(n=o.yearsPerRow)!=null?n:3,minDate:kt(s,o.minDate,a.minDate),maxDate:kt(s,o.maxDate,a.maxDate)})}const gy=ke("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:As,maxHeight:ux,boxSizing:"border-box",position:"relative"}),yy=x.forwardRef(function(r,n){const s=xy(r,"MuiYearCalendar"),{autoFocus:a,className:o,value:i,defaultValue:l,referenceDate:c,disabled:d,disableFuture:u,disablePast:f,maxDate:p,minDate:m,onChange:g,readOnly:v,shouldDisableYear:P,disableHighlightToday:j,onYearFocus:w,hasFocus:D,onFocusedViewChange:y,yearsPerRow:A,timezone:R,gridLabelId:N}=s,_=Fe(s,fy),{value:E,handleValueChange:k,timezone:T}=Ea({name:"YearCalendar",timezone:R,value:i,defaultValue:l,onChange:g,valueManager:sr}),C=Ds(T),V=Oo(),F=Ye(),I=x.useMemo(()=>sr.getInitialReferenceValue({value:E,utils:F,props:s,timezone:T,referenceDate:c,granularity:Lt.year}),[]),K=s,W=py(K),O=x.useMemo(()=>F.getYear(C),[F,C]),L=x.useMemo(()=>E!=null?F.getYear(E):j?null:F.getYear(I),[E,F,j,I]),[q,me]=x.useState(()=>L||O),[ye,re]=pr({name:"YearCalendar",state:"hasFocus",controlled:D,default:a??!1}),S=ge(J=>{re(J),y&&y(J)}),Y=x.useCallback(J=>{if(f&&F.isBeforeYear(J,C)||u&&F.isAfterYear(J,C)||m&&F.isBeforeYear(J,m)||p&&F.isAfterYear(J,p))return!0;if(!P)return!1;const be=F.startOfYear(J);return P(be)},[u,f,p,m,C,P,F]),pe=ge((J,be)=>{if(v)return;const We=F.setYear(E??I,be);k(We)}),Q=ge(J=>{Y(F.setYear(E??I,J))||(me(J),S(!0),w==null||w(J))});x.useEffect(()=>{me(J=>L!==null&&J!==L?L:J)},[L]);const se=ge((J,be)=>{switch(J.key){case"ArrowUp":Q(be-A),J.preventDefault();break;case"ArrowDown":Q(be+A),J.preventDefault();break;case"ArrowLeft":Q(be+(V.direction==="ltr"?-1:1)),J.preventDefault();break;case"ArrowRight":Q(be+(V.direction==="ltr"?1:-1)),J.preventDefault();break}}),le=ge((J,be)=>{Q(be)}),je=ge((J,be)=>{q===be&&S(!1)}),ue=x.useRef(null),xe=Nr(n,ue);return x.useEffect(()=>{if(a||ue.current===null)return;const J=ue.current.querySelector('[tabindex="0"]');if(!J)return;const be=J.offsetHeight,We=J.offsetTop,Ue=ue.current.clientHeight,lt=ue.current.scrollTop,oe=We+be;be>Ue||We<lt||(ue.current.scrollTop=oe-Ue/2-be/2)},[a]),e.jsx(gy,B({ref:xe,className:ht(W.root,o),ownerState:K,role:"radiogroup","aria-labelledby":N},_,{children:F.getYearRange(m,p).map(J=>{const be=F.getYear(J),We=be===L,Ue=d||Y(J);return e.jsx(hy,{selected:We,value:be,onClick:pe,onKeyDown:se,autoFocus:ye&&be===q,disabled:Ue,tabIndex:be===q?0:-1,onFocus:le,onBlur:je,"aria-current":O===be?"date":void 0,yearsPerRow:A,children:F.format(J,"year")},F.format(J,"year"))})}))}),vy=t=>vt("MuiPickersCalendarHeader",t),by=bt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),jy=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],wy=["ownerState"],Cy=t=>{const{classes:r}=t;return pt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},vy,r)},Ty=ke("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),Py=ke("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(t,r)=>r.labelContainer})(({theme:t})=>B({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),Sy=ke("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(t,r)=>r.label})({marginRight:6}),Dy=ke(Et,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(t,r)=>r.switchViewButton})(({ownerState:t})=>B({marginRight:"auto"},t.view==="year"&&{[`.${by.switchViewIcon}`]:{transform:"rotate(180deg)"}})),ky=ke(Xp,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(t,r)=>r.switchViewIcon})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),Ay=x.forwardRef(function(r,n){var s,a,o,i;const l=vr(),c=Ye(),d=ct({props:r,name:"MuiPickersCalendarHeader"}),{slots:u,slotProps:f,components:p,currentMonth:m,disabled:g,disableFuture:v,disablePast:P,maxDate:j,minDate:w,onMonthChange:D,onViewChange:y,view:A,reduceAnimations:R,views:N,labelId:_,className:E,timezone:k}=d,T=Fe(d,jy),C=d,V=Cy(d),F=(s=(a=u==null?void 0:u.switchViewButton)!=null?a:p==null?void 0:p.SwitchViewButton)!=null?s:Dy,I=it({elementType:F,externalSlotProps:f==null?void 0:f.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(A)},ownerState:C,className:V.switchViewButton}),K=(o=(i=u==null?void 0:u.switchViewIcon)!=null?i:p==null?void 0:p.SwitchViewIcon)!=null?o:ky,W=it({elementType:K,externalSlotProps:f==null?void 0:f.switchViewIcon,ownerState:void 0,className:V.switchViewIcon}),O=Fe(W,wy),L=()=>D(c.addMonths(m,1),"left"),q=()=>D(c.addMonths(m,-1),"right"),me=Jx(m,{disableFuture:v,maxDate:j,timezone:k}),ye=eg(m,{disablePast:P,minDate:w,timezone:k}),re=()=>{if(!(N.length===1||!y||g))if(N.length===2)y(N.find(S=>S!==A)||N[0]);else{const S=N.indexOf(A)!==0?0:1;y(N[S])}};return N.length===1&&N[0]==="year"?null:e.jsxs(Ty,B({},T,{ownerState:C,className:ht(E,V.root),ref:n,children:[e.jsxs(Py,{role:"presentation",onClick:re,ownerState:C,"aria-live":"polite",className:V.labelContainer,children:[e.jsx(vl,{reduceAnimations:R,transKey:c.format(m,"monthAndYear"),children:e.jsx(Sy,{id:_,ownerState:C,className:V.label,children:c.format(m,"monthAndYear")})}),N.length>1&&!g&&e.jsx(F,B({},I,{children:e.jsx(K,B({},O))}))]}),e.jsx(os,{in:A==="day",children:e.jsx(dx,{slots:u,slotProps:f,onGoToPrevious:q,isPreviousDisabled:ye,previousLabel:l.previousMonth,onGoToNext:L,isNextDisabled:me,nextLabel:l.nextMonth})})]}))}),Ny=ke("div")({overflow:"hidden",width:As,maxHeight:Ma,display:"flex",flexDirection:"column",margin:"0 auto"}),My=t=>vt("MuiDateCalendar",t);bt("MuiDateCalendar",["root","viewTransitionContainer"]);const Ry=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],Ey=t=>{const{classes:r}=t;return pt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},My,r)};function Iy(t,r){var n,s,a,o,i,l,c;const d=Ye(),u=Tn(),f=al(),p=ct({props:t,name:r});return B({},p,{loading:(n=p.loading)!=null?n:!1,disablePast:(s=p.disablePast)!=null?s:!1,disableFuture:(a=p.disableFuture)!=null?a:!1,openTo:(o=p.openTo)!=null?o:"day",views:(i=p.views)!=null?i:["year","day"],reduceAnimations:(l=p.reduceAnimations)!=null?l:f,renderLoading:(c=p.renderLoading)!=null?c:()=>e.jsx("span",{children:"..."}),minDate:kt(d,p.minDate,u.minDate),maxDate:kt(d,p.maxDate,u.maxDate)})}const Oy=ke(Ny,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexDirection:"column",height:Ma}),_y=ke(vl,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(t,r)=>r.viewTransitionContainer})({}),Fy=x.forwardRef(function(r,n){var s,a,o;const i=Ye(),l=pa(),c=Iy(r,"MuiDateCalendar"),{autoFocus:d,onViewChange:u,value:f,defaultValue:p,referenceDate:m,disableFuture:g,disablePast:v,defaultCalendarMonth:P,onChange:j,onYearChange:w,onMonthChange:D,reduceAnimations:y,shouldDisableDate:A,shouldDisableMonth:R,shouldDisableYear:N,view:_,views:E,openTo:k,className:T,disabled:C,readOnly:V,minDate:F,maxDate:I,disableHighlightToday:K,focusedView:W,onFocusedViewChange:O,showDaysOutsideCurrentMonth:L,fixedWeekNumber:q,dayOfWeekFormatter:me,components:ye,componentsProps:re,slots:S,slotProps:Y,loading:pe,renderLoading:Q,displayWeekNumber:se,yearsPerRow:le,monthsPerRow:je,timezone:ue}=c,xe=Fe(c,Ry),{value:J,handleValueChange:be,timezone:We}=Ea({name:"DateCalendar",timezone:ue,value:f,defaultValue:p,onChange:j,valueManager:sr}),{view:Ue,setView:lt,focusedView:oe,setFocusedView:we,goToNextView:H,setValueAndGoToNextView:Z}=il({view:_,views:E,openTo:k,onChange:be,onViewChange:u,autoFocus:d,focusedView:W,onFocusedViewChange:O}),{referenceDate:Pe,calendarState:Le,changeFocusedDay:G,changeMonth:ne,handleChangeMonth:Se,isDateDisabled:Re,onMonthSwitchingAnimationEnd:rt}=Ig({value:J,defaultCalendarMonth:P,referenceDate:m,reduceAnimations:y,onMonthChange:D,minDate:F,maxDate:I,shouldDisableDate:A,disablePast:v,disableFuture:g,timezone:We}),dt=C&&J||F,Yt=C&&J||I,lr=`${l}-grid-label`,br=oe!==null,Tt=(s=(a=S==null?void 0:S.calendarHeader)!=null?a:ye==null?void 0:ye.CalendarHeader)!=null?s:Ay,Ms=it({elementType:Tt,externalSlotProps:(o=Y==null?void 0:Y.calendarHeader)!=null?o:re==null?void 0:re.calendarHeader,additionalProps:{views:E,view:Ue,currentMonth:Le.currentMonth,onViewChange:lt,onMonthChange:(Ke,Ot)=>Se({newMonth:Ke,direction:Ot}),minDate:dt,maxDate:Yt,disabled:C,disablePast:v,disableFuture:g,reduceAnimations:y,timezone:We,labelId:lr,slots:S,slotProps:Y},ownerState:c}),Rs=ge(Ke=>{const Ot=i.startOfMonth(Ke),Zr=i.endOfMonth(Ke),cr=Re(Ke)?un({utils:i,date:Ke,minDate:i.isBefore(F,Ot)?Ot:F,maxDate:i.isAfter(I,Zr)?Zr:I,disablePast:v,disableFuture:g,isDateDisabled:Re,timezone:We}):Ke;cr?(Z(cr,"finish"),D==null||D(Ot)):(H(),ne(Ot)),G(cr,!0)}),Es=ge(Ke=>{const Ot=i.startOfYear(Ke),Zr=i.endOfYear(Ke),cr=Re(Ke)?un({utils:i,date:Ke,minDate:i.isBefore(F,Ot)?Ot:F,maxDate:i.isAfter(I,Zr)?Zr:I,disablePast:v,disableFuture:g,isDateDisabled:Re,timezone:We}):Ke;cr?(Z(cr,"finish"),w==null||w(cr)):(H(),ne(Ot)),G(cr,!0)}),Pn=ge(Ke=>be(Ke&&ts(i,Ke,J??Pe),"finish",Ue));x.useEffect(()=>{J!=null&&i.isValid(J)&&ne(J)},[J]);const Gr=c,Sn=Ey(Gr),Ee={disablePast:v,disableFuture:g,maxDate:I,minDate:F},fe={disableHighlightToday:K,readOnly:V,disabled:C,timezone:We,gridLabelId:lr},Is=x.useRef(Ue);x.useEffect(()=>{Is.current!==Ue&&(oe===Is.current&&we(Ue,!0),Is.current=Ue)},[oe,we,Ue]);const kl=x.useMemo(()=>[J],[J]);return e.jsxs(Oy,B({ref:n,className:ht(Sn.root,T),ownerState:Gr},xe,{children:[e.jsx(Tt,B({},Ms)),e.jsx(_y,{reduceAnimations:y,className:Sn.viewTransitionContainer,transKey:Ue,ownerState:Gr,children:e.jsxs("div",{children:[Ue==="year"&&e.jsx(yy,B({},Ee,fe,{value:J,onChange:Es,shouldDisableYear:N,hasFocus:br,onFocusedViewChange:Ke=>we("year",Ke),yearsPerRow:le,referenceDate:Pe})),Ue==="month"&&e.jsx(oy,B({},Ee,fe,{hasFocus:br,className:T,value:J,onChange:Rs,shouldDisableMonth:R,onFocusedViewChange:Ke=>we("month",Ke),monthsPerRow:je,referenceDate:Pe})),Ue==="day"&&e.jsx(Rg,B({},Le,Ee,fe,{onMonthSwitchingAnimationEnd:rt,onFocusedDayChange:G,reduceAnimations:y,selectedDays:kl,onSelectedDaysChange:Pn,shouldDisableDate:A,shouldDisableMonth:R,shouldDisableYear:N,hasFocus:br,onFocusedViewChange:Ke=>we("day",Ke),showDaysOutsideCurrentMonth:L,fixedWeekNumber:q,dayOfWeekFormatter:me,displayWeekNumber:se,components:ye,componentsProps:re,slots:S,slotProps:Y,loading:pe,renderLoading:Q}))]})})]}))}),Br=({view:t,onViewChange:r,views:n,focusedView:s,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:f,disablePast:p,minDate:m,maxDate:g,shouldDisableDate:v,shouldDisableMonth:P,shouldDisableYear:j,reduceAnimations:w,onMonthChange:D,monthsPerRow:y,onYearChange:A,yearsPerRow:R,defaultCalendarMonth:N,components:_,componentsProps:E,slots:k,slotProps:T,loading:C,renderLoading:V,disableHighlightToday:F,readOnly:I,disabled:K,showDaysOutsideCurrentMonth:W,dayOfWeekFormatter:O,sx:L,autoFocus:q,fixedWeekNumber:me,displayWeekNumber:ye,timezone:re})=>e.jsx(Fy,{view:t,onViewChange:r,views:n.filter(xo),focusedView:s&&xo(s)?s:null,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:f,disablePast:p,minDate:m,maxDate:g,shouldDisableDate:v,shouldDisableMonth:P,shouldDisableYear:j,reduceAnimations:w,onMonthChange:D,monthsPerRow:y,onYearChange:A,yearsPerRow:R,defaultCalendarMonth:N,components:_,componentsProps:E,slots:k,slotProps:T,loading:C,renderLoading:V,disableHighlightToday:F,readOnly:I,disabled:K,showDaysOutsideCurrentMonth:W,dayOfWeekFormatter:O,sx:L,autoFocus:q,fixedWeekNumber:me,displayWeekNumber:ye,timezone:re}),bl=x.forwardRef(function(r,n){var s,a,o,i;const l=vr(),c=Ye(),d=sl(r,"MuiDesktopDatePicker"),u=B({day:Br,month:Br,year:Br},d.viewRenderers),f=B({},d,{viewRenderers:u,format:Aa(c,d,!1),yearsPerRow:(s=d.yearsPerRow)!=null?s:4,slots:B({openPickerIcon:tx,field:yl},d.slots),slotProps:B({},d.slotProps,{field:m=>{var g;return B({},Da((g=d.slotProps)==null?void 0:g.field,m),ml(d),{ref:n})},toolbar:B({hidden:!0},(a=d.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:p}=Lg({props:f,valueManager:sr,valueType:"date",getOpenDialogAriaText:(o=(i=f.localeText)==null?void 0:i.openDatePickerDialogue)!=null?o:l.openDatePickerDialogue,validator:Ns});return p()});bl.propTypes={autoFocus:U.bool,className:U.string,closeOnSelect:U.bool,components:U.object,componentsProps:U.object,dayOfWeekFormatter:U.func,defaultCalendarMonth:U.any,defaultValue:U.any,disabled:U.bool,disableFuture:U.bool,disableHighlightToday:U.bool,disableOpenPicker:U.bool,disablePast:U.bool,displayWeekNumber:U.bool,fixedWeekNumber:U.number,format:U.string,formatDensity:U.oneOf(["dense","spacious"]),inputRef:_o,label:U.node,loading:U.bool,localeText:U.object,maxDate:U.any,minDate:U.any,monthsPerRow:U.oneOf([3,4]),name:U.string,onAccept:U.func,onChange:U.func,onClose:U.func,onError:U.func,onMonthChange:U.func,onOpen:U.func,onSelectedSectionsChange:U.func,onViewChange:U.func,onYearChange:U.func,open:U.bool,openTo:U.oneOf(["day","month","year"]),orientation:U.oneOf(["landscape","portrait"]),readOnly:U.bool,reduceAnimations:U.bool,referenceDate:U.any,renderLoading:U.func,selectedSections:U.oneOfType([U.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),U.number,U.shape({endIndex:U.number.isRequired,startIndex:U.number.isRequired})]),shouldDisableDate:U.func,shouldDisableMonth:U.func,shouldDisableYear:U.func,showDaysOutsideCurrentMonth:U.bool,slotProps:U.object,slots:U.object,sx:U.oneOfType([U.arrayOf(U.oneOfType([U.func,U.object,U.bool])),U.func,U.object]),timezone:U.string,value:U.any,view:U.oneOf(["day","month","year"]),viewRenderers:U.shape({day:U.func,month:U.func,year:U.func}),views:U.arrayOf(U.oneOf(["day","month","year"]).isRequired),yearsPerRow:U.oneOf([3,4])};const Ly=["props","getOpenDialogAriaText"],Vy=t=>{var r,n,s;let{props:a,getOpenDialogAriaText:o}=t,i=Fe(t,Ly);const{slots:l,slotProps:c,className:d,sx:u,format:f,formatDensity:p,timezone:m,name:g,label:v,inputRef:P,readOnly:j,disabled:w,localeText:D}=a,y=Ye(),A=x.useRef(null),R=pa(),N=(r=c==null||(n=c.toolbar)==null?void 0:n.hidden)!=null?r:!1,{open:_,actions:E,layoutProps:k,renderCurrentView:T,fieldProps:C}=ll(B({},i,{props:a,inputRef:A,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),V=l.field,F=it({elementType:V,externalSlotProps:c==null?void 0:c.field,additionalProps:B({},C,N&&{id:R},!(w||j)&&{onClick:E.onOpen,onKeyDown:gx(E.onOpen)},{readOnly:j??!0,disabled:w,className:d,sx:u,format:f,formatDensity:p,timezone:m,label:v,name:g}),ownerState:a});F.inputProps=B({},F.inputProps,{"aria-label":o(C.value,y)});const I=B({textField:l.textField},F.slots),K=(s=l.layout)!=null?s:ul,W=Nr(A,F.inputRef,P);let O=R;N&&(v?O=`${R}-label`:O=void 0);const L=B({},c,{toolbar:B({},c==null?void 0:c.toolbar,{titleId:R}),mobilePaper:B({"aria-labelledby":O},c==null?void 0:c.mobilePaper)});return{renderPicker:()=>e.jsxs(Qt,{localeText:D,children:[e.jsx(V,B({},F,{slots:I,slotProps:L,inputRef:W})),e.jsx(fx,B({},E,{open:_,slots:l,slotProps:L,children:e.jsx(K,B({},k,L==null?void 0:L.layout,{slots:l,slotProps:L,children:T()}))}))]})}},jl=x.forwardRef(function(r,n){var s,a,o;const i=vr(),l=Ye(),c=sl(r,"MuiMobileDatePicker"),d=B({day:Br,month:Br,year:Br},c.viewRenderers),u=B({},c,{viewRenderers:d,format:Aa(l,c,!1),slots:B({field:yl},c.slots),slotProps:B({},c.slotProps,{field:p=>{var m;return B({},Da((m=c.slotProps)==null?void 0:m.field,p),ml(c),{ref:n})},toolbar:B({hidden:!1},(s=c.slotProps)==null?void 0:s.toolbar)})}),{renderPicker:f}=Vy({props:u,valueManager:sr,valueType:"date",getOpenDialogAriaText:(a=(o=u.localeText)==null?void 0:o.openDatePickerDialogue)!=null?a:i.openDatePickerDialogue,validator:Ns});return f()});jl.propTypes={autoFocus:U.bool,className:U.string,closeOnSelect:U.bool,components:U.object,componentsProps:U.object,dayOfWeekFormatter:U.func,defaultCalendarMonth:U.any,defaultValue:U.any,disabled:U.bool,disableFuture:U.bool,disableHighlightToday:U.bool,disableOpenPicker:U.bool,disablePast:U.bool,displayWeekNumber:U.bool,fixedWeekNumber:U.number,format:U.string,formatDensity:U.oneOf(["dense","spacious"]),inputRef:_o,label:U.node,loading:U.bool,localeText:U.object,maxDate:U.any,minDate:U.any,monthsPerRow:U.oneOf([3,4]),name:U.string,onAccept:U.func,onChange:U.func,onClose:U.func,onError:U.func,onMonthChange:U.func,onOpen:U.func,onSelectedSectionsChange:U.func,onViewChange:U.func,onYearChange:U.func,open:U.bool,openTo:U.oneOf(["day","month","year"]),orientation:U.oneOf(["landscape","portrait"]),readOnly:U.bool,reduceAnimations:U.bool,referenceDate:U.any,renderLoading:U.func,selectedSections:U.oneOfType([U.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),U.number,U.shape({endIndex:U.number.isRequired,startIndex:U.number.isRequired})]),shouldDisableDate:U.func,shouldDisableMonth:U.func,shouldDisableYear:U.func,showDaysOutsideCurrentMonth:U.bool,slotProps:U.object,slots:U.object,sx:U.oneOfType([U.arrayOf(U.oneOfType([U.func,U.object,U.bool])),U.func,U.object]),timezone:U.string,value:U.any,view:U.oneOf(["day","month","year"]),viewRenderers:U.shape({day:U.func,month:U.func,year:U.func}),views:U.arrayOf(U.oneOf(["day","month","year"]).isRequired),yearsPerRow:U.oneOf([3,4])};const Uy=["desktopModeMediaQuery"],By=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiDatePicker"}),{desktopModeMediaQuery:a=yx}=s,o=Fe(s,Uy);return ua(a,{defaultMatches:!0})?e.jsx(bl,B({ref:n},o)):e.jsx(jl,B({ref:n},o))});var ca={exports:{}};(function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},s=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},a=function(c,d){var u=c.match(/(P+)(p+)?/)||[],f=u[1],p=u[2];if(!p)return n(c,d);var m;switch(f){case"P":m=d.dateTime({width:"short"});break;case"PP":m=d.dateTime({width:"medium"});break;case"PPP":m=d.dateTime({width:"long"});break;case"PPPP":default:m=d.dateTime({width:"full"});break}return m.replace("{{date}}",n(f,d)).replace("{{time}}",s(p,d))},o={p:s,P:a},i=o;r.default=i,t.exports=r.default})(ca,ca.exports);var $y=ca.exports;const Wy=oc($y),Hy={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},zy={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Yy{constructor(r){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Hy,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(i).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:n,formats:s,longFormatters:a}=r;this.locale=n,this.formats=B({},zy,s),this.longFormatters=a}}class Tr extends Yy{constructor({locale:r,formats:n}={}){if(typeof Wn!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:r??Ca,formats:n,longFormatters:Wy}),this.parseISO=s=>mr(s),this.toISO=s=>lm(s,{format:"extended"}),this.parse=(s,a)=>s===""?null:gf(s,a,new Date,{locale:this.locale}),this.isValid=s=>ki(this.date(s)),this.format=(s,a)=>this.formatByString(s,this.formats[a]),this.formatByString=(s,a)=>hr(s,a,{locale:this.locale}),this.getDiff=(s,a,o)=>{switch(o){case"years":return uh(s,this.date(a));case"quarters":return lh(s,this.date(a));case"months":return Ni(s,this.date(a));case"weeks":return dh(s,this.date(a));case"days":return Ai(s,this.date(a));case"hours":return ah(s,this.date(a));case"minutes":return oh(s,this.date(a));case"seconds":return ch(s,this.date(a));default:return Cs(s,this.date(a))}},this.isEqual=(s,a)=>s===null&&a===null?!0:bm(s,a),this.isSameYear=(s,a)=>jf(s,a),this.isSameMonth=(s,a)=>bf(s,a),this.isSameDay=(s,a)=>eh(s,a),this.isSameHour=(s,a)=>vf(s,a),this.isAfter=(s,a)=>Hs(s,a),this.isAfterYear=(s,a)=>Hs(s,Bs(a)),this.isAfterDay=(s,a)=>Hs(s,aa(a)),this.isBefore=(s,a)=>rn(s,a),this.isBeforeYear=(s,a)=>rn(s,An(a)),this.isBeforeDay=(s,a)=>rn(s,Yr(a)),this.isWithinRange=(s,[a,o])=>wf(s,{start:a,end:o}),this.startOfYear=s=>An(s),this.startOfMonth=s=>ao(s),this.startOfWeek=s=>Dr(s,{locale:this.locale}),this.startOfDay=s=>Yr(s),this.endOfYear=s=>Bs(s),this.endOfMonth=s=>oa(s),this.endOfWeek=s=>$s(s,{locale:this.locale}),this.endOfDay=s=>aa(s),this.addYears=(s,a)=>ro(s,a),this.addMonths=(s,a)=>Hn(s,a),this.addWeeks=(s,a)=>Xu(s,a),this.addDays=(s,a)=>Wn(s,a),this.addHours=(s,a)=>zu(s,a),this.addMinutes=(s,a)=>Gu(s,a),this.addSeconds=(s,a)=>Zu(s,a),this.getYear=s=>vm(s),this.getMonth=s=>mm(s),this.getDate=s=>cm(s),this.getHours=s=>dm(s),this.getMinutes=s=>hm(s),this.getSeconds=s=>fm(s),this.getMilliseconds=s=>um(s),this.setYear=(s,a)=>Hf(s,a),this.setMonth=(s,a)=>Lf(s,a),this.setDate=(s,a)=>Vf(s,a),this.setHours=(s,a)=>Uf(s,a),this.setMinutes=(s,a)=>$f(s,a),this.setSeconds=(s,a)=>Wf(s,a),this.setMilliseconds=(s,a)=>Bf(s,a),this.getDaysInMonth=s=>Li(s),this.getNextMonth=s=>Hn(s,1),this.getPreviousMonth=s=>Hn(s,-1),this.getMonthArray=s=>{const o=[An(s)];for(;o.length<12;){const i=o[o.length-1];o.push(this.getNextMonth(i))}return o},this.mergeDateAndTime=(s,a)=>this.setSeconds(this.setMinutes(this.setHours(s,this.getHours(a)),this.getMinutes(a)),this.getSeconds(a)),this.getWeekdays=()=>{const s=new Date;return hh({start:Dr(s,{locale:this.locale}),end:$s(s,{locale:this.locale})}).map(a=>this.formatByString(a,"EEEEEE"))},this.getWeekArray=s=>{const a=Dr(ao(s),{locale:this.locale}),o=$s(oa(s),{locale:this.locale});let i=0,l=a;const c=[];for(;rn(l,o);){const d=Math.floor(i/7);c[d]=c[d]||[],c[d].push(l),l=Wn(l,1),i+=1}return c},this.getWeekNumber=s=>ym(s,{locale:this.locale}),this.getYearRange=(s,a)=>{const o=An(s),i=Bs(a),l=[];let c=o;for(;rn(c,i);)l.push(c),c=ro(c,1);return l}}}class qy{constructor(){}async makeRequest(r,n,s){try{return(await Be.api.request({method:r,url:n,data:s})).data}catch(a){throw this.handleServiceError(a)}}async createAsset(r){return this.makeRequest("POST","/api/v1/assets",r)}async getAssets(r={}){const n=new URLSearchParams;Object.entries(r).forEach(([a,o])=>{o!=null&&o!==""&&n.append(a,o.toString())});const s=`/api/v1/assets?${n.toString()}`;return this.makeRequest("GET",s)}async getAssetById(r){return this.makeRequest("GET",`/api/v1/assets/${r}`)}async updateAsset(r,n){console.log("AssetService.updateAsset called with:",{id:r,data:n}),console.log("Making PUT request to: /api/v1/assets/"+r);const s=await this.makeRequest("PUT",`/api/v1/assets/${r}`,n);return console.log("API response data:",s),s}async deleteAsset(r){await this.makeRequest("DELETE",`/api/v1/assets/${r}`)}async getAssetsByPortfolio(r,n={}){const s=new URLSearchParams;Object.entries(n).forEach(([o,i])=>{i!=null&&i!==""&&s.append(o,i.toString())});const a=`/api/v1/assets/portfolio/${r}?${s.toString()}`;return this.makeRequest("GET",a)}async searchAssets(r,n){const s=new URLSearchParams;s.append("q",r),n&&s.append("portfolioId",n);const a=`/api/v1/assets/search?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetStatistics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/statistics`)).data}async getAssetAnalytics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/analytics`)).data}async getAssetPerformance(r,n="ALL"){const s=new URLSearchParams;s.append("period",n);const a=`/api/v1/assets/portfolio/${r}/performance?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetAllocation(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/allocation`)).data}async getAssetTypes(){return(await this.makeRequest("GET","/api/v1/assets/types")).types}async getAssetRiskMetrics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/risk`)).data}async getRecentAssets(r,n){const s=new URLSearchParams;r&&s.append("limit",r.toString()),n&&s.append("portfolioId",n);const a=`/api/v1/assets/recent?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetsByValueRange(r,n,s){const a=new URLSearchParams;a.append("minValue",r.toString()),a.append("maxValue",n.toString()),s&&a.append("portfolioId",s);const o=`/api/v1/assets/value-range?${a.toString()}`;return(await this.makeRequest("GET",o)).data}async checkAssetExists(r){return(await this.makeRequest("GET",`/api/v1/assets/${r}/exists`)).data.exists}async getAssetCount(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/count`)).data.count}async getTradeCount(r){return await this.makeRequest("GET",`/api/v1/assets/${r}/trades/count`)}async deleteAllTrades(r){return(await this.makeRequest("DELETE",`/api/v1/assets/${r}/trades`)).deletedCount}async forceDeleteAsset(r){await this.makeRequest("DELETE",`/api/v1/assets/${r}/force`)}handleServiceError(r){return r instanceof Error?{message:r.message,status:0,code:"NETWORK_ERROR"}:r}}const kr=new qy;function wl(t,r){return!t||t===0?0:(r-t)/t*100}function Cl(t){const{initialValue:r,currentValue:n,createdAt:s}=t,a=new Date(s),o=new Date,i=wl(r,n),l=Math.max(1,Math.floor((o.getTime()-a.getTime())/(1e3*60*60*24))),c=fr(i,l,1),d=fr(i,l,7),u=fr(i,l,30),f=fr(i,l,365);return{daily:Math.round(c*100)/100,weekly:Math.round(d*100)/100,monthly:Math.round(u*100)/100,yearly:Math.round(f*100)/100}}function fr(t,r,n){if(r<n)return t;const s=r/n;return t/s}function In(t,r){const n=Cl(t),s=Ky(r);return{daily:Math.round(n.daily*s.daily*100)/100,weekly:Math.round(n.weekly*s.weekly*100)/100,monthly:Math.round(n.monthly*s.monthly*100)/100,yearly:Math.round(n.yearly*s.yearly*100)/100}}function Qy(t){return{GOLD:.8,VFF:1.2,VESAF:1.1,SSISCA:1,HPG:1.3,VCB:.9}[t.toUpperCase()]||1}function Ky(t){const r=Qy(t),n=new Date,s=n.getHours(),a=n.getDay(),o=s>=9&&s<=15?1+(r-1)*.5:.8,i=a>=1&&a<=5?1+(r-1)*.3:.9,l=1+(r-1)*.2,c=1+(r-1)*.1;return{daily:o,weekly:i,monthly:l,yearly:c}}function On(t,r){if(!r||r.length===0)return Cl(t);const{currentValue:n}=t,s=r.filter(u=>u.side==="BUY").reduce((u,f)=>u+f.quantity*f.price,0),a=r.filter(u=>u.side==="SELL").reduce((u,f)=>u+f.quantity*f.price,0),o=s-a,i=wl(o,n),l=new Date(t.createdAt),d=Math.max(1,Math.floor((new Date().getTime()-l.getTime())/(1e3*60*60*24)));return{daily:fr(i,d,1),weekly:fr(i,d,7),monthly:fr(i,d,30),yearly:fr(i,d,365)}}function So(t){return t===0?"0.00%":t>0?`+${t.toFixed(2)}%`:`${t.toFixed(2)}%`}function Do(t){return t>0?"text-green-600":t<0?"text-red-600":"text-gray-600"}const Ia=(t={})=>{const{initialFilters:r={},autoFetch:n=!0}=t,{accountId:s}=At(),[a,o]=x.useState([]),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,f]=x.useState({createdBy:s,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC",...r}),[p,m]=x.useState({page:1,limit:25,total:0,totalPages:0}),g=x.useCallback(async k=>{l(!0),d(null);try{const T=new URLSearchParams;Object.entries(k).forEach(([W,O])=>{O!=null&&O!==""&&T.append(W,O.toString())});const V=`${k.createdBy?`/api/v1/assets/user/${k.createdBy}`:"/api/v1/assets"}?${T.toString()}`,F=await fetch(V);if(!F.ok)throw new Error(`HTTP ${F.status}: ${F.statusText}`);const I=await F.json(),K=W=>{const O={initialValue:W.initialValue||0,currentValue:W.currentValue||0,createdAt:W.createdAt,updatedAt:W.updatedAt};let L;return W.trades&&W.trades.length>0?L=On(O,W.trades):L=In(O,W.symbol),{...W,createdAt:W.createdAt,updatedAt:W.updatedAt,initialValue:W.initialValue,initialQuantity:W.initialQuantity,currentValue:W.currentValue,currentQuantity:W.currentQuantity,hasTrades:W.hasTrades,displayName:W.displayName,totalValue:W.hasTrades?W.totalValue||W.currentValue||0:W.initialValue||0,totalQuantity:W.hasTrades?W.totalQuantity||W.currentQuantity||0:W.initialQuantity||0,currentPrice:W.currentPrice||0,avgCost:W.avgCost||0,quantity:W.hasTrades?W.currentQuantity||0:W.initialQuantity||0,performance:L}};if(Array.isArray(I)){const W=I.map(K);o(W),m({page:1,limit:W.length,total:W.length,totalPages:1})}else{const W=(I.data||[]).map(K);o(W),m({page:I.page||1,limit:I.limit||25,total:I.total||0,totalPages:I.totalPages||0})}}catch(T){console.error("Error fetching assets:",T),d(T instanceof Error?T.message:"Failed to fetch assets"),o([]),m({page:1,limit:25,total:0,totalPages:0})}finally{l(!1)}},[]),v=x.useCallback(k=>{f(k),n&&g(k)},[n]),P=x.useCallback((k,T)=>{const C={...u,[k]:T};v(C)},[u,v]),j=x.useCallback(()=>{v({createdBy:s,portfolioId:void 0,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC"})},[v,s]),w=x.useCallback(()=>{g(u)},[u,g]),D=x.useCallback(async()=>{l(!0),d(null);try{await g(u)}catch(k){console.error("forceRefresh error:",k);const T=k instanceof Error?k.message:"Failed to refresh assets";d(T)}finally{l(!1)}},[u,g]),y=x.useCallback(k=>{P("page",k)},[P]),A=x.useCallback(k=>{P("limit",k),P("page",1)},[P]),R=x.useCallback((k,T)=>{P("sortBy",k),P("sortOrder",T)},[P]),N=x.useCallback(async(k,T)=>{try{console.log("useAssets updateAsset called with:",{id:k,data:T}),l(!0),d(null);const C={...T};console.log("Mapped backend data:",C),console.log("Calling assetService.updateAsset...");const V=await kr.updateAsset(k,C);console.log("assetService.updateAsset result:",V);const F={initialValue:V.initialValue||0,currentValue:V.currentValue||0,createdAt:V.createdAt,updatedAt:V.updatedAt};let I;V.trades&&V.trades.length>0?I=On(F,V.trades):I=In(F,V.symbol);const K={...V,totalValue:V.hasTrades?V.totalValue||V.currentValue||0:V.initialValue||0,totalQuantity:V.hasTrades?V.totalQuantity||V.currentQuantity||0:V.initialQuantity||0,quantity:V.hasTrades?V.currentQuantity||0:V.initialQuantity||0,performance:I};return o(W=>{console.log("Previous assets:",W),console.log("Asset to update ID:",k),console.log("Frontend asset data:",K);const O=W.map(L=>{if(L.id===k){const q={...L,...K};return console.log("Updated asset:",q),q}return L});return console.log("New assets state:",O),O}),K}catch(C){console.error("Error in updateAsset:",C);const V=C instanceof Error?C.message:"Failed to update asset";throw d(V),C}finally{l(!1)}},[]),_=x.useCallback(async k=>{try{l(!0),d(null);const T=await kr.createAsset(k),C={initialValue:T.initialValue||0,currentValue:T.currentValue||0,createdAt:T.createdAt,updatedAt:T.updatedAt};let V;T.trades&&T.trades.length>0?V=On(C,T.trades):V=In(C,T.symbol);const F={...T,totalValue:T.hasTrades?T.totalValue||T.currentValue||0:T.initialValue||0,totalQuantity:T.hasTrades?T.totalQuantity||T.currentQuantity||0:T.initialQuantity||0,quantity:T.hasTrades?T.currentQuantity||0:T.initialQuantity||0,performance:V};return o(I=>[F,...I]),F}catch(T){const C=T instanceof Error?T.message:"Failed to create asset";throw d(C),T}finally{l(!1)}},[]),E=x.useCallback(async k=>{try{l(!0),d(null),await kr.deleteAsset(k),o(T=>T.filter(C=>C.id!==k)),m(T=>({...T,total:Math.max(0,T.total-1)}))}catch(T){const C=T instanceof Error?T.message:"Failed to delete asset";throw d(C),T}finally{l(!1)}},[u,g]);return x.useEffect(()=>{s&&u.createdBy!==s&&f(k=>({...k,createdBy:s}))},[s]),x.useEffect(()=>{n&&g(u)},[n,g,u]),x.useEffect(()=>{const k=setInterval(()=>{if(a.length>0){const T=a.map(C=>{const V={initialValue:C.initialValue||0,currentValue:C.currentValue||0,createdAt:C.createdAt,updatedAt:C.updatedAt};let F;return C.trades&&C.trades.length>0?F=On(V,C.trades):F=In(V,C.symbol),{...C,totalValue:C.hasTrades?C.totalValue||C.currentValue||0:C.initialValue||0,totalQuantity:C.hasTrades?C.totalQuantity||C.currentQuantity||0:C.initialQuantity||0,quantity:C.hasTrades?C.currentQuantity||0:C.initialQuantity||0,performance:F}});o(T)}},3e5);return()=>clearInterval(k)},[a]),{assets:a,loading:i,error:c,pagination:p,setFilters:v,updateFilter:P,clearFilters:j,refresh:w,forceRefresh:D,goToPage:y,setPageSize:A,setSorting:R,updateAsset:N,createAsset:_,deleteAsset:E}};var mt=(t=>(t.BUY="BUY",t.SELL="SELL",t))(mt||{}),jt=(t=>(t.MARKET="MARKET",t.LIMIT="LIMIT",t.STOP="STOP",t))(jt||{}),Ar=(t=>(t.MANUAL="MANUAL",t.API="API",t.IMPORT="IMPORT",t))(Ar||{}),Tl=(t=>(t.STOCK="STOCK",t.BOND="BOND",t.ETF="ETF",t.MUTUAL_FUND="MUTUAL_FUND",t.CRYPTO="CRYPTO",t.COMMODITY="COMMODITY",t.REIT="REIT",t.GOLD="GOLD",t.DEPOSIT="DEPOSIT",t.CASH="CASH",t.OTHER="OTHER",t))(Tl||{});const da={STOCK:"Cổ phiếu",BOND:"Trái phiếu",ETF:"Quỹ ETF",MUTUAL_FUND:"Quỹ tương hỗ",CRYPTO:"Tiền điện tử",COMMODITY:"Hàng hóa",REIT:"Bất động sản",GOLD:"Vàng",DEPOSIT:"Tiền gửi",CASH:"Tiền mặt",OTHER:"Khác"},Gy=ls({portfolioId:ut().uuid("Invalid portfolio ID").required("Portfolio is required"),assetId:ut().uuid("Invalid asset ID").required("Asset is required"),tradeDate:ut().required("Trade date is required"),side:La().oneOf(Object.values(mt)).required("Trade side is required"),quantity:ln().positive("Quantity must be positive").min(.01,"Quantity must be at least 0.01").required("Quantity is required"),price:ln().positive("Price must be positive").min(.01,"Price must be at least 0.01").required("Price is required"),fee:ln().min(0,"Fee cannot be negative").optional(),tax:ln().min(0,"Tax cannot be negative").optional(),tradeType:La().oneOf(Object.values(jt)).optional(),notes:ut().max(500,"Notes cannot exceed 500 characters").optional()}),_n=({field:t,label:r,error:n,helperText:s,disabled:a,inputProps:o,currency:i})=>{const[l,c]=x.useState(""),[d,u]=x.useState(!1),f=j=>{if(!j||j==="")return"";const w=typeof j=="string"?parseFloat(j):j;return isNaN(w)?"":xt(w,i==="VND"?0:2)},p=j=>{if(!j||j.trim()==="")return"";const w=j.replace(/,/g,"").trim(),D=parseFloat(w);return isNaN(D)?"":D.toString()},m=j=>{if(!j)return!0;const w=j.replace(/,/g,"").trim();return/^\d*\.?\d*$/.test(w)};x.useEffect(()=>{d||c(f(t.value))},[t.value,d]);const g=()=>{var w;u(!0);let j=((w=t.value)==null?void 0:w.toString())||"";j.includes(".")&&(j=j.replace(/\.?0+$/,""),j.endsWith(".")&&(j=j.slice(0,-1))),c(j)},v=()=>{u(!1);const j=p(l);j?t.onChange(parseFloat(j)):t.onChange("");const w=f(t.value);c(w)},P=j=>{const w=j.target.value;if(!m(w))return;c(w);const D=p(w);D?t.onChange(parseFloat(D)):w===""&&t.onChange("")};return e.jsx($e,{value:l,onChange:P,onFocus:g,onBlur:v,label:r,type:"text",fullWidth:!0,error:n,helperText:s,disabled:a,inputProps:o,InputProps:{startAdornment:i?e.jsx(h,{variant:"body2",sx:{mr:1,color:"text.secondary"},children:zi[i]||i}):void 0}})},ns=({onSubmit:t,initialData:r,isLoading:n=!1,error:s,mode:a="create",defaultPortfolioId:o,showSubmitButton:i=!0,formRef:l})=>{const{accountId:c}=At(),{portfolios:d,isLoading:u,error:f}=vs(c),{assets:p,loading:m,error:g}=Ia(),{control:v,handleSubmit:P,watch:j,setValue:w,formState:{errors:D,isValid:y}}=cs({resolver:Ps(Gy),defaultValues:{portfolioId:(r==null?void 0:r.portfolioId)||o||"",assetId:(r==null?void 0:r.assetId)||"",tradeDate:(r==null?void 0:r.tradeDate)||new Date().toISOString(),side:(r==null?void 0:r.side)||mt.BUY,quantity:(r==null?void 0:r.quantity)||0,price:(r==null?void 0:r.price)||0,fee:(r==null?void 0:r.fee)||0,tax:(r==null?void 0:r.tax)||0,tradeType:(r==null?void 0:r.tradeType)||jt.MARKET,notes:(r==null?void 0:r.notes)||""}}),A=j("quantity"),R=j("price"),N=j("fee")||0,_=j("tax")||0,E=j("portfolioId"),k=j("assetId"),T=d==null?void 0:d.find(O=>O.portfolioId===E),C=(T==null?void 0:T.baseCurrency)||"VND";x.useEffect(()=>{if(k&&p){const O=p.find(L=>L.id===k);O&&O.currentPrice&&O.currentPrice>0&&w("price",O.currentPrice)}},[k,p,w]);const V=x.useMemo(()=>{const O=Number(A)||0,L=Number(R)||0,q=Number(N)||0,me=Number(_)||0,ye=O*L,re=ye+q+me;return{value:ye,cost:re,fee:q,tax:me}},[A,R,N,_]);x.useEffect(()=>{r&&a==="edit"&&(w("portfolioId",r.portfolioId||""),w("assetId",r.assetId||""),w("tradeDate",r.tradeDate||new Date().toISOString()),w("side",r.side||mt.BUY),w("quantity",r.quantity||0),w("price",r.price||0),w("fee",r.fee||0),w("tax",r.tax||0),w("tradeType",r.tradeType||jt.MARKET),w("notes",r.notes||""))},[r,a,w]);const F=async O=>{try{const L=j(),q={portfolioId:L.portfolioId,assetId:L.assetId,tradeDate:typeof L.tradeDate=="string"?L.tradeDate:L.tradeDate.toISOString(),side:L.side,quantity:L.quantity,price:L.price,fee:L.fee||0,tax:L.tax||0,tradeType:L.tradeType||jt.MARKET,notes:L.notes||""};await t(q)}catch(L){console.error("Error submitting trade form:",L)}},I=O=>O===mt.BUY?"success":"error",K=O=>O===mt.BUY?"↗":"↘",W=()=>{if(k&&p){const O=p.find(L=>L.id===k);O&&O.currentPrice&&O.currentPrice>0&&w("price",O.currentPrice)}};return u||m?e.jsx(Qt,{dateAdapter:Tr,children:e.jsx(de,{children:e.jsx(he,{children:e.jsxs(b,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(He,{size:20}),e.jsx(h,{variant:"h5",children:"Loading trade form..."})]})})})}):!(d!=null&&d.length)&&!u?e.jsx(Qt,{dateAdapter:Tr,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(ze,{severity:"error",sx:{mb:3},children:"No portfolios available. Please create a portfolio first."}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:f?`Error: ${f}`:"No portfolios found. Please check if the backend is running and try again."})]})})}):!(p!=null&&p.length)&&!m?e.jsx(Qt,{dateAdapter:Tr,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(ze,{severity:"error",sx:{mb:3},children:"No assets available. Please create an asset first."}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:g?`Error: ${g}`:"No assets found. Please check if the backend is running and try again."})]})})}):e.jsxs(Qt,{dateAdapter:Tr,children:[s&&e.jsx(ze,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:s}),e.jsxs("form",{ref:l,onSubmit:P(F),children:[e.jsxs(b,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Basic Information"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"portfolioId",control:v,render:({field:O})=>e.jsxs(Xe,{fullWidth:!0,error:!!D.portfolioId,children:[e.jsx(Je,{children:"Portfolio *"}),e.jsx(et,{...O,label:"Portfolio *",disabled:n||u,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:u?e.jsx(ce,{disabled:!0,children:"Loading portfolios..."}):(d==null?void 0:d.length)>0?d.map(L=>e.jsx(ce,{value:L.portfolioId,children:L.name},L.portfolioId)):e.jsx(ce,{disabled:!0,children:"No portfolios found"})}),D.portfolioId&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:D.portfolioId.message})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"assetId",control:v,render:({field:O})=>e.jsxs(Xe,{fullWidth:!0,error:!!D.assetId,children:[e.jsx(Je,{children:"Asset *"}),e.jsx(et,{...O,label:"Asset *",disabled:n||m,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:m?e.jsxs(ce,{disabled:!0,children:[e.jsx(He,{size:20}),e.jsx("span",{style:{marginLeft:8},children:"Loading assets..."})]}):(p==null?void 0:p.length)===0?e.jsx(ce,{disabled:!0,children:"No assets available"}):p==null?void 0:p.map(L=>e.jsxs(ce,{value:L.id,children:[L.symbol||"N/A"," - ",L.name]},L.id))}),D.assetId&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:D.assetId.message})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"tradeDate",control:v,render:({field:O})=>{var L;return e.jsx(By,{label:"Trade Date *",disabled:n,value:(()=>{try{if(!O.value)return new Date;if(typeof O.value=="string"){const q=new Date(O.value);return isNaN(q.getTime())?new Date:q}return O.value}catch{return new Date}})(),onChange:q=>{try{q&&!isNaN(q.getTime())?O.onChange(q.toISOString()):O.onChange(new Date().toISOString())}catch{O.onChange(new Date().toISOString())}},slotProps:{textField:{fullWidth:!0,error:!!D.tradeDate,helperText:(L=D.tradeDate)==null?void 0:L.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}}})}})})]})]}),e.jsxs(b,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Details"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"side",control:v,render:({field:O})=>e.jsxs(Xe,{fullWidth:!0,error:!!D.side,children:[e.jsx(Je,{children:"Trade Side *"}),e.jsxs(et,{...O,label:"Trade Side *",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(ce,{value:mt.BUY,children:e.jsx(b,{display:"flex",alignItems:"center",gap:1,children:e.jsx(h,{color:"success.main",fontWeight:"medium",children:"↗ BUY"})})}),e.jsx(ce,{value:mt.SELL,children:e.jsx(b,{display:"flex",alignItems:"center",gap:1,children:e.jsx(h,{color:"error.main",fontWeight:"medium",children:"↘ SELL"})})})]}),D.side&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:D.side.message})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"quantity",control:v,render:({field:O})=>{var L;return e.jsx(_n,{field:O,label:"Quantity *",error:!!D.quantity,helperText:(L=D.quantity)==null?void 0:L.message,disabled:n,inputProps:{step:"0.01",min:"0.01"}})}})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"price",control:v,render:({field:O})=>{var L;return e.jsxs(b,{sx:{position:"relative"},children:[e.jsx(_n,{field:O,label:`Price per Unit (${C}) *`,error:!!D.price,helperText:(L=D.price)==null?void 0:L.message,disabled:n,inputProps:{step:"0.01",min:"0.01"},currency:C}),k&&e.jsx(as,{title:"Refresh market price",children:e.jsx(Et,{size:"small",onClick:W,disabled:n,sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",zIndex:1,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:e.jsx(Hr,{fontSize:"small"})})})]})}})})]})]}),e.jsxs(b,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Additional Information"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"fee",control:v,render:({field:O})=>{var L;return e.jsx(_n,{field:O,label:`Trading Fee (${C})`,error:!!D.fee,helperText:(L=D.fee)==null?void 0:L.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:C})}})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"tax",control:v,render:({field:O})=>{var L;return e.jsx(_n,{field:O,label:`Tax (${C})`,error:!!D.tax,helperText:(L=D.tax)==null?void 0:L.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:C})}})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"tradeType",control:v,render:({field:O})=>e.jsxs(Xe,{fullWidth:!0,error:!!D.tradeType,children:[e.jsx(Je,{children:"Trade Type"}),e.jsxs(et,{...O,label:"Trade Type",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(ce,{value:jt.MARKET,children:"Market Order"}),e.jsx(ce,{value:jt.LIMIT,children:"Limit Order"}),e.jsx(ce,{value:jt.STOP,children:"Stop Order"})]}),D.tradeType&&e.jsx(h,{variant:"caption",color:"error",children:D.tradeType.message})]})})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"notes",control:v,render:({field:O})=>{var L;return e.jsx($e,{...O,label:"Notes",multiline:!0,rows:3,fullWidth:!0,error:!!D.notes,helperText:(L=D.notes)==null?void 0:L.message,disabled:n,placeholder:"Additional notes about this trade...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}})})]})]}),e.jsxs(b,{mb:2,p:1.5,sx:{bgcolor:"grey.50",borderRadius:2,border:1,borderColor:"grey.200"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Summary"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"info.main",children:X(V.value,C)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"warning.main",children:X(V.fee+V.tax,C)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"primary.main",children:X(V.cost,C)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Side"}),e.jsx(De,{label:j("side"),color:I(j("side")),icon:e.jsx("span",{children:K(j("side"))}),size:"small",sx:{fontWeight:600}})]})})]})]}),i&&e.jsx(b,{display:"flex",justifyContent:"flex-end",sx:{mt:2},children:e.jsx(Ce,{type:"submit",variant:"contained",disabled:!y||n,startIcon:n?e.jsx(He,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:n?"Processing...":a==="create"?"Create Trade":"Update Trade"})})]})]})},Zy=({open:t,onClose:r,onSubmit:n,initialData:s,isLoading:a=!1,error:o})=>{const i=x.useRef(null),l=async d=>{try{await n(d),r()}catch(u){console.error("Error updating trade:",u)}},c=()=>{i.current&&i.current.requestSubmit()};return e.jsxs(ar,{open:t,onClose:r,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh",maxHeight:"85vh",overflow:"hidden"}},children:[e.jsx(xr,{children:e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(h,{variant:"h6",children:"Edit Trade"}),e.jsx(Et,{onClick:r,size:"small",children:e.jsx(Fo,{})})]})}),e.jsx(or,{dividers:!0,sx:{overflow:"auto",maxHeight:"calc(85vh - 100px)",p:0},children:e.jsx(b,{sx:{p:2},children:e.jsx(ns,{onSubmit:l,initialData:s,isLoading:a,error:o,mode:"edit",showSubmitButton:!1,formRef:i})})}),e.jsxs(ir,{sx:{p:2},children:[e.jsx(Ce,{onClick:r,disabled:a,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(Ce,{onClick:c,variant:"contained",disabled:a,startIcon:a?e.jsx(He,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:a?"Updating...":"Update Trade"})]})]})},Xy=({trade:t,tradeDetails:r=[],onEdit:n,isLoading:s=!1})=>{const a=m=>m===mt.BUY?"success":"error",o=m=>m===mt.BUY?e.jsx(yt,{}):e.jsx(Dt,{}),i=m=>{switch(m){case jt.MARKET:return"primary";case jt.LIMIT:return"secondary";case jt.STOP:return"warning";default:return"default"}},l=m=>{switch(m){case Ar.MANUAL:return"info";case Ar.API:return"success";case Ar.IMPORT:return"warning";default:return"default"}},c=r.reduce((m,g)=>m+g.matchedQty,0),d=r.reduce((m,g)=>m+g.pnl,0),u=t.quantity*t.price,f=(Number(t.fee)||0)+(Number(t.tax)||0),p=u+f;return e.jsxs(b,{children:[e.jsxs(b,{sx:{bgcolor:"grey.50",p:2,borderRadius:2,mb:2,border:1,borderColor:"grey.200"},children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h5",component:"h2",fontWeight:"bold",color:"primary",children:"Trade Details"}),e.jsxs(b,{display:"flex",gap:1,children:[e.jsx(De,{label:t.assetSymbol,color:"primary",variant:"outlined",size:"small",sx:{fontWeight:600}}),e.jsx(De,{label:t.side,color:a(t.side),icon:o(t.side),size:"small",sx:{fontWeight:600}}),e.jsx(De,{label:t.tradeType,color:i(t.tradeType),variant:"outlined",size:"small",sx:{fontWeight:600}})]})]}),e.jsx(b,{display:"flex",gap:1,children:n&&e.jsx(Ce,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>n(t),sx:{textTransform:"none",fontWeight:600,px:3,py:1},children:"Edit Trade"})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:[t.assetName," • ",hr(mr(t.tradeDate.toString()),"MMM dd, yyyy HH:mm")]})]}),e.jsxs(M,{container:!0,spacing:2,mb:2,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{sx:{boxShadow:2,height:"100%"},children:e.jsxs(he,{children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Basic Information"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade ID"}),e.jsxs(h,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[t.tradeId.slice(0,8),"..."]})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Date & Time"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:hr(mr(t.tradeDate.toString()),"MMM dd, yyyy HH:mm")})]}),e.jsxs(M,{item:!0,xs:12,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset"}),e.jsxs(h,{variant:"body2",fontWeight:"medium",children:[t.assetSymbol," - ",t.assetName]})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Type"}),e.jsx(De,{label:t.tradeType,color:i(t.tradeType),size:"small"})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Source"}),e.jsx(De,{label:t.source,color:l(t.source),size:"small"})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(h,{variant:"body2",children:hr(mr(t.createdAt.toString()),"MMM dd, yyyy")})]})]})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{sx:{boxShadow:2,height:"100%"},children:e.jsxs(he,{children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Financial Metrics"}),(t.totalValue!==u||t.totalCost!==p)&&e.jsx(ze,{severity:"info",sx:{mb:2,fontSize:"0.75rem"},children:e.jsxs(h,{variant:"caption",children:[e.jsx("strong",{children:"Note:"})," Values shown are calculated from quantity × price. Database values: Total Value: ",X(Number(t.totalValue)||0),", Total Cost: ",X(Number(t.totalCost)||0)]})}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Quantity"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:xt(t.quantity,2)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Price per Unit"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:X(t.price)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"info.main",children:X(u)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"warning.main",children:X(f)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:X(p)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Realized P&L"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:t.realizedPl&&t.realizedPl>=0?"success.main":"error.main",children:t.realizedPl?X(Number(t.realizedPl)||0):"N/A"})]})]})]})})})]}),t.notes&&e.jsx(b,{mb:2,children:e.jsx(de,{sx:{boxShadow:2},children:e.jsxs(he,{sx:{p:2},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Notes"}),e.jsx(ze,{severity:"info",variant:"outlined",sx:{bgcolor:"info.50",borderColor:"info.200","& .MuiAlert-message":{width:"100%"}},children:e.jsx(h,{variant:"body1",children:t.notes})})]})})}),t.side===mt.SELL&&r.length>0&&e.jsx(b,{mb:2,children:e.jsx(de,{sx:{boxShadow:2},children:e.jsxs(he,{sx:{p:2},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Trade Matching Details"}),e.jsxs(M,{container:!0,spacing:2,mb:2,children:[e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"success.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Matched"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"success.main",children:xt(c,2)})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"warning.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Remaining"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"warning.main",children:xt(t.remainingQuantity||0,2)})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:d>=0?"success.50":"error.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Realized P&L"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:d>=0?"success.main":"error.main",children:X(d)})]})})]}),e.jsx(Kt,{component:nt,variant:"outlined",sx:{borderRadius:2,boxShadow:1},children:e.jsxs(Gt,{size:"small",children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600},children:"Buy Trade ID"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"Matched Qty"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"Buy Price"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"Sell Price"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"P&L"}),e.jsx(z,{sx:{fontWeight:600},children:"Matched Date"})]})}),e.jsx(Xt,{children:r.map(m=>e.jsxs(Ge,{sx:{"&:nth-of-type(odd)":{bgcolor:"grey.25"},"&:hover":{bgcolor:"action.hover"}},children:[e.jsx(z,{children:e.jsxs(h,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[m.buyTradeId.slice(0,8),"..."]})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:xt(m.matchedQty,2)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(m.buyPrice)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(m.sellPrice)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",color:m.pnl>=0?"success.main":"error.main",fontWeight:"bold",children:X(m.pnl)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:hr(mr(m.createdAt.toString()),"MMM dd, yyyy")})})]},m.detailId))})]})})]})})}),t.side===mt.SELL&&(t.remainingQuantity||0)>0&&e.jsx(b,{mb:2,children:e.jsx(ze,{severity:"warning",variant:"outlined",sx:{borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:e.jsxs(h,{variant:"body1",fontWeight:"medium",children:["⚠️ This sell trade has ",e.jsxs("strong",{children:[xt(t.remainingQuantity||0,2)," units"]})," remaining unmatched. Consider matching with available buy trades to realize P&L."]})})}),s&&e.jsx(b,{display:"flex",justifyContent:"center",py:4,children:e.jsx(h,{children:"Loading trade details..."})})]})},Jy=({open:t,onClose:r,onEdit:n,trade:s,tradeDetails:a=[],isLoading:o=!1,error:i})=>s?e.jsxs(ar,{open:t,onClose:r,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh",borderRadius:3,boxShadow:24}},children:[e.jsx(xr,{sx:{bgcolor:"primary.50",borderBottom:1,borderColor:"divider",py:2},children:e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(b,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h5",fontWeight:"bold",children:"Trade Details"}),s&&e.jsx(b,{display:"flex",gap:1,children:e.jsxs(h,{variant:"body2",color:"text.secondary",children:[s.assetSymbol," - ",s.assetName]})})]}),e.jsx(Et,{onClick:r,size:"small",sx:{"&:hover":{bgcolor:"error.main",color:"white"}},children:e.jsx(Fo,{})})]})}),e.jsxs(or,{sx:{p:0},children:[i&&e.jsx(ze,{severity:"error",sx:{m:2,mb:0},children:i}),o?e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsxs(b,{textAlign:"center",children:[e.jsx(He,{size:40}),e.jsx(h,{variant:"h6",sx:{mt:2},children:"Loading trade details..."})]})}):e.jsx(b,{sx:{p:2},children:e.jsx(Xy,{trade:s,tradeDetails:a,onEdit:n,isLoading:o})})]}),e.jsx(ir,{sx:{bgcolor:"grey.50",borderTop:1,borderColor:"divider",py:1.5,px:2},children:e.jsx(Ce,{onClick:r,variant:"contained",sx:{textTransform:"none",px:3},children:"Close"})})]}):null,ev=({trades:t,isLoading:r=!1,onEdit:n,onDelete:s,onView:a,onCreate:o,onPageChange:i,currentPage:l=1,totalPages:c=1,totalTrades:d=0})=>{const[u,f]=x.useState(""),[p,m]=x.useState("ALL"),[g,v]=x.useState("ALL"),[P,j]=x.useState("ALL"),[w,D]=x.useState(null),[y,A]=x.useState(null),R=x.useMemo(()=>t.filter(C=>{var W,O,L;const V=((W=C.assetSymbol)==null?void 0:W.toLowerCase().includes(u.toLowerCase()))||((O=C.assetName)==null?void 0:O.toLowerCase().includes(u.toLowerCase()))||((L=C.notes)==null?void 0:L.toLowerCase().includes(u.toLowerCase())),F=p==="ALL"||C.side===p,I=g==="ALL"||C.tradeType===g,K=P==="ALL"||C.source===P;return V&&F&&I&&K}),[t,u,p,g,P]),N=(C,V)=>{D(C.currentTarget),A(V)},_=()=>{D(null),A(null)},E=C=>{if(y){switch(C){case"view":a==null||a(y);break;case"edit":n==null||n(y);break;case"delete":s==null||s(y);break}_()}},k=C=>C===mt.BUY?"success":"error",T=C=>C===mt.BUY?"↗":"↘";return e.jsxs(b,{sx:{p:3},children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"h5",component:"h2",gutterBottom:!0,children:"Trade History"}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Manage and track all your trading activities"})]}),e.jsxs(b,{display:"flex",gap:2,children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Yl,{}),onClick:()=>{},sx:{textTransform:"none"},children:"Filters"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:o,sx:{textTransform:"none"},children:"New Trade"})]})]}),e.jsx(b,{sx:{mb:3},children:e.jsxs(M,{container:!0,spacing:2,mb:3,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx($e,{fullWidth:!0,placeholder:"Search trades by symbol, name, or notes...",value:u,onChange:C=>f(C.target.value),InputProps:{startAdornment:e.jsx(fa,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Side"}),e.jsxs(et,{value:p,label:"Side",onChange:C=>m(C.target.value),sx:{borderRadius:2},children:[e.jsx(ce,{value:"ALL",children:"All Sides"}),e.jsx(ce,{value:mt.BUY,children:"Buy"}),e.jsx(ce,{value:mt.SELL,children:"Sell"})]})]})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Type"}),e.jsxs(et,{value:g,label:"Type",onChange:C=>v(C.target.value),sx:{borderRadius:2},children:[e.jsx(ce,{value:"ALL",children:"All Types"}),e.jsx(ce,{value:jt.MARKET,children:"Market"}),e.jsx(ce,{value:jt.LIMIT,children:"Limit"}),e.jsx(ce,{value:jt.STOP,children:"Stop"})]})]})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Source"}),e.jsxs(et,{value:P,label:"Source",onChange:C=>j(C.target.value),sx:{borderRadius:2},children:[e.jsx(ce,{value:"ALL",children:"All Sources"}),e.jsx(ce,{value:Ar.MANUAL,children:"Manual"}),e.jsx(ce,{value:Ar.API,children:"API"}),e.jsx(ce,{value:Ar.IMPORT,children:"Import"})]})]})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsx(b,{display:"flex",alignItems:"center",height:"100%",children:e.jsx(De,{label:`${R.length} of ${d} trades`,color:"primary",variant:"outlined",size:"small"})})})]})}),e.jsx(Kt,{component:nt,variant:"outlined",sx:{borderRadius:2,mb:3,boxShadow:1},children:e.jsxs(Gt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600,color:"text.primary"},children:"Date"}),e.jsx(z,{sx:{fontWeight:600,color:"text.primary"},children:"Asset"}),e.jsx(z,{sx:{fontWeight:600,color:"text.primary"},children:"Side"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Quantity"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Price"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Value"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Fees"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Cost"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"P&L"}),e.jsx(z,{align:"center",sx:{fontWeight:600,color:"text.primary"},children:"Actions"})]})}),e.jsx(Xt,{children:r?e.jsx(Ge,{children:e.jsx(z,{colSpan:10,align:"center",sx:{py:6},children:e.jsxs(b,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(He,{size:40}),e.jsx(h,{color:"text.secondary",children:"Loading trades..."})]})})}):R.length===0?e.jsx(Ge,{children:e.jsx(z,{colSpan:10,align:"center",sx:{py:6},children:e.jsxs(b,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h6",color:"text.secondary",children:"No trades found"}),e.jsx(h,{color:"text.secondary",children:"No trades match your current filter criteria."}),e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Nt,{}),onClick:o,sx:{mt:1},children:"Create First Trade"})]})})}):R.map(C=>{var V,F;return e.jsxs(Ge,{hover:!0,onClick:()=>a==null?void 0:a(C),sx:{"&:hover":{bgcolor:"action.hover",cursor:"pointer"},"&:last-child td":{borderBottom:0}},children:[e.jsxs(z,{children:[e.jsx(h,{variant:"body2",children:hr(mr(C.tradeDate.toString()),"MMM dd, yyyy")}),e.jsx(h,{variant:"caption",color:"text.secondary",children:hr(mr(C.tradeDate.toString()),"HH:mm")})]}),e.jsx(z,{children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:C.assetSymbol||((V=C.asset)==null?void 0:V.symbol)||"N/A"}),e.jsx(h,{variant:"caption",color:"text.secondary",children:C.assetName||((F=C.asset)==null?void 0:F.name)||"N/A"})]})}),e.jsx(z,{children:e.jsx(De,{label:C.side,color:k(C.side),size:"small",icon:e.jsx("span",{style:{fontSize:"14px"},children:T(C.side)}),sx:{fontWeight:600,"& .MuiChip-icon":{marginLeft:.5}}})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",children:xt(C.quantity,2)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",children:X(C.price)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(Number(C.totalValue)||C.quantity*C.price)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",children:X((Number(C.fee)||0)+(Number(C.tax)||0))})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(Number(C.totalCost)||C.quantity*C.price+(Number(C.fee)||0)+(Number(C.tax)||0))})}),e.jsx(z,{align:"right",children:C.realizedPl!==void 0&&e.jsx(h,{variant:"body2",color:C.realizedPl>=0?"success.main":"error.main",fontWeight:"medium",children:X(Number(C.realizedPl)||0)})}),e.jsx(z,{align:"center",children:e.jsx(as,{title:"Actions",children:e.jsx(Et,{size:"small",onClick:I=>N(I,C),sx:{"&:hover":{bgcolor:"primary.main",color:"white"}},children:e.jsx(Lo,{})})})})]},C.tradeId)})})]})}),c>1&&e.jsx(b,{display:"flex",justifyContent:"center",mt:3,children:e.jsx(ql,{count:c,page:l,onChange:(C,V)=>i==null?void 0:i(V),color:"primary",shape:"rounded",size:"large"})}),e.jsxs(Vo,{anchorEl:w,open:!!w,onClose:_,PaperProps:{sx:{borderRadius:2,boxShadow:3,minWidth:160}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(ce,{onClick:()=>E("view"),sx:{py:1.5},children:[e.jsx($t,{children:e.jsx(ma,{fontSize:"small",color:"primary"})}),e.jsx(Wt,{children:"View Details"})]}),e.jsxs(ce,{onClick:()=>E("edit"),sx:{py:1.5},children:[e.jsx($t,{children:e.jsx(is,{fontSize:"small",color:"primary"})}),e.jsx(Wt,{children:"Edit Trade"})]}),e.jsxs(ce,{onClick:()=>E("delete"),sx:{py:1.5,color:"error.main"},children:[e.jsx($t,{children:e.jsx(Uo,{fontSize:"small",color:"error"})}),e.jsx(Wt,{children:"Delete Trade"})]})]})]})},Pl=({portfolioId:t,onCreate:r,isCompactMode:n=!1})=>{var E;const[s,a]=x.useState({assetId:"",side:"",startDate:"",endDate:""}),[o,i]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState(null),{data:f,isLoading:p,error:m}=Sa(t,s),g=Xf(),v=Zf(),{data:P,isLoading:j,error:w}=Jf((d==null?void 0:d.tradeId)||""),D=k=>{a(k)},y=k=>{u(k),i(!0)},A=k=>{u(k),c(!0)},R=async k=>{if(window.confirm("Are you sure you want to delete this trade?"))try{await g.mutateAsync(k.tradeId)}catch(T){console.error("Error deleting trade:",T)}},N=()=>{i(!1),c(!1),u(null)},_=()=>{r&&r()};return p?e.jsxs(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(He,{}),e.jsx(h,{sx:{ml:2},children:"Loading trades..."})]}):m?e.jsx(ze,{severity:"error",children:(m==null?void 0:m.message)||"Failed to load trades"}):e.jsxs(b,{sx:{p:n?1:0},children:[e.jsx(ev,{trades:f||[],isLoading:p,error:m==null?void 0:m.message,onEdit:y,onView:A,onDelete:R,onCreate:_,onFiltersChange:D,filters:s,totalTrades:(f==null?void 0:f.length)||0}),e.jsx(Zy,{open:o,onClose:N,onSubmit:async k=>{if(d)try{await v.mutateAsync({id:d.tradeId,data:{...k,tradeDate:typeof k.tradeDate=="string"?k.tradeDate:k.tradeDate.toISOString()}}),N()}catch(T){console.error("Error updating trade:",T)}},initialData:d?{...d,tradeDate:typeof d.tradeDate=="string"?d.tradeDate:d.tradeDate.toISOString()}:void 0,isLoading:v.isLoading,error:(E=v.error)==null?void 0:E.message}),e.jsx(Jy,{open:l,onClose:N,onEdit:y,trade:d,tradeDetails:(P==null?void 0:P.tradeDetails)||[],isLoading:j,error:typeof w=="object"&&w!==null&&"message"in w?w.message:void 0})]})},tv=t=>!t||typeof t!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),rv=({analysis:t,currency:r="USD",isLoading:n=!1,error:s,selectedTimeframe:a="ALL",selectedMetric:o="pnl",onTimeframeChange:i,onMetricChange:l,isCompactMode:c=!1})=>{const[d,u]=x.useState("pie"),f=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98","#F4A460","#20B2AA","#FF6347","#4682B4","#D2691E"],m=(y=>{switch(y){case"VND":return"vi-VN";case"USD":return"en-US";case"EUR":return"de-DE";case"GBP":return"en-GB";case"JPY":return"ja-JP";default:return"en-US"}})(r),g=y=>y>=100?Mn(y,1,m):(y>=10,Mn(y,2,m)),v=x.useMemo(()=>{if(!t||!t.pnlSummary||!t.statistics||!t.riskMetrics||!Array.isArray(t.assetPerformance))return!1;if(t.pnlSummary.winRate!==void 0){const y=Number(t.pnlSummary.winRate);if(isNaN(y)||y<0||y>100)return!1}if(t.riskMetrics.volatility!==void 0){const y=Number(t.riskMetrics.volatility);if(isNaN(y)||y<0)return!1}return!0},[t]),P=x.useMemo(()=>t.monthlyPerformance.map(y=>{var A,R,N,_,E;return{month:y.month,pnl:parseFloat(((A=y.totalPl)==null?void 0:A.toString())||"0"),trades:y.tradesCount||0,winRate:y.winRate||0,totalVolume:parseFloat(((R=y.totalVolume)==null?void 0:R.toString())||"0"),winningTrades:y.winningTrades||0,losingTrades:y.losingTrades||0,formattedPnl:X(parseFloat(((N=y.totalPl)==null?void 0:N.toString())||"0"),r,{},m),formattedVolume:X(parseFloat(((_=y.totalVolume)==null?void 0:_.toString())||"0"),r,{},m),formattedWinRate:ve(y.winRate||0,1,m),color:parseFloat(((E=y.totalPl)==null?void 0:E.toString())||"0")>=0?"#00C49F":"#FF8042"}}),[t.monthlyPerformance,r,m]),j=x.useMemo(()=>{var R;if(console.log("🔍 Asset Performance Debug:",{hasAnalysis:!!t,hasAssetPerformance:!!(t!=null&&t.assetPerformance),isArray:Array.isArray(t==null?void 0:t.assetPerformance),assetPerformance:t==null?void 0:t.assetPerformance,length:(R=t==null?void 0:t.assetPerformance)==null?void 0:R.length}),!t.assetPerformance||!Array.isArray(t.assetPerformance))return console.log("Asset performance not available or not an array"),[];const y=t.assetPerformance.map((N,_)=>{var T,C,V,F,I,K;const E=parseFloat(((T=N.totalPl)==null?void 0:T.toString())||"0"),k=Math.abs(E);return{assetId:N.assetId||`asset-${_}`,name:N.assetSymbol||"Unknown",fullName:N.assetName||"Unknown Asset",value:k,originalValue:E,trades:N.tradesCount||0,winRate:N.winRate||0,totalVolume:parseFloat(((C=N.totalVolume)==null?void 0:C.toString())||"0"),quantity:parseFloat(((V=N.quantity)==null?void 0:V.toString())||"0"),avgCost:parseFloat(((F=N.avgCost)==null?void 0:F.toString())||"0"),marketValue:parseFloat(((I=N.marketValue)==null?void 0:I.toString())||"0"),color:f[_%f.length],formattedValue:X(E,r,{},m),formattedVolume:X(parseFloat(((K=N.totalVolume)==null?void 0:K.toString())||"0"),r,{},m),formattedWinRate:ve(N.winRate||0,1,m)}}),A=y.sort((N,_)=>_.value-N.value);return console.log("🔍 Asset Chart Data Processed:",{originalLength:y.length,sortedLength:A.length,sampleData:A.slice(0,3),allValues:A.map(N=>N.value),originalValues:A.map(N=>N.originalValue),hasPositiveValues:A.some(N=>N.value>0),colors:A.map(N=>N.color)}),A},[t.assetPerformance,r,m]),w=({active:y,payload:A,label:R})=>{var N;if(y&&A&&A.length){const _=(N=A[0])==null?void 0:N.payload;return e.jsxs(b,{sx:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:2,p:2,boxShadow:3,minWidth:200},children:[e.jsx(h,{variant:"subtitle2",fontWeight:"bold",color:"primary",gutterBottom:!0,children:R}),A.map((E,k)=>e.jsxs(b,{sx:{mb:.5},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",children:[E.dataKey==="pnl"?"P&L":E.dataKey==="trades"?"Trades":E.dataKey==="winRate"?"Win Rate":E.dataKey==="value"?"Value":E.dataKey,":"]}),e.jsx(h,{variant:"body2",fontWeight:"bold",color:E.color,children:E.dataKey==="pnl"&&(_!=null&&_.formattedPnl)?_.formattedPnl:E.dataKey==="trades"?E.value:E.dataKey==="winRate"&&(_!=null&&_.formattedWinRate)?_.formattedWinRate:E.dataKey==="value"&&(_!=null&&_.formattedValue)?_.formattedValue:E.dataKey==="pnl"?X(E.value,r,{},m):E.value})]},k)),(_==null?void 0:_.fullName)&&e.jsx(b,{sx:{mt:1,pt:1,borderTop:"1px solid #f0f0f0"},children:e.jsx(h,{variant:"caption",color:"text.secondary",children:_.fullName})})]})}return null},D=({name:y,percent:A,payload:R})=>{const N=Mn(A*100,1,m),_=(R==null?void 0:R.formattedValue)||X((R==null?void 0:R.value)||0,r,{},m);return A<.02?`${y}
${_}`:A<.05?`${y}
${N}
${_}`:`${y}
${N}
${_}`};return n?e.jsxs(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(He,{}),e.jsx(h,{sx:{ml:2},children:"Loading analysis..."})]}):s?e.jsx(ze,{severity:"error",children:(s==null?void 0:s.message)||"Failed to load trade analysis"}):t?v?e.jsxs(b,{sx:{p:c?1:3},children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:c?2:4,children:[e.jsxs(b,{children:[e.jsx(h,{variant:c?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontSize:c?"0.9rem":void 0},children:"Trading Analysis"}),e.jsx(h,{variant:c?"body2":"body1",color:"text.secondary",sx:{fontSize:c?"0.75rem":void 0},children:"Comprehensive performance insights and analytics"})]}),e.jsxs(b,{display:"flex",gap:2,children:[e.jsxs(Xe,{size:"small",sx:{minWidth:140},children:[e.jsx(Je,{children:"Timeframe"}),e.jsxs(et,{value:a,label:"Timeframe",onChange:y=>i==null?void 0:i(y.target.value),sx:{borderRadius:2},children:[e.jsx(ce,{value:"ALL",children:"All Time"}),e.jsx(ce,{value:"1M",children:"1 Month"}),e.jsx(ce,{value:"3M",children:"3 Months"}),e.jsx(ce,{value:"6M",children:"6 Months"}),e.jsx(ce,{value:"1Y",children:"1 Year"})]})]}),e.jsxs(Xe,{size:"small",sx:{minWidth:140},children:[e.jsx(Je,{children:"Metric"}),e.jsxs(et,{value:o,label:"Metric",onChange:y=>l==null?void 0:l(y.target.value),sx:{borderRadius:2},children:[e.jsx(ce,{value:"pnl",children:"P&L"}),e.jsx(ce,{value:"trades",children:"Trades"}),e.jsx(ce,{value:"winrate",children:"Win Rate"})]})]})]})]}),e.jsxs(M,{container:!0,spacing:c?1:3,mb:c?2:4,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:140,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),e.jsx(h,{variant:"h4",color:t.pnlSummary.totalPnl>=0?"success.main":"error.main",children:X(t.pnlSummary.totalPnl,r,{},m)})]}),e.jsx(b,{sx:{color:t.pnlSummary.totalPnl>=0?"success.main":"error.main",display:"flex",alignItems:"center"},children:e.jsx(yt,{})})]}),e.jsx(b,{display:"flex",alignItems:"center",gap:1,children:e.jsx(De,{label:`${ve(t.pnlSummary.winRate,1,m)} Win Rate`,color:t.pnlSummary.winRate>=50?"success":"warning",size:"small",variant:"outlined"})})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:140,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Trades"}),e.jsx(h,{variant:"h4",children:xt(t.statistics.totalTrades,0,m)})]}),e.jsx(b,{sx:{color:"primary.main",display:"flex",alignItems:"center"},children:e.jsx(zn,{})})]}),e.jsxs(b,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(De,{label:`${t.statistics.buyTrades} Buy`,color:"success",size:"small",variant:"outlined"}),e.jsx(De,{label:`${t.statistics.sellTrades} Sell`,color:"error",size:"small",variant:"outlined"})]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:140,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Volume"}),e.jsx(h,{variant:"h4",children:X(t.statistics.totalVolume,r,{},m)})]}),e.jsx(b,{sx:{color:"info.main",display:"flex",alignItems:"center"},children:e.jsx(Ql,{})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Avg: ",X(t.statistics.averagePrice,r,{},m)]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:140,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sharpe Ratio"}),e.jsx(h,{variant:"h4",color:"primary",children:t.riskMetrics.sharpeRatio})]}),e.jsx(b,{sx:{color:"warning.main",display:"flex",alignItems:"center"},children:e.jsx(Kl,{})})]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Risk-Adjusted Return"})]})})})]}),e.jsxs(M,{container:!0,spacing:3,mb:4,children:[e.jsx(M,{item:!0,xs:12,lg:8,children:e.jsx(de,{sx:{boxShadow:2,height:400},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Monthly Performance"}),e.jsx(De,{label:"P&L Trend",color:"primary",size:"small",variant:"outlined"})]}),e.jsx(b,{sx:{flex:1,minHeight:0},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:P,children:[e.jsx(er,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(tr,{dataKey:"month",tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"}}),e.jsx(rr,{tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"},tickFormatter:y=>X(y,r,{},m)}),e.jsx(Rt,{content:e.jsx(w,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(zr,{type:"monotone",dataKey:"pnl",stroke:"#1976d2",strokeWidth:3,dot:y=>{const{cx:A,cy:R,payload:N,index:_}=y;return e.jsx("circle",{cx:A,cy:R,r:4,fill:(N==null?void 0:N.color)||"#1976d2",stroke:"#fff",strokeWidth:2},`dot-${_}`)},activeDot:{r:6,stroke:"#1976d2",strokeWidth:2},name:"P&L"})]})})})]})})}),e.jsx(M,{item:!0,xs:12,lg:4,children:e.jsx(de,{sx:{boxShadow:2,height:400},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(h,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Asset Performance"}),e.jsxs(b,{display:"flex",gap:1,children:[e.jsx(De,{label:"Pie Chart",size:"small",color:d==="pie"?"primary":"default",onClick:()=>u("pie"),sx:{cursor:"pointer"}}),e.jsx(De,{label:"Compact List",size:"small",color:d==="compact"?"primary":"default",onClick:()=>u("compact"),sx:{cursor:"pointer"}})]})]}),j&&j.length>0&&j.some(y=>y.value>0)?e.jsx(b,{sx:{height:350,display:"flex",flexDirection:"column"},children:d==="pie"?e.jsx(b,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center","& .recharts-pie-label-text":{fontSize:"10px !important",fontWeight:"bold !important",fill:"#333 !important",textShadow:"1px 1px 2px rgba(255,255,255,0.8) !important"}},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(Ho,{children:[e.jsx(zo,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:D,outerRadius:90,innerRadius:35,fill:"#8884d8",dataKey:"value",minAngle:1,paddingAngle:1,children:j.map((y,A)=>e.jsx(gn,{fill:y.color||f[A%f.length]},`cell-${A}`))}),e.jsx(Rt,{content:e.jsx(w,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})})}):e.jsx(b,{sx:{flex:1,overflow:"auto",border:"1px solid",borderColor:"grey.200",borderRadius:1,backgroundColor:"grey.50",p:2},children:e.jsx(b,{display:"flex",flexWrap:"wrap",gap:1,children:j.map((y,A)=>{const R=j.reduce((_,E)=>_+E.value,0),N=R>0?y.value/R*100:0;return e.jsx(De,{icon:e.jsx(b,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:y.color||f[A%f.length],border:"1px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.2)"}}),label:e.jsxs(b,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(h,{variant:"caption",fontWeight:"bold",children:y.name}),e.jsx(h,{variant:"caption",fontWeight:"bold",color:y.originalValue>=0?"success.main":"error.main",children:y.formattedValue}),e.jsxs(h,{variant:"caption",color:"primary",fontWeight:"bold",children:["(",ve(N,1,m),")"]})]}),variant:"outlined",sx:{height:32,backgroundColor:y.originalValue>=0?"success.50":"error.50",borderColor:"grey.300",borderWidth:1,"&:hover":{backgroundColor:y.originalValue>=0?"success.100":"error.100",transform:"scale(1.02)",borderColor:y.originalValue>=0?"success.main":"error.main"},transition:"all 0.2s ease-in-out"}},A)})})})}):e.jsxs(b,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:300,children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,children:"No asset performance data available"}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Debug: assetChartData length = ",(j==null?void 0:j.length)||0]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Analysis has assetPerformance: ",t!=null&&t.assetPerformance?"Yes":"No"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Has positive values: ",j!=null&&j.some(y=>y.value>0)?"Yes":"No"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Values: ",j==null?void 0:j.map(y=>`${y.name}: ${y.value}`).join(", ")]})]})]})})})]}),e.jsx(M,{container:!0,spacing:3,mb:4,children:e.jsx(M,{item:!0,xs:12,children:e.jsx(de,{sx:{boxShadow:2},children:e.jsxs(he,{children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Risk Metrics"}),e.jsx(De,{label:"Risk Assessment",color:"warning",size:"small",variant:"outlined"})]}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:t.riskMetrics.sharpeRatio}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Sharpe Ratio"})]})}),e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:t.riskMetrics.volatility>200?"error.50":"warning.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:t.riskMetrics.volatility>200?"error.main":"warning.main",fontWeight:"bold",children:g(t.riskMetrics.volatility)}),e.jsxs(h,{variant:"body2",color:"text.secondary",mt:1,children:["Volatility",t.riskMetrics.volatility>200&&e.jsx(h,{variant:"caption",color:"error.main",display:"block",children:"⚠️ Extreme volatility"})]})]})}),e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"error.main",fontWeight:"bold",children:X(t.riskMetrics.var95,r,{},m)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"VaR (95%)"})]})}),e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"error.main",fontWeight:"bold",children:X(t.riskMetrics.maxDrawdown,r,{},m)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Max Drawdown"})]})})]})]})})})}),e.jsxs(M,{container:!0,spacing:3,mb:4,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{sx:{boxShadow:2,height:500},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Top Performing Trades"}),e.jsx(De,{label:"Best",color:"success",size:"small",variant:"outlined"})]}),e.jsx(Kt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Gt,{size:"small",stickyHeader:!0,children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600},children:"Asset"}),e.jsx(z,{sx:{fontWeight:600},children:"Side"}),e.jsx(z,{sx:{fontWeight:600},children:"P&L"}),e.jsx(z,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(Xt,{children:t.topTrades.slice(0,5).map(y=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),e.jsx(z,{children:e.jsx(De,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),e.jsx(z,{color:y.realizedPl>=0?"success.main":"error.main",children:X(Number(y.realizedPl)||0,r,{},m)}),e.jsx(z,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{sx:{boxShadow:2,height:500},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Worst Performing Trades"}),e.jsx(De,{label:"Worst",color:"error",size:"small",variant:"outlined"})]}),e.jsx(Kt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Gt,{size:"small",stickyHeader:!0,children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600},children:"Asset"}),e.jsx(z,{sx:{fontWeight:600},children:"Side"}),e.jsx(z,{sx:{fontWeight:600},children:"P&L"}),e.jsx(z,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(Xt,{children:t.worstTrades.slice(0,5).map(y=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),e.jsx(z,{children:e.jsx(De,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),e.jsx(z,{color:y.realizedPl>=0?"success.main":"error.main",children:X(Number(y.realizedPl)||0,r,{},m)}),e.jsx(z,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})})]}),e.jsx(M,{container:!0,spacing:3,children:e.jsx(M,{item:!0,xs:12,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Performance Details"}),e.jsx(Kt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Gt,{stickyHeader:!0,children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Asset"}),e.jsx(z,{children:"Quantity"}),e.jsx(z,{children:"Avg Cost"}),e.jsx(z,{children:"Market Value"}),e.jsx(z,{children:"P&L"}),e.jsx(z,{children:"Trades"}),e.jsx(z,{children:"Win Rate"})]})}),e.jsx(Xt,{children:j&&j.length>0?j.map(y=>e.jsxs(Ge,{hover:!0,children:[e.jsx(z,{children:e.jsxs(b,{children:[e.jsx(h,{variant:"body2",fontWeight:"bold",children:y.name}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.fullName})]})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:xt(y.quantity,2,m)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:X(y.avgCost,r,{},m)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:X(y.marketValue,r,{},m)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"bold",color:y.value>=0?"success.main":"error.main",children:y.formattedValue})}),e.jsx(z,{children:e.jsxs(b,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(h,{variant:"body2",children:y.trades}),e.jsx(De,{label:y.winRate>=50?"Win":"Loss",size:"small",color:y.winRate>=50?"success":"error",variant:"outlined"})]})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"bold",children:y.formattedWinRate})})]},y.assetId||y.name)):e.jsx(Ge,{children:e.jsx(z,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(h,{color:"text.secondary",children:"No asset performance data available"})})})})]})})]})})})})]}):e.jsx(ze,{severity:"error",children:"Invalid analysis data format"}):e.jsx(ze,{severity:"info",children:"No trade data available for analysis"})},Sl=({portfolioId:t,isCompactMode:r=!1})=>{const[n,s]=x.useState("ALL"),[a,o]=x.useState("pnl");if(!tv(t))return e.jsx(ze,{severity:"error",children:"Invalid portfolio ID format"});const{portfolio:i,isLoading:l,error:c}=Di(t),d={timeframe:n,metric:a},{data:u,isLoading:f,error:p}=ep(t,d);return console.log("🔍 TradeAnalysisContainer - Filters:",{selectedTimeframe:n,selectedMetric:a,portfolioId:t}),console.log("🔍 TradeAnalysisContainer - Analysis Data:",{hasAnalysis:!!u,analysisKeys:u?Object.keys(u):[],assetPerformance:u==null?void 0:u.assetPerformance,monthlyPerformance:u==null?void 0:u.monthlyPerformance,pnlSummary:u==null?void 0:u.pnlSummary,statistics:u==null?void 0:u.statistics,riskMetrics:u==null?void 0:u.riskMetrics}),l||f?e.jsxs(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(He,{}),e.jsx(h,{sx:{ml:2},children:"Loading analysis..."})]}):c?e.jsx(ze,{severity:"error",children:(c==null?void 0:c.message)||"Failed to load portfolio information"}):p?e.jsx(ze,{severity:"error",children:(p==null?void 0:p.message)||"Failed to load trade analysis"}):i?u?e.jsx(rv,{analysis:u,currency:i.baseCurrency,selectedTimeframe:n,selectedMetric:a,onTimeframeChange:s,onMetricChange:o,isCompactMode:r}):e.jsx(ze,{severity:"info",children:"No trade data available for analysis"}):e.jsx(ze,{severity:"error",children:"Portfolio not found"})};function qs(t){const{children:r,value:n,index:s,...a}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==s,id:`portfolio-tabpanel-${s}`,"aria-labelledby":`portfolio-tab-${s}`,...a,children:n===s&&e.jsx(b,{sx:{p:3},children:r})})}const nv=()=>{const{portfolioId:t}=Wo(),r=pn(),[n,s]=x.useState(1),[a,o]=x.useState(!1),[i,l]=x.useState(null),[c,d]=x.useState(!1),[u,f]=x.useState(null),[p,m]=x.useState(null),[g,v]=x.useState(!1),[P,j]=x.useState(null),[w,D]=x.useState(null),[y,A]=x.useState(!1),[R,N]=x.useState(null),[_,E]=x.useState(null),[k,T]=x.useState(!1),[C,V]=x.useState(null),[F,I]=x.useState(null),[K,W]=x.useState(!1),[O,L]=x.useState(null),[q,me]=x.useState(null),[ye,re]=x.useState(!1),[S,Y]=x.useState(null),[pe,Q]=x.useState(null),[se,le]=x.useState(!1),[je,ue]=x.useState(null),[xe,J]=x.useState(null),[be,We]=x.useState(!1),[Ue,lt]=x.useState(null),[oe,we]=x.useState(!1),H=(Ee,fe)=>oe?fe:Ee,{portfolio:Z,isLoading:Pe,error:Le}=Di(t),{navData:G,performanceData:ne,allocationData:Se,isLoading:Re,error:rt}=Wu(t);x.useEffect(()=>{(async()=>{if(t)try{d(!0),f(null);const fe=await Be.getPortfolioRiskReturn(t);l(fe)}catch(fe){console.error("Error fetching risk-return data:",fe),f("Failed to load risk-return data")}finally{d(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{v(!0),j(null);const fe=await Be.getPortfolioAssetPerformance(t);m(fe)}catch(fe){console.error("Error fetching asset performance data:",fe),j("Failed to load asset performance data")}finally{v(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{A(!0),N(null);const fe=await Be.getPortfolioRiskMetrics(t);D(fe)}catch(fe){console.error("Error fetching risk metrics data:",fe),N("Failed to load risk metrics data")}finally{A(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{T(!0),V(null);const fe=await Be.getPortfolioDiversificationHeatmap(t);E(fe)}catch(fe){console.error("Error fetching diversification data:",fe),V("Failed to load diversification data")}finally{T(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{W(!0),L(null);const fe=await Be.getPortfolioAllocationTimeline(t);I(fe)}catch(fe){console.error("Error fetching allocation timeline data:",fe),L("Failed to load allocation timeline data")}finally{W(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{re(!0),Y(null);const fe=await Be.getPortfolioCashFlowAnalysis(t);me(fe)}catch(fe){console.error("Error fetching cash flow data:",fe),Y("Failed to load cash flow data")}finally{re(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{le(!0),ue(null);const fe=await Be.getPortfolioBenchmarkComparison(t);Q(fe)}catch(fe){console.error("Error fetching benchmark data:",fe),ue("Failed to load benchmark data")}finally{le(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{We(!0),lt(null);const fe=await Be.getPortfolioAssetDetailSummary(t);J(fe)}catch(fe){console.error("Error fetching asset detail data:",fe),lt("Failed to load asset detail data")}finally{We(!1)}})()},[t]);const dt=qi(),lr=Sa(t).data||[],br=(Ee,fe)=>{s(fe)},Tt=async Ee=>{try{await dt.mutateAsync(Ee),o(!1)}catch(fe){console.error("Error creating trade:",fe)}},Ms=lr.length,Rs=lr.reduce((Ee,fe)=>Ee+(Number(fe.quantity)*Number(fe.price)||0),0),Es=lr.reduce((Ee,fe)=>Ee+(Number(fe.fee)||0)+(Number(fe.tax)||0),0),Pn=lr.reduce((Ee,fe)=>Ee+(Number(fe.realizedPl)||0),0),Gr=[{title:"Total Trades",value:Ms,color:"primary",icon:e.jsx(yt,{})},{title:"Total Volume",value:X(Rs,(Z==null?void 0:Z.baseCurrency)||"VND"),color:"info",icon:e.jsx(Jt,{})},{title:"Fees & Taxes",value:X(Es,(Z==null?void 0:Z.baseCurrency)||"VND"),color:"warning",icon:e.jsx(Dt,{})},{title:"Realized P&L",value:X(Pn,(Z==null?void 0:Z.baseCurrency)||"VND"),color:Pn>=0?"success":"error",icon:e.jsx(yt,{})}];Ht.useEffect(()=>{console.log("Portfolio Detail Debug:",{portfolio:Z,navData:G,performanceData:ne,allocationData:Se,isAnalyticsLoading:Re,analyticsError:rt})},[Z,G,ne,Se,Re,rt]);const Sn=()=>{r("/portfolios")};return Pe?e.jsx(Vr,{maxWidth:"xl",children:e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(He,{})})}):Le||!Z?e.jsx(Vr,{maxWidth:"xl",children:e.jsx(b,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(h,{color:"error",children:"Failed to load portfolio. Please try again."})})}):e.jsxs(Vr,{maxWidth:"xl",children:[e.jsx(b,{sx:{mb:4},children:e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:Z.name}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Portfolio Management & Trading"})]}),e.jsxs(b,{display:"flex",gap:2,children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Bo,{}),onClick:Sn,sx:{borderRadius:2,textTransform:"none"},children:"Back to Portfolios"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:()=>o(!0),sx:{borderRadius:2,textTransform:"none"},children:"New Trade"})]})]})}),e.jsxs(M,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:120,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Current NAV"}),e.jsx(h,{variant:"h5",component:"div",children:G?X(G.navValue,Z.baseCurrency):"N/A"})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:120,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Total Return"}),e.jsx(h,{variant:"h5",component:"div",color:((ne==null?void 0:ne.totalReturn)||0)>=0?"success.main":"error.main",children:ne?ve(ne.totalReturn):"N/A"})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:120,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Annualized Return"}),e.jsx(h,{variant:"h5",component:"div",color:((ne==null?void 0:ne.annualizedReturn)||0)>=0?"success.main":"error.main",children:ne?ve(ne.annualizedReturn):"N/A"})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:120,boxShadow:2},children:e.jsxs(he,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Base Currency"}),e.jsx(h,{variant:"h5",component:"div",children:Z.baseCurrency})]})})})]}),e.jsx(M,{container:!0,spacing:3,sx:{mb:4},children:Gr.map((Ee,fe)=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{sx:{height:120,boxShadow:2},children:e.jsx(he,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(b,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:Ee.title}),e.jsx(h,{variant:"h5",component:"div",children:Ee.value})]}),e.jsx(b,{sx:{color:`${Ee.color}.main`,display:"flex",alignItems:"center"},children:Ee.icon})]})})})},fe))}),e.jsxs(nt,{sx:{width:"100%",mb:4},children:[e.jsx(b,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:2,py:1},children:[e.jsxs(fn,{value:n,onChange:br,"aria-label":"portfolio tabs",children:[e.jsx(gt,{label:"Trading Management"}),e.jsx(gt,{label:"Trading Analysis",defaultChecked:!0}),e.jsx(gt,{label:"Asset Allocation"})]}),e.jsx(as,{title:oe?"Switch to Normal View":"Switch to Compact View",children:e.jsx(Gl,{control:e.jsx(Jl,{checked:oe,onChange:Ee=>we(Ee.target.checked),color:"primary",size:"small"}),label:e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:.5},children:[oe?e.jsx(Zl,{fontSize:"small"}):e.jsx(Xl,{fontSize:"small"}),e.jsx(h,{variant:"caption",sx:{fontSize:"0.75rem"},children:oe?"Compact":"Normal"})]}),sx:{m:0}})})]})}),e.jsx(qs,{value:n,index:0,children:e.jsx(b,{sx:{p:H(3,1)},children:e.jsx(M,{container:!0,spacing:H(3,1),children:e.jsx(M,{item:!0,xs:12,children:e.jsx(Pl,{portfolioId:t,onCreate:()=>o(!0),isCompactMode:oe})})})})}),e.jsx(qs,{value:n,index:1,children:e.jsx(b,{sx:{p:H(3,1)},children:e.jsxs(M,{container:!0,spacing:H(3,1),children:[e.jsx(M,{item:!0,xs:12,children:e.jsx(rp,{portfolioId:t,baseCurrency:Z.baseCurrency,title:"Portfolio Performance"})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(Sl,{portfolioId:t,isCompactMode:oe})})]})})}),e.jsx(qs,{value:n,index:2,children:e.jsxs(b,{sx:{p:H(3,1),backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Portfolio Overview"}),e.jsxs(M,{container:!0,spacing:H(3,1),children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:X(Z.totalValue,Z.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Total Value"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"success.main",fontWeight:"bold",children:X(Z.unrealizedPl,Z.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Unrealized P&L"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:X(Z.cashBalance,Z.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Cash Balance"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"warning.main",fontWeight:"bold",children:Object.keys((Se==null?void 0:Se.allocation)||{}).length}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Asset Classes"})]})})]})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Asset Allocation"}),e.jsxs(M,{container:!0,spacing:H(3,1),children:[e.jsx(M,{item:!0,xs:12,md:8,children:e.jsx(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:Re?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):rt?e.jsx(h,{color:"error",children:"Failed to load allocation data"}):e.jsx(tp,{data:Se||{allocation:{},totalValue:0,assetCount:0},baseCurrency:Z.baseCurrency})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsxs(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Allocation Summary"}),Se&&Object.keys(Se.allocation).length>0?e.jsxs(b,{children:[Object.entries(Se.allocation).map(([Ee,fe])=>e.jsxs(b,{sx:{mb:3},children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body1",fontWeight:"medium",children:Ee.toUpperCase()}),e.jsxs(h,{variant:"body1",fontWeight:"bold",color:"primary",children:[fe.percentage.toFixed(1),"%"]})]}),e.jsx(b,{sx:{width:"100%",height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:e.jsx(b,{sx:{width:`${fe.percentage}%`,height:"100%",backgroundColor:"#1976d2",transition:"width 0.3s ease"}})}),e.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:X(fe.value,Z.baseCurrency)})]},Ee)),e.jsxs(b,{sx:{mt:3,pt:3,borderTop:"1px solid #e0e0e0",textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Portfolio Value"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:X(Z.totalValue,Z.baseCurrency)})]})]}):e.jsx(h,{variant:"body2",color:"text.secondary",children:"No allocation data available"})]})})]})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Asset Detail Summary"}),e.jsx(b,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:be?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):Ue?e.jsx(h,{color:"error",children:Ue}):e.jsx(dp,{data:(xe==null?void 0:xe.data)||[],baseCurrency:Z.baseCurrency,title:"Individual Asset Holdings"})})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Risk & Performance Analysis"}),e.jsxs(M,{container:!0,spacing:H(3,1),children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:c?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):u?e.jsx(h,{color:"error",children:u}):e.jsx(np,{data:(i==null?void 0:i.data)||[],baseCurrency:Z.baseCurrency,title:"Risk-Return Analysis"})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:g?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):P?e.jsx(h,{color:"error",children:P}):e.jsx(sp,{data:(p==null?void 0:p.data)||[],baseCurrency:Z.baseCurrency,title:"Asset Performance Comparison"})})})]})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Risk Metrics"}),e.jsx(b,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:y?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):R?e.jsx(h,{color:"error",children:R}):e.jsx(ap,{data:(w==null?void 0:w.data)||{},baseCurrency:Z.baseCurrency,title:"Risk Metrics Dashboard"})})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Diversification & Timeline"}),e.jsxs(M,{container:!0,spacing:H(3,1),children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:k?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):C?e.jsx(h,{color:"error",children:C}):e.jsx(op,{data:(_==null?void 0:_.data)||[],title:"Diversification Heatmap"})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{p:H(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:K?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):O?e.jsx(h,{color:"error",children:O}):e.jsx(ip,{data:(F==null?void 0:F.data)||[],baseCurrency:Z.baseCurrency,title:"Allocation Timeline"})})})]})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Cash Flow Analysis"}),e.jsx(b,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:ye?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):S?e.jsx(h,{color:"error",children:S}):e.jsx(lp,{data:(q==null?void 0:q.data)||[],baseCurrency:Z.baseCurrency,title:"Cash Flow Analysis"})})]}),e.jsxs(b,{sx:{mb:H(4,1)},children:[e.jsx(h,{variant:oe?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:H(3,1),fontSize:oe?"0.9rem":void 0},children:"Benchmark Comparison"}),e.jsx(b,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:se?e.jsx(b,{display:"flex",justifyContent:"center",p:4,children:e.jsx(He,{})}):je?e.jsx(h,{color:"error",children:je}):e.jsx(cp,{data:(pe==null?void 0:pe.data)||[],baseCurrency:Z.baseCurrency,title:"Benchmark Comparison",benchmarkName:(pe==null?void 0:pe.benchmarkName)||"S&P 500"})})]})]})})]}),a&&e.jsx(b,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:()=>o(!1),children:e.jsx(b,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out"},onClick:Ee=>Ee.stopPropagation(),children:e.jsx(ns,{onSubmit:Tt,defaultPortfolioId:t})})})]})};function Qs(t){const{children:r,value:n,index:s,...a}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==s,id:`trading-tabpanel-${s}`,"aria-labelledby":`trading-tab-${s}`,...a,children:n===s&&e.jsx(b,{sx:{p:0},children:r})})}const sv=()=>{var _,E;const{portfolioId:t}=Wo(),r=pn(),[n,s]=x.useState(0),[a,o]=x.useState(!1),i=qi(),c=Sa(t).data||[],d=(k,T)=>{s(T)},u=()=>{r(`/portfolios/${t}`)},f=async k=>{try{await i.mutateAsync(k),o(!1)}catch(T){console.error("Error creating trade:",T)}},p=async k=>{const T={...k,tradeDate:k.tradeDate};await f(T)},m=()=>{o(!1)},g=()=>{s(2)},v=(c==null?void 0:c.length)||0,P=(c==null?void 0:c.filter(k=>k.side==="BUY").length)||0,j=(c==null?void 0:c.filter(k=>k.side==="SELL").length)||0,w=(c==null?void 0:c.reduce((k,T)=>k+(Number(T.totalValue)||0),0))||0,D=(c==null?void 0:c.reduce((k,T)=>k+(Number(T.fee)||0),0))||0,y=(c==null?void 0:c.reduce((k,T)=>k+(Number(T.tax)||0),0))||0,A=D+y,R=(c==null?void 0:c.reduce((k,T)=>k+(Number(T.realizedPl)||0),0))||0,N=[{title:"Total Trades",value:v.toString(),icon:e.jsx(Jt,{}),color:"primary"},{title:"Buy Orders",value:P.toString(),icon:e.jsx(yt,{}),color:"success"},{title:"Sell Orders",value:j.toString(),icon:e.jsx(Dt,{}),color:"error"},{title:"Total Volume",value:X(w),icon:e.jsx(zn,{}),color:"info"}];return t?e.jsxs(Vr,{maxWidth:"xl",children:[e.jsx(b,{sx:{mb:4},children:e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(b,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Trading Management"}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Manage your trades, analyze performance, and track positions"})]}),e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Bo,{}),onClick:u,sx:{borderRadius:2,textTransform:"none",px:3,py:1},children:"Back to Portfolio"})]})}),e.jsx(M,{container:!0,spacing:3,sx:{mb:4},children:N.map((k,T)=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{children:e.jsx(he,{children:e.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(b,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:k.title}),e.jsx(h,{variant:"h5",component:"div",children:k.value})]}),e.jsx(b,{sx:{color:`${k.color}.main`,display:"flex",alignItems:"center"},children:k.icon})]})})})},T))}),e.jsx(M,{container:!0,spacing:3,sx:{mb:4},children:e.jsx(M,{item:!0,xs:12,children:e.jsx(de,{sx:{boxShadow:2},children:e.jsxs(he,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Trading Performance"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"grey.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"text.primary",fontWeight:"bold",children:X(A)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Fees & Taxes"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:R>=0?"success.50":"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:R>=0?"success.main":"error.main",fontWeight:"bold",children:X(R)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Realized P&L"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"info.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:X(w)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Volume"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"primary.main",fontWeight:"bold",children:v}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Trades"})]})})]})]})})})}),e.jsxs(nt,{sx:{width:"100%",boxShadow:2},children:[e.jsx(b,{sx:{borderBottom:1,borderColor:"divider",bgcolor:"grey.50"},children:e.jsxs(fn,{value:n,onChange:d,"aria-label":"trading tabs",variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500,minHeight:48},"& .Mui-selected":{color:"primary.main",fontWeight:600}},children:[e.jsx(gt,{label:"Trade History",icon:e.jsx(Jt,{}),iconPosition:"start"}),e.jsx(gt,{label:"Analysis",icon:e.jsx(zn,{}),iconPosition:"start"}),e.jsx(gt,{label:"Create Trade",icon:e.jsx(Nt,{}),iconPosition:"start"})]})}),e.jsx(Qs,{value:n,index:0,children:e.jsx(Pl,{portfolioId:t,onCreate:g})}),e.jsx(Qs,{value:n,index:1,children:e.jsx(Sl,{portfolioId:t})}),e.jsx(Qs,{value:n,index:2,children:e.jsx(b,{sx:{p:2},children:e.jsx(ns,{onSubmit:p,isLoading:i.isLoading,error:(_=i.error)==null?void 0:_.message,mode:"create",defaultPortfolioId:t})})})]}),e.jsx(Eo,{color:"primary","aria-label":"add trade",sx:{position:"fixed",bottom:24,right:24,boxShadow:3,"&:hover":{boxShadow:6,transform:"scale(1.05)"},transition:"all 0.2s ease-in-out"},onClick:()=>o(!0),children:e.jsx(Nt,{})}),a&&e.jsx(b,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:m,children:e.jsx(b,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out","@keyframes modalSlideIn":{from:{opacity:0,transform:"translateY(-20px) scale(0.95)"},to:{opacity:1,transform:"translateY(0) scale(1)"}}},onClick:k=>k.stopPropagation(),children:e.jsx(ns,{onSubmit:p,isLoading:i.isLoading,error:(E=i.error)==null?void 0:E.message,mode:"create",defaultPortfolioId:t})})})]}):e.jsx(Vr,{maxWidth:"lg",children:e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Portfolio not found"})})},Dl=()=>{const[t,r]=x.useState([]),[n,s]=x.useState(!0),[a,o]=x.useState(null),i=x.useCallback(async()=>{try{s(!0),o(null);const c=await kr.getAssetTypes();r(c)}catch(c){const d=c instanceof Error?c.message:"Failed to fetch asset types";o(d),console.error("Error fetching asset types:",c)}finally{s(!1)}},[]),l=x.useCallback(async()=>{await i()},[i]);return x.useEffect(()=>{i()},[i]),{assetTypes:t,loading:n,error:a,refresh:l}},av=(t,r,n="ASC")=>[...t].sort((s,a)=>{let o,i;switch(r){case"name":o=s.name.toLowerCase(),i=a.name.toLowerCase();break;case"type":o=s.type,i=a.type;break;case"totalValue":o=s.totalValue,i=a.totalValue;break;case"totalQuantity":o=s.totalQuantity,i=a.totalQuantity;break;case"createdAt":o=new Date(s.createdAt).getTime(),i=new Date(a.createdAt).getTime();break;case"updatedAt":o=new Date(s.updatedAt).getTime(),i=new Date(a.updatedAt).getTime();break;default:o=s.name.toLowerCase(),i=a.name.toLowerCase()}return o<i?n==="ASC"?-1:1:o>i?n==="ASC"?1:-1:0}),ov=(t,r)=>{if(!r.trim())return t;const n=r.toLowerCase();return t.filter(s=>{var a,o;return s.name.toLowerCase().includes(n)||((a=s.symbol)==null?void 0:a.toLowerCase().includes(n))||((o=s.description)==null?void 0:o.toLowerCase().includes(n))})},iv=(t,r)=>t.filter(n=>n.type===r),lv=(t,r,n)=>t.filter(s=>(Number(s.totalValue)||0)>=r&&(Number(s.totalValue)||0)<=n),cv=t=>{const r=t.currentValue?t.currentValue-(t.initialValue||0):0,n=t.currentQuantity?t.currentQuantity-(t.initialQuantity||0):0,s=(t.initialValue||0)>0?r/(t.initialValue||0)*100:0,a=(t.initialQuantity||0)>0?n/(t.initialQuantity||0)*100:0;return{valueChange:r,quantityChange:n,valueChangePercentage:s,quantityChangePercentage:a,isGaining:r>0,isLosing:r<0}},dv=({portfolioId:t,initialFilters:r={},onAssetSelect:n,onAssetEdit:s,onAssetDelete:a,showActions:o=!0,className:i=""})=>{const{baseCurrency:l}=At(),c=x.useMemo(()=>({...r,...t&&{portfolioId:t}}),[t,r]),{assets:d,loading:u,error:f,pagination:p,clearFilters:m,refresh:g,goToPage:v,setPageSize:P,setSorting:j}=Ia({initialFilters:c||{},autoFetch:!0}),{assetTypes:w}=Dl(),[D,y]=x.useState(""),[A,R]=x.useState("ALL"),[N,_]=x.useState("name"),[E,k]=x.useState("ASC"),[T,C]=x.useState(!1),[V,F]=x.useState({min:"",max:""}),I=x.useMemo(()=>{let S=d;if(D&&(S=ov(S,D)),A!=="ALL"&&(S=iv(S,A)),V.min||V.max){const Y=V.min?parseFloat(V.min):0,pe=V.max?parseFloat(V.max):1/0;S=lv(S,Y,pe)}return av(S,N,E)},[d,D,A,V,N,E]),K=S=>{y(S)},W=S=>{R(S)},O=S=>{N===S?k(E==="ASC"?"DESC":"ASC"):(_(S),k("ASC")),j(S,E)},L=(S,Y)=>{F(pe=>({...pe,[S]:Y}))},q=()=>{y(""),R("ALL"),F({min:"",max:""}),m()},me=S=>{v(S)},ye=S=>{P(S)},re=()=>{g()};return u&&d.length===0?e.jsx("div",{className:`asset-list ${i}`,children:e.jsxs("div",{className:"asset-list__loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading assets..."})]})}):f?e.jsx("div",{className:`asset-list ${i}`,children:e.jsxs("div",{className:"asset-list__error",children:[e.jsxs("p",{children:["Error: ",f]}),e.jsx("button",{onClick:re,className:"btn btn--primary",children:"Retry"})]})}):e.jsxs("div",{className:`asset-list ${i}`,children:[e.jsxs("div",{className:"asset-list__header",children:[e.jsxs("div",{className:"asset-list__title",children:[e.jsxs("h2",{children:["Assets (",p.total,")"]}),e.jsxs("button",{onClick:re,className:"btn btn--secondary btn--icon",disabled:u,children:[e.jsx("span",{className:"icon",children:"↻"}),"Refresh"]})]}),e.jsxs("div",{className:"asset-list__controls",children:[e.jsx("div",{className:"asset-list__search",children:e.jsx("input",{type:"text",placeholder:"Search assets...",value:D,onChange:S=>K(S.target.value),className:"input"})}),e.jsx("div",{className:"asset-list__filters",children:e.jsxs("button",{onClick:()=>C(!T),className:"btn btn--secondary",children:["Filters ",T?"▲":"▼"]})})]}),T&&e.jsxs("div",{className:"asset-list__advanced-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Type:"}),e.jsxs("select",{value:A,onChange:S=>W(S.target.value),className:"select",children:[e.jsx("option",{value:"ALL",children:"All Types"}),w.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Value Range:"}),e.jsxs("div",{className:"value-range",children:[e.jsx("input",{type:"number",placeholder:"Min",value:V.min,onChange:S=>L("min",S.target.value),className:"input input--small"}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",placeholder:"Max",value:V.max,onChange:S=>L("max",S.target.value),className:"input input--small"})]})]}),e.jsx("button",{onClick:q,className:"btn btn--outline",children:"Clear Filters"})]})]}),e.jsx("div",{className:"asset-list__table-container",children:e.jsxs("table",{className:"asset-list__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"sortable",onClick:()=>O("name"),children:["Name ",N==="name"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>O("type"),children:["Type ",N==="type"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>O("totalValue"),children:["Value ",N==="totalValue"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>O("totalQuantity"),children:["Quantity ",N==="totalQuantity"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>O("currentPrice"),children:["Market Price ",N==="currentPrice"&&(E==="ASC"?"↑":"↓")]}),e.jsx("th",{children:"Performance"}),e.jsxs("th",{className:"sortable",onClick:()=>O("updatedAt"),children:["Updated ",N==="updatedAt"&&(E==="ASC"?"↑":"↓")]}),o&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:o?8:7,className:"asset-list__empty",children:"No assets found"})}):I.map(S=>{var pe;const Y=cv(S);return e.jsxs("tr",{className:"asset-list__row",onClick:()=>n==null?void 0:n(S),children:[e.jsx("td",{className:"asset-list__cell asset-list__cell--name",children:e.jsxs("div",{className:"asset-name",children:[e.jsx("div",{className:"asset-name__primary",children:S.name}),S.symbol&&e.jsx("div",{className:"asset-name__secondary",children:S.symbol})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsx("span",{className:`asset-type asset-type--${S.type.toLowerCase()}`,children:((pe=w.find(Q=>Q.value===S.type))==null?void 0:pe.label)||S.type})}),e.jsx("td",{className:"asset-list__cell asset-list__cell--value",children:e.jsxs("div",{className:"value-display",children:[e.jsx("div",{className:"value-display__primary",children:X(Number(S.totalValue)||0)}),S.currentValue&&S.currentValue!==S.initialValue&&e.jsxs("div",{className:"value-display__secondary",children:["Initial: ",X(S.initialValue||0)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:"quantity-display",children:[e.jsx("div",{className:"quantity-display__primary",children:xt(Number(S.totalQuantity)||0,2)}),S.currentQuantity&&S.currentQuantity!==S.initialQuantity&&e.jsxs("div",{className:"quantity-display__secondary",children:["Initial: ",xt(S.initialQuantity||0,2)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:"price-display",children:[e.jsx("div",{className:"price-display__primary price-display__primary--current",children:X(Number(S.currentPrice)||0)}),S.avgCost!==void 0&&S.avgCost>0&&S.avgCost!==S.currentPrice&&e.jsxs("div",{className:"price-display__secondary",children:["Avg: ",X(Number(S.avgCost)||0)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:`performance ${Y.isGaining?"performance--positive":Y.isLosing?"performance--negative":""}`,children:[e.jsx("div",{className:"performance__value",children:X(Y.valueChange,l)}),e.jsx("div",{className:"performance__percentage",children:ve(Y.valueChangePercentage,2)})]})}),e.jsx("td",{className:"asset-list__cell",children:new Date(S.updatedAt).toLocaleDateString()}),o&&e.jsx("td",{className:"asset-list__cell asset-list__cell--actions",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),s==null||s(S)},className:"btn btn--small btn--secondary",title:"Edit Asset",children:"✏️"}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),a==null||a(S)},className:"btn btn--small btn--danger",title:"Delete Asset",children:"🗑️"})]})})]},S.id)})})]})}),p.total>0&&e.jsxs("div",{className:"asset-list__pagination",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(p.page-1)*p.limit+1," to"," ",Math.min(p.page*p.limit,p.total)," of"," ",p.total," assets"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>me(p.page-1),disabled:p.page<=1,className:"btn btn--secondary",children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(p.total/p.limit)},(S,Y)=>Y+1).filter(S=>{const Y=p.page;return S===1||S===Y||S===Y-1||S===Y+1||S===Math.ceil(p.total/p.limit)}).map((S,Y,pe)=>e.jsxs(Ht.Fragment,{children:[Y>0&&pe[Y-1]!==S-1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>me(S),className:`btn ${S===p.page?"btn--primary":"btn--secondary"}`,children:S})]},S))}),e.jsx("button",{onClick:()=>me(p.page+1),disabled:p.page>=Math.ceil(p.total/p.limit),className:"btn btn--secondary",children:"Next"})]}),e.jsxs("div",{className:"pagination-size",children:[e.jsx("label",{children:"Show:"}),e.jsxs("select",{value:p.limit,onChange:S=>ye(Number(S.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]})},uv=({performance:t,className:r="",showLabels:n=!0,compact:s=!1})=>{const a=[{key:"daily",label:"Hôm nay",value:t.daily},{key:"weekly",label:"Tuần",value:t.weekly},{key:"monthly",label:"Tháng",value:t.monthly},{key:"yearly",label:"Năm",value:t.yearly}];return s?e.jsx("div",{className:`asset-performance asset-performance--compact ${r}`,children:a.map(({key:o,label:i,value:l})=>e.jsxs("div",{className:"performance-metric performance-metric--compact",children:[n&&e.jsxs("span",{className:"performance-label",children:[i,":"]}),e.jsx("span",{className:`performance-value performance-value--compact ${Do(l)}`,children:So(l)})]},o))}):e.jsx("div",{className:`asset-performance asset-performance--grid ${r}`,children:a.map(({key:o,label:i,value:l})=>e.jsxs("div",{className:"performance-metric",children:[e.jsx("div",{className:"performance-label",children:i}),e.jsx("div",{className:`performance-value ${Do(l)}`,children:So(l)})]},o))})},hv=({asset:t,onEdit:r,onDelete:n,onView:s,showActions:a=!0,compact:o=!1,className:i=""})=>{const{baseCurrency:l}=At(),c={valueChange:(Number(t.totalValue)||0)-(Number(t.initialValue)||0),valueChangePercentage:t.initialValue?((Number(t.totalValue)||0)-(Number(t.initialValue)||0))/(Number(t.initialValue)||1)*100:0,isGaining:(Number(t.totalValue)||0)>(Number(t.initialValue)||0),isLosing:(Number(t.totalValue)||0)<(Number(t.initialValue)||0)},d=()=>{s==null||s(t)},u=p=>{p.stopPropagation(),r==null||r(t)},f=p=>{p.stopPropagation(),n==null||n(t)};return e.jsxs("div",{className:`asset-card ${o?"asset-card--compact":""} ${i}`,onClick:d,children:[e.jsxs("div",{className:"asset-card__header",children:[e.jsxs("div",{className:"asset-card__title",children:[e.jsx("h3",{className:"asset-card__name",children:t.name}),t.symbol&&e.jsx("span",{className:"asset-card__code",children:t.symbol})]}),e.jsx("div",{className:"asset-card__type",children:e.jsx("span",{className:`asset-type asset-type--${t.type.toLowerCase()}`,children:da[t.type]||t.type})})]}),t.description&&!o&&e.jsx("div",{className:"asset-card__description",children:e.jsx("p",{children:t.description})}),e.jsxs("div",{className:"asset-card__content",children:[e.jsxs("div",{className:"asset-card__value",children:[e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{className:"value-item__primary",children:X(Number(t.totalValue)||0,l)}),t.currentValue&&t.currentValue!==t.initialValue&&e.jsxs("span",{className:"value-item__secondary",children:["Initial: ",X(t.initialValue||0,l)]})]}),e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{className:"value-item__primary",children:xt(Number(t.totalQuantity)||0,2)}),t.currentQuantity&&t.currentQuantity!==t.initialQuantity&&e.jsxs("span",{className:"value-item__secondary",children:["Initial: ",xt(t.initialQuantity||0,2)]})]})]}),e.jsxs("div",{className:"asset-card__performance",children:[e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Performance"}),e.jsxs("div",{className:`performance ${c.isGaining?"performance--positive":c.isLosing?"performance--negative":""}`,children:[e.jsx("span",{className:"performance__value",children:X(c.valueChange,l)}),e.jsx("span",{className:"performance__percentage",children:ve(c.valueChangePercentage,2)})]})]}),t.performance&&e.jsx("div",{className:"performance-metrics",children:e.jsx(uv,{performance:t.performance,compact:!0,showLabels:!0,className:"mt-2"})})]}),!o&&e.jsxs("div",{className:"asset-card__info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Created"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Updated"}),e.jsx("span",{children:new Date(t.updatedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Has Trades"}),e.jsx("span",{className:t.hasTrades?"status status--active":"status status--inactive",children:t.hasTrades?"Yes":"No"})]})]})]}),a&&e.jsxs("div",{className:"asset-card__actions",children:[e.jsx("button",{onClick:u,className:"btn btn--small btn--secondary",title:"Edit Asset",children:"✏️ Edit"}),e.jsx("button",{onClick:f,className:"btn btn--small btn--danger",title:"Delete Asset",children:"🗑️ Delete"})]}),e.jsxs("div",{className:"asset-card__indicators",children:[t.hasTrades&&e.jsx("span",{className:"indicator indicator--trades",title:"Has trading activity",children:"📈"}),c.isGaining&&e.jsx("span",{className:"indicator indicator--gaining",title:"Positive performance",children:"📈"}),c.isLosing&&e.jsx("span",{className:"indicator indicator--losing",title:"Negative performance",children:"📉"})]})]})},mv=({filters:t,onFiltersChange:r,onClearFilters:n,className:s="",showAdvanced:a=!1,onToggleAdvanced:o})=>{var E,k;const[i,l]=x.useState(t.search||""),[c,d]=x.useState(t.type||"ALL"),[u,f]=x.useState(t.sortBy||"name"),[p,m]=x.useState(t.sortOrder||"ASC"),[g,v]=x.useState({min:((E=t.minValue)==null?void 0:E.toString())||"",max:((k=t.maxValue)==null?void 0:k.toString())||""}),[P,j]=x.useState(t.limit||25);x.useEffect(()=>{var T,C;l(t.search||""),d(t.type||"ALL"),f(t.sortBy||"name"),m(t.sortOrder||"ASC"),v({min:((T=t.minValue)==null?void 0:T.toString())||"",max:((C=t.maxValue)==null?void 0:C.toString())||""}),j(t.limit||25)},[t]);const w=x.useCallback(T=>{l(T),r({...t,search:T||void 0})},[t,r]),D=x.useCallback(T=>{d(T),r({...t,type:T==="ALL"?void 0:T})},[t,r]),y=x.useCallback((T,C)=>{const V={...g,[T]:C};v(V);const F=V.min?parseFloat(V.min):void 0,I=V.max?parseFloat(V.max):void 0;r({...t,minValue:F,maxValue:I})},[t,r,g]),A=x.useCallback(T=>{j(T),r({...t,limit:T})},[t,r]),R=x.useCallback(()=>{l(""),d("ALL"),f("name"),m("ASC"),v({min:"",max:""}),j(25),n()},[n]),N=x.useCallback(()=>{o==null||o(!a)},[a,o]),_=i||c!=="ALL"||g.min||g.max;return e.jsxs("div",{className:`asset-filters ${s}`,children:[e.jsxs("div",{className:"asset-filters__basic",children:[e.jsxs("div",{className:"asset-filters__search",children:[e.jsx("input",{type:"text",placeholder:"Search assets...",value:i,onChange:T=>w(T.target.value),className:"input input--search"}),i&&e.jsx("button",{onClick:()=>w(""),className:"btn btn--icon btn--clear",title:"Clear search",children:"✕"})]}),e.jsx("div",{className:"asset-filters__type",children:e.jsxs("select",{value:c,onChange:T=>D(T.target.value),className:"select",children:[e.jsx("option",{value:"ALL",children:"All Types"}),Object.entries(da).map(([T,C])=>e.jsx("option",{value:T,children:C},T))]})}),e.jsx("div",{className:"asset-filters__sort",children:e.jsxs("select",{value:`${u}-${p}`,onChange:T=>{const[C,V]=T.target.value.split("-");f(C),m(V),r({...t,sortBy:C,sortOrder:V})},className:"select",children:[e.jsx("option",{value:"name-ASC",children:"Name A-Z"}),e.jsx("option",{value:"name-DESC",children:"Name Z-A"}),e.jsx("option",{value:"totalValue-ASC",children:"Value Low-High"}),e.jsx("option",{value:"totalValue-DESC",children:"Value High-Low"}),e.jsx("option",{value:"totalQuantity-ASC",children:"Quantity Low-High"}),e.jsx("option",{value:"totalQuantity-DESC",children:"Quantity High-Low"}),e.jsx("option",{value:"updatedAt-ASC",children:"Oldest First"}),e.jsx("option",{value:"updatedAt-DESC",children:"Newest First"})]})}),e.jsx("div",{className:"asset-filters__limit",children:e.jsxs("select",{value:P,onChange:T=>A(Number(T.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"})]})}),e.jsxs("div",{className:"asset-filters__actions",children:[e.jsxs("button",{onClick:N,className:"btn btn--secondary",children:[a?"Hide":"Show"," Advanced"]}),_&&e.jsx("button",{onClick:R,className:"btn btn--outline",children:"Clear All"})]})]}),a&&e.jsxs("div",{className:"asset-filters__advanced",children:[e.jsx("div",{className:"asset-filters__advanced-header",children:e.jsx("h4",{children:"Advanced Filters"})}),e.jsxs("div",{className:"asset-filters__advanced-content",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Value Range"}),e.jsxs("div",{className:"value-range",children:[e.jsx("input",{type:"number",placeholder:"Min value",value:g.min,onChange:T=>y("min",T.target.value),className:"input input--small",min:"0",step:"0.01"}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",placeholder:"Max value",value:g.max,onChange:T=>y("max",T.target.value),className:"input input--small",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort Options"}),e.jsxs("div",{className:"sort-options",children:[e.jsxs("div",{className:"sort-field",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("select",{value:u,onChange:T=>{f(T.target.value),r({...t,sortBy:T.target.value})},className:"select select--small",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"type",children:"Type"}),e.jsx("option",{value:"totalValue",children:"Total Value"}),e.jsx("option",{value:"totalQuantity",children:"Total Quantity"}),e.jsx("option",{value:"createdAt",children:"Created Date"}),e.jsx("option",{value:"updatedAt",children:"Updated Date"})]})]}),e.jsxs("div",{className:"sort-order",children:[e.jsx("label",{children:"Order:"}),e.jsxs("select",{value:p,onChange:T=>{m(T.target.value),r({...t,sortOrder:T.target.value})},className:"select select--small",children:[e.jsx("option",{value:"ASC",children:"Ascending"}),e.jsx("option",{value:"DESC",children:"Descending"})]})]})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Results per page"}),e.jsxs("select",{value:P,onChange:T=>A(Number(T.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:250,children:"250"}),e.jsx("option",{value:500,children:"500"})]})]})]})]}),_&&e.jsx("div",{className:"asset-filters__summary",children:e.jsxs("div",{className:"active-filters",children:[e.jsx("span",{className:"active-filters__label",children:"Active filters:"}),e.jsxs("div",{className:"active-filters__tags",children:[i&&e.jsxs("span",{className:"filter-tag",children:['Search: "',i,'"',e.jsx("button",{onClick:()=>w(""),className:"filter-tag__remove",children:"✕"})]}),c!=="ALL"&&e.jsxs("span",{className:"filter-tag",children:["Type: ",da[c],e.jsx("button",{onClick:()=>D("ALL"),className:"filter-tag__remove",children:"✕"})]}),g.min&&e.jsxs("span",{className:"filter-tag",children:["Min: ",g.min,e.jsx("button",{onClick:()=>y("min",""),className:"filter-tag__remove",children:"✕"})]}),g.max&&e.jsxs("span",{className:"filter-tag",children:["Max: ",g.max,e.jsx("button",{onClick:()=>y("max",""),className:"filter-tag__remove",children:"✕"})]})]})]})})]})},fv=({onSubmit:t,onCancel:r,userId:n,initialData:s,submitText:a="Create Asset",mode:o="create",loading:i=!1,className:l=""})=>{var A;const{accountId:c}=At(),d=n||c,u=o==="edit"||s&&s.symbol,{assetTypes:f,loading:p,error:m}=Dl(),[g,v]=x.useState({name:"",symbol:"",type:((A=f[0])==null?void 0:A.value)||Tl.STOCK,description:"",initialValue:void 0,initialQuantity:void 0,currentValue:void 0,currentQuantity:void 0,createdBy:d,updatedBy:d,...s}),[P,j]=x.useState({}),w=()=>{var N,_;const R={};return(N=g.name)!=null&&N.trim()||(R.name="Asset name is required"),!u&&!((_=g.symbol)!=null&&_.trim())&&(R.symbol="Asset symbol is required"),g.type||(R.type="Asset type is required"),j(R),Object.keys(R).length===0},D=R=>{R.preventDefault(),console.log("AssetForm handleSubmit called"),console.log("Form data:",g),console.log("Form validation result:",w()),w()?(console.log("Calling onSubmit with formData"),t(g)):console.log("Form validation failed")},y=R=>N=>{if(R==="initialValue"||R==="initialQuantity"||R==="currentValue"||R==="currentQuantity")return;const _=N.target.value;v(E=>({...E,[R]:_})),P[R]&&j(E=>({...E,[R]:""}))};return e.jsxs("div",{className:"asset-form",children:[e.jsxs("div",{className:"asset-form__header",children:[e.jsx("h2",{children:a}),e.jsx("button",{type:"button",onClick:r,className:"btn btn--secondary btn--icon","aria-label":"Close form",children:"✕"})]}),e.jsx("div",{className:"asset-form__content",children:e.jsxs(b,{component:"form",onSubmit:D,children:[e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Asset Name",value:g.name,onChange:y("name"),error:!!P.name,helperText:P.name,required:!0})}),!u&&e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Asset Symbol",value:g.symbol,onChange:y("symbol"),placeholder:"e.g., AAPL, HPG",error:!!P.symbol,helperText:"Symbol cannot be changed after creation. ",required:!0})}),u&&e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Asset Symbol",value:g.symbol||"",disabled:!0,helperText:"Symbol cannot be changed after creation"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsxs(Xe,{fullWidth:!0,error:!!P.type,children:[e.jsx(Je,{children:"Asset Type"}),e.jsx(et,{value:g.type,onChange:y("type"),label:"Asset Type",disabled:p,children:p?e.jsxs(ce,{disabled:!0,children:[e.jsx(He,{size:20,sx:{mr:1}}),"Loading asset types..."]}):m?e.jsx(ce,{disabled:!0,children:"Error loading asset types"}):f.map(R=>e.jsx(ce,{value:R.value,children:R.label},R.value))}),P.type&&e.jsx(ze,{severity:"error",sx:{mt:1},children:P.type}),m&&e.jsx(ze,{severity:"warning",sx:{mt:1},children:m})]})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Currency",value:"VND",disabled:!0,helperText:"Currently only VND is supported"})}),e.jsx(M,{item:!0,xs:12,children:e.jsx($e,{fullWidth:!0,label:"Description",value:g.description,onChange:y("description"),multiline:!0,rows:2,placeholder:"Optional description of the asset"})}),e.jsx(M,{item:!0,xs:12,children:e.jsxs(ze,{severity:"info",sx:{mb:2},children:[e.jsx("strong",{children:"Computed Fields:"})," Initial value, initial quantity, current value, and current quantity are automatically calculated based on your trades and market prices. These fields will be updated when you create trades for this asset."]})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Initial Value",type:"number",value:g.initialValue??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:0,step:.01},placeholder:g.initialValue?void 0:"No data available"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Initial Quantity",type:"number",value:g.initialQuantity??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:1e-4,step:1e-4},placeholder:g.initialQuantity?void 0:"No data available"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Current Value",type:"number",value:g.currentValue??"",disabled:!0,helperText:"Calculated from trades × current market price",inputProps:{min:0,step:.01},placeholder:g.currentValue?void 0:"No data available"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{fullWidth:!0,label:"Current Quantity",type:"number",value:g.currentQuantity??"",disabled:!0,helperText:"Calculated from all trades",inputProps:{min:0,step:1e-4},placeholder:g.currentQuantity?void 0:"No data available"})})]}),e.jsxs("div",{className:"asset-form__actions",children:[e.jsx(Ce,{type:"button",variant:"outlined",onClick:r,size:"large",children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",size:"large",disabled:i,children:i?"Đang xử lý...":a})]})]})})]})},pv=({assets:t,statistics:r,onClose:n,className:s=""})=>{const{baseCurrency:a}=At(),o=Ht.useMemo(()=>{const c=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.daily)||0)},0),d=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.weekly)||0)},0),u=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.monthly)||0)},0),f=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.yearly)||0)},0);return{averageDailyReturn:t.length>0?c/t.length:0,averageWeeklyReturn:t.length>0?d/t.length:0,averageMonthlyReturn:t.length>0?u/t.length:0,averageYearlyReturn:t.length>0?f/t.length:0}},[t]),i=Ht.useMemo(()=>{const c=[{label:"Under ₫10K",min:0,max:1e4,count:0},{label:"₫10K - ₫50K",min:1e4,max:5e4,count:0},{label:"₫50K - ₫100K",min:5e4,max:1e5,count:0},{label:"₫100K - ₫500K",min:1e5,max:5e5,count:0},{label:"Over ₫500K",min:5e5,max:1/0,count:0}];return t.forEach(d=>{const u=Number(d.totalValue)||0,f=c.find(p=>u>=p.min&&u<p.max);f&&f.count++}),c},[t]),l=Ht.useMemo(()=>[...t].filter(c=>{var d;return((d=c.performance)==null?void 0:d.yearly)!==void 0}).sort((c,d)=>{var u,f;return(((u=d.performance)==null?void 0:u.yearly)||0)-(((f=c.performance)==null?void 0:f.yearly)||0)}).slice(0,5),[t]);return e.jsxs("div",{className:`asset-analytics ${s}`,children:[e.jsxs("div",{className:"asset-analytics__header",children:[e.jsx("h3",{children:"Asset Analytics"}),n&&e.jsx("button",{onClick:n,className:"btn btn--secondary btn--icon","aria-label":"Close analytics",children:"✕"})]}),e.jsxs("div",{className:"asset-analytics__content",children:[e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Performance Overview"}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageDailyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Daily Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageWeeklyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Weekly Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageMonthlyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Monthly Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageYearlyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Yearly Return"})]})]})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Asset Type Distribution"}),e.jsx("div",{className:"distribution-chart",children:Object.entries(r.assetsByType).map(([c,d])=>{const u=r.totalAssets>0?d/r.totalAssets*100:0;return e.jsxs("div",{className:"distribution-item",children:[e.jsxs("div",{className:"distribution-item__label",children:[e.jsx("span",{className:"distribution-item__type",children:c}),e.jsx("span",{className:"distribution-item__count",children:d})]}),e.jsx("div",{className:"distribution-item__bar",children:e.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),e.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},c)})})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Value Distribution"}),e.jsx("div",{className:"distribution-chart",children:i.map((c,d)=>{const u=r.totalAssets>0?c.count/r.totalAssets*100:0;return e.jsxs("div",{className:"distribution-item",children:[e.jsxs("div",{className:"distribution-item__label",children:[e.jsx("span",{className:"distribution-item__type",children:c.label}),e.jsx("span",{className:"distribution-item__count",children:c.count})]}),e.jsx("div",{className:"distribution-item__bar",children:e.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),e.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},d)})})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Top Performers (Yearly)"}),e.jsx("div",{className:"performers-list",children:l.map((c,d)=>{var u,f;return e.jsxs("div",{className:"performer-item",children:[e.jsxs("div",{className:"performer-item__rank",children:["#",d+1]}),e.jsxs("div",{className:"performer-item__info",children:[e.jsx("div",{className:"performer-item__name",children:c.name}),e.jsx("div",{className:"performer-item__code",children:c.symbol})]}),e.jsxs("div",{className:"performer-item__performance",children:[e.jsx("div",{className:`performer-item__return ${(((u=c.performance)==null?void 0:u.yearly)||0)>=0?"positive":"negative"}`,children:ve(((f=c.performance)==null?void 0:f.yearly)||0,2)}),e.jsx("div",{className:"performer-item__value",children:X(Number(c.totalValue)||0,a)})]})]},c.id)})})]})]})]})},xv=({selectedAsset:t,editingAsset:r,deletingAsset:n,showCreateForm:s=!1,onClose:a,onSubmit:o,onDeleteConfirm:i,onEditAsset:l,portfolioId:c,className:d=""})=>{const{baseCurrency:u}=At(),f=()=>{a()},p=()=>{n&&i(n)},m=()=>{a()};return e.jsxs("div",{className:`asset-dialogs ${d}`,children:[t&&e.jsx("div",{className:"modal-overlay",onClick:f,children:e.jsx("div",{className:"modal-content",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"asset-dialog",children:[e.jsxs("div",{className:"asset-dialog__header",children:[e.jsx("h3",{children:"Asset Details"}),e.jsx("button",{onClick:f,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:"✕"})]}),e.jsx("div",{className:"asset-dialog__content",children:e.jsxs("div",{className:"asset-details",children:[e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Name"}),e.jsx("span",{children:t.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Symbol"}),e.jsx("span",{children:t.symbol})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Type"}),e.jsx("span",{className:`asset-type-badge asset-type-badge--${t.type.toLowerCase()}`,children:t.type})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Description"}),e.jsx("span",{children:t.description||"No description"})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Financial Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Current Price"}),e.jsx("span",{className:"detail-value--highlight",children:X(t.currentPrice||t.currentValue||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Average Cost"}),e.jsx("span",{children:X(t.avgCost||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{children:xt(t.quantity||t.totalQuantity||0,2)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{className:"detail-value--highlight",children:X(Number(t.totalValue)||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Initial Value"}),e.jsx("span",{children:X(t.initialValue||0,u)})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Profit & Loss Analysis"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Unrealized P&L"}),e.jsx("span",{className:`detail-value ${(t.currentPrice||0)>=(t.avgCost||0)?"positive":"negative"}`,children:X(((t.currentPrice||0)-(t.avgCost||0))*(t.quantity||t.totalQuantity||0),u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"P&L Percentage"}),e.jsx("span",{className:`detail-value ${(t.currentPrice||0)>=(t.avgCost||0)?"positive":"negative"}`,children:t.avgCost&&t.avgCost>0?ve(((t.currentPrice||0)-t.avgCost)/t.avgCost*100,2):"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Cost Basis"}),e.jsx("span",{children:X((t.avgCost||0)*(t.quantity||t.totalQuantity||0),u)})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Performance"}),e.jsx("div",{className:"performance-grid",children:t.performance?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Daily"}),e.jsx("span",{className:`performance-value ${(t.performance.daily||0)>=0?"positive":"negative"}`,children:ve(t.performance.daily||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Weekly"}),e.jsx("span",{className:`performance-value ${(t.performance.weekly||0)>=0?"positive":"negative"}`,children:ve(t.performance.weekly||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Monthly"}),e.jsx("span",{className:`performance-value ${(t.performance.monthly||0)>=0?"positive":"negative"}`,children:ve(t.performance.monthly||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Yearly"}),e.jsx("span",{className:`performance-value ${(t.performance.yearly||0)>=0?"positive":"negative"}`,children:ve(t.performance.yearly||0,2)})]})]}):e.jsx("div",{className:"performance-item",children:e.jsx("span",{children:"No performance data available"})})})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Metadata"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Created"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Last Updated"}),e.jsx("span",{children:new Date(t.updatedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Asset ID"}),e.jsx("span",{children:t.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Asset Class"}),e.jsx("span",{children:t.assetClass})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Currency"}),e.jsx("span",{children:t.currency})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Status"}),e.jsx("span",{className:`status-badge ${t.isActive?"status-badge--active":"status-badge--inactive"}`,children:t.isActive?"Active":"Inactive"})]})]})]})]})}),e.jsxs("div",{className:"asset-dialog__actions",children:[e.jsx("button",{onClick:()=>{l&&t&&l(t)},className:"btn btn--secondary",disabled:!l,title:"Edit this asset",children:"✏️ Edit Asset"}),e.jsx("button",{onClick:()=>{i&&t&&i(t)},className:"btn btn--danger",title:"Delete this asset",children:"🗑️ Delete"}),e.jsx("button",{onClick:f,className:"btn btn--primary",children:"Close"})]})]})})}),n&&e.jsx("div",{className:"modal-overlay",onClick:m,children:e.jsx("div",{className:"modal-content modal-content--small",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"asset-dialog",children:[e.jsxs("div",{className:"asset-dialog__header",children:[e.jsx("h3",{children:"Delete Asset"}),e.jsx("button",{onClick:m,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:"✕"})]}),e.jsx("div",{className:"asset-dialog__content",children:e.jsxs("div",{className:"delete-confirmation",children:[e.jsx("div",{className:"delete-confirmation__icon",children:"⚠️"}),e.jsx("h4",{children:"Are you sure you want to delete this asset?"}),e.jsxs("p",{children:["This action cannot be undone. The asset ",e.jsx("strong",{children:n.name})," (",n.symbol,") will be permanently removed from your portfolio."]}),e.jsxs("div",{className:"delete-confirmation__details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{children:X(Number(n.totalValue)||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{children:xt(n.quantity||n.totalQuantity||0,2)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Type"}),e.jsx("span",{children:n.type})]})]})]})}),e.jsxs("div",{className:"asset-dialog__actions",children:[e.jsx("button",{onClick:m,className:"btn btn--secondary",children:"Cancel"}),e.jsx("button",{onClick:p,className:"btn btn--danger",children:"Delete Asset"})]})]})})})]})},gv=({open:t,assetName:r,tradeCount:n,onConfirm:s,onCancel:a,isDeleting:o=!1})=>e.jsxs(ar,{open:t,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[e.jsx(xr,{sx:{pb:1},children:e.jsxs(b,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Yn,{color:"warning"}),e.jsx(h,{variant:"h6",component:"div",children:n>0?"Delete Asset with Trades":"Delete Asset"})]})}),e.jsxs(or,{sx:{pt:1},children:[e.jsx(ze,{severity:"warning",sx:{mb:2},children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:"This action cannot be undone!"})}),n>0?e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"body1",paragraph:!0,children:["The asset ",e.jsxs("strong",{children:['"',r,'"']})," has ",e.jsx("strong",{children:n})," associated trade(s)."]}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Deleting this asset will also permanently delete all associated trades. This action cannot be undone and may affect your portfolio calculations."}),e.jsxs(b,{sx:{bgcolor:"grey.50",p:2,borderRadius:1,border:"1px solid",borderColor:"grey.200"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"What will be deleted:"})}),e.jsxs(h,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[e.jsxs("li",{children:['The asset "',r,'"']}),e.jsxs("li",{children:[n," trade record(s)"]}),e.jsx("li",{children:"All associated transaction history"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"body1",paragraph:!0,children:["The asset ",e.jsxs("strong",{children:['"',r,'"']})," has no associated trades."]}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This asset can be safely deleted without affecting any trading history. This action cannot be undone."}),e.jsxs(b,{sx:{bgcolor:"green.50",p:2,borderRadius:1,border:"1px solid",borderColor:"green.200"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"What will be deleted:"})}),e.jsxs(h,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[e.jsxs("li",{children:['The asset "',r,'"']}),e.jsx("li",{children:"No trade records (safe to delete)"})]})]})]})]}),e.jsxs(ir,{sx:{p:3,pt:1},children:[e.jsx(Ce,{onClick:a,disabled:o,variant:"outlined",size:"large",children:"Cancel"}),e.jsx(Ce,{onClick:s,disabled:o,variant:"contained",color:"error",size:"large",startIcon:o?e.jsx(He,{size:20}):e.jsx(Yn,{}),children:o?"Deleting...":n>0?"Delete Asset & Trades":"Delete Asset"})]})]}),yv=({portfolioId:t,className:r=""})=>{const{baseCurrency:n,accountId:s}=At(),[a,o]=x.useState("list"),[i,l]=x.useState(!1),[c,d]=x.useState(!1),[u,f]=x.useState(!1),[p,m]=x.useState(null),[g,v]=x.useState(null),[P,j]=x.useState(null),[w,D]=x.useState(!1),[y,A]=x.useState(!1),[R,N]=x.useState(null),[_,E]=x.useState(0),[k,T]=x.useState(null),[C,V]=x.useState(!1),F=x.useMemo(()=>({portfolioId:t,limit:25,sortBy:"name",sortOrder:"ASC"}),[t]),[I,K]=x.useState(F),{assets:W,loading:O,error:L,pagination:q,setFilters:me,clearFilters:ye,refresh:re,forceRefresh:S,goToPage:Y,setPageSize:pe,updateAsset:Q,createAsset:se}=Ia({initialFilters:F,autoFetch:!0}),le=x.useCallback(G=>{K(G),me(G)},[me]),je=x.useCallback(()=>{K(F),ye()},[F,ye]),ue=x.useCallback(()=>{o(G=>G==="list"?"grid":"list")},[]),xe=x.useCallback(G=>{l(G)},[]),J=x.useCallback(()=>{d(G=>!G)},[]),be=x.useCallback(()=>{f(G=>!G)},[]),We=x.useCallback(G=>{m(G)},[]),Ue=x.useCallback(G=>{console.log("handleAssetEdit called with asset:",G),v(G)},[]),lt=x.useCallback(()=>{m(null),v(null),j(null),f(!1),T(null)},[]),oe=x.useCallback(async(G,ne)=>{try{if(W.filter(rt=>{var dt;return((dt=rt.symbol)==null?void 0:dt.toLowerCase())===G.toLowerCase()&&rt.id!==ne}).length>0)return!0;const Re=await fetch(`/api/v1/assets?symbol=${encodeURIComponent(G)}&createdBy=${s}`);if(Re.ok){const rt=await Re.json(),dt=rt.data||rt;return Array.isArray(dt)&&dt.length>0}return!1}catch(Se){return console.error("Error checking symbol:",Se),!1}},[W,s]),we=x.useCallback(async G=>{V(!0),T(null);try{if(console.log("Form submitted with data:",G),console.log("Editing asset:",g),!g&&G.symbol){console.log("Checking symbol uniqueness for:",G.symbol),console.log("Current assets:",W.map(Se=>({symbol:Se.symbol,id:Se.id})));const ne=await oe(G.symbol);if(console.log("Symbol exists:",ne),ne){console.log("Setting form error: Symbol already exists"),T("Mã tài sản này đã tồn tại. Vui lòng chọn mã khác."),V(!1);return}}if(g){const ne={name:G.name,symbol:G.symbol,type:G.type,description:G.description,updatedBy:G.updatedBy||s};Object.keys(ne).forEach(Re=>{ne[Re]===void 0&&delete ne[Re],Re==="description"&&ne[Re]===""||ne[Re]===""&&delete ne[Re]});const Se=await Q(g.id,ne);console.log("Update result:",Se)}else{const ne={name:G.name,symbol:G.symbol,type:G.type,description:G.description,createdBy:G.createdBy||s,updatedBy:G.updatedBy||s};Object.keys(ne).forEach(Re=>{(ne[Re]===void 0||ne[Re]==="")&&delete ne[Re]}),console.log("Creating new asset"),console.log("Create data:",ne);const Se=await se(ne);console.log("Create result:",Se)}lt()}catch(ne){console.error("Error saving asset:",ne);let Se="Có lỗi xảy ra khi lưu tài sản";ne instanceof Error&&(ne.message.includes("already exists")?Se="Mã tài sản này đã tồn tại. Vui lòng chọn mã khác.":ne.message.includes("required")?Se="Vui lòng điền đầy đủ thông tin bắt buộc.":ne.message.includes("invalid")?Se="Thông tin không hợp lệ. Vui lòng kiểm tra lại.":Se=ne.message),T(Se)}finally{V(!1)}},[g,Q,se,lt,s]),H=x.useCallback(async G=>{try{const ne=await kr.getTradeCount(G.id);N(G),E(ne.count),D(!0)}catch(ne){console.error("Error getting trade count:",ne),alert(`Error getting trade information: ${ne instanceof Error?ne.message:"Unknown error"}`)}},[]),Z=x.useCallback(async()=>{if(R){A(!0);try{_>0?await kr.forceDeleteAsset(R.id):await kr.deleteAsset(R.id),await new Promise(G=>setTimeout(G,500)),await S(),await new Promise(G=>setTimeout(G,100)),await S(),D(!1),N(null),lt()}catch(G){console.error("Error deleting asset:",G),alert(`Error deleting asset: ${G instanceof Error?G.message:"Unknown error"}`)}finally{A(!1)}}},[R,_,S,lt]),Pe=x.useCallback(()=>{D(!1),N(null),E(0)},[]),Le=x.useMemo(()=>{const G=W.length,ne=W.reduce((rt,dt)=>rt+(Number(dt.totalValue)||0),0),Se=G>0?ne/G:0,Re=W.reduce((rt,dt)=>(rt[dt.type]=(rt[dt.type]||0)+1,rt),{});return{totalAssets:G,totalValue:ne,averageValue:Se,assetsByType:Re}},[W]);return O&&W.length===0?e.jsx("div",{className:`asset-management ${r}`,children:e.jsxs("div",{className:"asset-management__loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading assets..."})]})}):L?e.jsx("div",{className:`asset-management ${r}`,children:e.jsxs("div",{className:"asset-management__error",children:[e.jsx("h2",{children:"Error Loading Assets"}),e.jsx("p",{children:L}),e.jsx("button",{onClick:re,className:"btn btn--primary",children:"Retry"})]})}):e.jsxs("div",{className:`asset-management ${r}`,children:[e.jsxs("div",{className:"asset-management__header",children:[e.jsxs("div",{className:"asset-management__title",children:[e.jsx("h1",{children:"Asset Management"}),e.jsx("p",{children:"Manage your portfolio assets"})]}),e.jsxs("div",{className:"asset-management__actions",children:[e.jsx("button",{onClick:J,className:`btn btn--secondary ${c?"btn--active":""}`,children:"📊 Analytics"}),e.jsx("button",{onClick:be,className:"btn btn--primary",children:"➕ Add Asset"})]})]}),e.jsxs("div",{className:"asset-management__stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Le.totalAssets}),e.jsx("div",{className:"stat-card__label",children:"Total Assets"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:X(Le.totalValue,n)}),e.jsx("div",{className:"stat-card__label",children:"Total Value"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:X(Le.averageValue,n)}),e.jsx("div",{className:"stat-card__label",children:"Average Value"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Object.keys(Le.assetsByType).length}),e.jsx("div",{className:"stat-card__label",children:"Asset Types"})]})]}),c&&e.jsx("div",{className:"asset-management__analytics",children:e.jsx(pv,{assets:W,statistics:Le,onClose:J})}),e.jsx(mv,{filters:I,onFiltersChange:le,onClearFilters:je,showAdvanced:i,onToggleAdvanced:xe,className:"asset-management__filters"}),e.jsxs("div",{className:"asset-management__controls",children:[e.jsxs("div",{className:"asset-management__view-controls",children:[e.jsx("button",{onClick:ue,className:`btn btn--secondary ${a==="list"?"btn--active":""}`,children:"📋 List"}),e.jsx("button",{onClick:ue,className:`btn btn--secondary ${a==="grid"?"btn--active":""}`,children:"🔲 Grid"})]}),e.jsxs("div",{className:"asset-management__pagination-info",children:["Showing ",(q.page-1)*q.limit+1," to"," ",Math.min(q.page*q.limit,q.total)," of"," ",q.total," assets"]})]}),e.jsx("div",{className:"asset-management__content",children:a==="list"?e.jsx(dv,{portfolioId:t,initialFilters:I,onAssetSelect:We,onAssetEdit:Ue,onAssetDelete:H,showActions:!0,className:"asset-management__list"}):e.jsx("div",{className:"asset-management__grid",children:W.length===0?e.jsx("div",{className:"asset-management__empty",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state__icon",children:"📊"}),e.jsx("h3",{children:"No Assets Found"}),e.jsx("p",{children:"No assets match your current filters. Try adjusting your search criteria."}),e.jsx("button",{onClick:je,className:"btn btn--primary",children:"Clear Filters"})]})}):e.jsx("div",{className:"asset-grid",children:W.map(G=>e.jsx(hv,{asset:G,onEdit:Ue,onDelete:H,onView:We,showActions:!0,className:"asset-grid__item"},G.id))})})}),q.total>0&&e.jsxs("div",{className:"asset-management__pagination",children:[e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>Y(q.page-1),disabled:q.page<=1,className:"btn btn--secondary",children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(q.total/q.limit)},(G,ne)=>ne+1).filter(G=>{const ne=q.page;return G===1||G===ne||G===ne-1||G===ne+1||G===Math.ceil(q.total/q.limit)}).map((G,ne,Se)=>e.jsxs(Ht.Fragment,{children:[ne>0&&Se[ne-1]!==G-1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>Y(G),className:`btn ${G===q.page?"btn--primary":"btn--secondary"}`,children:G})]},G))}),e.jsx("button",{onClick:()=>Y(q.page+1),disabled:q.page>=Math.ceil(q.total/q.limit),className:"btn btn--secondary",children:"Next"})]}),e.jsxs("div",{className:"pagination-size",children:[e.jsx("label",{children:"Show:"}),e.jsxs("select",{value:q.limit,onChange:G=>pe(Number(G.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsx(xv,{selectedAsset:p,editingAsset:g,deletingAsset:P,showCreateForm:!1,onClose:lt,onSubmit:we,onDeleteConfirm:H,onEditAsset:Ue,portfolioId:t}),(u||g)&&e.jsx("div",{className:"modal-overlay",onClick:lt,children:e.jsxs("div",{className:"modal-content modal-content--form",onClick:G=>G.stopPropagation(),children:[k&&e.jsx("div",{className:"error-message",style:{backgroundColor:"#fee",color:"#c33",padding:"12px",margin:"0 0 16px 0",borderRadius:"4px",border:"1px solid #fcc",fontSize:"14px"},children:k}),e.jsx(fv,{userId:s,initialData:g?(()=>{const G={name:g.name||"",symbol:g.symbol||"",type:g.type,description:g.description||"",initialValue:g.initialValue||void 0,initialQuantity:g.initialQuantity||void 0,currentValue:g.currentValue||void 0,currentQuantity:g.currentQuantity||void 0,createdBy:g.createdBy||s,updatedBy:g.updatedBy||s};return console.log("Initial data for AssetForm:",G),console.log("Editing asset:",g),G})():void 0,submitText:g?"Update Asset":"Create Asset",mode:g?"edit":"create",onSubmit:we,onCancel:lt,loading:C})]})}),e.jsx(gv,{open:w,assetName:(R==null?void 0:R.name)||"",tradeCount:_,onConfirm:Z,onCancel:Pe,isDeleting:y})]})},vv=ls({symbol:ut().required("Symbol is required").min(1,"Symbol must be at least 1 character").max(20,"Symbol must be at most 20 characters").matches(/^[A-Z0-9.-]+$/,"Symbol must contain only uppercase letters, numbers, dots, and hyphens"),name:ut().required("Name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be at most 100 characters"),type:ut().required("Asset type is required").oneOf(["STOCK","BOND","CRYPTO","COMMODITY","CURRENCY","ETF","MUTUAL_FUND"],"Invalid asset type"),nation:ut().required("Nation is required"),marketCode:ut().required("Market code is required"),currency:ut().required("Currency is required"),timezone:ut().required("Timezone is required"),description:ut().max(500,"Description must be at most 500 characters")}),bv=[{value:"STOCK",label:"Stock"},{value:"BOND",label:"Bond"},{value:"CRYPTO",label:"Cryptocurrency"},{value:"COMMODITY",label:"Commodity"},{value:"CURRENCY",label:"Currency"},{value:"ETF",label:"ETF"},{value:"MUTUAL_FUND",label:"Mutual Fund"}],Fn=[{code:"VN",name:"Vietnam",currency:"VND",timezone:"Asia/Ho_Chi_Minh",marketCodes:[{code:"HOSE",name:"Ho Chi Minh Stock Exchange"},{code:"HNX",name:"Hanoi Stock Exchange"},{code:"UPCOM",name:"Unlisted Public Company Market"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{3,4}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"Asia/Ho_Chi_Minh",days:[{day:"Monday",open:"09:00",close:"15:00"},{day:"Tuesday",open:"09:00",close:"15:00"},{day:"Wednesday",open:"09:00",close:"15:00"},{day:"Thursday",open:"09:00",close:"15:00"},{day:"Friday",open:"09:00",close:"15:00"}]}},{code:"US",name:"United States",currency:"USD",timezone:"America/New_York",marketCodes:[{code:"NYSE",name:"New York Stock Exchange"},{code:"NASDAQ",name:"NASDAQ"},{code:"AMEX",name:"American Stock Exchange"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{1,5}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"America/New_York",days:[{day:"Monday",open:"09:30",close:"16:00"},{day:"Tuesday",open:"09:30",close:"16:00"},{day:"Wednesday",open:"09:30",close:"16:00"},{day:"Thursday",open:"09:30",close:"16:00"},{day:"Friday",open:"09:30",close:"16:00"}]}},{code:"UK",name:"United Kingdom",currency:"GBP",timezone:"Europe/London",marketCodes:[{code:"LSE",name:"London Stock Exchange"},{code:"AIM",name:"Alternative Investment Market"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{2,4}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"Europe/London",days:[{day:"Monday",open:"08:00",close:"16:30"},{day:"Tuesday",open:"08:00",close:"16:30"},{day:"Wednesday",open:"08:00",close:"16:30"},{day:"Thursday",open:"08:00",close:"16:30"},{day:"Friday",open:"08:00",close:"16:30"}]}}],jv=({open:t,onClose:r,onSubmit:n,initialData:s,mode:a,loading:o=!1})=>{const[i,l]=x.useState(""),[c,d]=x.useState([]),[u,f]=x.useState({isValid:!0,message:""}),{control:p,handleSubmit:m,reset:g,watch:v,setValue:P,formState:{errors:j,isDirty:w}}=cs({resolver:Ps(vv),defaultValues:{symbol:"",name:"",type:"STOCK",nation:"",marketCode:"",currency:"",timezone:"",description:"",...s}}),D=v("nation"),y=v("type"),A=v("symbol");x.useEffect(()=>{if(D){const k=Fn.find(T=>T.code===D);k&&(d(k.marketCodes),P("currency",k.currency),P("timezone",k.timezone),l(D))}},[D,P]),x.useEffect(()=>{if(A&&D&&y){const k=Fn.find(T=>T.code===D);if(k&&k.assetTypePatterns[y]){const C=new RegExp(k.assetTypePatterns[y]).test(A);f({isValid:C,message:C?"":`Symbol format is invalid for ${y} in ${k.name}`})}}},[A,D,y]);const R=()=>{g(),l(""),d([]),f({isValid:!0,message:""}),r()},N=async k=>{try{await n(k),R()}catch(T){console.error("Form submission error:",T)}},_=k=>{const T=Fn.find(C=>C.code===k);return T?`${T.name} (${k})`:k},E=k=>{const T=c.find(C=>C.code===k);return T?`${T.name} (${k})`:k};return e.jsx(Qt,{dateAdapter:Tr,children:e.jsxs(ar,{open:t,onClose:R,maxWidth:"md",fullWidth:!0,children:[e.jsx(xr,{children:e.jsx(h,{variant:"h6",component:"div",children:a==="create"?"Create New Global Asset":"Edit Global Asset"})}),e.jsxs("form",{onSubmit:m(N),children:[e.jsx(or,{children:e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"symbol",control:p,render:({field:k})=>{var T;return e.jsx($e,{...k,label:"Symbol",fullWidth:!0,error:!!j.symbol||!u.isValid,helperText:((T=j.symbol)==null?void 0:T.message)||u.message,placeholder:"e.g., AAPL, HPG",disabled:a==="edit"})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"name",control:p,render:({field:k})=>{var T;return e.jsx($e,{...k,label:"Asset Name",fullWidth:!0,error:!!j.name,helperText:(T=j.name)==null?void 0:T.message,placeholder:"e.g., Apple Inc., Hoa Phat Group"})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"type",control:p,render:({field:k})=>e.jsxs(Xe,{fullWidth:!0,error:!!j.type,children:[e.jsx(Je,{children:"Asset Type"}),e.jsx(et,{...k,label:"Asset Type",children:bv.map(T=>e.jsx(ce,{value:T.value,children:T.label},T.value))}),j.type&&e.jsx(h,{variant:"caption",color:"error",children:j.type.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"nation",control:p,render:({field:k})=>e.jsxs(Xe,{fullWidth:!0,error:!!j.nation,children:[e.jsx(Je,{children:"Nation"}),e.jsx(et,{...k,label:"Nation",children:Fn.map(T=>e.jsx(ce,{value:T.code,children:_(T.code)},T.code))}),j.nation&&e.jsx(h,{variant:"caption",color:"error",children:j.nation.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"marketCode",control:p,render:({field:k})=>e.jsxs(Xe,{fullWidth:!0,error:!!j.marketCode,disabled:!D,children:[e.jsx(Je,{children:"Market Code"}),e.jsx(et,{...k,label:"Market Code",children:c.map(T=>e.jsx(ce,{value:T.code,children:E(T.code)},T.code))}),j.marketCode&&e.jsx(h,{variant:"caption",color:"error",children:j.marketCode.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"currency",control:p,render:({field:k})=>{var T;return e.jsx($e,{...k,label:"Currency",fullWidth:!0,error:!!j.currency,helperText:(T=j.currency)==null?void 0:T.message,disabled:!0})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"timezone",control:p,render:({field:k})=>{var T;return e.jsx($e,{...k,label:"Timezone",fullWidth:!0,error:!!j.timezone,helperText:(T=j.timezone)==null?void 0:T.message,disabled:!0})}})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"description",control:p,render:({field:k})=>{var T;return e.jsx($e,{...k,label:"Description",fullWidth:!0,multiline:!0,rows:3,error:!!j.description,helperText:(T=j.description)==null?void 0:T.message,placeholder:"Optional description of the asset"})}})}),i&&e.jsx(M,{item:!0,xs:12,children:e.jsxs(b,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Nation Configuration"}),e.jsxs(b,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(De,{label:`Currency: ${v("currency")}`,size:"small"}),e.jsx(De,{label:`Timezone: ${v("timezone")}`,size:"small"}),e.jsx(De,{label:`Markets: ${c.length}`,size:"small"})]})]})})]})}),e.jsxs(ir,{children:[e.jsx(Ce,{onClick:R,disabled:o,children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",disabled:o||!w||!u.isValid,startIcon:o?e.jsx(He,{size:20}):null,children:o?"Saving...":a==="create"?"Create Asset":"Update Asset"})]})]})]})})},wv={STOCK:"#1976d2",BOND:"#388e3c",CRYPTO:"#f57c00",COMMODITY:"#7b1fa2",CURRENCY:"#d32f2f",ETF:"#0288d1",MUTUAL_FUND:"#5d4037"},Cv={VN:"Vietnam",US:"United States",UK:"United Kingdom",JP:"Japan",SG:"Singapore",AU:"Australia",CA:"Canada",DE:"Germany",FR:"France",CN:"China"},Tv={HOSE:"Ho Chi Minh Stock Exchange",HNX:"Hanoi Stock Exchange",UPCOM:"Unlisted Public Company Market",NYSE:"New York Stock Exchange",NASDAQ:"NASDAQ",AMEX:"American Stock Exchange",LSE:"London Stock Exchange",AIM:"Alternative Investment Market",TSE:"Tokyo Stock Exchange",SGX:"Singapore Exchange",ASX:"Australian Securities Exchange",TSX:"Toronto Stock Exchange",XETRA:"XETRA",EPA:"Euronext Paris",SSE:"Shanghai Stock Exchange",SZSE:"Shenzhen Stock Exchange"},Pv=({assets:t,loading:r=!1,onEdit:n,onDelete:s,onView:a,onRefresh:o,error:i})=>{const[l,c]=x.useState(0),[d,u]=x.useState(10),[f,p]=x.useState(""),[m,g]=x.useState(""),[v,P]=x.useState(""),[j,w]=x.useState("symbol"),[D,y]=x.useState("asc"),[A,R]=x.useState(null),[N,_]=x.useState(null),E=x.useMemo(()=>[...new Set(t.map(Y=>Y.type))].sort(),[t]),k=x.useMemo(()=>[...new Set(t.map(Y=>Y.nation))].sort(),[t]),T=x.useMemo(()=>{let S=t.filter(Y=>{var le;const pe=Y.symbol.toLowerCase().includes(f.toLowerCase())||Y.name.toLowerCase().includes(f.toLowerCase())||((le=Y.description)==null?void 0:le.toLowerCase().includes(f.toLowerCase())),Q=!m||Y.type===m,se=!v||Y.nation===v;return pe&&Q&&se});return S.sort((Y,pe)=>{let Q=Y[j],se=pe[j];return j==="createdAt"?(Q=new Date(Q).getTime(),se=new Date(se).getTime()):typeof Q=="string"&&(Q=Q.toLowerCase(),se=se.toLowerCase()),Q<se?D==="asc"?-1:1:Q>se?D==="asc"?1:-1:0}),S},[t,f,m,v,j,D]),C=x.useMemo(()=>{const S=l*d;return T.slice(S,S+d)},[T,l,d]),V=(S,Y)=>{c(Y)},F=S=>{u(parseInt(S.target.value,10)),c(0)},I=S=>{j===S?y(D==="asc"?"desc":"asc"):(w(S),y("asc"))},K=(S,Y)=>{R(S.currentTarget),_(Y)},W=()=>{R(null),_(null)},O=S=>{if(N)switch(S){case"view":a(N);break;case"edit":n(N);break;case"delete":s(N);break}W()},L=(S,Y)=>new Intl.NumberFormat("en-US",{style:"currency",currency:Y,minimumFractionDigits:2,maximumFractionDigits:2}).format(S),q=S=>{if(!S.assetPrice)return e.jsx(Ks,{color:"disabled"});const Y=Math.random()-.5;return Y>.1?e.jsx(yt,{color:"success"}):Y<-.1?e.jsx(Dt,{color:"error"}):e.jsx(Ks,{color:"disabled"})},me=S=>wv[S]||"#666",ye=S=>Cv[S]||S,re=S=>Tv[S]||S;return i?e.jsx(ze,{severity:"error",action:e.jsx(Ce,{color:"inherit",size:"small",onClick:o,children:"Retry"}),children:i}):e.jsxs(b,{children:[e.jsx(nt,{sx:{p:2,mb:2},children:e.jsxs(M,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsx($e,{fullWidth:!0,placeholder:"Search assets...",value:f,onChange:S=>p(S.target.value),InputProps:{startAdornment:e.jsx(xa,{position:"start",children:e.jsx(fa,{})})}})}),e.jsx(M,{item:!0,xs:12,sm:3,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Type"}),e.jsxs(et,{value:m,onChange:S=>g(S.target.value),label:"Type",children:[e.jsx(ce,{value:"",children:"All Types"}),E.map(S=>e.jsx(ce,{value:S,children:S},S))]})]})}),e.jsx(M,{item:!0,xs:12,sm:3,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Nation"}),e.jsxs(et,{value:v,onChange:S=>P(S.target.value),label:"Nation",children:[e.jsx(ce,{value:"",children:"All Nations"}),k.map(S=>e.jsx(ce,{value:S,children:ye(S)},S))]})]})}),e.jsx(M,{item:!0,xs:12,sm:2,children:e.jsx(Ce,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Hr,{}),onClick:o,disabled:r,children:"Refresh"})})]})}),e.jsxs(de,{children:[e.jsx(Kt,{children:e.jsxs(Gt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsx(Xr,{active:j==="symbol",direction:j==="symbol"?D:"asc",onClick:()=>I("symbol"),children:"Symbol"})}),e.jsx(z,{children:e.jsx(Xr,{active:j==="name",direction:j==="name"?D:"asc",onClick:()=>I("name"),children:"Name"})}),e.jsx(z,{children:e.jsx(Xr,{active:j==="type",direction:j==="type"?D:"asc",onClick:()=>I("type"),children:"Type"})}),e.jsx(z,{children:e.jsx(Xr,{active:j==="nation",direction:j==="nation"?D:"asc",onClick:()=>I("nation"),children:"Nation"})}),e.jsx(z,{children:e.jsx(Xr,{active:j==="marketCode",direction:j==="marketCode"?D:"asc",onClick:()=>I("marketCode"),children:"Market"})}),e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Status"}),e.jsx(z,{align:"right",children:"Actions"})]})}),e.jsx(Xt,{children:r?e.jsx(Ge,{children:e.jsx(z,{colSpan:8,align:"center",children:e.jsx(He,{})})}):C.length===0?e.jsx(Ge,{children:e.jsx(z,{colSpan:8,align:"center",children:e.jsx(h,{variant:"body2",color:"text.secondary",children:"No assets found"})})}):C.map(S=>e.jsxs(Ge,{hover:!0,children:[e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:S.symbol})}),e.jsxs(z,{children:[e.jsx(h,{variant:"body2",children:S.name}),S.description&&e.jsx(h,{variant:"caption",color:"text.secondary",children:S.description})]}),e.jsx(z,{children:e.jsx(De,{label:S.type,size:"small",sx:{backgroundColor:me(S.type),color:"white"}})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:ye(S.nation)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:re(S.marketCode)})}),e.jsxs(z,{children:[e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[q(S),e.jsx(h,{variant:"body2",children:S.assetPrice?L(S.assetPrice.currentPrice,S.currency):"No price data"})]}),S.assetPrice&&e.jsxs(h,{variant:"caption",color:"text.secondary",children:[S.assetPrice.priceSource," • ",new Date(S.assetPrice.lastPriceUpdate).toLocaleDateString()]})]}),e.jsx(z,{children:e.jsx(De,{label:S.isActive?"Active":"Inactive",size:"small",color:S.isActive?"success":"default"})}),e.jsx(z,{align:"right",children:e.jsx(Et,{onClick:Y=>K(Y,S),size:"small",children:e.jsx(Lo,{})})})]},S.id))})]})}),e.jsx(ec,{rowsPerPageOptions:[5,10,25,50],component:"div",count:T.length,rowsPerPage:d,page:l,onPageChange:V,onRowsPerPageChange:F})]}),e.jsxs(Vo,{anchorEl:A,open:!!A,onClose:W,children:[e.jsxs(ce,{onClick:()=>O("view"),children:[e.jsx($t,{children:e.jsx(ma,{fontSize:"small"})}),e.jsx(Wt,{children:"View Details"})]}),e.jsxs(ce,{onClick:()=>O("edit"),children:[e.jsx($t,{children:e.jsx(is,{fontSize:"small"})}),e.jsx(Wt,{children:"Edit"})]}),e.jsxs(ce,{onClick:()=>O("delete"),children:[e.jsx($t,{children:e.jsx(Uo,{fontSize:"small"})}),e.jsx(Wt,{children:"Delete"})]})]})]})},Sv=ls({price:ln().required("Price is required").positive("Price must be positive").min(.01,"Price must be at least 0.01"),priceType:ut().required("Price type is required").oneOf(["MANUAL","MARKET_DATA","EXTERNAL","CALCULATED"],"Invalid price type"),priceSource:ut().required("Price source is required").oneOf(["USER","MARKET_DATA_SERVICE","EXTERNAL_API","CALCULATED"],"Invalid price source"),changeReason:ut().max(200,"Change reason must be at most 200 characters")}),ko=[{value:"MANUAL",label:"Manual Entry",color:"#1976d2"},{value:"MARKET_DATA",label:"Market Data",color:"#388e3c"},{value:"EXTERNAL",label:"External Source",color:"#f57c00"},{value:"CALCULATED",label:"Calculated",color:"#7b1fa2"}],Ao=[{value:"USER",label:"User Input",color:"#1976d2"},{value:"MARKET_DATA_SERVICE",label:"Market Data Service",color:"#388e3c"},{value:"EXTERNAL_API",label:"External API",color:"#f57c00"},{value:"CALCULATED",label:"Calculated",color:"#7b1fa2"}],Dv=[{id:"1",assetId:"asset-1",price:15e4,priceType:"MARKET_DATA",priceSource:"MARKET_DATA_SERVICE",changeReason:"Market data update",createdAt:"2024-01-15T10:30:00Z"},{id:"2",assetId:"asset-1",price:148500,priceType:"MARKET_DATA",priceSource:"MARKET_DATA_SERVICE",changeReason:"Market data update",createdAt:"2024-01-15T09:30:00Z"},{id:"3",assetId:"asset-1",price:152e3,priceType:"MANUAL",priceSource:"USER",changeReason:"Manual correction",createdAt:"2024-01-14T16:45:00Z"}],kv=({asset:t,onPriceUpdate:r,onPriceHistoryRefresh:n,loading:s=!1,error:a})=>{var T,C,V,F,I,K,W;const[o,i]=x.useState(0),[l]=x.useState(Dv),[c,d]=x.useState(!1),[u,f]=x.useState(!1),{control:p,handleSubmit:m,reset:g,formState:{errors:v}}=cs({resolver:Ps(Sv),defaultValues:{price:((T=t.assetPrice)==null?void 0:T.currentPrice)||0,priceType:((C=t.assetPrice)==null?void 0:C.priceType)||"MANUAL",priceSource:((V=t.assetPrice)==null?void 0:V.priceSource)||"USER",changeReason:""}}),P=x.useMemo(()=>{if(l.length<2)return 0;const O=l[0].price,L=l[1].price;return(O-L)/L*100},[l]),j=(O,L)=>new Intl.NumberFormat("en-US",{style:"currency",currency:L,minimumFractionDigits:2,maximumFractionDigits:2}).format(O),w=O=>new Date(O).toLocaleString(),D=()=>P>.1?e.jsx(yt,{color:"success"}):P<-.1?e.jsx(Dt,{color:"error"}):e.jsx(Ks,{color:"disabled"}),y=O=>{const L=ko.find(q=>q.value===O);return(L==null?void 0:L.color)||"#666"},A=O=>{const L=Ao.find(q=>q.value===O);return(L==null?void 0:L.color)||"#666"},R=async O=>{try{await r(t.id,O.price,O.priceType,O.priceSource,O.changeReason),f(!1),g(),N()}catch(L){console.error("Price update error:",L)}},N=async()=>{d(!0);try{await n(t.id),d(!1)}catch(O){console.error("Price history refresh error:",O),d(!1)}},_=(O,L)=>{i(L)},E=O=>{const L=new Date,q=new Date(O),me=Math.floor((L.getTime()-q.getTime())/(1e3*60*60));return me<1?"Just now":me<24?`${me}h ago`:`${Math.floor(me/24)}d ago`},k=O=>{const L=new Date,q=new Date(O),me=Math.floor((L.getTime()-q.getTime())/(1e3*60*60));return me<1?"success":me<24?"warning":"error"};return a?e.jsx(ze,{severity:"error",children:a}):e.jsx(Qt,{dateAdapter:Tr,children:e.jsxs(b,{children:[e.jsx(de,{sx:{mb:2},children:e.jsx(he,{children:e.jsxs(M,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(M,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"h4",component:"div",children:j(((F=t.assetPrice)==null?void 0:F.currentPrice)||0,t.currency)}),e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[D(),e.jsxs(h,{variant:"body2",color:P>0?"success.main":P<0?"error.main":"text.secondary",children:[P>0?"+":"",P.toFixed(2),"%"]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"vs previous"})]})]}),e.jsxs(M,{item:!0,xs:12,sm:6,children:[e.jsx(b,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:t.assetPrice&&e.jsxs(e.Fragment,{children:[e.jsx(De,{label:t.assetPrice.priceType,size:"small",sx:{backgroundColor:y(t.assetPrice.priceType),color:"white"}}),e.jsx(De,{label:t.assetPrice.priceSource,size:"small",sx:{backgroundColor:A(t.assetPrice.priceSource),color:"white"}}),e.jsx(De,{label:E(t.assetPrice.lastPriceUpdate),size:"small",color:k(t.assetPrice.lastPriceUpdate)})]})}),e.jsxs(h,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last updated: ",t.assetPrice?w(t.assetPrice.lastPriceUpdate):"Never"]})]})]})})}),e.jsxs(de,{children:[e.jsx(b,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(fn,{value:o,onChange:_,children:[e.jsx(gt,{label:"Price Settings"}),e.jsx(gt,{label:"Price History"})]})}),e.jsxs(he,{children:[o===0&&e.jsxs(b,{children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"h6",children:"Price Management"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>f(!0),disabled:s,children:"Update Price"})]}),e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{label:"Current Price",value:j(((I=t.assetPrice)==null?void 0:I.currentPrice)||0,t.currency),fullWidth:!0,disabled:!0})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{label:"Price Type",value:((K=t.assetPrice)==null?void 0:K.priceType)||"N/A",fullWidth:!0,disabled:!0})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{label:"Price Source",value:((W=t.assetPrice)==null?void 0:W.priceSource)||"N/A",fullWidth:!0,disabled:!0})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($e,{label:"Last Update",value:t.assetPrice?w(t.assetPrice.lastPriceUpdate):"Never",fullWidth:!0,disabled:!0})})]})]}),o===1&&e.jsxs(b,{children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"h6",children:"Price History"}),e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Hr,{}),onClick:N,disabled:c,children:"Refresh"})]}),c?e.jsx($o,{}):e.jsx(Kt,{component:nt,children:e.jsxs(Gt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Type"}),e.jsx(z,{children:"Source"}),e.jsx(z,{children:"Reason"}),e.jsx(z,{children:"Date"})]})}),e.jsx(Xt,{children:l.map(O=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:j(O.price,t.currency)})}),e.jsx(z,{children:e.jsx(De,{label:O.priceType,size:"small",sx:{backgroundColor:y(O.priceType),color:"white"}})}),e.jsx(z,{children:e.jsx(De,{label:O.priceSource,size:"small",sx:{backgroundColor:A(O.priceSource),color:"white"}})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:O.changeReason||"N/A"})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:w(O.createdAt)})})]},O.id))})]})})]})]})]}),e.jsxs(ar,{open:u,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(xr,{children:"Update Price"}),e.jsxs("form",{onSubmit:m(R),children:[e.jsx(or,{children:e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"price",control:p,render:({field:O})=>{var L;return e.jsx($e,{...O,label:"Price",type:"number",fullWidth:!0,error:!!v.price,helperText:(L=v.price)==null?void 0:L.message,InputProps:{startAdornment:e.jsx(h,{sx:{mr:1},children:t.currency})}})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"priceType",control:p,render:({field:O})=>e.jsxs(Xe,{fullWidth:!0,error:!!v.priceType,children:[e.jsx(Je,{children:"Price Type"}),e.jsx(et,{...O,label:"Price Type",children:ko.map(L=>e.jsx(ce,{value:L.value,children:L.label},L.value))}),v.priceType&&e.jsx(h,{variant:"caption",color:"error",children:v.priceType.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"priceSource",control:p,render:({field:O})=>e.jsxs(Xe,{fullWidth:!0,error:!!v.priceSource,children:[e.jsx(Je,{children:"Price Source"}),e.jsx(et,{...O,label:"Price Source",children:Ao.map(L=>e.jsx(ce,{value:L.value,children:L.label},L.value))}),v.priceSource&&e.jsx(h,{variant:"caption",color:"error",children:v.priceSource.message})]})})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"changeReason",control:p,render:({field:O})=>{var L;return e.jsx($e,{...O,label:"Change Reason",fullWidth:!0,multiline:!0,rows:2,error:!!v.changeReason,helperText:(L=v.changeReason)==null?void 0:L.message,placeholder:"Optional reason for price change"})}})})]})}),e.jsxs(ir,{children:[e.jsx(Ce,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",disabled:s,startIcon:s?e.jsx(He,{size:20}):null,children:s?"Updating...":"Update Price"})]})]})]})]})})},Av={totalAssets:150,successfulUpdates:142,failedUpdates:8,successRate:94.7,averageUpdateTime:1250,lastUpdate:"2024-01-15T10:30:00Z",nextUpdate:"2024-01-15T10:45:00Z"},Nv=[{name:"MockProvider",baseUrl:"https://api.mockprovider.com",isActive:!0,rateLimit:100,lastCheck:"2024-01-15T10:30:00Z",status:"connected"},{name:"AlphaVantage",baseUrl:"https://www.alphavantage.co",isActive:!1,rateLimit:5,lastCheck:"2024-01-15T09:15:00Z",status:"error"},{name:"Yahoo Finance",baseUrl:"https://query1.finance.yahoo.com",isActive:!0,rateLimit:2e3,lastCheck:"2024-01-15T10:25:00Z",status:"connected"}],Mv=[{assetId:"asset-1",symbol:"HPG",success:!0,newPrice:15e4,timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-2",symbol:"AAPL",success:!0,newPrice:185.5,timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-3",symbol:"MSFT",success:!1,error:"API rate limit exceeded",timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-4",symbol:"GOOGL",success:!0,newPrice:142.75,timestamp:"2024-01-15T10:30:00Z"}],Rv=({stats:t=Av,providers:r=Nv,recentUpdates:n=Mv,onRefresh:s,onUpdateAll:a,onUpdateByNation:o,onUpdateByMarket:i,onTestProvider:l,loading:c=!1,error:d})=>{const[u,f]=x.useState(0),[p,m]=x.useState(!1),[g,v]=x.useState(""),[P,j]=x.useState(""),w=C=>new Date(C).toLocaleString(),D=()=>{const C=new Date,V=new Date(t.nextUpdate),F=Math.floor((V.getTime()-C.getTime())/(1e3*60));if(F<=0)return"Updating now...";if(F<60)return`${F}m`;const I=Math.floor(F/60),K=F%60;return`${I}h ${K}m`},y=C=>{switch(C){case"connected":return"success";case"disconnected":return"warning";case"error":return"error";default:return"default"}},A=C=>{switch(C){case"connected":return e.jsx(Ln,{});case"disconnected":return e.jsx(Yn,{});case"error":return e.jsx(Fs,{});default:return e.jsx(rc,{})}},R=C=>C?e.jsx(Ln,{color:"success"}):e.jsx(Fs,{color:"error"}),N=(C,V)=>{f(V)},_=()=>{a()},E=()=>{g&&o(g)},k=()=>{P&&i(P)},T=C=>{l(C)};return d?e.jsx(ze,{severity:"error",action:e.jsx(Ce,{color:"inherit",size:"small",onClick:s,children:"Retry"}),children:d}):e.jsx(Qt,{dateAdapter:Tr,children:e.jsxs(b,{children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(h,{variant:"h4",component:"h1",children:"Market Data Dashboard"}),e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Hr,{}),onClick:s,disabled:c,children:"Refresh"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(tc,{}),onClick:_,disabled:c,children:"Update All Prices"}),e.jsx(Et,{onClick:()=>m(!0),children:e.jsx(Mo,{})})]})]}),e.jsxs(M,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h4",children:t.totalAssets})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Success Rate"}),e.jsxs(h,{variant:"h4",color:"success.main",children:[t.successRate.toFixed(1),"%"]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Avg Update Time"}),e.jsxs(h,{variant:"h4",children:[t.averageUpdateTime,"ms"]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Next Update"}),e.jsx(h,{variant:"h4",children:D()})]})})})]}),e.jsxs(de,{children:[e.jsx(b,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(fn,{value:u,onChange:N,children:[e.jsx(gt,{label:"Overview"}),e.jsx(gt,{label:"Providers"}),e.jsx(gt,{label:"Recent Updates"}),e.jsx(gt,{label:"Statistics"})]})}),e.jsxs(he,{children:[u===0&&e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(M,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Update by Nation"}),e.jsxs(et,{value:g,onChange:C=>v(C.target.value),label:"Update by Nation",children:[e.jsx(ce,{value:"VN",children:"Vietnam"}),e.jsx(ce,{value:"US",children:"United States"}),e.jsx(ce,{value:"UK",children:"United Kingdom"}),e.jsx(ce,{value:"JP",children:"Japan"})]})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(Xe,{fullWidth:!0,children:[e.jsx(Je,{children:"Update by Market"}),e.jsxs(et,{value:P,onChange:C=>j(C.target.value),label:"Update by Market",children:[e.jsx(ce,{value:"HOSE",children:"Ho Chi Minh Stock Exchange"}),e.jsx(ce,{value:"NYSE",children:"New York Stock Exchange"}),e.jsx(ce,{value:"NASDAQ",children:"NASDAQ"}),e.jsx(ce,{value:"LSE",children:"London Stock Exchange"})]})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsx(Ce,{variant:"outlined",onClick:E,disabled:!g||c,fullWidth:!0,children:"Update Nation"}),e.jsx(Ce,{variant:"outlined",onClick:k,disabled:!P||c,fullWidth:!0,children:"Update Market"})]})})]}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"System Status"}),e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(de,{variant:"outlined",children:e.jsxs(he,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Last Update"}),e.jsx(h,{variant:"body2",children:w(t.lastUpdate)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(de,{variant:"outlined",children:e.jsxs(he,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Next Update"}),e.jsx(h,{variant:"body2",children:w(t.nextUpdate)})]})})})]})]}),u===1&&e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Data Providers"}),e.jsx(Kt,{component:nt,children:e.jsxs(Gt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Provider"}),e.jsx(z,{children:"Status"}),e.jsx(z,{children:"Rate Limit"}),e.jsx(z,{children:"Last Check"}),e.jsx(z,{children:"Actions"})]})}),e.jsx(Xt,{children:r.map(C=>e.jsxs(Ge,{children:[e.jsxs(z,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:C.name}),e.jsx(h,{variant:"caption",color:"text.secondary",children:C.baseUrl})]}),e.jsx(z,{children:e.jsx(De,{icon:A(C.status),label:C.status,color:y(C.status),size:"small"})}),e.jsx(z,{children:e.jsxs(h,{variant:"body2",children:[C.rateLimit," req/min"]})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:w(C.lastCheck)})}),e.jsx(z,{children:e.jsx(Ce,{size:"small",onClick:()=>T(C.name),disabled:c,children:"Test Connection"})})]},C.name))})]})})]}),u===2&&e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Recent Updates"}),e.jsx(Kt,{component:nt,children:e.jsxs(Gt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Symbol"}),e.jsx(z,{children:"Result"}),e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Error"}),e.jsx(z,{children:"Time"})]})}),e.jsx(Xt,{children:n.map((C,V)=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:C.symbol})}),e.jsx(z,{children:R(C.success)}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:C.newPrice?`$${C.newPrice.toFixed(2)}`:"N/A"})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",color:"error",children:C.error||"N/A"})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:w(C.timestamp)})})]},V))})]})})]}),u===3&&e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Performance Statistics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{variant:"outlined",children:e.jsxs(he,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Update Success Rate"}),e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx($o,{variant:"determinate",value:t.successRate,sx:{flexGrow:1}}),e.jsxs(h,{variant:"body2",children:[t.successRate.toFixed(1),"%"]})]})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(de,{variant:"outlined",children:e.jsxs(he,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Update Performance"}),e.jsxs(ha,{dense:!0,children:[e.jsxs(cn,{children:[e.jsx($t,{children:e.jsx(Ln,{color:"success"})}),e.jsx(Wt,{primary:"Successful Updates",secondary:t.successfulUpdates})]}),e.jsxs(cn,{children:[e.jsx($t,{children:e.jsx(Fs,{color:"error"})}),e.jsx(Wt,{primary:"Failed Updates",secondary:t.failedUpdates})]}),e.jsxs(cn,{children:[e.jsx($t,{children:e.jsx(Hr,{})}),e.jsx(Wt,{primary:"Average Response Time",secondary:`${t.averageUpdateTime}ms`})]})]})]})})})]})]})]})]}),e.jsxs(ar,{open:p,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(xr,{children:"Market Data Settings"}),e.jsx(or,{children:e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure market data providers and update settings."})}),e.jsxs(ir,{children:[e.jsx(Ce,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(Ce,{variant:"contained",children:"Save Settings"})]})]})]})})},Ev=({assets:t,loading:r=!1,error:n,onRefresh:s,onCreateAsset:a,onUpdateAsset:o,onDeleteAsset:i,onPriceUpdate:l,onPriceHistoryRefresh:c,marketDataStats:d,marketDataProviders:u,recentUpdates:f,onMarketDataRefresh:p,onUpdateAllPrices:m,onUpdateByNation:g,onUpdateByMarket:v,onTestProvider:P,onUpdateConfig:j})=>{const[w,D]=x.useState(0),[y,A]=x.useState(!1),[R,N]=x.useState(null),[_,E]=x.useState(!1),[k,T]=x.useState("create"),[C,V]=x.useState(!1),F=(S,Y)=>{D(Y)},I=()=>{T("create"),N(null),A(!0)},K=S=>{T("edit"),N(S),A(!0)},W=async S=>{if(window.confirm(`Are you sure you want to delete ${S.symbol}?`))try{await i(S.id),s()}catch(Y){console.error("Delete error:",Y)}},O=S=>{N(S),E(!0)},L=async S=>{V(!0);try{k==="create"?await a(S):R&&await o(R.id,S),A(!1),s()}catch(Y){console.error("Form submission error:",Y)}finally{V(!1)}},q=()=>{A(!1),N(null)},me=()=>{E(!1),N(null)},ye=S=>({STOCK:"#1976d2",BOND:"#388e3c",CRYPTO:"#f57c00",COMMODITY:"#7b1fa2",CURRENCY:"#d32f2f",ETF:"#0288d1",MUTUAL_FUND:"#5d4037"})[S]||"#666",re=S=>({VN:"Vietnam",US:"United States",UK:"United Kingdom",JP:"Japan",SG:"Singapore",AU:"Australia",CA:"Canada",DE:"Germany",FR:"France",CN:"China"})[S]||S;return n?e.jsx(ze,{severity:"error",action:e.jsx(Ce,{color:"inherit",size:"small",onClick:s,children:"Retry"}),children:n}):e.jsxs(b,{children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(h,{variant:"h4",component:"h1",children:"Global Asset Management"}),e.jsxs(b,{sx:{display:"flex",gap:1},children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Hr,{}),onClick:s,disabled:r,children:"Refresh"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:I,disabled:r,children:"Add Asset"})]})]}),e.jsxs(de,{children:[e.jsx(b,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(fn,{value:w,onChange:F,children:[e.jsx(gt,{label:"Assets"}),e.jsx(gt,{label:"Market Data"}),e.jsx(gt,{label:"Analytics"})]})}),e.jsxs(b,{sx:{p:3},children:[w===0&&e.jsx(b,{children:e.jsx(Pv,{assets:t,loading:r,onEdit:K,onDelete:W,onView:O,onRefresh:s,error:n})}),w===1&&e.jsx(b,{children:e.jsx(Rv,{stats:d,providers:u,recentUpdates:f,onRefresh:p,onUpdateAll:m,onUpdateByNation:g,onUpdateByMarket:v,onTestProvider:P,onUpdateConfig:j,loading:r,error:n})}),w===2&&e.jsxs(b,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Analytics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h4",children:t.length})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Active Assets"}),e.jsx(h,{variant:"h4",children:t.filter(S=>S.isActive).length})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(de,{children:e.jsxs(he,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Nations"}),e.jsx(h,{variant:"h4",children:new Set(t.map(S=>S.nation)).size})]})})})]}),e.jsxs(b,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Distribution by Type"}),e.jsx(M,{container:!0,spacing:2,children:Object.entries(t.reduce((S,Y)=>(S[Y.type]=(S[Y.type]||0)+1,S),{})).map(([S,Y])=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{variant:"outlined",children:e.jsx(he,{children:e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{label:S,size:"small",sx:{backgroundColor:ye(S),color:"white"}}),e.jsx(h,{variant:"h6",children:Y})]})})})},S))})]}),e.jsxs(b,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Distribution by Nation"}),e.jsx(M,{container:!0,spacing:2,children:Object.entries(t.reduce((S,Y)=>(S[Y.nation]=(S[Y.nation]||0)+1,S),{})).map(([S,Y])=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(de,{variant:"outlined",children:e.jsx(he,{children:e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:re(S)}),e.jsx(h,{variant:"h6",children:Y})]})})})},S))})]})]})]})]}),e.jsx(jv,{open:y,onClose:q,onSubmit:L,initialData:R||void 0,mode:k,loading:C}),R&&e.jsxs(ar,{open:_,onClose:me,maxWidth:"md",fullWidth:!0,children:[e.jsxs(xr,{children:["Price Management - ",R.symbol]}),e.jsx(or,{children:e.jsx(kv,{asset:{id:R.id,symbol:R.symbol,name:R.name,currency:R.currency,assetPrice:R.assetPrice?{id:"",assetId:R.id,currentPrice:R.assetPrice.currentPrice,priceType:R.assetPrice.priceType,priceSource:R.assetPrice.priceSource,lastPriceUpdate:R.assetPrice.lastPriceUpdate}:void 0},onPriceUpdate:l,onPriceHistoryRefresh:c,loading:r,error:n})}),e.jsx(ir,{children:e.jsx(Ce,{onClick:me,children:"Close"})})]})]})},Iv=async(t={})=>{const r=new URLSearchParams;return t.page&&r.append("page",t.page.toString()),t.limit&&r.append("limit",t.limit.toString()),t.sortBy&&r.append("sortBy",t.sortBy),t.sortOrder&&r.append("sortOrder",t.sortOrder),t.search&&r.append("search",t.search),t.type&&r.append("type",t.type),t.nation&&r.append("nation",t.nation),t.marketCode&&r.append("marketCode",t.marketCode),t.isActive!==void 0&&r.append("isActive",t.isActive.toString()),(await Be.api.get(`/api/v1/global-assets?${r.toString()}`)).data},Ov=(t={})=>{var n,s,a,o,i;const r=Pt(["globalAssets",t],()=>Iv(t),{staleTime:3e5});return{...r,data:((n=r.data)==null?void 0:n.data)||[],total:((s=r.data)==null?void 0:s.total)||0,page:((a=r.data)==null?void 0:a.page)||1,limit:((o=r.data)==null?void 0:o.limit)||10,totalPages:((i=r.data)==null?void 0:i.totalPages)||1}},_v=async()=>(await Be.api.get("/api/v1/market-data/statistics")).data,Fv=async()=>(await Be.api.get("/api/v1/market-data/providers")).data,Lv=async(t=50)=>(console.warn("Recent updates endpoint not implemented in backend yet"),[]),Vv=()=>Pt(["marketDataStats"],_v,{staleTime:30*1e3,refetchInterval:60*1e3}),Uv=()=>Pt(["marketDataProviders"],Fv,{staleTime:5*60*1e3}),Bv=(t=50)=>Pt(["recentUpdates",t],()=>Lv(t),{staleTime:30*1e3,refetchInterval:30*1e3}),$v=()=>{const{data:t=[],isLoading:r,error:n,refetch:s}=Ov(),{data:a,isLoading:o,error:i}=Vv(),{data:l=[],isLoading:c,error:d}=Uv(),{data:u=[],isLoading:f,error:p}=Bv(50),m=async()=>{await s()},g=async C=>{console.log("Creating asset:",C)},v=async(C,V)=>{console.log("Updating asset:",C,V)},P=async C=>{console.log("Deleting asset:",C)},j=async(C,V,F,I,K)=>{console.log("Updating price:",{assetId:C,price:V,priceType:F,priceSource:I,changeReason:K})},w=async C=>{console.log("Refreshing price history for asset:",C)},D=async()=>{console.log("Refreshing market data...")},y=async()=>{console.log("Updating all prices...")},A=async C=>{console.log("Updating prices by nation:",C)},R=async C=>{console.log("Updating prices by market:",C)},N=async C=>{console.log("Testing provider:",C)},_=async C=>{console.log("Updating config:",C)},E=r||o||c||f,k=n||i||d||p,T=k?(k==null?void 0:k.message)||String(k):void 0;return e.jsx(Vr,{maxWidth:"xl",sx:{py:3},children:e.jsx(Ev,{assets:t,loading:E,error:T,onRefresh:m,onCreateAsset:g,onUpdateAsset:v,onDeleteAsset:P,onPriceUpdate:j,onPriceHistoryRefresh:w,marketDataStats:a,marketDataProviders:l,recentUpdates:u,onMarketDataRefresh:D,onUpdateAllPrices:y,onUpdateByNation:A,onUpdateByMarket:R,onTestProvider:N,onUpdateConfig:_})})},Wv=nc({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}}}}),Hv=new uc({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}}),zv=()=>(x.useEffect(()=>()=>{},[]),e.jsx(hc,{client:Hv,children:e.jsxs(sc,{theme:Wv,children:[e.jsx(No,{}),e.jsx(lc,{children:e.jsx(ud,{children:e.jsx(b,{sx:{minHeight:"100vh"},children:e.jsxs(cc,{children:[e.jsx(_t,{path:"/",element:e.jsx(zf,{})}),e.jsx(_t,{path:"/portfolios",element:e.jsx(Gf,{})}),e.jsx(_t,{path:"/portfolios/:portfolioId",element:e.jsx(nv,{})}),e.jsx(_t,{path:"/portfolios/:portfolioId/trading",element:e.jsx(sv,{})}),e.jsx(_t,{path:"/assets",element:e.jsx(yv,{})}),e.jsx(_t,{path:"/global-assets",element:e.jsx($v,{})}),e.jsx(_t,{path:"/analytics",element:e.jsx("div",{children:"Analytics Page - Coming Soon"})}),e.jsx(_t,{path:"/reports",element:e.jsx("div",{children:"Reports Page - Coming Soon"})}),e.jsx(_t,{path:"/settings",element:e.jsx("div",{children:"Settings Page - Coming Soon"})}),e.jsx(_t,{path:"*",element:e.jsx(dc,{to:"/",replace:!0})})]})})})}),e.jsx(cd,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}}),e.jsx(jc.ReactQueryDevtools,{initialIsOpen:!1})]})})),Yv=Gs.createRoot(document.getElementById("root"));Yv.render(e.jsx(Ht.StrictMode,{children:e.jsx(zv,{})}));
//# sourceMappingURL=index-DPeND-eF.js.map
