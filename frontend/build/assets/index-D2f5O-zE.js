var Al=Object.defineProperty;var Nl=(t,r,n)=>r in t?Al(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;var Oa=(t,r,n)=>Nl(t,typeof r!="symbol"?r+"":r,n);import{u as Ir,b as ua,j as e,T as Os,d as h,L as ha,e as dn,f as Ml,g as Ut,h as Wt,B as v,C as No,A as Rl,I as Et,M as El,D as _a,i as Il,k as er,l as Ol,G as _l,m as gt,n as zn,S as Mo,o as ss,p as Fl,q as de,t as Ro,r as Dt,V as ma,s as ze,v as Ue,w as Ll,x as M,y as he,z as fe,E as nt,F as Ce,H as Nt,J as We,K as fa,N as Ze,O as Je,Q as et,R as ue,U as Eo,W as or,X as yr,Y as ir,Z as lr,$ as De,a0 as Vl,a1 as Yn,a2 as Ln,a3 as as,a4 as $l,c as ut,_ as V,a5 as Le,a6 as ct,a7 as yt,a8 as vt,a9 as ke,aa as ft,ab as vr,ac as os,ad as Fa,ae as Mr,af as Bl,ag as Ul,ah as ye,ai as _s,aj as Wl,ak as gr,al as Wr,P as L,am as Hl,an as Hr,ao as zl,ap as Io,aq as pa,ar as xa,as as Oo,at as _o,au as zr,av as Fo,aw as is,ax as Gt,ay as Xt,az as Zt,aA as Ge,aB as Y,aC as Jt,aD as Yl,aE as Lo,aF as ql,aG as Vo,aH as $o,aI as Ql,aJ as Kl,aK as $r,aL as Bo,aM as pn,aN as xt,aO as Gl,aP as Xl,aQ as Zl,aR as Jl,aS as Jr,aT as ec,aU as Ks,aV as Uo,aW as tc,aX as Fs,aY as rc,aZ as nc,a_ as sc}from"./mui-Cq95TorA.js";import{d as ac,r as x,b as Ht,g as oc}from"./vendor-Cr2nE3UY.js";import{u as xn,a as ic,b as Wo,B as lc,R as cc,c as _t,N as dc}from"./router-DkWuIpoj.js";import{u as cr,a as jt,b as zt,Q as uc,c as hc}from"./query-DZb0HHX_.js";import{o as mc,r as fc,a as pc,c as ls,b as dt,u as cs,C as qe,d as La,e as cn}from"./forms-DotYSCGd.js";import{R as Mt,P as Ho,a as zo,C as gn,T as Rt,L as ga,b as ds,c as tr,X as rr,Y as nr,d as Yr,e as Yo,S as xc,f as gc,B as qo,g as qn,h as yc,A as vc,i as bc}from"./charts-DyBxAEVj.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Gs={},Va=ac;Gs.createRoot=Va.createRoot,Gs.hydrateRoot=Va.hydrateRoot;var Qo={exports:{}};Qo.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var jc=Qo.exports;let wc={data:""},Cc=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||wc,Pc=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Tc=/\/\*[^]*?\*\/|  +/g,$a=/\n+/g,mr=(t,r)=>{let n="",s="",a="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+i+";":s+=o[1]=="f"?mr(i,o):o+"{"+mr(i,o[1]=="k"?"":r)+"}":typeof i=="object"?s+=mr(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=mr.p?mr.p(o,i):o+":"+i+";")}return n+(r&&a?r+"{"+a+"}":a)+s},Qt={},Ko=t=>{if(typeof t=="object"){let r="";for(let n in t)r+=n+Ko(t[n]);return r}return t},Sc=(t,r,n,s,a)=>{let o=Ko(t),i=Qt[o]||(Qt[o]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(o));if(!Qt[i]){let c=o!==t?t:(d=>{let u,f,p=[{}];for(;u=Pc.exec(d.replace(Tc,""));)u[4]?p.shift():u[3]?(f=u[3].replace($a," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace($a," ").trim();return p[0]})(t);Qt[i]=mr(a?{["@keyframes "+i]:c}:c,n?"":"."+i)}let l=n&&Qt.g?Qt.g:null;return n&&(Qt.g=Qt[i]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Qt[i],r,s,l),i},Dc=(t,r,n)=>t.reduce((s,a,o)=>{let i=r[o];if(i&&i.call){let l=i(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":mr(l,""):l===!1?"":l}return s+a+(i??"")},"");function us(t){let r=this||{},n=t.call?t(r.p):t;return Sc(n.unshift?n.raw?Dc(n,[].slice.call(arguments,1),r.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(r.p):a),{}):n,Cc(r.target),r.g,r.o,r.k)}let Go,Xs,Zs;us.bind({g:1});let sr=us.bind({k:1});function kc(t,r,n,s){mr.p=r,Go=t,Xs=n,Zs=s}function br(t,r){let n=this||{};return function(){let s=arguments;function a(o,i){let l=Object.assign({},o),c=l.className||a.className;n.p=Object.assign({theme:Xs&&Xs()},l),n.o=/ *go\d+/.test(c),l.className=us.apply(n,s)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),Zs&&d[0]&&Zs(l),Go(d,l)}return a}}var Ac=t=>typeof t=="function",Qn=(t,r)=>Ac(t)?t(r):t,Nc=(()=>{let t=0;return()=>(++t).toString()})(),Xo=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),Mc=20,ya="default",Zo=(t,r)=>{let{toastLimit:n}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:s}=r;return Zo(t,{type:t.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=r;return{...t,toasts:t.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let o=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Vn=[],Jo={toasts:[],pausedAt:void 0,settings:{toastLimit:Mc}},Bt={},ei=(t,r=ya)=>{Bt[r]=Zo(Bt[r]||Jo,t),Vn.forEach(([n,s])=>{n===r&&s(Bt[r])})},ti=t=>Object.keys(Bt).forEach(r=>ei(t,r)),Rc=t=>Object.keys(Bt).find(r=>Bt[r].toasts.some(n=>n.id===t)),hs=(t=ya)=>r=>{ei(r,t)},Ec={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ic=(t={},r=ya)=>{let[n,s]=x.useState(Bt[r]||Jo),a=x.useRef(Bt[r]);x.useEffect(()=>(a.current!==Bt[r]&&s(Bt[r]),Vn.push([r,s]),()=>{let i=Vn.findIndex(([l])=>l===r);i>-1&&Vn.splice(i,1)}),[r]);let o=n.toasts.map(i=>{var l,c,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((l=t[i.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Ec[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...n,toasts:o}},Oc=(t,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Nc()}),yn=t=>(r,n)=>{let s=Oc(r,t,n);return hs(s.toasterId||Rc(s.id))({type:2,toast:s}),s.id},Qe=(t,r)=>yn("blank")(t,r);Qe.error=yn("error");Qe.success=yn("success");Qe.loading=yn("loading");Qe.custom=yn("custom");Qe.dismiss=(t,r)=>{let n={type:3,toastId:t};r?hs(r)(n):ti(n)};Qe.dismissAll=t=>Qe.dismiss(void 0,t);Qe.remove=(t,r)=>{let n={type:4,toastId:t};r?hs(r)(n):ti(n)};Qe.removeAll=t=>Qe.remove(void 0,t);Qe.promise=(t,r,n)=>{let s=Qe.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let o=r.success?Qn(r.success,a):void 0;return o?Qe.success(o,{id:s,...n,...n==null?void 0:n.success}):Qe.dismiss(s),a}).catch(a=>{let o=r.error?Qn(r.error,a):void 0;o?Qe.error(o,{id:s,...n,...n==null?void 0:n.error}):Qe.dismiss(s)}),t};var _c=1e3,Fc=(t,r="default")=>{let{toasts:n,pausedAt:s}=Ic(t,r),a=x.useRef(new Map).current,o=x.useCallback((f,p=_c)=>{if(a.has(f))return;let m=setTimeout(()=>{a.delete(f),i({type:4,toastId:f})},p);a.set(f,m)},[]);x.useEffect(()=>{if(s)return;let f=Date.now(),p=n.map(m=>{if(m.duration===1/0)return;let g=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(g<0){m.visible&&Qe.dismiss(m.id);return}return setTimeout(()=>Qe.dismiss(m.id,r),g)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[n,s,r]);let i=x.useCallback(hs(r),[r]),l=x.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=x.useCallback((f,p)=>{i({type:1,toast:{id:f,height:p}})},[i]),d=x.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),u=x.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:g=8,defaultPosition:b}=p||{},P=n.filter(S=>(S.position||b)===(f.position||b)&&S.height),j=P.findIndex(S=>S.id===f.id),w=P.filter((S,y)=>y<j&&S.visible).length;return P.filter(S=>S.visible).slice(...m?[w+1]:[0,w]).reduce((S,y)=>S+(y.height||0)+g,0)},[n]);return x.useEffect(()=>{n.forEach(f=>{if(f.dismissed)o(f.id,f.removeDelay);else{let p=a.get(f.id);p&&(clearTimeout(p),a.delete(f.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Lc=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Vc=sr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$c=sr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Bc=br("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Lc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Vc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$c} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Uc=sr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Wc=br("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Uc} 1s linear infinite;
`,Hc=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,zc=sr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Yc=br("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Hc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${zc} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qc=br("div")`
  position: absolute;
`,Qc=br("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Kc=sr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gc=br("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Kc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Xc=({toast:t})=>{let{icon:r,type:n,iconTheme:s}=t;return r!==void 0?typeof r=="string"?x.createElement(Gc,null,r):r:n==="blank"?null:x.createElement(Qc,null,x.createElement(Wc,{...s}),n!=="loading"&&x.createElement(qc,null,n==="error"?x.createElement(Bc,{...s}):x.createElement(Yc,{...s})))},Zc=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Jc=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ed="0%{opacity:0;} 100%{opacity:1;}",td="0%{opacity:1;} 100%{opacity:0;}",rd=br("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,nd=br("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sd=(t,r)=>{let n=t.includes("top")?1:-1,[s,a]=Xo()?[ed,td]:[Zc(n),Jc(n)];return{animation:r?`${sr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ad=x.memo(({toast:t,position:r,style:n,children:s})=>{let a=t.height?sd(t.position||r||"top-center",t.visible):{opacity:0},o=x.createElement(Xc,{toast:t}),i=x.createElement(nd,{...t.ariaProps},Qn(t.message,t));return x.createElement(rd,{className:t.className,style:{...a,...n,...t.style}},typeof s=="function"?s({icon:o,message:i}):x.createElement(x.Fragment,null,o,i))});kc(x.createElement);var od=({id:t,className:r,style:n,onHeightUpdate:s,children:a})=>{let o=x.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return x.createElement("div",{ref:o,className:r,style:n},a)},id=(t,r)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xo()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...s,...a}},ld=us`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Dn=16,cd=({reverseOrder:t,position:r="top-center",toastOptions:n,gutter:s,children:a,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=Fc(n,o);return x.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Dn,left:Dn,right:Dn,bottom:Dn,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||r,p=d.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:r}),m=id(f,p);return x.createElement(od,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?ld:"",style:m},u.type==="custom"?Qn(u.message,u):a?a(u):x.createElement(ad,{toast:u,position:f}))}))};const _r=240,dd=[{text:"Dashboard",icon:e.jsx(Il,{}),path:"/"},{text:"Portfolios",icon:e.jsx(er,{}),path:"/portfolios"},{text:"Assets",icon:e.jsx(Ol,{}),path:"/assets"},{text:"Global Assets",icon:e.jsx(_l,{}),path:"/global-assets"},{text:"Analytics",icon:e.jsx(gt,{}),path:"/analytics"},{text:"Reports",icon:e.jsx(zn,{}),path:"/reports"},{text:"Settings",icon:e.jsx(Mo,{}),path:"/settings"}],ud=({children:t})=>{const r=Ir(),n=ua(r.breakpoints.down("md")),s=xn(),a=ic(),[o,i]=x.useState(!1),l=()=>{i(!o)},c=u=>{s(u),n&&i(!1)},d=e.jsxs("div",{children:[e.jsx(Os,{children:e.jsx(h,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Manager"})}),e.jsx(ha,{children:dd.map(u=>e.jsx(dn,{disablePadding:!0,children:e.jsxs(Ml,{selected:a.pathname===u.path,onClick:()=>c(u.path),children:[e.jsx(Ut,{children:u.icon}),e.jsx(Wt,{primary:u.text})]})},u.text))})]});return e.jsxs(v,{sx:{display:"flex"},children:[e.jsx(No,{}),e.jsx(Rl,{position:"fixed",sx:{width:{md:`calc(100% - ${_r}px)`},ml:{md:`${_r}px`}},children:e.jsxs(Os,{children:[e.jsx(Et,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,sx:{mr:2,display:{md:"none"}},children:e.jsx(El,{})}),e.jsx(h,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Management System"})]})}),e.jsxs(v,{component:"nav",sx:{width:{md:_r},flexShrink:{md:0}},"aria-label":"navigation",children:[e.jsx(_a,{variant:"temporary",open:o,onClose:l,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:_r}},children:d}),e.jsx(_a,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:_r}},open:!0,children:d})]}),e.jsxs(v,{component:"main",sx:{flexGrow:1,p:3,width:{md:`calc(100% - ${_r}px)`}},children:[e.jsx(Os,{}),t]})]})};function ri(t,r){return function(){return t.apply(r,arguments)}}const{toString:hd}=Object.prototype,{getPrototypeOf:va}=Object,{iterator:ms,toStringTag:ni}=Symbol,fs=(t=>r=>{const n=hd.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),It=t=>(t=t.toLowerCase(),r=>fs(r)===t),ps=t=>r=>typeof r===t,{isArray:Kr}=Array,mn=ps("undefined");function vn(t){return t!==null&&!mn(t)&&t.constructor!==null&&!mn(t.constructor)&&wt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const si=It("ArrayBuffer");function md(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&si(t.buffer),r}const fd=ps("string"),wt=ps("function"),ai=ps("number"),bn=t=>t!==null&&typeof t=="object",pd=t=>t===!0||t===!1,$n=t=>{if(fs(t)!=="object")return!1;const r=va(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(ni in t)&&!(ms in t)},xd=t=>{if(!bn(t)||vn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},gd=It("Date"),yd=It("File"),vd=It("Blob"),bd=It("FileList"),jd=t=>bn(t)&&wt(t.pipe),wd=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||wt(t.append)&&((r=fs(t))==="formdata"||r==="object"&&wt(t.toString)&&t.toString()==="[object FormData]"))},Cd=It("URLSearchParams"),[Pd,Td,Sd,Dd]=["ReadableStream","Request","Response","Headers"].map(It),kd=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jn(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,a;if(typeof t!="object"&&(t=[t]),Kr(t))for(s=0,a=t.length;s<a;s++)r.call(null,t[s],s,t);else{if(vn(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(s=0;s<i;s++)l=o[s],r.call(null,t[l],l,t)}}function oi(t,r){if(vn(t))return null;r=r.toLowerCase();const n=Object.keys(t);let s=n.length,a;for(;s-- >0;)if(a=n[s],r===a.toLowerCase())return a;return null}const Tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ii=t=>!mn(t)&&t!==Tr;function Js(){const{caseless:t}=ii(this)&&this||{},r={},n=(s,a)=>{const o=t&&oi(r,a)||a;$n(r[o])&&$n(s)?r[o]=Js(r[o],s):$n(s)?r[o]=Js({},s):Kr(s)?r[o]=s.slice():r[o]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&jn(arguments[s],n);return r}const Ad=(t,r,n,{allOwnKeys:s}={})=>(jn(r,(a,o)=>{n&&wt(a)?t[o]=ri(a,n):t[o]=a},{allOwnKeys:s}),t),Nd=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Md=(t,r,n,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},Rd=(t,r,n,s)=>{let a,o,i;const l={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)i=a[o],(!s||s(i,t,r))&&!l[i]&&(r[i]=t[i],l[i]=!0);t=n!==!1&&va(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},Ed=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const s=t.indexOf(r,n);return s!==-1&&s===n},Id=t=>{if(!t)return null;if(Kr(t))return t;let r=t.length;if(!ai(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},Od=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&va(Uint8Array)),_d=(t,r)=>{const s=(t&&t[ms]).call(t);let a;for(;(a=s.next())&&!a.done;){const o=a.value;r.call(t,o[0],o[1])}},Fd=(t,r)=>{let n;const s=[];for(;(n=t.exec(r))!==null;)s.push(n);return s},Ld=It("HTMLFormElement"),Vd=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,a){return s.toUpperCase()+a}),Ba=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),$d=It("RegExp"),li=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),s={};jn(n,(a,o)=>{let i;(i=r(a,o,t))!==!1&&(s[o]=i||a)}),Object.defineProperties(t,s)},Bd=t=>{li(t,(r,n)=>{if(wt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(wt(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ud=(t,r)=>{const n={},s=a=>{a.forEach(o=>{n[o]=!0})};return Kr(t)?s(t):s(String(t).split(r)),n},Wd=()=>{},Hd=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function zd(t){return!!(t&&wt(t.append)&&t[ni]==="FormData"&&t[ms])}const Yd=t=>{const r=new Array(10),n=(s,a)=>{if(bn(s)){if(r.indexOf(s)>=0)return;if(vn(s))return s;if(!("toJSON"in s)){r[a]=s;const o=Kr(s)?[]:{};return jn(s,(i,l)=>{const c=n(i,a+1);!mn(c)&&(o[l]=c)}),r[a]=void 0,o}}return s};return n(t,0)},qd=It("AsyncFunction"),Qd=t=>t&&(bn(t)||wt(t))&&wt(t.then)&&wt(t.catch),ci=((t,r)=>t?setImmediate:r?((n,s)=>(Tr.addEventListener("message",({source:a,data:o})=>{a===Tr&&o===n&&s.length&&s.shift()()},!1),a=>{s.push(a),Tr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wt(Tr.postMessage)),Kd=typeof queueMicrotask<"u"?queueMicrotask.bind(Tr):typeof process<"u"&&process.nextTick||ci,Gd=t=>t!=null&&wt(t[ms]),W={isArray:Kr,isArrayBuffer:si,isBuffer:vn,isFormData:wd,isArrayBufferView:md,isString:fd,isNumber:ai,isBoolean:pd,isObject:bn,isPlainObject:$n,isEmptyObject:xd,isReadableStream:Pd,isRequest:Td,isResponse:Sd,isHeaders:Dd,isUndefined:mn,isDate:gd,isFile:yd,isBlob:vd,isRegExp:$d,isFunction:wt,isStream:jd,isURLSearchParams:Cd,isTypedArray:Od,isFileList:bd,forEach:jn,merge:Js,extend:Ad,trim:kd,stripBOM:Nd,inherits:Md,toFlatObject:Rd,kindOf:fs,kindOfTest:It,endsWith:Ed,toArray:Id,forEachEntry:_d,matchAll:Fd,isHTMLForm:Ld,hasOwnProperty:Ba,hasOwnProp:Ba,reduceDescriptors:li,freezeMethods:Bd,toObjectSet:Ud,toCamelCase:Vd,noop:Wd,toFiniteNumber:Hd,findKey:oi,global:Tr,isContextDefined:ii,isSpecCompliantForm:zd,toJSONObject:Yd,isAsyncFn:qd,isThenable:Qd,setImmediate:ci,asap:Kd,isIterable:Gd};function Pe(t,r,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}W.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const di=Pe.prototype,ui={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ui[t]={value:t}});Object.defineProperties(Pe,ui);Object.defineProperty(di,"isAxiosError",{value:!0});Pe.from=(t,r,n,s,a,o)=>{const i=Object.create(di);return W.toFlatObject(t,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Pe.call(i,t.message,r,n,s,a),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const Xd=null;function ea(t){return W.isPlainObject(t)||W.isArray(t)}function hi(t){return W.endsWith(t,"[]")?t.slice(0,-2):t}function Ua(t,r,n){return t?t.concat(r).map(function(a,o){return a=hi(a),!n&&o?"["+a+"]":a}).join(n?".":""):r}function Zd(t){return W.isArray(t)&&!t.some(ea)}const Jd=W.toFlatObject(W,{},null,function(r){return/^is[A-Z]/.test(r)});function xs(t,r,n){if(!W.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,P){return!W.isUndefined(P[b])});const s=n.metaTokens,a=n.visitor||u,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(r);if(!W.isFunction(a))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(W.isDate(g))return g.toISOString();if(W.isBoolean(g))return g.toString();if(!c&&W.isBlob(g))throw new Pe("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(g)||W.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,b,P){let j=g;if(g&&!P&&typeof g=="object"){if(W.endsWith(b,"{}"))b=s?b:b.slice(0,-2),g=JSON.stringify(g);else if(W.isArray(g)&&Zd(g)||(W.isFileList(g)||W.endsWith(b,"[]"))&&(j=W.toArray(g)))return b=hi(b),j.forEach(function(S,y){!(W.isUndefined(S)||S===null)&&r.append(i===!0?Ua([b],y,o):i===null?b:b+"[]",d(S))}),!1}return ea(g)?!0:(r.append(Ua(P,b,o),d(g)),!1)}const f=[],p=Object.assign(Jd,{defaultVisitor:u,convertValue:d,isVisitable:ea});function m(g,b){if(!W.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(g),W.forEach(g,function(j,w){(!(W.isUndefined(j)||j===null)&&a.call(r,j,W.isString(w)?w.trim():w,b,p))===!0&&m(j,b?b.concat(w):[w])}),f.pop()}}if(!W.isObject(t))throw new TypeError("data must be an object");return m(t),r}function Wa(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function ba(t,r){this._pairs=[],t&&xs(t,this,r)}const mi=ba.prototype;mi.append=function(r,n){this._pairs.push([r,n])};mi.toString=function(r){const n=r?function(s){return r.call(this,s,Wa)}:Wa;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function eu(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fi(t,r,n){if(!r)return t;const s=n&&n.encode||eu;W.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(r,n):o=W.isURLSearchParams(r)?r.toString():new ba(r,n).toString(s),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Ha{constructor(){this.handlers=[]}use(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){W.forEach(this.handlers,function(s){s!==null&&r(s)})}}const pi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tu=typeof URLSearchParams<"u"?URLSearchParams:ba,ru=typeof FormData<"u"?FormData:null,nu=typeof Blob<"u"?Blob:null,su={isBrowser:!0,classes:{URLSearchParams:tu,FormData:ru,Blob:nu},protocols:["http","https","file","blob","url","data"]},ja=typeof window<"u"&&typeof document<"u",ta=typeof navigator=="object"&&navigator||void 0,au=ja&&(!ta||["ReactNative","NativeScript","NS"].indexOf(ta.product)<0),ou=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iu=ja&&window.location.href||"http://localhost",lu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ja,hasStandardBrowserEnv:au,hasStandardBrowserWebWorkerEnv:ou,navigator:ta,origin:iu},Symbol.toStringTag,{value:"Module"})),mt={...lu,...su};function cu(t,r){return xs(t,new mt.classes.URLSearchParams,{visitor:function(n,s,a,o){return mt.isNode&&W.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function du(t){return W.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function uu(t){const r={},n=Object.keys(t);let s;const a=n.length;let o;for(s=0;s<a;s++)o=n[s],r[o]=t[o];return r}function xi(t){function r(n,s,a,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=n.length;return i=!i&&W.isArray(a)?a.length:i,c?(W.hasOwnProp(a,i)?a[i]=[a[i],s]:a[i]=s,!l):((!a[i]||!W.isObject(a[i]))&&(a[i]=[]),r(n,s,a[i],o)&&W.isArray(a[i])&&(a[i]=uu(a[i])),!l)}if(W.isFormData(t)&&W.isFunction(t.entries)){const n={};return W.forEachEntry(t,(s,a)=>{r(du(s),a,n,0)}),n}return null}function hu(t,r,n){if(W.isString(t))try{return(r||JSON.parse)(t),W.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const wn={transitional:pi,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const s=n.getContentType()||"",a=s.indexOf("application/json")>-1,o=W.isObject(r);if(o&&W.isHTMLForm(r)&&(r=new FormData(r)),W.isFormData(r))return a?JSON.stringify(xi(r)):r;if(W.isArrayBuffer(r)||W.isBuffer(r)||W.isStream(r)||W.isFile(r)||W.isBlob(r)||W.isReadableStream(r))return r;if(W.isArrayBufferView(r))return r.buffer;if(W.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return cu(r,this.formSerializer).toString();if((l=W.isFileList(r))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return xs(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),hu(r)):r}],transformResponse:[function(r){const n=this.transitional||wn.transitional,s=n&&n.forcedJSONParsing,a=this.responseType==="json";if(W.isResponse(r)||W.isReadableStream(r))return r;if(r&&W.isString(r)&&(s&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(l){if(i)throw l.name==="SyntaxError"?Pe.from(l,Pe.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mt.classes.FormData,Blob:mt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],t=>{wn.headers[t]={}});const mu=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fu=t=>{const r={};let n,s,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),s=i.substring(a+1).trim(),!(!n||r[n]&&mu[n])&&(n==="set-cookie"?r[n]?r[n].push(s):r[n]=[s]:r[n]=r[n]?r[n]+", "+s:s)}),r},za=Symbol("internals");function en(t){return t&&String(t).trim().toLowerCase()}function Bn(t){return t===!1||t==null?t:W.isArray(t)?t.map(Bn):String(t)}function pu(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)r[s[1]]=s[2];return r}const xu=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ls(t,r,n,s,a){if(W.isFunction(s))return s.call(this,r,n);if(a&&(r=n),!!W.isString(r)){if(W.isString(s))return r.indexOf(s)!==-1;if(W.isRegExp(s))return s.test(r)}}function gu(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,s)=>n.toUpperCase()+s)}function yu(t,r){const n=W.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(a,o,i){return this[s].call(this,r,a,o,i)},configurable:!0})})}let Ct=class{constructor(r){r&&this.set(r)}set(r,n,s){const a=this;function o(l,c,d){const u=en(c);if(!u)throw new Error("header name must be a non-empty string");const f=W.findKey(a,u);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||c]=Bn(l))}const i=(l,c)=>W.forEach(l,(d,u)=>o(d,u,c));if(W.isPlainObject(r)||r instanceof this.constructor)i(r,n);else if(W.isString(r)&&(r=r.trim())&&!xu(r))i(fu(r),n);else if(W.isObject(r)&&W.isIterable(r)){let l={},c,d;for(const u of r){if(!W.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?W.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,n)}else r!=null&&o(n,r,s);return this}get(r,n){if(r=en(r),r){const s=W.findKey(this,r);if(s){const a=this[s];if(!n)return a;if(n===!0)return pu(a);if(W.isFunction(n))return n.call(this,a,s);if(W.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=en(r),r){const s=W.findKey(this,r);return!!(s&&this[s]!==void 0&&(!n||Ls(this,this[s],s,n)))}return!1}delete(r,n){const s=this;let a=!1;function o(i){if(i=en(i),i){const l=W.findKey(s,i);l&&(!n||Ls(s,s[l],l,n))&&(delete s[l],a=!0)}}return W.isArray(r)?r.forEach(o):o(r),a}clear(r){const n=Object.keys(this);let s=n.length,a=!1;for(;s--;){const o=n[s];(!r||Ls(this,this[o],o,r,!0))&&(delete this[o],a=!0)}return a}normalize(r){const n=this,s={};return W.forEach(this,(a,o)=>{const i=W.findKey(s,o);if(i){n[i]=Bn(a),delete n[o];return}const l=r?gu(o):String(o).trim();l!==o&&delete n[o],n[l]=Bn(a),s[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return W.forEach(this,(s,a)=>{s!=null&&s!==!1&&(n[a]=r&&W.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const s=new this(r);return n.forEach(a=>s.set(a)),s}static accessor(r){const s=(this[za]=this[za]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=en(i);s[l]||(yu(a,i),s[l]=!0)}return W.isArray(r)?r.forEach(o):o(r),this}};Ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Ct.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[n]=s}}});W.freezeMethods(Ct);function Vs(t,r){const n=this||wn,s=r||n,a=Ct.from(s.headers);let o=s.data;return W.forEach(t,function(l){o=l.call(n,o,a.normalize(),r?r.status:void 0)}),a.normalize(),o}function gi(t){return!!(t&&t.__CANCEL__)}function Gr(t,r,n){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,r,n),this.name="CanceledError"}W.inherits(Gr,Pe,{__CANCEL__:!0});function yi(t,r,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):r(new Pe("Request failed with status code "+n.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vu(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function bu(t,r){t=t||10;const n=new Array(t),s=new Array(t);let a=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),u=s[o];i||(i=d),n[a]=c,s[a]=d;let f=o,p=0;for(;f!==a;)p+=n[f++],f=f%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),d-i<r)return;const m=u&&d-u;return m?Math.round(p*1e3/m):void 0}}function ju(t,r){let n=0,s=1e3/r,a,o;const i=(d,u=Date.now())=>{n=u,a=null,o&&(clearTimeout(o),o=null),t(...d)};return[(...d)=>{const u=Date.now(),f=u-n;f>=s?i(d,u):(a=d,o||(o=setTimeout(()=>{o=null,i(a)},s-f)))},()=>a&&i(a)]}const Kn=(t,r,n=3)=>{let s=0;const a=bu(50,250);return ju(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-s,d=a(c),u=i<=l;s=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(f)},n)},Ya=(t,r)=>{const n=t!=null;return[s=>r[0]({lengthComputable:n,total:t,loaded:s}),r[1]]},qa=t=>(...r)=>W.asap(()=>t(...r)),wu=mt.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,mt.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(mt.origin),mt.navigator&&/(msie|trident)/i.test(mt.navigator.userAgent)):()=>!0,Cu=mt.hasStandardBrowserEnv?{write(t,r,n,s,a,o){const i=[t+"="+encodeURIComponent(r)];W.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),W.isString(s)&&i.push("path="+s),W.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Pu(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Tu(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function vi(t,r,n){let s=!Pu(r);return t&&(s||n==!1)?Tu(t,r):r}const Qa=t=>t instanceof Ct?{...t}:t;function Rr(t,r){r=r||{};const n={};function s(d,u,f,p){return W.isPlainObject(d)&&W.isPlainObject(u)?W.merge.call({caseless:p},d,u):W.isPlainObject(u)?W.merge({},u):W.isArray(u)?u.slice():u}function a(d,u,f,p){if(W.isUndefined(u)){if(!W.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function o(d,u){if(!W.isUndefined(u))return s(void 0,u)}function i(d,u){if(W.isUndefined(u)){if(!W.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,f){if(f in r)return s(d,u);if(f in t)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,f)=>a(Qa(d),Qa(u),f,!0)};return W.forEach(Object.keys({...t,...r}),function(u){const f=c[u]||a,p=f(t[u],r[u],u);W.isUndefined(p)&&f!==l||(n[u]=p)}),n}const bi=t=>{const r=Rr({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=r;r.headers=i=Ct.from(i),r.url=fi(vi(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(W.isFormData(n)){if(mt.hasStandardBrowserEnv||mt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(mt.hasStandardBrowserEnv&&(s&&W.isFunction(s)&&(s=s(r)),s||s!==!1&&wu(r.url))){const d=a&&o&&Cu.read(o);d&&i.set(a,d)}return r},Su=typeof XMLHttpRequest<"u",Du=Su&&function(t){return new Promise(function(n,s){const a=bi(t);let o=a.data;const i=Ct.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,f,p,m,g;function b(){m&&m(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let P=new XMLHttpRequest;P.open(a.method.toUpperCase(),a.url,!0),P.timeout=a.timeout;function j(){if(!P)return;const S=Ct.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:S,config:t,request:P};yi(function(N){n(N),b()},function(N){s(N),b()},A),P=null}"onloadend"in P?P.onloadend=j:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(j)},P.onabort=function(){P&&(s(new Pe("Request aborted",Pe.ECONNABORTED,t,P)),P=null)},P.onerror=function(){s(new Pe("Network Error",Pe.ERR_NETWORK,t,P)),P=null},P.ontimeout=function(){let y=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const A=a.transitional||pi;a.timeoutErrorMessage&&(y=a.timeoutErrorMessage),s(new Pe(y,A.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,P)),P=null},o===void 0&&i.setContentType(null),"setRequestHeader"in P&&W.forEach(i.toJSON(),function(y,A){P.setRequestHeader(A,y)}),W.isUndefined(a.withCredentials)||(P.withCredentials=!!a.withCredentials),l&&l!=="json"&&(P.responseType=a.responseType),d&&([p,g]=Kn(d,!0),P.addEventListener("progress",p)),c&&P.upload&&([f,m]=Kn(c),P.upload.addEventListener("progress",f),P.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(u=S=>{P&&(s(!S||S.type?new Gr(null,t,P):S),P.abort(),P=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const w=vu(a.url);if(w&&mt.protocols.indexOf(w)===-1){s(new Pe("Unsupported protocol "+w+":",Pe.ERR_BAD_REQUEST,t));return}P.send(o||null)})},ku=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let s=new AbortController,a;const o=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Pe?u:new Gr(u instanceof Error?u.message:u))}};let i=r&&setTimeout(()=>{i=null,o(new Pe(`timeout ${r} of ms exceeded`,Pe.ETIMEDOUT))},r);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>W.asap(l),c}},Au=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let s=0,a;for(;s<n;)a=s+r,yield t.slice(s,a),s=a},Nu=async function*(t,r){for await(const n of Mu(t))yield*Au(n,r)},Mu=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:s}=await r.read();if(n)break;yield s}}finally{await r.cancel()}},Ka=(t,r,n,s)=>{const a=Nu(t,r);let o=0,i,l=c=>{i||(i=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let f=u.byteLength;if(n){let p=o+=f;n(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},gs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ji=gs&&typeof ReadableStream=="function",Ru=gs&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),wi=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Eu=ji&&wi(()=>{let t=!1;const r=new Request(mt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),Ga=64*1024,ra=ji&&wi(()=>W.isReadableStream(new Response("").body)),Gn={stream:ra&&(t=>t.body)};gs&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Gn[r]&&(Gn[r]=W.isFunction(t[r])?n=>n[r]():(n,s)=>{throw new Pe(`Response type '${r}' is not supported`,Pe.ERR_NOT_SUPPORT,s)})})})(new Response);const Iu=async t=>{if(t==null)return 0;if(W.isBlob(t))return t.size;if(W.isSpecCompliantForm(t))return(await new Request(mt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(W.isArrayBufferView(t)||W.isArrayBuffer(t))return t.byteLength;if(W.isURLSearchParams(t)&&(t=t+""),W.isString(t))return(await Ru(t)).byteLength},Ou=async(t,r)=>{const n=W.toFiniteNumber(t.getContentLength());return n??Iu(r)},_u=gs&&(async t=>{let{url:r,method:n,data:s,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:f="same-origin",fetchOptions:p}=bi(t);d=d?(d+"").toLowerCase():"text";let m=ku([a,o&&o.toAbortSignal()],i),g;const b=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let P;try{if(c&&Eu&&n!=="get"&&n!=="head"&&(P=await Ou(u,s))!==0){let A=new Request(r,{method:"POST",body:s,duplex:"half"}),O;if(W.isFormData(s)&&(O=A.headers.get("content-type"))&&u.setContentType(O),A.body){const[N,I]=Ya(P,Kn(qa(c)));s=Ka(A.body,Ga,N,I)}}W.isString(f)||(f=f?"include":"omit");const j="credentials"in Request.prototype;g=new Request(r,{...p,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:j?f:void 0});let w=await fetch(g,p);const S=ra&&(d==="stream"||d==="response");if(ra&&(l||S&&b)){const A={};["status","statusText","headers"].forEach(E=>{A[E]=w[E]});const O=W.toFiniteNumber(w.headers.get("content-length")),[N,I]=l&&Ya(O,Kn(qa(l),!0))||[];w=new Response(Ka(w.body,Ga,N,()=>{I&&I(),b&&b()}),A)}d=d||"text";let y=await Gn[W.findKey(Gn,d)||"text"](w,t);return!S&&b&&b(),await new Promise((A,O)=>{yi(A,O,{data:y,headers:Ct.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:g})})}catch(j){throw b&&b(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,t,g),{cause:j.cause||j}):Pe.from(j,j&&j.code,t,g)}}),na={http:Xd,xhr:Du,fetch:_u};W.forEach(na,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const Xa=t=>`- ${t}`,Fu=t=>W.isFunction(t)||t===null||t===!1,Ci={getAdapter:t=>{t=W.isArray(t)?t:[t];const{length:r}=t;let n,s;const a={};for(let o=0;o<r;o++){n=t[o];let i;if(s=n,!Fu(n)&&(s=na[(i=String(n)).toLowerCase()],s===void 0))throw new Pe(`Unknown adapter '${i}'`);if(s)break;a[i||"#"+o]=s}if(!s){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(Xa).join(`
`):" "+Xa(o[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:na};function $s(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gr(null,t)}function Za(t){return $s(t),t.headers=Ct.from(t.headers),t.data=Vs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ci.getAdapter(t.adapter||wn.adapter)(t).then(function(s){return $s(t),s.data=Vs.call(t,t.transformResponse,s),s.headers=Ct.from(s.headers),s},function(s){return gi(s)||($s(t),s&&s.response&&(s.response.data=Vs.call(t,t.transformResponse,s.response),s.response.headers=Ct.from(s.response.headers))),Promise.reject(s)})}const Pi="1.11.0",ys={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{ys[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const Ja={};ys.transitional=function(r,n,s){function a(o,i){return"[Axios v"+Pi+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(r===!1)throw new Pe(a(i," has been removed"+(n?" in "+n:"")),Pe.ERR_DEPRECATED);return n&&!Ja[i]&&(Ja[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(o,i,l):!0}};ys.spelling=function(r){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Lu(t,r,n){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let a=s.length;for(;a-- >0;){const o=s[a],i=r[o];if(i){const l=t[o],c=l===void 0||i(l,o,t);if(c!==!0)throw new Pe("option "+o+" must be "+c,Pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pe("Unknown option "+o,Pe.ERR_BAD_OPTION)}}const Un={assertOptions:Lu,validators:ys},Ft=Un.validators;let Dr=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Ha,response:new Ha}}async request(r,n){try{return await this._request(r,n)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=Rr(this.defaults,n);const{transitional:s,paramsSerializer:a,headers:o}=n;s!==void 0&&Un.assertOptions(s,{silentJSONParsing:Ft.transitional(Ft.boolean),forcedJSONParsing:Ft.transitional(Ft.boolean),clarifyTimeoutError:Ft.transitional(Ft.boolean)},!1),a!=null&&(W.isFunction(a)?n.paramsSerializer={serialize:a}:Un.assertOptions(a,{encode:Ft.function,serialize:Ft.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Un.assertOptions(n,{baseUrl:Ft.spelling("baseURL"),withXsrfToken:Ft.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&W.merge(o.common,o[n.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),n.headers=Ct.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let u,f=0,p;if(!c){const g=[Za.bind(this),void 0];for(g.unshift(...l),g.push(...d),p=g.length,u=Promise.resolve(n);f<p;)u=u.then(g[f++],g[f++]);return u}p=l.length;let m=n;for(f=0;f<p;){const g=l[f++],b=l[f++];try{m=g(m)}catch(P){b.call(this,P);break}}try{u=Za.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(r){r=Rr(this.defaults,r);const n=vi(r.baseURL,r.url,r.allowAbsoluteUrls);return fi(n,r.params,r.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(r){Dr.prototype[r]=function(n,s){return this.request(Rr(s||{},{method:r,url:n,data:(s||{}).data}))}});W.forEach(["post","put","patch"],function(r){function n(s){return function(o,i,l){return this.request(Rr(l||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Dr.prototype[r]=n(),Dr.prototype[r+"Form"]=n(!0)});let Vu=class Ti{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(a);return i.cancel=function(){s.unsubscribe(o)},i},r(function(o,i,l){s.reason||(s.reason=new Gr(o,i,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=s=>{r.abort(s)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new Ti(function(a){r=a}),cancel:r}}};function $u(t){return function(n){return t.apply(null,n)}}function Bu(t){return W.isObject(t)&&t.isAxiosError===!0}const sa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sa).forEach(([t,r])=>{sa[r]=t});function Si(t){const r=new Dr(t),n=ri(Dr.prototype.request,r);return W.extend(n,Dr.prototype,r,{allOwnKeys:!0}),W.extend(n,r,null,{allOwnKeys:!0}),n.create=function(a){return Si(Rr(t,a))},n}const ot=Si(wn);ot.Axios=Dr;ot.CanceledError=Gr;ot.CancelToken=Vu;ot.isCancel=gi;ot.VERSION=Pi;ot.toFormData=xs;ot.AxiosError=Pe;ot.Cancel=ot.CanceledError;ot.all=function(r){return Promise.all(r)};ot.spread=$u;ot.isAxiosError=Bu;ot.mergeConfig=Rr;ot.AxiosHeaders=Ct;ot.formToJSON=t=>xi(W.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=Ci.getAdapter;ot.HttpStatusCode=sa;ot.default=ot;const{Axios:ib,AxiosError:lb,CanceledError:cb,isCancel:db,CancelToken:ub,VERSION:hb,all:mb,Cancel:fb,isAxiosError:pb,spread:xb,toFormData:gb,AxiosHeaders:yb,HttpStatusCode:vb,formToJSON:bb,getAdapter:jb,mergeConfig:wb}=ot;class Uu{constructor(){Oa(this,"api");this.api=ot.create({baseURL:"http://localhost:3000",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(r=>{const n=localStorage.getItem("auth_token");return n&&(r.headers.Authorization=`Bearer ${n}`),r},r=>Promise.reject(r)),this.api.interceptors.response.use(r=>r,r=>{var n;return((n=r.response)==null?void 0:n.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(r)})}async getHealth(){return(await this.api.get("/health")).data}async getAssets(){return(await this.api.get("/api/v1/assets")).data}async createAsset(r){return(await this.api.post("/api/v1/assets",r)).data}async updateAsset(r,n){return(await this.api.put(`/api/v1/assets/${r}`,n)).data}async deleteAsset(r){await this.api.delete(`/api/v1/assets/${r}`)}async getPortfolios(r){return(await this.api.get(`/api/v1/portfolios?accountId=${r}`)).data}async getPortfolio(r){return(await this.api.get(`/api/v1/portfolios/${r}`)).data}async createPortfolio(r){return(await this.api.post("/api/v1/portfolios",r)).data}async updatePortfolio(r,n){return(await this.api.put(`/api/v1/portfolios/${r}`,n)).data}async deletePortfolio(r){await this.api.delete(`/api/v1/portfolios/${r}`)}async getPortfolioNav(r){return(await this.api.get(`/api/v1/portfolios/${r}/nav`)).data}async getPortfolioPerformance(r){return(await this.api.get(`/api/v1/portfolios/${r}/performance`)).data}async getPortfolioAllocation(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation`)).data}async getPortfolioPerformanceHistory(r,n){const s=n?{period:n}:{};return(await this.api.get(`/api/v1/portfolios/${r}/analytics/performance-history`,{params:s})).data}async getPortfolioRiskReturn(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/risk-return`)).data}async getPortfolioAssetPerformance(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/asset-performance`)).data}async getPortfolioRiskMetrics(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/risk-metrics`)).data}async getPortfolioDiversificationHeatmap(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/diversification-heatmap`)).data}async getPortfolioAllocationTimeline(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation-timeline`)).data}async getPortfolioCashFlowAnalysis(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/cash-flow-analysis`)).data}async getPortfolioBenchmarkComparison(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/benchmark-comparison`)).data}async getPortfolioAssetDetailSummary(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/asset-detail-summary`)).data}async getPortfolioPositions(r){return(await this.api.get(`/api/v1/portfolios/${r}/positions`)).data}async getPortfolioAnalyticsPerformance(r,n){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/performance`,{params:{period:n}})).data}async getPortfolioAnalyticsAllocation(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation`)).data}async getPortfolioAnalyticsHistory(r,n){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/history`,{params:{period:n}})).data}async getPortfolioAnalyticsReport(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/report`)).data}async getPortfolioCashFlows(r){return(await this.api.get(`/api/v1/portfolios/${r}/cash-flows`)).data}async createCashFlow(r,n){return(await this.api.post(`/api/v1/portfolios/${r}/cash-flows`,n)).data}async createTrade(r){return(await this.api.post("/api/v1/trades",r)).data}async getTrades(r,n){const s=new URLSearchParams({portfolioId:r});return n&&Object.entries(n).forEach(([o,i])=>{i&&s.append(o,i)}),(await this.api.get(`/api/v1/trades?${s}`)).data}async getTrade(r){return(await this.api.get(`/api/v1/trades/${r}`)).data}async updateTrade(r,n){return(await this.api.put(`/api/v1/trades/${r}`,n)).data}async deleteTrade(r){await this.api.delete(`/api/v1/trades/${r}`)}async getTradeDetails(r){return(await this.api.get(`/api/v1/trades/${r}/details`)).data}async getTradeAnalysis(r,n){const s=new URLSearchParams({portfolioId:r});n&&Object.entries(n).forEach(([i,l])=>{l&&s.append(i,l)});const a=`/api/v1/trades/analysis/portfolio?${s}`;return(await this.api.get(a)).data}async getTradingPerformance(r,n){const s=new URLSearchParams({portfolioId:r});return n&&Object.entries(n).forEach(([o,i])=>{i&&s.append(o,i)}),(await this.api.get(`/api/v1/trades/performance/portfolio?${s}`)).data}async getCurrentPositions(r,n){const s=new URLSearchParams;return n&&s.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/portfolios/${r}/positions?${s}`)).data}async getPositionByAsset(r,n,s){const a=new URLSearchParams;return s&&a.append("marketPrice",s.toString()),(await this.api.get(`/api/v1/portfolios/${r}/positions/${n}?${a}`)).data}async setRiskTargets(r,n){return(await this.api.post(`/api/v1/assets/${r}/targets`,n)).data}async getRiskTargets(r){return(await this.api.get(`/api/v1/assets/${r}/targets`)).data}async updateRiskTargets(r,n){return(await this.api.put(`/api/v1/assets/${r}/targets`,n)).data}async removeRiskTargets(r){await this.api.delete(`/api/v1/assets/${r}/targets`)}async getPortfolioRiskTargets(r){return(await this.api.get(`/api/v1/assets/targets/portfolio/${r}`)).data}async monitorRiskTargets(r,n){const s=new URLSearchParams;return r&&s.append("portfolioId",r),n&&s.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/assets/targets/monitor?${s}`)).data}async testConnection(){try{return await this.getHealth(),!0}catch(r){return console.error("API connection test failed:",r),!1}}}const Ne=new Uu,vs=t=>{const r=cr(),{data:n,isLoading:s,error:a,refetch:o}=jt(["portfolios",t],()=>t?Ne.getPortfolios(t):Promise.resolve([]),{enabled:!!t,staleTime:5*60*1e3,cacheTime:10*60*1e3}),i=zt(d=>Ne.createPortfolio(d),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}}),l=zt(({id:d,data:u})=>Ne.updatePortfolio(d,u),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}}),c=zt(d=>Ne.deletePortfolio(d),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}});return{portfolios:n||[],isLoading:s,error:a,refetch:o,createPortfolio:i.mutate,updatePortfolio:l.mutate,deletePortfolio:c.mutate,isCreating:i.isLoading,isUpdating:l.isLoading,isDeleting:c.isLoading}},Di=t=>{const r=cr(),{data:n,isLoading:s,error:a,refetch:o}=jt(["portfolio",t],()=>Ne.getPortfolio(t),{enabled:!!t,staleTime:2*60*1e3,cacheTime:5*60*1e3}),i=zt(l=>Ne.updatePortfolio(t,l),{onSuccess:()=>{r.invalidateQueries(["portfolio",t]),r.invalidateQueries("portfolios")}});return{portfolio:n,isLoading:s,error:a,refetch:o,updatePortfolio:i.mutate,isUpdating:i.isLoading}},Wu=t=>{const{data:r,isLoading:n,error:s}=jt(["portfolio-nav",t],()=>Ne.getPortfolioNav(t),{enabled:!!t,staleTime:6e4,refetchInterval:3e5}),{data:a,isLoading:o,error:i}=jt(["portfolio-performance",t],()=>Ne.getPortfolioPerformance(t),{enabled:!!t,staleTime:5*60*1e3}),{data:l,isLoading:c,error:d}=jt(["portfolio-allocation",t],()=>Ne.getPortfolioAllocation(t),{enabled:!!t,staleTime:5*60*1e3}),{data:u,isLoading:f,error:p}=jt(["portfolio-positions",t],()=>Ne.getPortfolioPositions(t),{enabled:!!t,staleTime:2*60*1e3});return Ht.useEffect(()=>{console.log("usePortfolioAnalytics Debug:",{portfolioId:t,navData:r,performanceData:a,allocationData:l,positionsData:u,isNavLoading:n,isPerformanceLoading:o,isAllocationLoading:c,isPositionsLoading:f,navError:s,performanceError:i,allocationError:d,positionsError:p})},[t,r,a,l,u,n,o,c,f,s,i,d,p]),{navData:r,performanceData:a,allocationData:l,positionsData:u,isLoading:n||o||c||f,error:s||i||d||p}},eo="86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",kn={id:eo,accountId:eo,name:"John Doe",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},to={"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5":{id:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",accountId:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",name:"John Doe (VND)",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"usd-account-123":{id:"usd-account-123",accountId:"usd-account-123",name:"Jane Smith (USD)",email:"jane.smith@example.com",baseCurrency:"USD",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"eur-account-456":{id:"eur-account-456",accountId:"eur-account-456",name:"Pierre Dubois (EUR)",email:"pierre.dubois@example.com",baseCurrency:"EUR",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"}},At=()=>{const[t,r]=x.useState(kn);return x.useEffect(()=>{const a=localStorage.getItem("currentAccountId"),o=a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a);if(o&&a!==t.accountId){const i=to[a]||kn;r(i)}else a&&!o&&(console.warn("Invalid account ID in localStorage, using default:",a),localStorage.removeItem("currentAccountId"),r(kn))},[t.accountId]),{currentAccount:t,switchAccount:a=>{localStorage.setItem("currentAccountId",a);const o=to[a]||kn;r(o)},getCurrentAccountId:()=>t.accountId,accountId:t.accountId,baseCurrency:t.baseCurrency}};function Oe(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function se(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function ae(t){se(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||ss(t)==="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Wn(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Hn(t,r){se(2,arguments);var n=ae(t),s=Oe(r);if(isNaN(s))return new Date(NaN);if(!s)return n;var a=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+s+1,0);var i=o.getDate();return a>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}function bs(t,r){se(2,arguments);var n=ae(t).getTime(),s=Oe(r);return new Date(n+s)}var Hu=36e5;function zu(t,r){se(2,arguments);var n=Oe(r);return bs(t,n*Hu)}var Yu={};function Yt(){return Yu}function kr(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=Yt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ae(t),m=p.getDay(),g=(m<f?7:0)+m-f;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function Xn(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}function qr(t){se(1,arguments);var r=ae(t);return r.setHours(0,0,0,0),r}var qu=864e5;function Qu(t,r){se(2,arguments);var n=qr(t),s=qr(r),a=n.getTime()-Xn(n),o=s.getTime()-Xn(s);return Math.round((a-o)/qu)}var Ku=6e4;function Gu(t,r){se(2,arguments);var n=Oe(r);return bs(t,n*Ku)}function Xu(t,r){se(2,arguments);var n=Oe(r);return bs(t,n*1e3)}function Zu(t,r){se(2,arguments);var n=Oe(r),s=n*7;return Wn(t,s)}function ro(t,r){se(2,arguments);var n=Oe(r);return Hn(t,n*12)}function un(t,r){se(2,arguments);var n=ae(t),s=ae(r),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}var js=6e4,ws=36e5,Ju=1e3;function eh(t,r){se(2,arguments);var n=qr(t),s=qr(r);return n.getTime()===s.getTime()}function th(t){return se(1,arguments),t instanceof Date||ss(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ki(t){if(se(1,arguments),!th(t)&&typeof t!="number")return!1;var r=ae(t);return!isNaN(Number(r))}function rh(t,r){se(2,arguments);var n=ae(t),s=ae(r),a=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return a*12+o}function nh(t,r){se(2,arguments);var n=ae(t),s=ae(r);return n.getFullYear()-s.getFullYear()}function no(t,r){var n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function Ai(t,r){se(2,arguments);var n=ae(t),s=ae(r),a=no(n,s),o=Math.abs(Qu(n,s));n.setDate(n.getDate()-a*o);var i=+(no(n,s)===-a),l=a*(o-i);return l===0?0:l}function Cs(t,r){return se(2,arguments),ae(t).getTime()-ae(r).getTime()}var so={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(r){return r<0?Math.ceil(r):Math.floor(r)}},sh="trunc";function Cn(t){return t?so[t]:so[sh]}function ah(t,r,n){se(2,arguments);var s=Cs(t,r)/ws;return Cn(void 0)(s)}function oh(t,r,n){se(2,arguments);var s=Cs(t,r)/js;return Cn(void 0)(s)}function aa(t){se(1,arguments);var r=ae(t);return r.setHours(23,59,59,999),r}function oa(t){se(1,arguments);var r=ae(t),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function ih(t){se(1,arguments);var r=ae(t);return aa(r).getTime()===oa(r).getTime()}function Ni(t,r){se(2,arguments);var n=ae(t),s=ae(r),a=un(n,s),o=Math.abs(rh(n,s)),i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*o);var l=un(n,s)===-a;ih(ae(t))&&o===1&&un(t,s)===1&&(l=!1),i=a*(o-Number(l))}return i===0?0:i}function lh(t,r,n){se(2,arguments);var s=Ni(t,r)/3;return Cn(void 0)(s)}function ch(t,r,n){se(2,arguments);var s=Cs(t,r)/1e3;return Cn(void 0)(s)}function dh(t,r,n){se(2,arguments);var s=Ai(t,r)/7;return Cn(void 0)(s)}function uh(t,r){se(2,arguments);var n=ae(t),s=ae(r),a=un(n,s),o=Math.abs(nh(n,s));n.setFullYear(1584),s.setFullYear(1584);var i=un(n,s)===-a,l=a*(o-Number(i));return l===0?0:l}function hh(t,r){var n;se(1,arguments);var s=t||{},a=ae(s.start),o=ae(s.end),i=o.getTime();if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var l=[],c=a;c.setHours(0,0,0,0);var d=Number((n=void 0)!==null&&n!==void 0?n:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=i;)l.push(ae(c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return l}function ao(t){se(1,arguments);var r=ae(t);return r.setDate(1),r.setHours(0,0,0,0),r}function Bs(t){se(1,arguments);var r=ae(t),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function An(t){se(1,arguments);var r=ae(t),n=new Date(0);return n.setFullYear(r.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Us(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=Yt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ae(t),m=p.getDay(),g=(m<f?-7:0)+6-(m-f);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function Mi(t,r){se(2,arguments);var n=Oe(r);return bs(t,-n)}var mh=864e5;function fh(t){se(1,arguments);var r=ae(t),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var s=r.getTime(),a=n-s;return Math.floor(a/mh)+1}function Qr(t){se(1,arguments);var r=1,n=ae(t),s=n.getUTCDay(),a=(s<r?7:0)+s-r;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Ri(t){se(1,arguments);var r=ae(t),n=r.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var a=Qr(s),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=Qr(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function ph(t){se(1,arguments);var r=Ri(t),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var s=Qr(n);return s}var xh=6048e5;function Ei(t){se(1,arguments);var r=ae(t),n=Qr(r).getTime()-ph(r).getTime();return Math.round(n/xh)+1}function Er(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=Yt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=ae(t),m=p.getUTCDay(),g=(m<f?7:0)+m-f;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function wa(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=ae(t),f=u.getUTCFullYear(),p=Yt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&s!==void 0?s:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,m),g.setUTCHours(0,0,0,0);var b=Er(g,r),P=new Date(0);P.setUTCFullYear(f,0,m),P.setUTCHours(0,0,0,0);var j=Er(P,r);return u.getTime()>=b.getTime()?f+1:u.getTime()>=j.getTime()?f:f-1}function gh(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=Yt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=wa(t,r),m=new Date(0);m.setUTCFullYear(p,0,f),m.setUTCHours(0,0,0,0);var g=Er(m,r);return g}var yh=6048e5;function Ii(t,r){se(1,arguments);var n=ae(t),s=Er(n,r).getTime()-gh(n,r).getTime();return Math.round(s/yh)+1}function Me(t,r){for(var n=t<0?"-":"",s=Math.abs(t).toString();s.length<r;)s="0"+s;return n+s}var hr={y:function(r,n){var s=r.getUTCFullYear(),a=s>0?s:1-s;return Me(n==="yy"?a%100:a,n.length)},M:function(r,n){var s=r.getUTCMonth();return n==="M"?String(s+1):Me(s+1,2)},d:function(r,n){return Me(r.getUTCDate(),n.length)},a:function(r,n){var s=r.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(r,n){return Me(r.getUTCHours()%12||12,n.length)},H:function(r,n){return Me(r.getUTCHours(),n.length)},m:function(r,n){return Me(r.getUTCMinutes(),n.length)},s:function(r,n){return Me(r.getUTCSeconds(),n.length)},S:function(r,n){var s=n.length,a=r.getUTCMilliseconds(),o=Math.floor(a*Math.pow(10,s-3));return Me(o,n.length)}},Fr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vh={G:function(r,n,s){var a=r.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(r,n,s){if(n==="yo"){var a=r.getUTCFullYear(),o=a>0?a:1-a;return s.ordinalNumber(o,{unit:"year"})}return hr.y(r,n)},Y:function(r,n,s,a){var o=wa(r,a),i=o>0?o:1-o;if(n==="YY"){var l=i%100;return Me(l,2)}return n==="Yo"?s.ordinalNumber(i,{unit:"year"}):Me(i,n.length)},R:function(r,n){var s=Ri(r);return Me(s,n.length)},u:function(r,n){var s=r.getUTCFullYear();return Me(s,n.length)},Q:function(r,n,s){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return Me(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,n,s){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return Me(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,n,s){var a=r.getUTCMonth();switch(n){case"M":case"MM":return hr.M(r,n);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(r,n,s){var a=r.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return Me(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(r,n,s,a){var o=Ii(r,a);return n==="wo"?s.ordinalNumber(o,{unit:"week"}):Me(o,n.length)},I:function(r,n,s){var a=Ei(r);return n==="Io"?s.ordinalNumber(a,{unit:"week"}):Me(a,n.length)},d:function(r,n,s){return n==="do"?s.ordinalNumber(r.getUTCDate(),{unit:"date"}):hr.d(r,n)},D:function(r,n,s){var a=fh(r);return n==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):Me(a,n.length)},E:function(r,n,s){var a=r.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(r,n,s,a){var o=r.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Me(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(o,{width:"short",context:"formatting"});case"eeee":default:return s.day(o,{width:"wide",context:"formatting"})}},c:function(r,n,s,a){var o=r.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Me(i,n.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(o,{width:"narrow",context:"standalone"});case"cccccc":return s.day(o,{width:"short",context:"standalone"});case"cccc":default:return s.day(o,{width:"wide",context:"standalone"})}},i:function(r,n,s){var a=r.getUTCDay(),o=a===0?7:a;switch(n){case"i":return String(o);case"ii":return Me(o,n.length);case"io":return s.ordinalNumber(o,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(r,n,s){var a=r.getUTCHours(),o=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,n,s){var a=r.getUTCHours(),o;switch(a===12?o=Fr.noon:a===0?o=Fr.midnight:o=a/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,n,s){var a=r.getUTCHours(),o;switch(a>=17?o=Fr.evening:a>=12?o=Fr.afternoon:a>=4?o=Fr.morning:o=Fr.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,n,s){if(n==="ho"){var a=r.getUTCHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return hr.h(r,n)},H:function(r,n,s){return n==="Ho"?s.ordinalNumber(r.getUTCHours(),{unit:"hour"}):hr.H(r,n)},K:function(r,n,s){var a=r.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(a,{unit:"hour"}):Me(a,n.length)},k:function(r,n,s){var a=r.getUTCHours();return a===0&&(a=24),n==="ko"?s.ordinalNumber(a,{unit:"hour"}):Me(a,n.length)},m:function(r,n,s){return n==="mo"?s.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):hr.m(r,n)},s:function(r,n,s){return n==="so"?s.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):hr.s(r,n)},S:function(r,n){return hr.S(r,n)},X:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return io(i);case"XXXX":case"XX":return Pr(i);case"XXXXX":case"XXX":default:return Pr(i,":")}},x:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"x":return io(i);case"xxxx":case"xx":return Pr(i);case"xxxxx":case"xxx":default:return Pr(i,":")}},O:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+oo(i,":");case"OOOO":default:return"GMT"+Pr(i,":")}},z:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+oo(i,":");case"zzzz":default:return"GMT"+Pr(i,":")}},t:function(r,n,s,a){var o=a._originalDate||r,i=Math.floor(o.getTime()/1e3);return Me(i,n.length)},T:function(r,n,s,a){var o=a._originalDate||r,i=o.getTime();return Me(i,n.length)}};function oo(t,r){var n=t>0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),o=s%60;if(o===0)return n+String(a);var i=r;return n+String(a)+i+Me(o,2)}function io(t,r){if(t%60===0){var n=t>0?"-":"+";return n+Me(Math.abs(t)/60,2)}return Pr(t,r)}function Pr(t,r){var n=r||"",s=t>0?"-":"+",a=Math.abs(t),o=Me(Math.floor(a/60),2),i=Me(a%60,2);return s+o+n+i}var lo=function(r,n){switch(r){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Oi=function(r,n){switch(r){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},bh=function(r,n){var s=r.match(/(P+)(p+)?/)||[],a=s[1],o=s[2];if(!o)return lo(r,n);var i;switch(a){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",lo(a,n)).replace("{{time}}",Oi(o,n))},ia={p:Oi,P:bh},jh=["D","DD"],wh=["YY","YYYY"];function _i(t){return jh.indexOf(t)!==-1}function Fi(t){return wh.indexOf(t)!==-1}function Zn(t,r,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ch={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ph=function(r,n,s){var a,o=Ch[r];return typeof o=="string"?a=o:n===1?a=o.one:a=o.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function Ws(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):t.defaultWidth,s=t.formats[n]||t.formats[t.defaultWidth];return s}}var Th={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dh={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kh={date:Ws({formats:Th,defaultWidth:"full"}),time:Ws({formats:Sh,defaultWidth:"full"}),dateTime:Ws({formats:Dh,defaultWidth:"full"})},Ah={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Nh=function(r,n,s,a){return Ah[r]};function tn(t){return function(r,n){var s=n!=null&&n.context?String(n.context):"standalone",a;if(s==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,i=n!=null&&n.width?String(n.width):o;a=t.formattingValues[i]||t.formattingValues[o]}else{var l=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(r):r;return a[d]}}var Mh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rh={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Eh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ih={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Oh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_h={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fh=function(r,n){var s=Number(r),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Lh={ordinalNumber:Fh,era:tn({values:Mh,defaultWidth:"wide"}),quarter:tn({values:Rh,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:tn({values:Eh,defaultWidth:"wide"}),day:tn({values:Ih,defaultWidth:"wide"}),dayPeriod:tn({values:Oh,defaultWidth:"wide",formattingValues:_h,defaultFormattingWidth:"wide"})};function rn(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=r.match(a);if(!o)return null;var i=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?$h(l,function(f){return f.test(i)}):Vh(l,function(f){return f.test(i)}),d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;var u=r.slice(i.length);return{value:d,rest:u}}}function Vh(t,r){for(var n in t)if(t.hasOwnProperty(n)&&r(t[n]))return n}function $h(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n}function Bh(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.match(t.matchPattern);if(!s)return null;var a=s[0],o=r.match(t.parsePattern);if(!o)return null;var i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;var l=r.slice(a.length);return{value:i,rest:l}}}var Uh=/^(\d+)(th|st|nd|rd)?/i,Wh=/\d+/i,Hh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zh={any:[/^b/i,/^(a|c)/i]},Yh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qh={any:[/1/i,/2/i,/3/i,/4/i]},Qh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},em={ordinalNumber:Bh({matchPattern:Uh,parsePattern:Wh,valueCallback:function(r){return parseInt(r,10)}}),era:rn({matchPatterns:Hh,defaultMatchWidth:"wide",parsePatterns:zh,defaultParseWidth:"any"}),quarter:rn({matchPatterns:Yh,defaultMatchWidth:"wide",parsePatterns:qh,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:rn({matchPatterns:Qh,defaultMatchWidth:"wide",parsePatterns:Kh,defaultParseWidth:"any"}),day:rn({matchPatterns:Gh,defaultMatchWidth:"wide",parsePatterns:Xh,defaultParseWidth:"any"}),dayPeriod:rn({matchPatterns:Zh,defaultMatchWidth:"any",parsePatterns:Jh,defaultParseWidth:"any"})},Ca={code:"en-US",formatDistance:Ph,formatLong:kh,formatRelative:Nh,localize:Lh,match:em,options:{weekStartsOn:0,firstWeekContainsDate:1}},tm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nm=/^'([^]*?)'?$/,sm=/''/g,am=/[a-zA-Z]/;function fr(t,r,n){var s,a,o,i,l,c,d,u,f,p,m,g,b,P,j,w,S,y;se(2,arguments);var A=String(r),O=Yt(),N=(s=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:O.locale)!==null&&s!==void 0?s:Ca,I=Oe((o=(i=(l=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:O.firstWeekContainsDate)!==null&&i!==void 0?i:(f=O.locale)===null||f===void 0||(p=f.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Oe((m=(g=(b=(P=n==null?void 0:n.weekStartsOn)!==null&&P!==void 0?P:n==null||(j=n.locale)===null||j===void 0||(w=j.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&b!==void 0?b:O.weekStartsOn)!==null&&g!==void 0?g:(S=O.locale)===null||S===void 0||(y=S.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&m!==void 0?m:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var k=ae(t);if(!ki(k))throw new RangeError("Invalid time value");var C=Xn(k),T=Mi(k,C),F={firstWeekContainsDate:I,weekStartsOn:E,locale:N,_originalDate:k},_=A.match(rm).map(function(R){var q=R[0];if(q==="p"||q==="P"){var B=ia[q];return B(R,N.formatLong)}return R}).join("").match(tm).map(function(R){if(R==="''")return"'";var q=R[0];if(q==="'")return om(R);var B=vh[q];if(B)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Fi(R)&&Zn(R,r,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&_i(R)&&Zn(R,r,String(t)),B(T,R,N.localize,F);if(q.match(am))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return R}).join("");return _}function om(t){var r=t.match(nm);return r?r[1].replace(sm,"'"):t}function im(t,r){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t}function lm(t,r){var n,s;se(1,arguments);var a=ae(t);if(isNaN(a.getTime()))throw new RangeError("Invalid time value");var o=String((n=r==null?void 0:r.format)!==null&&n!==void 0?n:"extended"),i=String((s=r==null?void 0:r.representation)!==null&&s!==void 0?s:"complete");if(o!=="extended"&&o!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(i!=="date"&&i!=="time"&&i!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var l="",c="",d=o==="extended"?"-":"",u=o==="extended"?":":"";if(i!=="time"){var f=Me(a.getDate(),2),p=Me(a.getMonth()+1,2),m=Me(a.getFullYear(),4);l="".concat(m).concat(d).concat(p).concat(d).concat(f)}if(i!=="date"){var g=a.getTimezoneOffset();if(g!==0){var b=Math.abs(g),P=Me(Math.floor(b/60),2),j=Me(b%60,2),w=g<0?"+":"-";c="".concat(w).concat(P,":").concat(j)}else c="Z";var S=Me(a.getHours(),2),y=Me(a.getMinutes(),2),A=Me(a.getSeconds(),2),O=l===""?"":"T",N=[S,y,A].join(u);l="".concat(l).concat(O).concat(N).concat(c)}return l}function cm(t){se(1,arguments);var r=ae(t),n=r.getDate();return n}function Li(t){se(1,arguments);var r=ae(t),n=r.getFullYear(),s=r.getMonth(),a=new Date(0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function dm(t){se(1,arguments);var r=ae(t),n=r.getHours();return n}function um(t){se(1,arguments);var r=ae(t),n=r.getMilliseconds();return n}function hm(t){se(1,arguments);var r=ae(t),n=r.getMinutes();return n}function mm(t){se(1,arguments);var r=ae(t),n=r.getMonth();return n}function fm(t){se(1,arguments);var r=ae(t),n=r.getSeconds();return n}function pm(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=ae(t),f=u.getFullYear(),p=Yt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&s!==void 0?s:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(f+1,0,m),g.setHours(0,0,0,0);var b=kr(g,r),P=new Date(0);P.setFullYear(f,0,m),P.setHours(0,0,0,0);var j=kr(P,r);return u.getTime()>=b.getTime()?f+1:u.getTime()>=j.getTime()?f:f-1}function xm(t,r){var n,s,a,o,i,l,c,d;se(1,arguments);var u=Yt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=pm(t,r),m=new Date(0);m.setFullYear(p,0,f),m.setHours(0,0,0,0);var g=kr(m,r);return g}var gm=6048e5;function ym(t,r){se(1,arguments);var n=ae(t),s=kr(n,r).getTime()-xm(n,r).getTime();return Math.round(s/gm)+1}function vm(t){return se(1,arguments),ae(t).getFullYear()}function Hs(t,r){se(2,arguments);var n=ae(t),s=ae(r);return n.getTime()>s.getTime()}function nn(t,r){se(2,arguments);var n=ae(t),s=ae(r);return n.getTime()<s.getTime()}function bm(t,r){se(2,arguments);var n=ae(t),s=ae(r);return n.getTime()===s.getTime()}function co(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,s=Array(r);n<r;n++)s[n]=t[n];return s}function jm(t,r){if(t){if(typeof t=="string")return co(t,r);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?co(t,r):void 0}}function uo(t,r){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=jm(t))||r){n&&(t=n);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return i=d.done,d},e:function(d){l=!0,o=d},f:function(){try{i||n.return==null||n.return()}finally{if(l)throw o}}}}function _e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Fl(t,r)}function Jn(t){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jn(t)}function Vi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vi=function(){return!!t})()}function wm(t,r){if(r&&(ss(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return de(t)}function Fe(t){var r=Vi();return function(){var n,s=Jn(t);if(r){var a=Jn(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return wm(this,n)}}function Re(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Cm(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Ro(s.key),s)}}function Ee(t,r,n){return r&&Cm(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ie(t,r,n){return(r=Ro(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Pm=10,$i=function(){function t(){Re(this,t),ie(this,"priority",void 0),ie(this,"subPriority",0)}return Ee(t,[{key:"validate",value:function(n,s){return!0}}]),t}(),Tm=function(t){_e(n,t);var r=Fe(n);function n(s,a,o,i,l){var c;return Re(this,n),c=r.call(this),c.value=s,c.validateValue=a,c.setValue=o,c.priority=i,l&&(c.subPriority=l),c}return Ee(n,[{key:"validate",value:function(a,o){return this.validateValue(a,this.value,o)}},{key:"set",value:function(a,o,i){return this.setValue(a,o,this.value,i)}}]),n}($i),Sm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",Pm),ie(de(s),"subPriority",-1),s}return Ee(n,[{key:"set",value:function(a,o){if(o.timestampIsSet)return a;var i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}}]),n}($i),$e=function(){function t(){Re(this,t),ie(this,"incompatibleTokens",void 0),ie(this,"priority",void 0),ie(this,"subPriority",void 0)}return Ee(t,[{key:"run",value:function(n,s,a,o){var i=this.parse(n,s,a,o);return i?{setter:new Tm(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(n,s,a){return!0}}]),t}(),Dm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",140),ie(de(s),"incompatibleTokens",["R","u","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"G":case"GG":case"GGG":return i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"});case"GGGGG":return i.era(a,{width:"narrow"});case"GGGG":default:return i.era(a,{width:"wide"})||i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"})}}},{key:"set",value:function(a,o,i){return o.era=i,a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),st={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Vt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function at(t,r){return t&&{value:r(t.value),rest:t.rest}}function Xe(t,r){var n=r.match(t);return n?{value:parseInt(n[0],10),rest:r.slice(n[0].length)}:null}function $t(t,r){var n=r.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:r.slice(1)};var s=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:s*(a*ws+o*js+i*Ju),rest:r.slice(n[0].length)}}function Bi(t){return Xe(st.anyDigitsSigned,t)}function tt(t,r){switch(t){case 1:return Xe(st.singleDigit,r);case 2:return Xe(st.twoDigits,r);case 3:return Xe(st.threeDigits,r);case 4:return Xe(st.fourDigits,r);default:return Xe(new RegExp("^\\d{1,"+t+"}"),r)}}function es(t,r){switch(t){case 1:return Xe(st.singleDigitSigned,r);case 2:return Xe(st.twoDigitsSigned,r);case 3:return Xe(st.threeDigitsSigned,r);case 4:return Xe(st.fourDigitsSigned,r);default:return Xe(new RegExp("^-?\\d{1,"+t+"}"),r)}}function Pa(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ui(t,r){var n=r>0,s=n?r:1-r,a;if(s<=50)a=t||100;else{var o=s+50,i=Math.floor(o/100)*100,l=t>=o%100;a=t+i-(l?100:0)}return n?a:1-a}function Wi(t){return t%400===0||t%4===0&&t%100!==0}var km=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",130),ie(de(s),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){var l=function(d){return{year:d,isTwoDigitYear:o==="yy"}};switch(o){case"y":return at(tt(4,a),l);case"yo":return at(i.ordinalNumber(a,{unit:"year"}),l);default:return at(tt(o.length,a),l)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,i){var l=a.getUTCFullYear();if(i.isTwoDigitYear){var c=Ui(i.year,l);return a.setUTCFullYear(c,0,1),a.setUTCHours(0,0,0,0),a}var d=!("era"in o)||o.era===1?i.year:1-i.year;return a.setUTCFullYear(d,0,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Am=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",130),ie(de(s),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){var l=function(d){return{year:d,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return at(tt(4,a),l);case"Yo":return at(i.ordinalNumber(a,{unit:"year"}),l);default:return at(tt(o.length,a),l)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,i,l){var c=wa(a,l);if(i.isTwoDigitYear){var d=Ui(i.year,c);return a.setUTCFullYear(d,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Er(a,l)}var u=!("era"in o)||o.era===1?i.year:1-i.year;return a.setUTCFullYear(u,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Er(a,l)}}]),n}($e),Nm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",130),ie(de(s),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o){return es(o==="R"?4:o.length,a)}},{key:"set",value:function(a,o,i){var l=new Date(0);return l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0),Qr(l)}}]),n}($e),Mm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",130),ie(de(s),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o){return es(o==="u"?4:o.length,a)}},{key:"set",value:function(a,o,i){return a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Rm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",120),ie(de(s),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"Q":case"QQ":return tt(o.length,a);case"Qo":return i.ordinalNumber(a,{unit:"quarter"});case"QQQ":return i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(a,{width:"wide",context:"formatting"})||i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Em=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",120),ie(de(s),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"q":case"qq":return tt(o.length,a);case"qo":return i.ordinalNumber(a,{unit:"quarter"});case"qqq":return i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(a,{width:"wide",context:"standalone"})||i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Im=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ie(de(s),"priority",110),s}return Ee(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d-1};switch(o){case"M":return at(Xe(st.month,a),l);case"MM":return at(tt(2,a),l);case"Mo":return at(i.ordinalNumber(a,{unit:"month"}),l);case"MMM":return i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(a,{width:"wide",context:"formatting"})||i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Om=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",110),ie(de(s),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d-1};switch(o){case"L":return at(Xe(st.month,a),l);case"LL":return at(tt(2,a),l);case"Lo":return at(i.ordinalNumber(a,{unit:"month"}),l);case"LLL":return i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(a,{width:"wide",context:"standalone"})||i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),n}($e);function _m(t,r,n){se(2,arguments);var s=ae(t),a=Oe(r),o=Ii(s,n)-a;return s.setUTCDate(s.getUTCDate()-o*7),s}var Fm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",100),ie(de(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"w":return Xe(st.week,a);case"wo":return i.ordinalNumber(a,{unit:"week"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,i,l){return Er(_m(a,i,l),l)}}]),n}($e);function Lm(t,r){se(2,arguments);var n=ae(t),s=Oe(r),a=Ei(n)-s;return n.setUTCDate(n.getUTCDate()-a*7),n}var Vm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",100),ie(de(s),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"I":return Xe(st.week,a);case"Io":return i.ordinalNumber(a,{unit:"week"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,i){return Qr(Lm(a,i))}}]),n}($e),$m=[31,28,31,30,31,30,31,31,30,31,30,31],Bm=[31,29,31,30,31,30,31,31,30,31,30,31],Um=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",90),ie(de(s),"subPriority",1),ie(de(s),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"d":return Xe(st.date,a);case"do":return i.ordinalNumber(a,{unit:"date"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){var i=a.getUTCFullYear(),l=Wi(i),c=a.getUTCMonth();return l?o>=1&&o<=Bm[c]:o>=1&&o<=$m[c]}},{key:"set",value:function(a,o,i){return a.setUTCDate(i),a.setUTCHours(0,0,0,0),a}}]),n}($e),Wm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",90),ie(de(s),"subpriority",1),ie(de(s),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"D":case"DD":return Xe(st.dayOfYear,a);case"Do":return i.ordinalNumber(a,{unit:"date"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){var i=a.getUTCFullYear(),l=Wi(i);return l?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(a,o,i){return a.setUTCMonth(0,i),a.setUTCHours(0,0,0,0),a}}]),n}($e);function Ta(t,r,n){var s,a,o,i,l,c,d,u;se(2,arguments);var f=Yt(),p=Oe((s=(a=(o=(i=n==null?void 0:n.weekStartsOn)!==null&&i!==void 0?i:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&o!==void 0?o:f.weekStartsOn)!==null&&a!==void 0?a:(d=f.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=ae(t),g=Oe(r),b=m.getUTCDay(),P=g%7,j=(P+7)%7,w=(j<p?7:0)+g-b;return m.setUTCDate(m.getUTCDate()+w),m}var Hm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",90),ie(de(s),"incompatibleTokens",["D","i","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"E":case"EE":case"EEE":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Ta(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}($e),zm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",90),ie(de(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i,l){var c=function(u){var f=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+f};switch(o){case"e":case"ee":return at(tt(o.length,a),c);case"eo":return at(i.ordinalNumber(a,{unit:"day"}),c);case"eee":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Ta(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}($e),Ym=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",90),ie(de(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i,l){var c=function(u){var f=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+f};switch(o){case"c":case"cc":return at(tt(o.length,a),c);case"co":return at(i.ordinalNumber(a,{unit:"day"}),c);case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(a,{width:"wide",context:"standalone"})||i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Ta(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}($e);function qm(t,r){se(2,arguments);var n=Oe(r);n%7===0&&(n=n-7);var s=1,a=ae(t),o=a.getUTCDay(),i=n%7,l=(i+7)%7,c=(l<s?7:0)+n-o;return a.setUTCDate(a.getUTCDate()+c),a}var Qm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",90),ie(de(s),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d===0?7:d};switch(o){case"i":case"ii":return tt(o.length,a);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return at(i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l);case"iiiii":return at(i.day(a,{width:"narrow",context:"formatting"}),l);case"iiiiii":return at(i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l);case"iiii":default:return at(i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(a,o){return o>=1&&o<=7}},{key:"set",value:function(a,o,i){return a=qm(a,i),a.setUTCHours(0,0,0,0),a}}]),n}($e),Km=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",80),ie(de(s),"incompatibleTokens",["b","B","H","k","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"a":case"aa":case"aaa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(Pa(i),0,0,0),a}}]),n}($e),Gm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",80),ie(de(s),"incompatibleTokens",["a","B","H","k","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"b":case"bb":case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(Pa(i),0,0,0),a}}]),n}($e),Xm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",80),ie(de(s),"incompatibleTokens",["a","b","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(Pa(i),0,0,0),a}}]),n}($e),Zm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",70),ie(de(s),"incompatibleTokens",["H","K","k","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"h":return Xe(st.hour12h,a);case"ho":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=12}},{key:"set",value:function(a,o,i){var l=a.getUTCHours()>=12;return l&&i<12?a.setUTCHours(i+12,0,0,0):!l&&i===12?a.setUTCHours(0,0,0,0):a.setUTCHours(i,0,0,0),a}}]),n}($e),Jm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",70),ie(de(s),"incompatibleTokens",["a","b","h","K","k","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"H":return Xe(st.hour23h,a);case"Ho":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=23}},{key:"set",value:function(a,o,i){return a.setUTCHours(i,0,0,0),a}}]),n}($e),ef=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",70),ie(de(s),"incompatibleTokens",["h","H","k","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"K":return Xe(st.hour11h,a);case"Ko":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){var l=a.getUTCHours()>=12;return l&&i<12?a.setUTCHours(i+12,0,0,0):a.setUTCHours(i,0,0,0),a}}]),n}($e),tf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",70),ie(de(s),"incompatibleTokens",["a","b","h","H","K","t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"k":return Xe(st.hour24h,a);case"ko":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=24}},{key:"set",value:function(a,o,i){var l=i<=24?i%24:i;return a.setUTCHours(l,0,0,0),a}}]),n}($e),rf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",60),ie(de(s),"incompatibleTokens",["t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"m":return Xe(st.minute,a);case"mo":return i.ordinalNumber(a,{unit:"minute"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,i){return a.setUTCMinutes(i,0,0),a}}]),n}($e),nf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",50),ie(de(s),"incompatibleTokens",["t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o,i){switch(o){case"s":return Xe(st.second,a);case"so":return i.ordinalNumber(a,{unit:"second"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,i){return a.setUTCSeconds(i,0),a}}]),n}($e),sf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",30),ie(de(s),"incompatibleTokens",["t","T"]),s}return Ee(n,[{key:"parse",value:function(a,o){var i=function(c){return Math.floor(c*Math.pow(10,-o.length+3))};return at(tt(o.length,a),i)}},{key:"set",value:function(a,o,i){return a.setUTCMilliseconds(i),a}}]),n}($e),af=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",10),ie(de(s),"incompatibleTokens",["t","T","x"]),s}return Ee(n,[{key:"parse",value:function(a,o){switch(o){case"X":return $t(Vt.basicOptionalMinutes,a);case"XX":return $t(Vt.basic,a);case"XXXX":return $t(Vt.basicOptionalSeconds,a);case"XXXXX":return $t(Vt.extendedOptionalSeconds,a);case"XXX":default:return $t(Vt.extended,a)}}},{key:"set",value:function(a,o,i){return o.timestampIsSet?a:new Date(a.getTime()-i)}}]),n}($e),of=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",10),ie(de(s),"incompatibleTokens",["t","T","X"]),s}return Ee(n,[{key:"parse",value:function(a,o){switch(o){case"x":return $t(Vt.basicOptionalMinutes,a);case"xx":return $t(Vt.basic,a);case"xxxx":return $t(Vt.basicOptionalSeconds,a);case"xxxxx":return $t(Vt.extendedOptionalSeconds,a);case"xxx":default:return $t(Vt.extended,a)}}},{key:"set",value:function(a,o,i){return o.timestampIsSet?a:new Date(a.getTime()-i)}}]),n}($e),lf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",40),ie(de(s),"incompatibleTokens","*"),s}return Ee(n,[{key:"parse",value:function(a){return Bi(a)}},{key:"set",value:function(a,o,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),n}($e),cf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Re(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(de(s),"priority",20),ie(de(s),"incompatibleTokens","*"),s}return Ee(n,[{key:"parse",value:function(a){return Bi(a)}},{key:"set",value:function(a,o,i){return[new Date(i),{timestampIsSet:!0}]}}]),n}($e),df={G:new Dm,y:new km,Y:new Am,R:new Nm,u:new Mm,Q:new Rm,q:new Em,M:new Im,L:new Om,w:new Fm,I:new Vm,d:new Um,D:new Wm,E:new Hm,e:new zm,c:new Ym,i:new Qm,a:new Km,b:new Gm,B:new Xm,h:new Zm,H:new Jm,K:new ef,k:new tf,m:new rf,s:new nf,S:new sf,X:new af,x:new of,t:new lf,T:new cf},uf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mf=/^'([^]*?)'?$/,ff=/''/g,pf=/\S/,xf=/[a-zA-Z]/;function gf(t,r,n,s){var a,o,i,l,c,d,u,f,p,m,g,b,P,j,w,S,y,A;se(3,arguments);var O=String(t),N=String(r),I=Yt(),E=(a=(o=s==null?void 0:s.locale)!==null&&o!==void 0?o:I.locale)!==null&&a!==void 0?a:Ca;if(!E.match)throw new RangeError("locale must contain match property");var k=Oe((i=(l=(c=(d=s==null?void 0:s.firstWeekContainsDate)!==null&&d!==void 0?d:s==null||(u=s.locale)===null||u===void 0||(f=u.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&c!==void 0?c:I.firstWeekContainsDate)!==null&&l!==void 0?l:(p=I.locale)===null||p===void 0||(m=p.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Oe((g=(b=(P=(j=s==null?void 0:s.weekStartsOn)!==null&&j!==void 0?j:s==null||(w=s.locale)===null||w===void 0||(S=w.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&P!==void 0?P:I.weekStartsOn)!==null&&b!==void 0?b:(y=I.locale)===null||y===void 0||(A=y.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&g!==void 0?g:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(N==="")return O===""?ae(n):new Date(NaN);var T={firstWeekContainsDate:k,weekStartsOn:C,locale:E},F=[new Sm],_=N.match(hf).map(function(Z){var ce=Z[0];if(ce in ia){var je=ia[ce];return je(Z,E.formatLong)}return Z}).join("").match(uf),R=[],q=uo(_),B;try{var $=function(){var ce=B.value;!(s!=null&&s.useAdditionalWeekYearTokens)&&Fi(ce)&&Zn(ce,N,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&_i(ce)&&Zn(ce,N,t);var je=ce[0],me=df[je];if(me){var ge=me.incompatibleTokens;if(Array.isArray(ge)){var ne=R.find(function(He){return ge.includes(He.token)||He.token===je});if(ne)throw new RangeError("The format string mustn't contain `".concat(ne.fullToken,"` and `").concat(ce,"` at the same time"))}else if(me.incompatibleTokens==="*"&&R.length>0)throw new RangeError("The format string mustn't contain `".concat(ce,"` and any other token at the same time"));R.push({token:je,fullToken:ce});var be=me.run(O,ce,E.match,T);if(!be)return{v:new Date(NaN)};F.push(be.setter),O=be.rest}else{if(je.match(xf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+je+"`");if(ce==="''"?ce="'":je==="'"&&(ce=yf(ce)),O.indexOf(ce)===0)O=O.slice(ce.length);else return{v:new Date(NaN)}}};for(q.s();!(B=q.n()).done;){var H=$();if(ss(H)==="object")return H.v}}catch(Z){q.e(Z)}finally{q.f()}if(O.length>0&&pf.test(O))return new Date(NaN);var Q=F.map(function(Z){return Z.priority}).sort(function(Z,ce){return ce-Z}).filter(function(Z,ce,je){return je.indexOf(Z)===ce}).map(function(Z){return F.filter(function(ce){return ce.priority===Z}).sort(function(ce,je){return je.subPriority-ce.subPriority})}).map(function(Z){return Z[0]}),J=ae(n);if(isNaN(J.getTime()))return new Date(NaN);var re=Mi(J,Xn(J)),te={},D=uo(Q),ee;try{for(D.s();!(ee=D.n()).done;){var pe=ee.value;if(!pe.validate(re,T))return new Date(NaN);var U=pe.set(re,te,T);Array.isArray(U)?(re=U[0],im(te,U[1])):re=U}}catch(Z){D.e(Z)}finally{D.f()}return re}function yf(t){return t.match(mf)[1].replace(ff,"'")}function ho(t){se(1,arguments);var r=ae(t);return r.setMinutes(0,0,0),r}function vf(t,r){se(2,arguments);var n=ho(t),s=ho(r);return n.getTime()===s.getTime()}function bf(t,r){se(2,arguments);var n=ae(t),s=ae(r);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function jf(t,r){se(2,arguments);var n=ae(t),s=ae(r);return n.getFullYear()===s.getFullYear()}function wf(t,r){se(2,arguments);var n=ae(t).getTime(),s=ae(r.start).getTime(),a=ae(r.end).getTime();if(!(s<=a))throw new RangeError("Invalid interval");return n>=s&&n<=a}function pr(t,r){var n;se(1,arguments);var s=Oe((n=void 0)!==null&&n!==void 0?n:2);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=Sf(t),o;if(a.date){var i=Df(a.date,s);o=kf(i.restDateString,i.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var l=o.getTime(),c=0,d;if(a.time&&(c=Af(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(d=Nf(a.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(l+c),f=new Date(0);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return new Date(l+c+d)}var Nn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Cf=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Pf=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Tf=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Sf(t){var r={},n=t.split(Nn.dateTimeDelimiter),s;if(n.length>2)return r;if(/:/.test(n[0])?s=n[0]:(r.date=n[0],s=n[1],Nn.timeZoneDelimiter.test(r.date)&&(r.date=t.split(Nn.timeZoneDelimiter)[0],s=t.substr(r.date.length,t.length))),s){var a=Nn.timezone.exec(s);a?(r.time=s.replace(a[1],""),r.timezone=a[1]):r.time=s}return r}function Df(t,r){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};var a=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function kf(t,r){if(r===null)return new Date(NaN);var n=t.match(Cf);if(!n)return new Date(NaN);var s=!!n[4],a=sn(n[1]),o=sn(n[2])-1,i=sn(n[3]),l=sn(n[4]),c=sn(n[5])-1;if(s)return Of(r,l,c)?Mf(r,l,c):new Date(NaN);var d=new Date(0);return!Ef(r,o,i)||!If(r,a)?new Date(NaN):(d.setUTCFullYear(r,o,Math.max(a,i)),d)}function sn(t){return t?parseInt(t):1}function Af(t){var r=t.match(Pf);if(!r)return NaN;var n=zs(r[1]),s=zs(r[2]),a=zs(r[3]);return _f(n,s,a)?n*ws+s*js+a*1e3:NaN}function zs(t){return t&&parseFloat(t.replace(",","."))||0}function Nf(t){if(t==="Z")return 0;var r=t.match(Tf);if(!r)return 0;var n=r[1]==="+"?-1:1,s=parseInt(r[2]),a=r[3]&&parseInt(r[3])||0;return Ff(s,a)?n*(s*ws+a*js):NaN}function Mf(t,r,n){var s=new Date(0);s.setUTCFullYear(t,0,4);var a=s.getUTCDay()||7,o=(r-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+o),s}var Rf=[31,null,31,30,31,30,31,31,30,31,30,31];function Hi(t){return t%400===0||t%4===0&&t%100!==0}function Ef(t,r,n){return r>=0&&r<=11&&n>=1&&n<=(Rf[r]||(Hi(t)?29:28))}function If(t,r){return r>=1&&r<=(Hi(t)?366:365)}function Of(t,r,n){return r>=1&&r<=53&&n>=0&&n<=6}function _f(t,r,n){return t===24?r===0&&n===0:n>=0&&n<60&&r>=0&&r<60&&t>=0&&t<25}function Ff(t,r){return r>=0&&r<=59}function Lf(t,r){se(2,arguments);var n=ae(t),s=Oe(r),a=n.getFullYear(),o=n.getDate(),i=new Date(0);i.setFullYear(a,s,15),i.setHours(0,0,0,0);var l=Li(i);return n.setMonth(s,Math.min(o,l)),n}function Vf(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return n.setDate(s),n}function $f(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return n.setHours(s),n}function Bf(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return n.setMilliseconds(s),n}function Uf(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return n.setMinutes(s),n}function Wf(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return n.setSeconds(s),n}function Hf(t,r){se(2,arguments);var n=ae(t),s=Oe(r);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}const zi={USD:"$",VND:"",EUR:"",GBP:"",JPY:"",CNY:"",KRW:"",SGD:"S$",THB:"",IDR:"Rp",MYR:"RM",PHP:"",INR:"",AUD:"A$",CAD:"C$",CHF:"CHF",NZD:"NZ$"},X=(t,r="VND",n={},s="en-US")=>{s="en-US";const{compact:a=!1,precision:o=r==="VND"?0:2,showSymbol:i=!0}=n;(t==null||isNaN(t))&&(t=0);const l=new Intl.NumberFormat(s,{minimumFractionDigits:o,maximumFractionDigits:o,notation:a?"compact":"standard"}).format(t);if(i){const c=zi[r]||r;return`${l} ${c}`}return l},pt=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(0):new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(t)),ve=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(0):new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(t/100)),Mn=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(0)+"%":new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(t)+"%"),Ps=(t,r="MMM dd, yyyy")=>{try{const n=typeof t=="string"?pr(t):t;return fr(n,r)}catch{return"Invalid Date"}},Yi=({portfolio:t,onView:r,onEdit:n})=>{const s=(Number(t.unrealizedPl)||0)>=0,a=(Number(t.realizedPl)||0)>=0,o=()=>{r(t.portfolioId)},i=c=>{c.stopPropagation(),n&&n(t.portfolioId)},l=c=>{c.stopPropagation(),o()};return e.jsxs("div",{className:"portfolio-card",onClick:o,children:[e.jsxs("div",{className:"portfolio-card__content",children:[e.jsxs("div",{className:"portfolio-card__header",children:[e.jsx("h2",{className:"portfolio-card__title",children:t.name}),e.jsx("span",{className:`portfolio-card__currency ${t.baseCurrency==="USD"?"portfolio-card__currency--primary":""}`,children:t.baseCurrency})]}),e.jsxs("div",{className:"portfolio-card__metrics",children:[e.jsxs("div",{className:"portfolio-card__total-value",children:[e.jsx(er,{className:"portfolio-card__total-value-icon"}),e.jsxs("div",{children:[e.jsx("div",{className:"portfolio-card__total-value-amount",children:X(Number(t.totalValue)||0,t.baseCurrency)}),e.jsx("div",{className:"portfolio-card__total-value-label",children:"Total Value"})]})]}),e.jsxs("div",{className:"portfolio-card__pl-section",children:[e.jsxs("div",{className:"portfolio-card__pl-item",children:[e.jsxs("div",{className:"portfolio-card__pl-header",children:[s?e.jsx(gt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):e.jsx(Dt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),e.jsx("div",{className:`portfolio-card__pl-amount ${s?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:X(Number(t.unrealizedPl)||0,t.baseCurrency)})]}),e.jsx("div",{className:"portfolio-card__pl-label",children:"Unrealized P&L"})]}),e.jsxs("div",{className:"portfolio-card__pl-item",children:[e.jsxs("div",{className:"portfolio-card__pl-header",children:[a?e.jsx(gt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):e.jsx(Dt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),e.jsx("div",{className:`portfolio-card__pl-amount ${a?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:X(Number(t.realizedPl)||0,t.baseCurrency)})]}),e.jsx("div",{className:"portfolio-card__pl-label",children:"Realized P&L"})]})]}),e.jsxs("div",{className:"portfolio-card__cash-balance",children:[e.jsx("div",{className:"portfolio-card__cash-label",children:"Cash Balance"}),e.jsx("div",{className:"portfolio-card__cash-amount",children:X(Number(t.cashBalance)||0,t.baseCurrency)})]})]})]}),e.jsxs("div",{className:"portfolio-card__actions",children:[e.jsxs("button",{className:"portfolio-card__view-btn",onClick:l,children:[e.jsx(ma,{}),"View Details"]}),n&&e.jsx("button",{className:"portfolio-card__edit-btn",onClick:i,children:"Edit"})]})]})},zf=()=>{var j;const t=xn(),{accountId:r}=At(),{portfolios:n,isLoading:s,error:a}=vs(r);if(s)return e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ze,{})});if(a)return e.jsx(Ue,{severity:"error",sx:{mb:2},children:"Failed to load dashboard data. Please try again."});const o=n.length,i=n.reduce((w,S)=>{var y;return w+(parseFloat((y=S.totalValue)==null?void 0:y.toString())||0)},0),l=n.reduce((w,S)=>{var y;return w+(parseFloat((y=S.unrealizedPl)==null?void 0:y.toString())||0)},0),c=n.reduce((w,S)=>{var y;return w+(parseFloat((y=S.realizedPl)==null?void 0:y.toString())||0)},0),d=n.reduce((w,S)=>{var y;return w+(parseFloat((y=S.cashBalance)==null?void 0:y.toString())||0)},0),u=l+c,f=i>0?u/(i-u)*100:0,p=((j=n.find(w=>w.baseCurrency))==null?void 0:j.baseCurrency)||"VND",m=w=>{t(`/portfolios/${w}`)},g=w=>{t(`/portfolios/${w}/edit`)},b=()=>{t("/portfolios/new")},P=[{title:"Total Portfolios",value:o.toString(),icon:e.jsx(er,{}),color:"primary"},{title:"Total Value",value:X(i,p),icon:e.jsx(Ll,{}),color:"success"},{title:"Total P&L",value:X(u,p),icon:u>=0?e.jsx(gt,{}):e.jsx(Dt,{}),color:u>=0?"success":"error"},{title:"Total Return",value:ve(f),icon:f>=0?e.jsx(gt,{}):e.jsx(Dt,{}),color:f>=0?"success":"error"}];return e.jsxs(v,{children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Dashboard"}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Overview of your investment portfolios and performance"}),e.jsxs(M,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(M,{item:!0,xs:12,lg:8,children:e.jsx(M,{container:!0,spacing:3,sx:{height:"100%"},children:P.map((w,S)=>e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(he,{sx:{height:"100%"},children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,children:[e.jsxs(v,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:w.title}),e.jsx(h,{variant:"h5",component:"div",children:w.value})]}),e.jsx(v,{sx:{color:`${w.color}.main`,display:"flex",alignItems:"center"},children:w.icon})]})})})},S))})}),n.length>0&&e.jsx(M,{item:!0,xs:12,lg:4,children:e.jsxs(nt,{sx:{p:3,height:"fit-content"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Portfolio Insights"}),e.jsxs(v,{children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Average Portfolio Value:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(i/n.length,p)})]}),e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Cash Allocation:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:ve(d/i*100)})]}),e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Best Performer:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",color:"success.main",children:n.length>0?n.reduce((w,S)=>(S.unrealizedPl||0)>(w.unrealizedPl||0)?S:w).name:"N/A"})]}),e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Total Cash Balance:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(d,p)})]})]})]})})]}),e.jsxs(v,{children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h5",component:"h2",children:"Your Portfolios"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:b,sx:{borderRadius:2},children:"Create Portfolio"})]}),n.length===0?e.jsxs(nt,{sx:{p:4,textAlign:"center"},children:[e.jsx(er,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No portfolios found"}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first portfolio to start tracking your investments"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:b,size:"large",sx:{borderRadius:2},children:"Create Your First Portfolio"})]}):e.jsx(M,{container:!0,spacing:3,children:n.map(w=>e.jsx(M,{item:!0,xs:12,sm:6,lg:4,xl:3,children:e.jsx(Yi,{portfolio:w,onView:m,onEdit:g})},w.portfolioId))})]})]})},Yf=({onViewPortfolio:t,onEditPortfolio:r,onCreatePortfolio:n})=>{const{accountId:s}=At(),{portfolios:a,isLoading:o,error:i}=vs(s),[l,c]=x.useState(""),[d,u]=x.useState(""),f=a.filter(m=>{const g=m.name.toLowerCase().includes(l.toLowerCase()),b=!d||m.baseCurrency===d;return g&&b}),p=Array.from(new Set(a.map(m=>m.baseCurrency)));return o?e.jsx("div",{className:"portfolio-list",children:e.jsx("div",{className:"portfolio-list__loading",children:e.jsx(ze,{})})}):i?e.jsx("div",{className:"portfolio-list",children:e.jsx("div",{className:"portfolio-list__error",children:"Failed to load portfolios. Please try again."})}):e.jsxs("div",{className:"portfolio-list",children:[e.jsxs("div",{className:"portfolio-list__header",children:[e.jsx("h1",{className:"portfolio-list__title",children:"Portfolios"}),n&&e.jsxs("button",{className:"portfolio-list__create-btn",onClick:n,children:[e.jsx(Nt,{}),"Create Portfolio"]})]}),e.jsxs("div",{className:"portfolio-list__filters",children:[e.jsx(We,{label:"Search portfolios",variant:"outlined",size:"small",value:l,onChange:m=>c(m.target.value),InputProps:{startAdornment:e.jsx(fa,{sx:{mr:1,color:"text.secondary"}})},className:"portfolio-list__search"}),e.jsxs(Ze,{size:"small",className:"portfolio-list__currency-filter",children:[e.jsx(Je,{children:"Currency"}),e.jsxs(et,{value:d,label:"Currency",onChange:m=>u(m.target.value),children:[e.jsx(ue,{value:"",children:"All Currencies"}),p.map(m=>e.jsx(ue,{value:m,children:m},m))]})]})]}),f.length===0?e.jsxs("div",{className:"portfolio-list__empty",children:[e.jsx("div",{className:"portfolio-list__empty-icon",children:""}),e.jsx("h3",{className:"portfolio-list__empty-title",children:a.length===0?"No portfolios found. Create your first portfolio to get started.":"No portfolios match your search criteria."}),n&&a.length===0&&e.jsxs("button",{className:"portfolio-list__empty-btn",onClick:n,children:[e.jsx(Nt,{}),"Create Your First Portfolio"]})]}):e.jsx("div",{className:"portfolio-list__grid",children:f.map(m=>e.jsx(Yi,{portfolio:m,onView:t,onEdit:r},m.portfolioId))}),n&&e.jsx(Eo,{color:"primary","aria-label":"add portfolio",onClick:n,className:"portfolio-list__fab",children:e.jsx(Nt,{})})]})};function Ts(t,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),function(s,a,o){try{return Promise.resolve(function(i,l){try{var c=(r.context,Promise.resolve(t[n.mode==="sync"?"validateSync":"validate"](s,Object.assign({abortEarly:!1},r,{context:a}))).then(function(d){return o.shouldUseNativeValidation&&mc({},o),{values:n.raw?s:d,errors:{}}}))}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(!i.inner)throw i;return{values:{},errors:fc((l=i,c=!o.shouldUseNativeValidation&&o.criteriaMode==="all",(l.inner||[]).reduce(function(d,u){if(d[u.path]||(d[u.path]={message:u.message,type:u.type}),c){var f=d[u.path].types,p=f&&f[u.type];d[u.path]=pc(u.path,c,d,u.type,p?[].concat(p,u.message):u.message)}return d},{})),o)};var l,c}))}catch(i){return Promise.reject(i)}}}const qf=ls({name:dt().required("Portfolio name is required").min(2,"Name must be at least 2 characters"),baseCurrency:dt().required("Base currency is required"),accountId:dt().required("Account ID is required")}),Qf=[{code:"VND",name:"Vietnamese Dong"},{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"}],Kf=({open:t,onClose:r,onSubmit:n,initialData:s,isEditing:a=!1,isLoading:o=!1,error:i})=>{const{accountId:l}=At(),{control:c,handleSubmit:d,reset:u,formState:{errors:f}}=cs({resolver:Ts(qf),defaultValues:{name:(s==null?void 0:s.name)||"",baseCurrency:(s==null?void 0:s.baseCurrency)||"VND",accountId:(s==null?void 0:s.accountId)||l}});Ht.useEffect(()=>{t&&u({name:(s==null?void 0:s.name)||"",baseCurrency:(s==null?void 0:s.baseCurrency)||"VND",accountId:(s==null?void 0:s.accountId)||l})},[t,s,u,l]),Ht.useEffect(()=>{t&&s&&u({name:s.name||"",baseCurrency:s.baseCurrency||"VND",accountId:s.accountId||l})},[s,t,u,l]);const p=g=>{n(g)},m=()=>{u(),r()};return e.jsxs(or,{open:t,onClose:m,maxWidth:"sm",fullWidth:!0,children:[e.jsx(yr,{children:a?"Edit Portfolio":"Create New Portfolio"}),e.jsxs("form",{onSubmit:d(p),children:[e.jsxs(ir,{children:[i&&e.jsx(Ue,{severity:"error",sx:{mb:2},children:i}),e.jsxs(v,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(qe,{name:"name",control:c,render:({field:g})=>{var b;return e.jsx(We,{...g,label:"Portfolio Name",fullWidth:!0,error:!!f.name,helperText:(b=f.name)==null?void 0:b.message,placeholder:"e.g., Growth Portfolio, Retirement Fund"})}}),e.jsx(qe,{name:"baseCurrency",control:c,render:({field:g})=>e.jsxs(Ze,{fullWidth:!0,error:!!f.baseCurrency,children:[e.jsx(Je,{children:"Base Currency"}),e.jsx(et,{...g,label:"Base Currency",children:Qf.map(b=>e.jsxs(ue,{value:b.code,children:[b.code," - ",b.name]},b.code))}),f.baseCurrency&&e.jsx(v,{component:"span",sx:{color:"error.main",fontSize:"0.75rem",mt:.5,ml:1.75},children:f.baseCurrency.message})]})}),e.jsx(qe,{name:"accountId",control:c,render:({field:g})=>{var b;return e.jsx(We,{...g,label:"Account ID",fullWidth:!0,error:!!f.accountId,helperText:(b=f.accountId)==null?void 0:b.message,placeholder:"Enter account ID",disabled:a})}})]})]}),e.jsxs(lr,{children:[e.jsx(Ce,{onClick:m,disabled:o,children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",disabled:o,children:o?"Saving...":a?"Update":"Create"})]})]})]})},Gf=()=>{const t=xn(),[r,n]=x.useState(!1),[s,a]=x.useState(null),[o,i]=x.useState(""),{accountId:l}=At(),{portfolios:c,createPortfolio:d,updatePortfolio:u,isCreating:f,isUpdating:p,isDeleting:m}=vs(l),g=y=>{t(`/portfolios/${y}`)},b=y=>{a(y),n(!0)},P=()=>{a(null),i(""),n(!0)},j=()=>{n(!1),a(null),i("")},w=async y=>{var A,O;try{i(""),s?await u({id:s,data:y}):await d(y),j()}catch(N){i(((O=(A=N.response)==null?void 0:A.data)==null?void 0:O.message)||"An error occurred. Please try again.")}},S=()=>{if(!s)return;const y=c.find(A=>A.portfolioId===s);if(y)return{name:y.name,baseCurrency:y.baseCurrency,accountId:y.accountId}};return e.jsxs(v,{children:[e.jsx(Yf,{onViewPortfolio:g,onEditPortfolio:b,onCreatePortfolio:P}),e.jsx(Kf,{open:r,onClose:j,onSubmit:w,initialData:S(),isEditing:!!s,isLoading:f||p,error:o}),(f||p||m)&&e.jsxs(Ue,{severity:"info",sx:{mt:2},children:[f&&"Creating portfolio...",p&&"Updating portfolio...",m&&"Deleting portfolio..."]})]})},Sa=(t,r)=>jt(["trades",t,r],()=>Ne.getTrades(t,r),{enabled:!!t,staleTime:2*60*1e3}),qi=()=>{const t=cr();return zt(r=>Ne.createTrade(r),{onSuccess:r=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Qe.success("Trade created successfully!")},onError:r=>{var n,s;Qe.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to create trade")}})},Xf=()=>{const t=cr();return zt(({id:r,data:n})=>Ne.updateTrade(r,n),{onSuccess:()=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Qe.success("Trade updated successfully!")},onError:r=>{var n,s;Qe.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to update trade")}})},Zf=()=>{const t=cr();return zt(r=>Ne.deleteTrade(r),{onSuccess:()=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Qe.success("Trade deleted successfully!")},onError:r=>{var n,s;Qe.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to delete trade")}})},Jf=t=>jt(["tradeDetails",t],()=>Ne.getTradeDetails(t),{enabled:!!t,staleTime:2*60*1e3}),ep=(t,r)=>{const n=["tradeAnalysis",t,(r==null?void 0:r.timeframe)||"ALL",(r==null?void 0:r.metric)||"pnl"];return jt(n,()=>Ne.getTradeAnalysis(t,r),{enabled:!!t,staleTime:0,cacheTime:0})},mo=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],tp=({data:t,baseCurrency:r})=>{const n=Object.entries(t.allocation).map(([o,i],l)=>({name:o.toUpperCase(),value:i.percentage,marketValue:i.value,color:mo[l%mo.length]})),s=({active:o,payload:i})=>{if(o&&i&&i.length){const l=i[0].payload;return e.jsxs(v,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:l.name}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Allocation: ",ve(l.value)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Market Value: ",X(l.marketValue,r)]})]})}return null},a=({payload:o})=>e.jsx(v,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:1,mt:2},children:o.map((i,l)=>e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(v,{sx:{width:12,height:12,backgroundColor:i.color,borderRadius:"50%"}}),e.jsxs(h,{variant:"caption",children:[i.value," (",ve(i.payload.value),")"]})]},l))});return!t||Object.keys(t.allocation).length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset allocation data available"})}):e.jsx(v,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(Ho,{children:[e.jsx(zo,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,value:i})=>`${o}: ${ve(i)}`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:n.map((o,i)=>e.jsx(gn,{fill:o.color},`cell-${i}`))}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(ga,{content:e.jsx(a,{})})]})})})},rp=({portfolioId:t,baseCurrency:r,title:n="Performance Chart",showReferenceLine:s=!1,referenceValue:a=0})=>{const[o,i]=x.useState("1Y"),[l,c]=x.useState([]),[d,u]=x.useState(!0),[f,p]=x.useState(null);x.useEffect(()=>{(async()=>{try{u(!0),p(null);const P=await Ne.getPortfolioPerformanceHistory(t,o);c(P.data)}catch(P){console.error("Error fetching performance data:",P),p("Failed to load performance data")}finally{u(!1)}})()},[t,o]);const m=({active:b,payload:P,label:j})=>b&&P&&P.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ps(j)}),e.jsxs(h,{variant:"body2",color:"primary",children:["Value: ",X(P[0].value,r)]})]}):null,g=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric"});return d?e.jsxs(nt,{sx:{p:3,textAlign:"center"},children:[e.jsx(ze,{}),e.jsx(h,{variant:"body2",sx:{mt:2},children:"Loading performance data..."})]}):f?e.jsx(nt,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"error",children:f})}):l.length===0?e.jsx(nt,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):e.jsxs(nt,{sx:{p:3},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h6",children:n}),e.jsxs(Ze,{size:"small",sx:{minWidth:120},children:[e.jsx(Je,{children:"Timeframe"}),e.jsxs(et,{value:o,label:"Timeframe",onChange:b=>i(b.target.value),children:[e.jsx(ue,{value:"1M",children:"1 Month"}),e.jsx(ue,{value:"3M",children:"3 Months"}),e.jsx(ue,{value:"6M",children:"6 Months"}),e.jsx(ue,{value:"1Y",children:"1 Year"}),e.jsx(ue,{value:"2Y",children:"2 Years"}),e.jsx(ue,{value:"5Y",children:"5 Years"}),e.jsx(ue,{value:"ALL",children:"All Time"})]})]})]}),e.jsx(v,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"date",tickFormatter:g,tick:{fontSize:12}}),e.jsx(nr,{tickFormatter:b=>X(b,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(m,{})}),e.jsx(Yr,{type:"monotone",dataKey:"value",stroke:"#1976d2",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#1976d2",strokeWidth:2}}),s&&e.jsx(Yo,{y:a,stroke:"#ff9800",strokeDasharray:"5 5",label:{value:"Reference",position:"top"}})]})})})]})},np=({data:t,baseCurrency:r,title:n="Risk-Return Analysis"})=>{const s=({active:a,payload:o})=>{if(a&&o&&o.length){const i=o[0].payload;return e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:i.assetType.toUpperCase()}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Return: ",ve(i.return)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Risk: ",ve(i.risk)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",X(i.value,r)]})]})}return null};return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No risk-return data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Risk vs Return analysis of portfolio assets"}),e.jsx(v,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(xc,{margin:{top:20,right:20,bottom:20,left:20},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{type:"number",dataKey:"risk",name:"Risk",tickFormatter:a=>ve(a),label:{value:"Risk (Volatility)",position:"insideBottom",offset:-10}}),e.jsx(nr,{type:"number",dataKey:"return",name:"Return",tickFormatter:a=>ve(a),label:{value:"Return",angle:-90,position:"insideLeft"}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(gc,{data:t,fill:"#1976d2",children:t.map((a,o)=>e.jsx(gn,{fill:a.color},`cell-${o}`))})]})})})]})},sp=({data:t,baseCurrency:r,title:n="Asset Performance Comparison"})=>{const s=({active:a,payload:o})=>{if(a&&o&&o.length){const i=o[0].payload;return e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:i.assetType.toUpperCase()}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Performance: ",ve(i.performance)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",X(i.value,r)]})]})}return null};return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Performance comparison across asset types"}),e.jsx(v,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(qo,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"assetType",tick:{fontSize:12},tickFormatter:a=>a.toUpperCase()}),e.jsx(nr,{tickFormatter:a=>ve(a),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(qn,{dataKey:"performance",radius:[4,4,0,0],children:t.map((a,o)=>e.jsx(gn,{fill:a.color},`cell-${o}`))})]})})})]})},ap=({data:t,title:r="Risk Metrics Dashboard"})=>{const n=(d,u)=>{switch(u){case"var":return d>.1?"high":d>.05?"medium":"low";case"volatility":return d>.3?"high":d>.15?"medium":"low";case"drawdown":return d>.2?"high":d>.1?"medium":"low";case"ratio":return d>1.5?"excellent":d>1?"good":d>.5?"fair":"poor";default:return"medium"}},s=d=>{switch(d){case"excellent":case"low":return"success";case"good":return"info";case"fair":case"medium":return"warning";case"poor":case"high":return"error";default:return"default"}},a=d=>{switch(d){case"excellent":case"good":case"low":return e.jsx(Ln,{color:"success"});case"fair":case"medium":return e.jsx(Yn,{color:"warning"});case"poor":case"high":return e.jsx(Dt,{color:"error"});default:return e.jsx(Vl,{})}},o=n(t.var95,"var"),i=n(t.volatility,"volatility"),l=n(t.maxDrawdown,"drawdown"),c=n(t.sharpeRatio,"ratio");return e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Comprehensive risk analysis and portfolio health metrics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Value at Risk (95%)"}),a(o)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:ve(t.var95)}),e.jsx(De,{label:o.toUpperCase(),color:s(o),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Sharpe Ratio"}),a(c)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:t.sharpeRatio.toFixed(2)}),e.jsx(De,{label:c.toUpperCase(),color:s(c),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Volatility"}),a(i)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:ve(t.volatility)}),e.jsx(De,{label:i.toUpperCase(),color:s(i),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Max Drawdown"}),a(l)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:ve(t.maxDrawdown)}),e.jsx(De,{label:l.toUpperCase(),color:s(l),size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Additional Risk Metrics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"VaR (99%)"}),e.jsx(h,{variant:"h6",children:ve(t.var99)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Beta"}),e.jsx(h,{variant:"h6",children:t.beta.toFixed(2)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Calmar Ratio"}),e.jsx(h,{variant:"h6",children:t.calmarRatio.toFixed(2)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sortino Ratio"}),e.jsx(h,{variant:"h6",children:t.sortinoRatio.toFixed(2)})]})})]})]})})})]})]})},op=({data:t,title:r="Diversification Heatmap"})=>{const n=Array.from(new Set(t.flatMap(l=>[l.asset1,l.asset2]))),a=(()=>{const l={};return n.forEach(c=>{l[c]={},n.forEach(d=>{c===d?l[c][d]=1:l[c][d]=0})}),t.forEach(c=>{l[c.asset1][c.asset2]=c.correlation,l[c.asset2][c.asset1]=c.correlation}),l})(),o=l=>{const c=Math.abs(l);return c>=.8?"#d32f2f":c>=.6?"#f57c00":c>=.4?"#fbc02d":c>=.2?"#689f38":"#388e3c"},i=l=>Math.abs(l)*100;return n.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No diversification data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Correlation matrix showing diversification between asset types"}),e.jsx(v,{sx:{overflowX:"auto"},children:e.jsxs(v,{sx:{minWidth:400},children:[e.jsxs(M,{container:!0,spacing:.5,sx:{mb:1},children:[e.jsx(M,{item:!0,xs:2,children:e.jsx(v,{sx:{height:40}})}),n.map(l=>e.jsx(M,{item:!0,xs:2,children:e.jsx(v,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})},l))]}),n.map(l=>e.jsxs(M,{container:!0,spacing:.5,sx:{mb:.5},children:[e.jsx(M,{item:!0,xs:2,children:e.jsx(v,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})}),n.map(c=>{const d=a[l][c],u=l===c;return e.jsx(M,{item:!0,xs:2,children:e.jsx(as,{title:`${l} vs ${c}: ${ve(d)}`,arrow:!0,children:e.jsx(v,{sx:{height:40,backgroundColor:u?"#e0e0e0":o(d),opacity:u?.3:i(d)/100,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease","&:hover":{opacity:1,transform:"scale(1.05)"},borderRadius:1,border:"1px solid rgba(0,0,0,0.1)"},children:!u&&e.jsx(h,{variant:"caption",sx:{color:"white",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:ve(d)})})})},`${l}-${c}`)})]},l))]})}),e.jsxs(v,{sx:{mt:3,display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Correlation Level:"}),[{label:"High (0.8)",color:"#d32f2f"},{label:"Medium-High (0.6-0.8)",color:"#f57c00"},{label:"Medium (0.4-0.6)",color:"#fbc02d"},{label:"Low (0.2-0.4)",color:"#689f38"},{label:"Very Low (<0.2)",color:"#388e3c"}].map((l,c)=>e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(v,{sx:{width:16,height:16,backgroundColor:l.color,borderRadius:.5,border:"1px solid rgba(0,0,0,0.1)"}}),e.jsx(h,{variant:"caption",color:"text.secondary",children:l.label})]},c))]})]})},ip=({data:t,title:r="Asset Allocation Timeline"})=>{const n=["#1976d2","#dc004e","#9c27b0","#ff9800","#4caf50","#f44336","#00bcd4","#8bc34a"],s=t.length>0?Object.keys(t[0]).filter(i=>i!=="date"):[],a=({active:i,payload:l,label:c})=>i&&l&&l.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ps(c)}),l.map((d,u)=>e.jsxs(h,{variant:"body2",color:d.color,children:[d.dataKey,": ",ve(d.value)]},u))]}):null,o=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No timeline data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Historical allocation changes over time"}),e.jsx(v,{sx:{height:400},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"date",tickFormatter:o,tick:{fontSize:12}}),e.jsx(nr,{tickFormatter:i=>`${i}%`,tick:{fontSize:12},domain:[0,100]}),e.jsx(Rt,{content:e.jsx(a,{})}),e.jsx(ga,{}),s.map((i,l)=>e.jsx(Yr,{type:"monotone",dataKey:i,stroke:n[l%n.length],strokeWidth:2,dot:!1,activeDot:{r:4}},i))]})})})]})},lp=({data:t,baseCurrency:r,title:n="Cash Flow Analysis"})=>{const s=({active:d,payload:u,label:f})=>d&&u&&u.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ps(f)}),u.map((p,m)=>e.jsxs(h,{variant:"body2",color:p.color,children:[p.name,": ",X(p.value,r)]},m))]}):null,a=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=t.reduce((d,u)=>d+u.inflow,0),i=t.reduce((d,u)=>d+u.outflow,0),l=o-i,c=t.length>0?t[t.length-1].cumulativeBalance:0;return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No cash flow data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Portfolio cash flow analysis and balance tracking"}),e.jsxs(M,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(gt,{color:"success"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Inflow"})]}),e.jsx(h,{variant:"h6",color:"success.main",fontWeight:"bold",children:X(o,r)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Dt,{color:"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Outflow"})]}),e.jsx(h,{variant:"h6",color:"error.main",fontWeight:"bold",children:X(i,r)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(er,{color:l>=0?"success":"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Net Flow"})]}),e.jsx(h,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:X(l,r)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(er,{color:"primary"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Current Balance"})]}),e.jsx(h,{variant:"h6",color:"primary.main",fontWeight:"bold",children:X(c,r)})]})})})]}),e.jsx(v,{sx:{height:400,mb:3},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(yc,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(nr,{tickFormatter:d=>X(d,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(qn,{dataKey:"inflow",fill:"#4caf50",name:"Inflow"}),e.jsx(qn,{dataKey:"outflow",fill:"#f44336",name:"Outflow"}),e.jsx(Yr,{type:"monotone",dataKey:"netFlow",stroke:"#1976d2",strokeWidth:3,name:"Net Flow",dot:{fill:"#1976d2",strokeWidth:2,r:4}})]})})}),e.jsxs(v,{sx:{height:300},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Cumulative Balance"}),e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(vc,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(nr,{tickFormatter:d=>X(d,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(bc,{type:"monotone",dataKey:"cumulativeBalance",stroke:"#1976d2",fill:"#1976d2",fillOpacity:.3,strokeWidth:2})]})})]})]})},cp=({data:t,title:r="Benchmark Comparison",benchmarkName:n="Market Index"})=>{const s=({active:u,payload:f,label:p})=>{var m,g;return u&&f&&f.length?e.jsxs(nt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ps(p)}),f.map((b,P)=>e.jsxs(h,{variant:"body2",color:b.color,children:[b.name,": ",ve(b.value)]},P)),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Difference: ",ve(((g=(m=f[0])==null?void 0:m.payload)==null?void 0:g.difference)||0)]})]}):null},a=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=t.length>0?t[t.length-1].portfolio-t[0].portfolio:0,i=t.length>0?t[t.length-1].benchmark-t[0].benchmark:0,l=o-i,c=Math.sqrt(t.reduce((u,f)=>u+Math.pow(f.difference,2),0)/t.length),d=c>0?l/c:0;return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No benchmark data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Portfolio performance vs ",n]}),e.jsxs(M,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(gt,{color:"primary"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Portfolio Return"})]}),e.jsx(h,{variant:"h6",color:o>=0?"success.main":"error.main",fontWeight:"bold",children:ve(o)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(gt,{color:"info"}),e.jsxs(h,{variant:"subtitle2",color:"text.secondary",children:[n," Return"]})]}),e.jsx(h,{variant:"h6",color:i>=0?"success.main":"error.main",fontWeight:"bold",children:ve(i)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx($l,{color:l>=0?"success":"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Excess Return"})]}),e.jsx(h,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:ve(l)}),e.jsx(De,{label:l>=0?"OUTPERFORMING":"UNDERPERFORMING",color:l>=0?"success":"error",size:"small",sx:{mt:1}})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Dt,{color:"warning"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Tracking Error"})]}),e.jsx(h,{variant:"h6",color:"warning.main",fontWeight:"bold",children:ve(c)})]})})})]}),e.jsx(v,{sx:{height:400,mb:3},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(nr,{tickFormatter:u=>ve(u),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(s,{})}),e.jsx(ga,{}),e.jsx(Yr,{type:"monotone",dataKey:"portfolio",stroke:"#1976d2",strokeWidth:3,name:"Portfolio",dot:!1,activeDot:{r:6}}),e.jsx(Yr,{type:"monotone",dataKey:"benchmark",stroke:"#dc004e",strokeWidth:2,name:n,dot:!1,activeDot:{r:4},strokeDasharray:"5 5"}),e.jsx(Yo,{y:0,stroke:"#666",strokeDasharray:"2 2"})]})})}),e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Risk-Adjusted Metrics"}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Information Ratio:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:d.toFixed(2)})]}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Beta:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:(Math.random()*.8+.6).toFixed(2)})]}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Alpha:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:ve(l*.7)})]})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Performance Summary"}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:l>=0?`Your portfolio has outperformed the ${n} by ${ve(l)} over the selected period.`:`Your portfolio has underperformed the ${n} by ${ve(Math.abs(l))} over the selected period.`}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["The tracking error of ",ve(c)," indicates the level of deviation from the benchmark."]})]})})})]})]})},fo=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],dp=({data:t,baseCurrency:r,title:n="Asset Detail Summary"})=>{const s=t.map((o,i)=>({symbol:o.symbol,name:o.name,assetType:o.assetType,totalValue:o.totalValue,percentage:o.percentage,unrealizedPl:o.unrealizedPl,unrealizedPlPercentage:o.unrealizedPlPercentage,color:fo[i%fo.length]})),a=({active:o,payload:i})=>{if(o&&i&&i.length){const l=i[0].payload;return e.jsxs(v,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[l.symbol," - ",l.name]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Allocation: ",ve(l.percentage)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",X(l.totalValue,r)]}),e.jsxs(h,{variant:"body2",color:l.unrealizedPl>=0?"success.main":"error.main",children:["P&L: ",X(l.unrealizedPl,r)," (",ve(l.unrealizedPlPercentage),")"]})]})}return null};return!t||t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset detail data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Individual asset holdings with values and performance"}),e.jsx(v,{sx:{height:300,mb:3},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(qo,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(tr,{strokeDasharray:"3 3"}),e.jsx(rr,{dataKey:"symbol",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(nr,{tickFormatter:o=>ve(o),tick:{fontSize:12}}),e.jsx(Rt,{content:e.jsx(a,{})}),e.jsx(qn,{dataKey:"percentage",radius:[4,4,0,0],children:s.map((o,i)=>e.jsx(gn,{fill:o.color},`cell-${i}`))})]})})}),e.jsx(M,{container:!0,spacing:2,children:s.map((o,i)=>e.jsx(M,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(he,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(v,{sx:{width:16,height:16,backgroundColor:o.color,borderRadius:"50%",mr:1}}),e.jsx(h,{variant:"subtitle2",fontWeight:"bold",children:o.symbol})]}),e.jsx(De,{label:o.assetType,size:"small",color:"primary",variant:"outlined"})]}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:o.name}),e.jsx(h,{variant:"h6",color:"primary",fontWeight:"bold",gutterBottom:!0,children:ve(o.percentage)}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:X(o.totalValue,r)}),e.jsxs(v,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"P&L:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",color:o.unrealizedPl>=0?"success.main":"error.main",children:X(o.unrealizedPl,r)})]}),e.jsx(h,{variant:"caption",color:o.unrealizedPl>=0?"success.main":"error.main",sx:{display:"block",textAlign:"right"},children:ve(o.unrealizedPlPercentage)})]})})},i))}),e.jsx(v,{sx:{mt:3,p:3,backgroundColor:"#f5f5f5",borderRadius:2},children:e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:t.length})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:X(t.reduce((o,i)=>o+i.totalValue,0),r)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),e.jsx(h,{variant:"h5",fontWeight:"bold",color:t.reduce((o,i)=>o+i.unrealizedPl,0)>=0?"success.main":"error.main",children:X(t.reduce((o,i)=>o+i.unrealizedPl,0),r)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset Types"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:new Set(t.map(o=>o.assetType)).size})]})})]})})]})};function up(t){return typeof t=="string"}function hp(t,r,n){return t===void 0||up(t)?r:{...r,ownerState:{...r.ownerState,...n}}}function mp(t,r=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(s=>s.match(/^on[A-Z]/)&&typeof t[s]=="function"&&!r.includes(s)).forEach(s=>{n[s]=t[s]}),n}function Da(t,r,n){return typeof t=="function"?t(r,n):t}function fp(...t){const r=x.useRef(void 0),n=x.useCallback(s=>{const a=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(s);return typeof l=="function"?l:()=>{i(null)}}return o.current=s,()=>{o.current=null}});return()=>{a.forEach(o=>o==null?void 0:o())}},t);return x.useMemo(()=>t.every(s=>s==null)?null:s=>{r.current&&(r.current(),r.current=void 0),s!=null&&(r.current=n(s))},t)}function po(t){if(t===void 0)return{};const r={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{r[n]=t[n]}),r}function pp(t){const{getSlotProps:r,additionalProps:n,externalSlotProps:s,externalForwardedProps:a,className:o}=t;if(!r){const m=ut(n==null?void 0:n.className,o,a==null?void 0:a.className,s==null?void 0:s.className),g={...n==null?void 0:n.style,...a==null?void 0:a.style,...s==null?void 0:s.style},b={...n,...a,...s};return m.length>0&&(b.className=m),Object.keys(g).length>0&&(b.style=g),{props:b,internalRef:void 0}}const i=mp({...a,...s}),l=po(s),c=po(a),d=r(i),u=ut(d==null?void 0:d.className,n==null?void 0:n.className,o,a==null?void 0:a.className,s==null?void 0:s.className),f={...d==null?void 0:d.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...s==null?void 0:s.style},p={...d,...n,...c,...l};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function it(t){var f;const{elementType:r,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:a=!1,...o}=t,i=a?{}:Da(n,s),{props:l,internalRef:c}=pp({...o,externalSlotProps:i}),d=fp(c,i==null?void 0:i.ref,(f=t.additionalProps)==null?void 0:f.ref);return hp(r,{...l,ref:d},s)}const an=(t,r)=>t.length!==r.length?!1:r.every(n=>t.includes(n)),xp=({openTo:t,defaultOpenTo:r,views:n,defaultViews:s})=>{const a=n??s;let o;if(t!=null)o=t;else if(a.includes(r))o=r;else if(a.length>0)o=a[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:a,openTo:o}},ts=(t,r,n)=>{let s=r;return s=t.setHours(s,t.getHours(n)),s=t.setMinutes(s,t.getMinutes(n)),s=t.setSeconds(s,t.getSeconds(n)),s},hn=({date:t,disableFuture:r,disablePast:n,maxDate:s,minDate:a,isDateDisabled:o,utils:i,timezone:l})=>{const c=ts(i,i.dateWithTimezone(void 0,l),t);n&&i.isBefore(a,c)&&(a=c),r&&i.isAfter(s,c)&&(s=c);let d=t,u=t;for(i.isBefore(t,a)&&(d=a,u=null),i.isAfter(t,s)&&(u&&(u=s),d=null);d||u;){if(d&&i.isAfter(d,s)&&(d=null),u&&i.isBefore(u,a)&&(u=null),d){if(!o(d))return d;d=i.addDays(d,1)}if(u){if(!o(u))return u;u=i.addDays(u,-1)}}return null},gp=(t,r)=>r==null||!t.isValid(r)?null:r,kt=(t,r,n)=>r==null||!t.isValid(r)?n:r,yp=(t,r,n)=>!t.isValid(r)&&r!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(r,n),ka=(t,r)=>{const s=[t.startOfYear(r)];for(;s.length<12;){const a=s[s.length-1];s.push(t.addMonths(a,1))}return s},Qi=(t,r,n)=>n==="date"?t.startOfDay(t.dateWithTimezone(void 0,r)):t.dateWithTimezone(void 0,r),vp=["year","month","day"],xo=t=>vp.includes(t),Aa=(t,{format:r,views:n},s)=>{if(r!=null)return r;const a=t.formats;return an(n,["year"])?a.year:an(n,["month"])?a.month:an(n,["day"])?a.dayOfMonth:an(n,["month","year"])?`${a.month} ${a.year}`:an(n,["day","month"])?`${a.month} ${a.dayOfMonth}`:s?/en/.test(t.getCurrentLocaleCode())?a.normalDateWithWeekday:a.normalDate:a.keyboardDate},bp=(t,r)=>{const n=t.startOfWeek(r);return[0,1,2,3,4,5,6].map(s=>t.addDays(n,s))},jp=["hours","minutes","seconds"],wp=t=>jp.includes(t),go=(t,r)=>r.getHours(t)*3600+r.getMinutes(t)*60+r.getSeconds(t),Cp=(t,r)=>(n,s)=>t?r.isAfter(n,s):go(n,r)>go(s,r),Lt={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},Pp=t=>Math.max(...t.map(r=>{var n;return(n=Lt[r.type])!=null?n:1})),on=(t,r,n)=>{if(r===Lt.year)return t.startOfYear(n);if(r===Lt.month)return t.startOfMonth(n);if(r===Lt.day)return t.startOfDay(n);let s=n;return r<Lt.minutes&&(s=t.setMinutes(s,0)),r<Lt.seconds&&(s=t.setSeconds(s,0)),r<Lt.milliseconds&&(s=t.setMilliseconds(s,0)),s},Tp=({props:t,utils:r,granularity:n,timezone:s,getTodayDate:a})=>{var o;let i=a?a():on(r,n,Qi(r,s));t.minDate!=null&&r.isAfterDay(t.minDate,i)&&(i=on(r,n,t.minDate)),t.maxDate!=null&&r.isBeforeDay(t.maxDate,i)&&(i=on(r,n,t.maxDate));const l=Cp((o=t.disableIgnoringDatePartForTimeValidation)!=null?o:!1,r);return t.minTime!=null&&l(t.minTime,i)&&(i=on(r,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:ts(r,i,t.minTime))),t.maxTime!=null&&l(i,t.maxTime)&&(i=on(r,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:ts(r,i,t.maxTime))),i},Ki=(t,r)=>{const n=t.formatTokenMap[r];if(n==null)throw new Error([`MUI: The token "${r}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},Sp=t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},Ss=(t,r,n)=>{const s=[],a=t.dateWithTimezone(void 0,r),o=t.startOfWeek(a),i=t.endOfWeek(a);let l=o;for(;t.isBefore(l,i);)s.push(l),l=t.addDays(l,1);return s.map(c=>t.formatByString(c,n))},Gi=(t,r,n,s)=>{switch(n){case"month":return ka(t,t.dateWithTimezone(void 0,r)).map(a=>t.formatByString(a,s));case"weekDay":return Ss(t,r,s);case"meridiem":{const a=t.dateWithTimezone(void 0,r);return[t.startOfDay(a),t.endOfDay(a)].map(o=>t.formatByString(o,s))}default:return[]}},Xi=(t,r,n)=>{let s=r;for(s=Number(s).toString();s.length<n;)s=`0${s}`;return s},Zi=(t,r,n,s,a)=>{if(a.type==="day"&&a.contentType==="digit-with-letter"){const i=t.setDate(s.longestMonth,n);return t.formatByString(i,a.format)}const o=n.toString();return a.hasLeadingZerosInInput?Xi(t,o,a.maxLength):o},Dp=(t,r,n,s,a,o,i)=>{const l=Sp(s),c=s==="Home",d=s==="End",u=n.value===""||c||d,f=()=>{const m=a[n.type]({currentDate:o,format:n.format,contentType:n.contentType}),g=w=>Zi(t,r,w,m,n),b=n.type==="minutes"&&i!=null&&i.minutesStep?i.minutesStep:1;let j=parseInt(n.value,10)+l*b;if(u){if(n.type==="year"&&!d&&!c)return t.formatByString(t.dateWithTimezone(void 0,r),n.format);l>0||c?j=m.minimum:j=m.maximum}return j%b!==0&&((l<0||c)&&(j+=b-(b+j)%b),(l>0||d)&&(j-=j%b)),j>m.maximum?g(m.minimum+(j-m.maximum-1)%(m.maximum-m.minimum+1)):j<m.minimum?g(m.maximum-(m.minimum-j-1)%(m.maximum-m.minimum+1)):g(j)},p=()=>{const m=Gi(t,r,n.type,n.format);if(m.length===0)return n.value;if(u)return l>0||c?m[0]:m[m.length-1];const b=(m.indexOf(n.value)+m.length+l)%m.length;return m[b]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?f():p()},Na=(t,r)=>{let n=t.value||t.placeholder;const s=r==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return r==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(n=Number(n).toString()),["input-rtl","input-ltr"].includes(r)&&t.contentType==="digit"&&!s&&n.length===1&&(n=`${n}`),r==="input-rtl"&&(n=`${n}`),n},Vr=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),Ji=(t,r)=>{let n=0,s=r?1:0;const a=[];for(let o=0;o<t.length;o+=1){const i=t[o],l=Na(i,r?"input-rtl":"input-ltr"),c=`${i.startSeparator}${l}${i.endSeparator}`,d=Vr(c).length,u=c.length,f=Vr(l),p=s+l.indexOf(f[0])+i.startSeparator.length,m=p+f.length;a.push(V({},i,{start:n,end:n+d,startInInput:p,endInInput:m})),n+=d,s+=u}return a},kp=(t,r,n,s,a)=>{switch(s.type){case"year":return n.fieldYearPlaceholder({digitAmount:t.formatByString(t.dateWithTimezone(void 0,r),a).length,format:a});case"month":return n.fieldMonthPlaceholder({contentType:s.contentType,format:a});case"day":return n.fieldDayPlaceholder({format:a});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:s.contentType,format:a});case"hours":return n.fieldHoursPlaceholder({format:a});case"minutes":return n.fieldMinutesPlaceholder({format:a});case"seconds":return n.fieldSecondsPlaceholder({format:a});case"meridiem":return n.fieldMeridiemPlaceholder({format:a});default:return a}},yo=(t,r,n,s)=>t.formatByString(t.parse(r,n),s),el=(t,r,n)=>t.formatByString(t.dateWithTimezone(void 0,r),n).length===4,tl=(t,r,n,s,a)=>{if(n!=="digit")return!1;const o=t.dateWithTimezone(void 0,r);switch(s){case"year":return el(t,r,a)?t.formatByString(t.setYear(o,1),a)==="0001":t.formatByString(t.setYear(o,2001),a)==="01";case"month":return t.formatByString(t.startOfYear(o),a).length>1;case"day":return t.formatByString(t.startOfMonth(o),a).length>1;case"weekDay":return t.formatByString(t.startOfWeek(o),a).length>1;case"hours":return t.formatByString(t.setHours(o,1),a).length>1;case"minutes":return t.formatByString(t.setMinutes(o,1),a).length>1;case"seconds":return t.formatByString(t.setSeconds(o,1),a).length>1;default:throw new Error("Invalid section type")}},Ap=(t,r)=>{const n=[],{start:s,end:a}=t.escapedCharacters,o=new RegExp(`(\\${s}[^\\${a}]*\\${a})+`,"g");let i=null;for(;i=o.exec(r);)n.push({start:i.index,end:o.lastIndex-1});return n},vo=(t,r,n,s,a,o,i,l)=>{let c="";const d=[],u=t.date(),f=S=>{if(S==="")return null;const y=Ki(t,S),A=tl(t,r,y.contentType,y.type,S),O=i?A:y.contentType==="digit",N=a!=null&&t.isValid(a);let I=N?t.formatByString(a,S):"",E=null;if(O)if(A)E=I===""?t.formatByString(u,S).length:I.length;else{if(y.maxLength==null)throw new Error(`MUI: The token ${S} should have a 'maxDigitNumber' property on it's adapter`);E=y.maxLength,N&&(I=Xi(t,I,E))}return d.push(V({},y,{format:S,maxLength:E,value:I,placeholder:kp(t,r,n,y,S),hasLeadingZeros:A,hasLeadingZerosInFormat:A,hasLeadingZerosInInput:O,startSeparator:d.length===0?c:"",endSeparator:"",modified:!1})),null};let p=10,m=s,g=t.expandFormat(s);for(;g!==m;)if(m=g,g=t.expandFormat(m),p-=1,p<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const b=g,P=Ap(t,b),j=new RegExp(`^(${Object.keys(t.formatTokenMap).sort((S,y)=>y.length-S.length).join("|")})`,"g");let w="";for(let S=0;S<b.length;S+=1){const y=P.find(E=>E.start<=S&&E.end>=S),A=b[S],O=y!=null,N=`${w}${b.slice(S)}`,I=j.test(N);!O&&A.match(/([A-Za-z]+)/)&&I?(w=N.slice(0,j.lastIndex),S+=j.lastIndex-1):O&&(y==null?void 0:y.start)===S||(y==null?void 0:y.end)===S||(f(w),w="",d.length===0?c+=A:d[d.length-1].endSeparator+=A)}return f(w),d.map(S=>{const y=A=>{let O=A;return l&&O!==null&&O.includes(" ")&&(O=`${O}`),o==="spacious"&&["/",".","-"].includes(O)&&(O=` ${O} `),O};return S.startSeparator=y(S.startSeparator),S.endSeparator=y(S.endSeparator),S})},Np=(t,r)=>{const n=r.some(l=>l.type==="day"),s=[],a=[];for(let l=0;l<r.length;l+=1){const c=r[l];n&&c.type==="weekDay"||(s.push(c.format),a.push(Na(c,"non-input")))}const o=s.join(" "),i=a.join(" ");return t.parse(i,o)},Mp=(t,r)=>{const s=t.map(a=>{const o=Na(a,r?"input-rtl":"input-ltr");return`${a.startSeparator}${o}${a.endSeparator}`}).join("");return r?`${s}`:s},Rp=(t,r)=>{const n=t.dateWithTimezone(void 0,r),s=t.endOfYear(n),a=t.endOfDay(n),{maxDaysInMonth:o,longestMonth:i}=ka(t,n).reduce((l,c)=>{const d=t.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:el(t,r,l)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(s)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&t.isValid(l)?t.getDaysInMonth(l):o,longestMonth:i}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=Ss(t,r,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=t.getHours(a);return t.formatByString(t.endOfDay(n),l)!==c.toString()?{minimum:1,maximum:Number(t.formatByString(t.startOfDay(n),l))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:0})}},Ep=(t,r,n,s,a)=>{switch(n.type){case"year":return t.setYear(a,t.getYear(s));case"month":return t.setMonth(a,t.getMonth(s));case"weekDay":{const o=Ss(t,r,n.format),i=t.formatByString(s,n.format),l=o.indexOf(i),d=o.indexOf(n.value)-l;return t.addDays(s,d)}case"day":return t.setDate(a,t.getDate(s));case"meridiem":{const o=t.getHours(s)<12,i=t.getHours(a);return o&&i>=12?t.addHours(a,-12):!o&&i<12?t.addHours(a,12):a}case"hours":return t.setHours(a,t.getHours(s));case"minutes":return t.setMinutes(a,t.getMinutes(s));case"seconds":return t.setSeconds(a,t.getSeconds(s));default:return a}},bo={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},jo=(t,r,n,s,a,o)=>[...s].sort((i,l)=>bo[i.type]-bo[l.type]).reduce((i,l)=>!o||l.modified?Ep(t,r,l,n,i):i,a),Ip=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,Op=(t,r)=>{const n={};if(!r)return t.forEach((c,d)=>{const u=d===0?null:d-1,f=d===t.length-1?null:d+1;n[d]={leftIndex:u,rightIndex:f}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const s={},a={};let o=0,i=0,l=t.length-1;for(;l>=0;){i=t.findIndex((c,d)=>{var u;return d>=o&&((u=c.endSeparator)==null?void 0:u.includes(" "))&&c.endSeparator!==" / "}),i===-1&&(i=t.length-1);for(let c=i;c>=o;c-=1)a[c]=l,s[l]=c,l-=1;o=i+1}return t.forEach((c,d)=>{const u=a[d],f=u===0?null:s[u-1],p=u===t.length-1?null:s[u+1];n[d]={leftIndex:f,rightIndex:p}}),{neighbors:n,startIndex:s[0],endIndex:s[t.length-1]}},_p=["value","referenceDate"],ar={emptyValue:null,getTodayValue:Qi,getInitialReferenceValue:t=>{let{value:r,referenceDate:n}=t,s=Le(t,_p);return r!=null&&s.utils.isValid(r)?r:n??Tp(s)},cleanValue:gp,areValuesEqual:yp,isSameError:(t,r)=>t===r,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,r)=>r==null||!t.isValid(r)?null:t.getTimezone(r),setTimezone:(t,r,n)=>n==null?null:t.setTimezone(n,r)},Fp={updateReferenceValue:(t,r,n)=>r==null||!t.isValid(r)?n:r,getSectionsFromValue:(t,r,n,s,a)=>!t.isValid(r)&&!!n?n:Ji(a(r),s),getValueStrFromSections:Mp,getActiveDateManager:(t,r)=>({date:r.value,referenceDate:r.referenceValue,getSections:n=>n,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:n==null||!t.isValid(n)?r.referenceValue:n})}),parseValueStr:(t,r,n)=>n(t.trim(),r)},Lp=["localeText"],la=x.createContext(null),Kt=function(r){var n;const{localeText:s}=r,a=Le(r,Lp),{utils:o,localeText:i}=(n=x.useContext(la))!=null?n:{utils:void 0,localeText:void 0},l=ct({props:a,name:"MuiLocalizationProvider"}),{children:c,dateAdapter:d,dateFormats:u,dateLibInstance:f,adapterLocale:p,localeText:m}=l,g=x.useMemo(()=>V({},m,i,s),[m,i,s]),b=x.useMemo(()=>{if(!d)return o||null;const w=new d({locale:p,formats:u,instance:f});if(!w.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return w},[d,p,u,f,o]),P=x.useMemo(()=>b?{minDate:b.date("1900-01-01T00:00:00.000"),maxDate:b.date("2099-12-31T00:00:00.000")}:null,[b]),j=x.useMemo(()=>({utils:b,defaultDates:P,localeText:g}),[P,b,g]);return e.jsx(la.Provider,{value:j,children:c})},Vp=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:V({},t)}}}}),rl={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(t,r,n)=>`Select ${t}. ${r===null?"No time selected":`Selected time is ${n.format(r,"fullTime")}`}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:(t,r)=>t!==null&&r.isValid(t)?`Choose date, selected date is ${r.format(t,"fullDate")}`:"Choose date",openTimePickerDialogue:(t,r)=>t!==null&&r.isValid(t)?`Choose time, selected time is ${r.format(t,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},$p=rl;Vp(rl);const Or=()=>{const t=x.useContext(la);if(t===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const r=x.useMemo(()=>V({},$p,t.localeText),[t.localeText]);return x.useMemo(()=>V({},t,{localeText:r}),[t,r])},Ye=()=>Or().utils,Pn=()=>Or().defaultDates,jr=()=>Or().localeText,Ds=t=>{const r=Ye(),n=x.useRef();return n.current===void 0&&(n.current=r.dateWithTimezone(void 0,t)),n.current};function Bp(t){return yt("MuiPickersToolbar",t)}vt("MuiPickersToolbar",["root","content"]);const Up=t=>{const{classes:r,isLandscape:n}=t;return ft({root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]},Bp,r)},Wp=ke("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>V({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},r.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),Hp=ke("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(t,r)=>r.content})(({ownerState:t})=>{var r;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?(r=t.landscapeDirection)!=null?r:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}}),zp=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiPickersToolbar"}),{children:a,className:o,toolbarTitle:i,hidden:l,titleId:c}=s,d=s,u=Up(d);return l?null:e.jsxs(Wp,{ref:n,className:ut(u.root,o),ownerState:d,children:[e.jsx(h,{color:"text.secondary",variant:"overline",id:c,children:i}),e.jsx(Hp,{className:u.content,ownerState:d,children:a})]})});function Yp(t){return yt("MuiDatePickerToolbar",t)}vt("MuiDatePickerToolbar",["root","title"]);const qp=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Qp=t=>{const{classes:r}=t;return ft({root:["root"],title:["title"]},Yp,r)},Kp=ke(zp,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),Gp=ke(h,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(t,r)=>r.title})(({ownerState:t})=>V({},t.isLandscape&&{margin:"auto 16px auto auto"})),Xp=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiDatePickerToolbar"}),{value:a,isLandscape:o,toolbarFormat:i,toolbarPlaceholder:l="",views:c,className:d}=s,u=Le(s,qp),f=Ye(),p=jr(),m=Qp(s),g=x.useMemo(()=>{if(!a)return l;const P=Aa(f,{format:i,views:c},!0);return f.formatByString(a,P)},[a,i,l,f,c]),b=s;return e.jsx(Kp,V({ref:n,toolbarTitle:p.datePickerToolbarTitle,isLandscape:o,className:ut(m.root,d)},u,{children:e.jsx(Gp,{variant:"h4",align:o?"left":"center",ownerState:b,className:m.title,children:g})}))}),nl=t=>{if(t!==void 0)return Object.keys(t).reduce((r,n)=>V({},r,{[`${n.slice(0,1).toLowerCase()}${n.slice(1)}`]:t[n]}),{})};function sl(t,r){var n,s,a,o;const i=Ye(),l=Pn(),c=ct({props:t,name:r}),d=x.useMemo(()=>{var f;return((f=c.localeText)==null?void 0:f.toolbarTitle)==null?c.localeText:V({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})},[c.localeText]),u=(n=c.slots)!=null?n:nl(c.components);return V({},c,{localeText:d},xp({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(s=c.disableFuture)!=null?s:!1,disablePast:(a=c.disablePast)!=null?a:!1,minDate:kt(i,c.minDate,l.minDate),maxDate:kt(i,c.maxDate,l.maxDate),slots:V({toolbar:Xp},u),slotProps:(o=c.slotProps)!=null?o:c.componentsProps})}const Zp=vr(e.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Jp=vr(e.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),ex=vr(e.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),tx=vr(e.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");vr(e.jsxs(x.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");vr(e.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");vr(e.jsxs(x.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const rx=vr(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function nx(t){return yt("MuiPickersArrowSwitcher",t)}vt("MuiPickersArrowSwitcher",["root","spacer","button"]);const sx=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],ax=["ownerState"],ox=["ownerState"],ix=ke("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex"}),lx=ke("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(t,r)=>r.spacer})(({theme:t})=>({width:t.spacing(3)})),wo=ke(Et,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(t,r)=>r.button})(({ownerState:t})=>V({},t.hidden&&{visibility:"hidden"})),cx=t=>{const{classes:r}=t;return ft({root:["root"],spacer:["spacer"],button:["button"]},nx,r)},dx=x.forwardRef(function(r,n){var s,a,o,i;const c=Ir().direction==="rtl",d=ct({props:r,name:"MuiPickersArrowSwitcher"}),{children:u,className:f,slots:p,slotProps:m,isNextDisabled:g,isNextHidden:b,onGoToNext:P,nextLabel:j,isPreviousDisabled:w,isPreviousHidden:S,onGoToPrevious:y,previousLabel:A}=d,O=Le(d,sx),N=d,I=cx(N),E={isDisabled:g,isHidden:b,goTo:P,label:j},k={isDisabled:w,isHidden:S,goTo:y,label:A},C=(s=p==null?void 0:p.previousIconButton)!=null?s:wo,T=it({elementType:C,externalSlotProps:m==null?void 0:m.previousIconButton,additionalProps:{size:"medium",title:k.label,"aria-label":k.label,disabled:k.isDisabled,edge:"end",onClick:k.goTo},ownerState:V({},N,{hidden:k.isHidden}),className:I.button}),F=(a=p==null?void 0:p.nextIconButton)!=null?a:wo,_=it({elementType:F,externalSlotProps:m==null?void 0:m.nextIconButton,additionalProps:{size:"medium",title:E.label,"aria-label":E.label,disabled:E.isDisabled,edge:"start",onClick:E.goTo},ownerState:V({},N,{hidden:E.isHidden}),className:I.button}),R=(o=p==null?void 0:p.leftArrowIcon)!=null?o:Jp,q=it({elementType:R,externalSlotProps:m==null?void 0:m.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),B=Le(q,ax),$=(i=p==null?void 0:p.rightArrowIcon)!=null?i:ex,H=it({elementType:$,externalSlotProps:m==null?void 0:m.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),Q=Le(H,ox);return e.jsxs(ix,V({ref:n,className:ut(I.root,f),ownerState:N},O,{children:[e.jsx(C,V({},T,{children:c?e.jsx($,V({},Q)):e.jsx(R,V({},B))})),u?e.jsx(h,{variant:"subtitle1",component:"span",children:u}):e.jsx(lx,{className:I.spacer,ownerState:N}),e.jsx(F,V({},_,{children:c?e.jsx(R,V({},B)):e.jsx($,V({},Q))}))]}))}),fn=36,ks=2,As=320,ux=280,Ma=334,hx=ke(or)({[`& .${Fa.container}`]:{outline:0},[`& .${Fa.paper}`]:{outline:0,minWidth:As}}),mx=ke(ir)({"&:first-of-type":{padding:0}});function fx(t){var r,n;const{children:s,onDismiss:a,open:o,slots:i,slotProps:l}=t,c=(r=i==null?void 0:i.dialog)!=null?r:hx,d=(n=i==null?void 0:i.mobileTransition)!=null?n:os;return e.jsx(c,V({open:o,onClose:a},l==null?void 0:l.dialog,{TransitionComponent:d,TransitionProps:l==null?void 0:l.mobileTransition,PaperComponent:i==null?void 0:i.mobilePaper,PaperProps:l==null?void 0:l.mobilePaper,children:e.jsx(mx,{children:s})}))}function px(t){return yt("MuiPickersPopper",t)}vt("MuiPickersPopper",["root","paper"]);function xx(t,r){return Array.isArray(r)?r.every(n=>t.indexOf(n)!==-1):t.indexOf(r)!==-1}const gx=(t,r)=>n=>{(n.key==="Enter"||n.key===" ")&&(t(n),n.preventDefault(),n.stopPropagation())},rs=(t=document)=>{const r=t.activeElement;return r?r.shadowRoot?rs(r.shadowRoot):r:null},yx="@media (pointer: fine)",vx="@media (prefers-reduced-motion: reduce)",Br=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),Co=Br&&Br[1]?parseInt(Br[1],10):null,Po=Br&&Br[2]?parseInt(Br[2],10):null,bx=Co&&Co<10||Po&&Po<13||!1,al=()=>ua(vx,{defaultMatches:!1})||bx,jx=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],wx=t=>{const{classes:r}=t;return ft({root:["root"],paper:["paper"]},px,r)},Cx=ke(Wl,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>({zIndex:t.zIndex.modal})),Px=ke(nt,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(t,r)=>r.paper})(({ownerState:t})=>V({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"}));function Tx(t,r){return r.documentElement.clientWidth<t.clientX||r.documentElement.clientHeight<t.clientY}function Sx(t,r){const n=x.useRef(!1),s=x.useRef(!1),a=x.useRef(null),o=x.useRef(!1);x.useEffect(()=>{if(!t)return;function c(){o.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),o.current=!1}},[t]);const i=ye(c=>{if(!o.current)return;const d=s.current;s.current=!1;const u=_s(a.current);if(!a.current||"clientX"in c&&Tx(c,u))return;if(n.current){n.current=!1;return}let f;c.composedPath?f=c.composedPath().indexOf(a.current)>-1:f=!u.documentElement.contains(c.target)||a.current.contains(c.target),!f&&!d&&r(c)}),l=()=>{s.current=!0};return x.useEffect(()=>{if(t){const c=_s(a.current),d=()=>{n.current=!0};return c.addEventListener("touchstart",i),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",i),c.removeEventListener("touchmove",d)}}},[t,i]),x.useEffect(()=>{if(t){const c=_s(a.current);return c.addEventListener("click",i),()=>{c.removeEventListener("click",i),s.current=!1}}},[t,i]),[a,l,l]}const Dx=x.forwardRef((t,r)=>{const{PaperComponent:n,popperPlacement:s,ownerState:a,children:o,paperSlotProps:i,paperClasses:l,onPaperClick:c,onPaperTouchStart:d}=t,u=Le(t,jx),f=V({},a,{placement:s}),p=it({elementType:n,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:r},className:l,ownerState:f});return e.jsx(n,V({},u,p,{onClick:m=>{var g;c(m),(g=p.onClick)==null||g.call(p,m)},onTouchStart:m=>{var g;d(m),(g=p.onTouchStart)==null||g.call(p,m)},ownerState:f,children:o}))});function kx(t){var r,n,s,a;const o=ct({props:t,name:"MuiPickersPopper"}),{anchorEl:i,children:l,containerRef:c=null,shouldRestoreFocus:d,onBlur:u,onDismiss:f,open:p,role:m,placement:g,slots:b,slotProps:P,reduceAnimations:j}=o;x.useEffect(()=>{function H(Q){p&&(Q.key==="Escape"||Q.key==="Esc")&&f()}return document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}},[f,p]);const w=x.useRef(null);x.useEffect(()=>{m==="tooltip"||d&&!d()||(p?w.current=rs(document):w.current&&w.current instanceof HTMLElement&&setTimeout(()=>{w.current instanceof HTMLElement&&w.current.focus()}))},[p,m,d]);const[S,y,A]=Sx(p,u??f),O=x.useRef(null),N=Mr(O,c),I=Mr(N,S),E=o,k=wx(E),C=al(),T=j??C,F=H=>{H.key==="Escape"&&(H.stopPropagation(),f())},_=((r=b==null?void 0:b.desktopTransition)!=null?r:T)?os:Bl,R=(n=b==null?void 0:b.desktopTrapFocus)!=null?n:Ul,q=(s=b==null?void 0:b.desktopPaper)!=null?s:Px,B=(a=b==null?void 0:b.popper)!=null?a:Cx,$=it({elementType:B,externalSlotProps:P==null?void 0:P.popper,additionalProps:{transition:!0,role:m,open:p,anchorEl:i,placement:g,onKeyDown:F},className:k.root,ownerState:o});return e.jsx(B,V({},$,{children:({TransitionProps:H,placement:Q})=>e.jsx(R,V({open:p,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:m==="tooltip",isEnabled:()=>!0},P==null?void 0:P.desktopTrapFocus,{children:e.jsx(_,V({},H,P==null?void 0:P.desktopTransition,{children:e.jsx(Dx,{PaperComponent:q,ownerState:E,popperPlacement:Q,ref:I,onPaperClick:y,onPaperTouchStart:A,paperClasses:k.paper,paperSlotProps:P==null?void 0:P.desktopPaper,children:l})}))}))}))}const Ra=({timezone:t,value:r,defaultValue:n,onChange:s,valueManager:a})=>{var o,i;const l=Ye(),c=x.useRef(n),d=(o=r??c.current)!=null?o:a.emptyValue,u=x.useMemo(()=>a.getTimezone(l,d),[l,a,d]),f=ye(b=>u==null?b:a.setTimezone(l,u,b)),p=(i=t??u)!=null?i:"default",m=x.useMemo(()=>a.setTimezone(l,p,d),[a,l,p,d]),g=ye((b,...P)=>{const j=f(b);s==null||s(j,...P)});return{value:m,handleValueChange:g,timezone:p}},Ea=({name:t,timezone:r,value:n,defaultValue:s,onChange:a,valueManager:o})=>{const[i,l]=gr({name:t,state:"value",controlled:n,default:s??o.emptyValue}),c=ye((d,...u)=>{l(d),a==null||a(d,...u)});return Ra({timezone:r,value:i,defaultValue:void 0,onChange:c,valueManager:o})};function ol(t,r,n,s){const{value:a,onError:o}=t,i=Or(),l=x.useRef(s),c=r({adapter:i,value:a,props:t});return x.useEffect(()=>{o&&!n(c,l.current)&&o(c,a),l.current=c},[n,o,l,c,a]),c}const Ax=t=>{const r=Ye(),n=jr(),s=Or(),o=Ir().direction==="rtl",{valueManager:i,fieldValueManager:l,validator:c,internalProps:d,internalProps:{value:u,defaultValue:f,referenceDate:p,onChange:m,format:g,formatDensity:b="dense",selectedSections:P,onSelectedSectionsChange:j,shouldRespectLeadingZeros:w=!1,timezone:S}}=t,{timezone:y,value:A,handleValueChange:O}=Ra({timezone:S,value:u,defaultValue:f,onChange:m,valueManager:i}),N=x.useMemo(()=>Rp(r,y),[r,y]),I=x.useCallback((te,D=null)=>l.getSectionsFromValue(r,te,D,o,ee=>vo(r,y,n,g,ee,b,w,o)),[l,g,n,o,w,r,b,y]),E=x.useMemo(()=>l.getValueStrFromSections(I(i.emptyValue),o),[l,I,i.emptyValue,o]),[k,C]=x.useState(()=>{const te=I(A),D={sections:te,value:A,referenceValue:i.emptyValue,tempValueStrAndroid:null},ee=Pp(te),pe=i.getInitialReferenceValue({referenceDate:p,value:A,utils:r,props:d,granularity:ee,timezone:y});return V({},D,{referenceValue:pe})}),[T,F]=gr({controlled:P,default:null,name:"useField",state:"selectedSectionIndexes"}),_=te=>{F(te),j==null||j(te),C(D=>V({},D,{selectedSectionQuery:null}))},R=x.useMemo(()=>{if(T==null)return null;if(T==="all")return{startIndex:0,endIndex:k.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof T=="number")return{startIndex:T,endIndex:T};if(typeof T=="string"){const te=k.sections.findIndex(D=>D.type===T);return{startIndex:te,endIndex:te}}return T},[T,k.sections]),q=({value:te,referenceValue:D,sections:ee})=>{if(C(U=>V({},U,{sections:ee,value:te,referenceValue:D,tempValueStrAndroid:null})),i.areValuesEqual(r,k.value,te))return;const pe={validationError:c({adapter:s,value:te,props:V({},d,{value:te,timezone:y})})};O(te,pe)},B=(te,D)=>{const ee=[...k.sections];return ee[te]=V({},ee[te],{value:D,modified:!0}),Ji(ee,o)},$=()=>{q({value:i.emptyValue,referenceValue:k.referenceValue,sections:I(i.emptyValue)})},H=()=>{if(R==null)return;const te=k.sections[R.startIndex],D=l.getActiveDateManager(r,k,te),pe=D.getSections(k.sections).filter(je=>je.value!=="").length===(te.value===""?0:1),U=B(R.startIndex,""),Z=pe?null:r.date(new Date("")),ce=D.getNewValuesFromNewActiveDate(Z);(Z!=null&&!r.isValid(Z))!=(D.date!=null&&!r.isValid(D.date))?q(V({},ce,{sections:U})):C(je=>V({},je,ce,{sections:U,tempValueStrAndroid:null}))},Q=te=>{const D=(U,Z)=>{const ce=r.parse(U,g);if(ce==null||!r.isValid(ce))return null;const je=vo(r,y,n,g,ce,b,w,o);return jo(r,y,ce,je,Z,!1)},ee=l.parseValueStr(te,k.referenceValue,D),pe=l.updateReferenceValue(r,ee,k.referenceValue);q({value:ee,referenceValue:pe,sections:I(ee,k.sections)})},J=({activeSection:te,newSectionValue:D,shouldGoToNextSection:ee})=>{ee&&R&&R.startIndex<k.sections.length-1?_(R.startIndex+1):R&&R.startIndex!==R.endIndex&&_(R.startIndex);const pe=l.getActiveDateManager(r,k,te),U=B(R.startIndex,D),Z=pe.getSections(U),ce=Np(r,Z);let je,me;if(ce!=null&&r.isValid(ce)){const ge=jo(r,y,ce,Z,pe.referenceDate,!0);je=pe.getNewValuesFromNewActiveDate(ge),me=!0}else je=pe.getNewValuesFromNewActiveDate(ce),me=(ce!=null&&!r.isValid(ce))!=(pe.date!=null&&!r.isValid(pe.date));return me?q(V({},je,{sections:U})):C(ge=>V({},ge,je,{sections:U,tempValueStrAndroid:null}))},re=te=>C(D=>V({},D,{tempValueStrAndroid:te}));return x.useEffect(()=>{const te=I(k.value);C(D=>V({},D,{sections:te}))},[g,r.locale]),x.useEffect(()=>{let te=!1;i.areValuesEqual(r,k.value,A)?te=i.getTimezone(r,k.value)!==i.getTimezone(r,A):te=!0,te&&C(D=>V({},D,{value:A,referenceValue:l.updateReferenceValue(r,A,D.referenceValue),sections:I(A)}))},[A]),{state:k,selectedSectionIndexes:R,setSelectedSections:_,clearValue:$,clearActiveSection:H,updateSectionValue:J,updateValueFromValueStr:Q,setTempAndroidValueStr:re,sectionsValueBoundaries:N,placeholder:E,timezone:y}},Nx=5e3,Lr=t=>t.saveQuery!=null,Mx=({sections:t,updateSectionValue:r,sectionsValueBoundaries:n,setTempAndroidValueStr:s,timezone:a})=>{const o=Ye(),[i,l]=x.useState(null),c=ye(()=>l(null));x.useEffect(()=>{var m;i!=null&&((m=t[i.sectionIndex])==null?void 0:m.type)!==i.sectionType&&c()},[t,i,c]),x.useEffect(()=>{if(i!=null){const m=setTimeout(()=>c(),Nx);return()=>{window.clearTimeout(m)}}return()=>{}},[i,c]);const d=({keyPressed:m,sectionIndex:g},b,P)=>{const j=m.toLowerCase(),w=t[g];if(i!=null&&(!P||P(i.value))&&i.sectionIndex===g){const y=`${i.value}${j}`,A=b(y,w);if(!Lr(A))return l({sectionIndex:g,value:y,sectionType:w.type}),A}const S=b(j,w);return Lr(S)&&!S.saveQuery?(c(),null):(l({sectionIndex:g,value:j,sectionType:w.type}),Lr(S)?null:S)},u=m=>{const g=(j,w,S)=>{const y=w.filter(A=>A.toLowerCase().startsWith(S));return y.length===0?{saveQuery:!1}:{sectionValue:y[0],shouldGoToNextSection:y.length===1}},b=(j,w,S,y)=>{const A=O=>Gi(o,a,w.type,O);if(w.contentType==="letter")return g(w.format,A(w.format),j);if(S&&y!=null&&Ki(o,S).contentType==="letter"){const O=A(S),N=g(S,O,j);return Lr(N)?{saveQuery:!1}:V({},N,{sectionValue:y(N.sectionValue,O)})}return{saveQuery:!1}};return d(m,(j,w)=>{switch(w.type){case"month":{const S=y=>yo(o,y,o.formats.month,w.format);return b(j,w,o.formats.month,S)}case"weekDay":{const S=(y,A)=>A.indexOf(y).toString();return b(j,w,o.formats.weekday,S)}case"meridiem":return b(j,w);default:return{saveQuery:!1}}})},f=m=>{const g=(P,j)=>{const w=+`${P}`,S=n[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(w>S.maximum)return{saveQuery:!1};if(w<S.minimum)return{saveQuery:!0};const y=+`${P}0`>S.maximum||P.length===S.maximum.toString().length;return{sectionValue:Zi(o,a,w,S,j),shouldGoToNextSection:y}};return d(m,(P,j)=>{if(j.contentType==="digit"||j.contentType==="digit-with-letter")return g(P,j);if(j.type==="month"){tl(o,a,"digit","month","MM");const w=g(P,{type:j.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Lr(w))return w;const S=yo(o,w.sectionValue,"MM",j.format);return V({},w,{sectionValue:S})}if(j.type==="weekDay"){const w=g(P,j);if(Lr(w))return w;const S=Ss(o,a,j.format)[Number(w.sectionValue)-1];return V({},w,{sectionValue:S})}return{saveQuery:!1}},P=>!Number.isNaN(Number(P)))};return{applyCharacterEditing:ye(m=>{const g=t[m.sectionIndex],P=m.keyPressed!==" "&&!Number.isNaN(Number(m.keyPressed))?f(m):u(m);P==null?s(null):r({activeSection:g,newSectionValue:P.sectionValue,shouldGoToNextSection:P.shouldGoToNextSection})}),resetCharacterQuery:c}},Rx=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],Ex=t=>{const r=Ye(),{state:n,selectedSectionIndexes:s,setSelectedSections:a,clearValue:o,clearActiveSection:i,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:d,sectionsValueBoundaries:u,placeholder:f,timezone:p}=Ax(t),{inputRef:m,internalProps:g,internalProps:{readOnly:b=!1,unstableFieldRef:P,minutesStep:j},forwardedProps:{onClick:w,onKeyDown:S,onFocus:y,onBlur:A,onMouseUp:O,onPaste:N,error:I,clearable:E,onClear:k,disabled:C},fieldValueManager:T,valueManager:F,validator:_}=t,R=Le(t.forwardedProps,Rx),{applyCharacterEditing:q,resetCharacterQuery:B}=Mx({sections:n.sections,updateSectionValue:l,sectionsValueBoundaries:u,setTempAndroidValueStr:d,timezone:p}),$=x.useRef(null),H=Mr(m,$),Q=x.useRef(void 0),re=Ir().direction==="rtl",te=x.useMemo(()=>Op(n.sections,re),[n.sections,re]),D=()=>{var z;if(b){a(null);return}const G=(z=$.current.selectionStart)!=null?z:0;let Te;G<=n.sections[0].startInInput||G>=n.sections[n.sections.length-1].endInInput?Te=1:Te=n.sections.findIndex(K=>K.startInInput-K.startSeparator.length>G);const Ve=Te===-1?n.sections.length-1:Te-1;a(Ve)},ee=ye((z,...G)=>{z.isDefaultPrevented()||(w==null||w(z,...G),D())}),pe=ye(z=>{O==null||O(z),z.preventDefault()}),U=ye((...z)=>{y==null||y(...z);const G=$.current;window.clearTimeout(Q.current),Q.current=setTimeout(()=>{!G||G!==$.current||s!=null||b||(G.value.length&&Number(G.selectionEnd)-Number(G.selectionStart)===G.value.length?a("all"):D())})}),Z=ye((...z)=>{A==null||A(...z),a(null)}),ce=ye(z=>{if(N==null||N(z),b){z.preventDefault();return}const G=z.clipboardData.getData("text");if(s&&s.startIndex===s.endIndex){const Te=n.sections[s.startIndex],Ve=/^[a-zA-Z]+$/.test(G),K=/^[0-9]+$/.test(G),oe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(G);if(Te.contentType==="letter"&&Ve||Te.contentType==="digit"&&K||Te.contentType==="digit-with-letter"&&oe){B(),l({activeSection:Te,newSectionValue:G,shouldGoToNextSection:!0}),z.preventDefault();return}if(Ve||K){z.preventDefault();return}}z.preventDefault(),B(),c(G)}),je=ye(z=>{if(b)return;const G=z.target.value;if(G===""){B(),o();return}const Te=z.nativeEvent.data,Ve=Te&&Te.length>1,K=Ve?Te:G,oe=Vr(K);if(s==null||Ve){c(Ve?Te:oe);return}let Se;if(s.startIndex===0&&s.endIndex===n.sections.length-1&&oe.length===1)Se=oe;else{const Ae=Vr(T.getValueStrFromSections(n.sections,re));let rt=-1,Tt=-1;for(let Pt=0;Pt<Ae.length;Pt+=1)rt===-1&&Ae[Pt]!==oe[Pt]&&(rt=Pt),Tt===-1&&Ae[Ae.length-Pt-1]!==oe[oe.length-Pt-1]&&(Tt=Pt);const qt=n.sections[s.startIndex];if(rt<qt.start||Ae.length-Tt-1>qt.end)return;const wr=oe.length-Ae.length+qt.end-Vr(qt.endSeparator||"").length;Se=oe.slice(qt.start+Vr(qt.startSeparator||"").length,wr)}if(Se.length===0){Ip()?d(K):(B(),i());return}q({keyPressed:Se,sectionIndex:s.startIndex})}),me=ye(z=>{switch(S==null||S(z),!0){case(z.key==="a"&&(z.ctrlKey||z.metaKey)):{z.preventDefault(),a("all");break}case z.key==="ArrowRight":{if(z.preventDefault(),s==null)a(te.startIndex);else if(s.startIndex!==s.endIndex)a(s.endIndex);else{const G=te.neighbors[s.startIndex].rightIndex;G!==null&&a(G)}break}case z.key==="ArrowLeft":{if(z.preventDefault(),s==null)a(te.endIndex);else if(s.startIndex!==s.endIndex)a(s.startIndex);else{const G=te.neighbors[s.startIndex].leftIndex;G!==null&&a(G)}break}case z.key==="Delete":{if(z.preventDefault(),b)break;s==null||s.startIndex===0&&s.endIndex===n.sections.length-1?o():i(),B();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(z.key):{if(z.preventDefault(),b||s==null)break;const G=n.sections[s.startIndex],Te=T.getActiveDateManager(r,n,G),Ve=Dp(r,p,G,z.key,u,Te.date,{minutesStep:j});l({activeSection:G,newSectionValue:Ve,shouldGoToNextSection:!1});break}}});Wr(()=>{if(!$.current)return;if(s==null){$.current.scrollLeft&&($.current.scrollLeft=0);return}const z=n.sections[s.startIndex],G=n.sections[s.endIndex];let Te=z.startInInput,Ve=G.endInInput;if(s.shouldSelectBoundarySelectors&&(Te-=z.startSeparator.length,Ve+=G.endSeparator.length),Te!==$.current.selectionStart||Ve!==$.current.selectionEnd){const K=$.current.scrollTop;$.current===rs(document)&&$.current.setSelectionRange(Te,Ve),$.current.scrollTop=K}});const ge=ol(V({},g,{value:n.value,timezone:p}),_,F.isSameError,F.defaultErrorState),ne=x.useMemo(()=>I!==void 0?I:F.hasError(ge),[F,ge,I]);x.useEffect(()=>{!ne&&!s&&B()},[n.referenceValue,s,ne]),x.useEffect(()=>($.current&&$.current===document.activeElement&&a("all"),()=>window.clearTimeout(Q.current)),[]),x.useEffect(()=>{n.tempValueStrAndroid!=null&&s!=null&&(B(),i())},[n.tempValueStrAndroid]);const be=x.useMemo(()=>{var z;return(z=n.tempValueStrAndroid)!=null?z:T.getValueStrFromSections(n.sections,re)},[n.sections,T,n.tempValueStrAndroid,re]),He=x.useMemo(()=>s==null||n.sections[s.startIndex].contentType==="letter"?"text":"numeric",[s,n.sections]),Be=$.current&&$.current===rs(document),lt=F.areValuesEqual(r,n.value,F.emptyValue),le=!Be&&lt;x.useImperativeHandle(P,()=>({getSections:()=>n.sections,getActiveSectionIndex:()=>{var z,G,Te;const Ve=(z=$.current.selectionStart)!=null?z:0,K=(G=$.current.selectionEnd)!=null?G:0,oe=!!((Te=$.current)!=null&&Te.readOnly);if(Ve===0&&K===0||oe)return null;const Se=Ve<=n.sections[0].startInInput?1:n.sections.findIndex(Ae=>Ae.startInInput-Ae.startSeparator.length>Ve);return Se===-1?n.sections.length-1:Se-1},setSelectedSections:z=>a(z)}));const we=ye((z,...G)=>{var Te;z.preventDefault(),k==null||k(z,...G),o(),$==null||(Te=$.current)==null||Te.focus(),a(0)});return V({placeholder:f,autoComplete:"off",disabled:!!C},R,{value:le?"":be,inputMode:He,readOnly:b,onClick:ee,onFocus:U,onBlur:Z,onPaste:ce,onChange:je,onKeyDown:me,onMouseUp:pe,onClear:we,error:ne,ref:H,clearable:!!(E&&!lt&&!b&&!C)})},Ix=({open:t,onOpen:r,onClose:n})=>{const s=x.useRef(typeof t=="boolean").current,[a,o]=x.useState(!1);x.useEffect(()=>{if(s){if(typeof t!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");o(t)}},[s,t]);const i=x.useCallback(l=>{s||o(l),l&&r&&r(),!l&&n&&n()},[s,r,n]);return{isOpen:a,setIsOpen:i}},Ox=t=>{const{action:r,hasChanged:n,dateState:s,isControlled:a}=t,o=!a&&!s.hasBeenModifiedSinceMount;return r.name==="setValueFromField"?!0:r.name==="setValueFromAction"?o&&["accept","today","clear"].includes(r.pickerAction)?!0:n(s.lastPublishedValue):r.name==="setValueFromView"&&r.selectionState!=="shallow"||r.name==="setValueFromShortcut"?o?!0:n(s.lastPublishedValue):!1},_x=t=>{const{action:r,hasChanged:n,dateState:s,isControlled:a,closeOnSelect:o}=t,i=!a&&!s.hasBeenModifiedSinceMount;return r.name==="setValueFromAction"?i&&["accept","today","clear"].includes(r.pickerAction)?!0:n(s.lastCommittedValue):r.name==="setValueFromView"&&r.selectionState==="finish"&&o?i?!0:n(s.lastCommittedValue):r.name==="setValueFromShortcut"?r.changeImportance==="accept"&&n(s.lastCommittedValue):!1},Fx=t=>{const{action:r,closeOnSelect:n}=t;return r.name==="setValueFromAction"?!0:r.name==="setValueFromView"?r.selectionState==="finish"&&n:r.name==="setValueFromShortcut"?r.changeImportance==="accept":!1},Lx=({props:t,valueManager:r,valueType:n,wrapperVariant:s,validator:a})=>{const{onAccept:o,onChange:i,value:l,defaultValue:c,closeOnSelect:d=s==="desktop",selectedSections:u,onSelectedSectionsChange:f,timezone:p}=t,{current:m}=x.useRef(c),{current:g}=x.useRef(l!==void 0),b=Ye(),P=Or(),[j,w]=gr({controlled:u,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:S,setIsOpen:y}=Ix(t),[A,O]=x.useState(()=>{let U;return l!==void 0?U=l:m!==void 0?U=m:U=r.emptyValue,{draft:U,lastPublishedValue:U,lastCommittedValue:U,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:N,handleValueChange:I}=Ra({timezone:p,value:l,defaultValue:m,onChange:i,valueManager:r});ol(V({},t,{value:A.draft,timezone:N}),a,r.isSameError,r.defaultErrorState);const E=ye(U=>{const Z={action:U,dateState:A,hasChanged:ge=>!r.areValuesEqual(b,U.value,ge),isControlled:g,closeOnSelect:d},ce=Ox(Z),je=_x(Z),me=Fx(Z);if(O(ge=>V({},ge,{draft:U.value,lastPublishedValue:ce?U.value:ge.lastPublishedValue,lastCommittedValue:je?U.value:ge.lastCommittedValue,hasBeenModifiedSinceMount:!0})),ce){const ne={validationError:U.name==="setValueFromField"?U.context.validationError:a({adapter:P,value:U.value,props:V({},t,{value:U.value,timezone:N})})};U.name==="setValueFromShortcut"&&U.shortcut!=null&&(ne.shortcut=U.shortcut),I(U.value,ne)}je&&o&&o(U.value),me&&y(!1)});if(l!==void 0&&(A.lastControlledValue===void 0||!r.areValuesEqual(b,A.lastControlledValue,l))){const U=r.areValuesEqual(b,A.draft,l);O(Z=>V({},Z,{lastControlledValue:l},U?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const k=ye(()=>{E({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),C=ye(()=>{E({value:A.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),T=ye(()=>{E({value:A.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),F=ye(()=>{E({value:A.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),_=ye(()=>{E({value:r.getTodayValue(b,N,n),name:"setValueFromAction",pickerAction:"today"})}),R=ye(()=>y(!0)),q=ye(()=>y(!1)),B=ye((U,Z="partial")=>E({name:"setValueFromView",value:U,selectionState:Z})),$=ye((U,Z,ce)=>E({name:"setValueFromShortcut",value:U,changeImportance:Z??"accept",shortcut:ce})),H=ye((U,Z)=>E({name:"setValueFromField",value:U,context:Z})),Q=ye(U=>{w(U),f==null||f(U)}),J={onClear:k,onAccept:C,onDismiss:T,onCancel:F,onSetToday:_,onOpen:R,onClose:q},re={value:A.draft,onChange:H,selectedSections:j,onSelectedSectionsChange:Q},te=x.useMemo(()=>r.cleanValue(b,A.draft),[b,r,A.draft]),D={value:te,onChange:B,onClose:q,open:S,onSelectedSectionsChange:Q},pe=V({},J,{value:te,onChange:B,onSelectShortcut:$,isValid:U=>{const Z=a({adapter:P,value:U,props:V({},t,{value:U,timezone:N})});return!r.hasError(Z)}});return{open:S,fieldProps:re,viewProps:D,layoutProps:pe,actions:J}};function il({onChange:t,onViewChange:r,openTo:n,view:s,views:a,autoFocus:o,focusedView:i,onFocusedViewChange:l}){var c,d;const u=x.useRef(n),f=x.useRef(a),p=x.useRef(a.includes(n)?n:a[0]),[m,g]=gr({name:"useViews",state:"view",controlled:s,default:p.current}),b=x.useRef(o?m:null),[P,j]=gr({name:"useViews",state:"focusedView",controlled:i,default:b.current});x.useEffect(()=>{(u.current&&u.current!==n||f.current&&f.current.some(E=>!a.includes(E)))&&(g(a.includes(n)?n:a[0]),f.current=a,u.current=n)},[n,g,m,a]);const w=a.indexOf(m),S=(c=a[w-1])!=null?c:null,y=(d=a[w+1])!=null?d:null,A=ye((E,k)=>{j(k?E:C=>E===C?null:C),l==null||l(E,k)}),O=ye(E=>{A(E,!0),E!==m&&(g(E),r&&r(E))}),N=ye(()=>{y&&O(y)}),I=ye((E,k,C)=>{const T=k==="finish",F=C?a.indexOf(C)<a.length-1:!!y;if(t(E,T&&F?"partial":k,C),C&&C!==m){const R=a[a.indexOf(C)+1];R&&O(R)}else T&&N()});return{view:m,setView:O,focusedView:P,setFocusedView:A,nextView:y,previousView:S,defaultView:a.includes(n)?n:a[0],goToNextView:N,setValueAndGoToNextView:I}}const Vx=["className","sx"],$x=({props:t,propsFromPickerValue:r,additionalViewProps:n,inputRef:s,autoFocusView:a})=>{const{onChange:o,open:i,onSelectedSectionsChange:l,onClose:c}=r,{view:d,views:u,openTo:f,onViewChange:p,viewRenderers:m,timezone:g}=t,b=Le(t,Vx),{view:P,setView:j,defaultView:w,focusedView:S,setFocusedView:y,setValueAndGoToNextView:A}=il({view:d,views:u,openTo:f,onChange:o,onViewChange:p,autoFocus:a}),{hasUIView:O,viewModeLookup:N}=x.useMemo(()=>u.reduce((_,R)=>{let q;return m[R]!=null?q="UI":q="field",_.viewModeLookup[R]=q,q==="UI"&&(_.hasUIView=!0),_},{hasUIView:!1,viewModeLookup:{}}),[m,u]),I=x.useMemo(()=>u.reduce((_,R)=>m[R]!=null&&wp(R)?_+1:_,0),[m,u]),E=N[P],k=ye(()=>E==="UI"),[C,T]=x.useState(E==="UI"?P:null);return C!==P&&N[P]==="UI"&&T(P),Wr(()=>{E==="field"&&i&&(c(),setTimeout(()=>{s==null||s.current.focus(),l(P)}))},[P]),Wr(()=>{if(!i)return;let _=P;E==="field"&&C!=null&&(_=C),_!==w&&N[_]==="UI"&&N[w]==="UI"&&(_=w),_!==P&&j(_),y(_,!0)},[i]),{hasUIView:O,shouldRestoreFocus:k,layoutProps:{views:u,view:C,onViewChange:j},renderCurrentView:()=>{if(C==null)return null;const _=m[C];return _==null?null:_(V({},b,n,r,{views:u,timezone:g,onChange:A,view:C,onViewChange:j,focusedView:S,onFocusedViewChange:y,showViewSwitcher:I>1,timeViewsCount:I}))}}};function To(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Bx=(t,r)=>{const[n,s]=x.useState(To);return Wr(()=>{const o=()=>{s(To())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),xx(t,["hours","minutes","seconds"])?!1:(r||n)==="landscape"},Ux=({props:t,propsFromPickerValue:r,propsFromPickerViews:n,wrapperVariant:s})=>{const{orientation:a}=t,o=Bx(n.views,a);return{layoutProps:V({},n,r,{isLandscape:o,wrapperVariant:s,disabled:t.disabled,readOnly:t.readOnly})}},ll=({props:t,valueManager:r,valueType:n,wrapperVariant:s,inputRef:a,additionalViewProps:o,validator:i,autoFocusView:l})=>{const c=Lx({props:t,valueManager:r,valueType:n,wrapperVariant:s,validator:i}),d=$x({props:t,inputRef:a,additionalViewProps:o,autoFocusView:l,propsFromPickerValue:c.viewProps}),u=Ux({props:t,wrapperVariant:s,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:u.layoutProps}};function cl(t){return yt("MuiPickersLayout",t)}const Ys=vt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Wx=["onAccept","onClear","onCancel","onSetToday","actions"];function Hx(t){const{onAccept:r,onClear:n,onCancel:s,onSetToday:a,actions:o}=t,i=Le(t,Wx),l=jr();if(o==null||o.length===0)return null;const c=o==null?void 0:o.map(d=>{switch(d){case"clear":return e.jsx(Ce,{onClick:n,children:l.clearButtonLabel},d);case"cancel":return e.jsx(Ce,{onClick:s,children:l.cancelButtonLabel},d);case"accept":return e.jsx(Ce,{onClick:r,children:l.okButtonLabel},d);case"today":return e.jsx(Ce,{onClick:a,children:l.todayButtonLabel},d);default:return null}});return e.jsx(lr,V({},i,{children:c}))}const zx=["items","changeImportance","isLandscape","onChange","isValid"],Yx=["getValue"];function qx(t){const{items:r,changeImportance:n,onChange:s,isValid:a}=t,o=Le(t,zx);if(r==null||r.length===0)return null;const i=r.map(l=>{let{getValue:c}=l,d=Le(l,Yx);const u=c({isValid:a});return{label:d.label,onClick:()=>{s(u,n,d)},disabled:!a(u)}});return e.jsx(ha,V({dense:!0,sx:[{maxHeight:Ma,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:i.map(l=>e.jsx(dn,{children:e.jsx(De,V({},l))},l.label))}))}function Qx(t){return t.view!==null}const Kx=t=>{const{classes:r,isLandscape:n}=t;return ft({root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},cl,r)},Gx=t=>{var r,n;const{wrapperVariant:s,onAccept:a,onClear:o,onCancel:i,onSetToday:l,view:c,views:d,onViewChange:u,value:f,onChange:p,onSelectShortcut:m,isValid:g,isLandscape:b,disabled:P,readOnly:j,children:w,components:S,componentsProps:y,slots:A,slotProps:O}=t,N=A??nl(S),I=O??y,E=Kx(t),k=(r=N==null?void 0:N.actionBar)!=null?r:Hx,C=it({elementType:k,externalSlotProps:I==null?void 0:I.actionBar,additionalProps:{onAccept:a,onClear:o,onCancel:i,onSetToday:l,actions:s==="desktop"?[]:["cancel","accept"],className:E.actionBar},ownerState:V({},t,{wrapperVariant:s})}),T=e.jsx(k,V({},C)),F=N==null?void 0:N.toolbar,_=it({elementType:F,externalSlotProps:I==null?void 0:I.toolbar,additionalProps:{isLandscape:b,onChange:p,value:f,view:c,onViewChange:u,views:d,disabled:P,readOnly:j,className:E.toolbar},ownerState:V({},t,{wrapperVariant:s})}),R=Qx(_)&&F?e.jsx(F,V({},_)):null,q=w,B=N==null?void 0:N.tabs,$=c&&B?e.jsx(B,V({view:c,onViewChange:u,className:E.tabs},I==null?void 0:I.tabs)):null,H=(n=N==null?void 0:N.shortcuts)!=null?n:qx,Q=it({elementType:H,externalSlotProps:I==null?void 0:I.shortcuts,additionalProps:{isValid:g,isLandscape:b,onChange:m,className:E.shortcuts},ownerState:{isValid:g,isLandscape:b,onChange:m,className:E.shortcuts,wrapperVariant:s}}),J=c&&H?e.jsx(H,V({},Q)):null;return{toolbar:R,content:q,tabs:$,actionBar:T,shortcuts:J}},Xx=t=>{const{isLandscape:r,classes:n}=t;return ft({root:["root",r&&"landscape"],contentWrapper:["contentWrapper"]},cl,n)},dl=ke("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Ys.toolbar}`]:r.isLandscape?{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${Ys.shortcuts}`]:r.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${Ys.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));dl.propTypes={as:L.elementType,ownerState:L.shape({isLandscape:L.bool.isRequired}).isRequired,sx:L.oneOfType([L.arrayOf(L.oneOfType([L.func,L.object,L.bool])),L.func,L.object])};const Zx=ke("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(t,r)=>r.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),ul=function(r){const n=ct({props:r,name:"MuiPickersLayout"}),{toolbar:s,content:a,tabs:o,actionBar:i,shortcuts:l}=Gx(n),{sx:c,className:d,isLandscape:u,ref:f,wrapperVariant:p}=n,m=n,g=Xx(m);return e.jsxs(dl,{ref:f,sx:c,className:ut(d,g.root),ownerState:m,children:[u?l:s,u?s:l,e.jsx(Zx,{className:g.contentWrapper,children:p==="desktop"?e.jsxs(x.Fragment,{children:[a,o]}):e.jsxs(x.Fragment,{children:[o,a]})}),i]})};function Jx(t,{disableFuture:r,maxDate:n,timezone:s}){const a=Ye();return x.useMemo(()=>{const o=a.dateWithTimezone(void 0,s),i=a.startOfMonth(r&&a.isBefore(o,n)?o:n);return!a.isAfter(i,t)},[r,n,t,a,s])}function eg(t,{disablePast:r,minDate:n,timezone:s}){const a=Ye();return x.useMemo(()=>{const o=a.dateWithTimezone(void 0,s),i=a.startOfMonth(r&&a.isAfter(o,n)?o:n);return!a.isBefore(i,t)},[r,n,t,a,s])}const hl=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],tg=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],rg=["minDateTime","maxDateTime"],ng=[...hl,...tg,...rg],ml=t=>ng.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{}),sg=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],ag=(t,r)=>{const n=V({},t),s={},a=o=>{n.hasOwnProperty(o)&&(s[o]=n[o],delete n[o])};return sg.forEach(a),hl.forEach(a),{forwardedProps:n,internalProps:s}},Ns=({props:t,value:r,adapter:n})=>{if(r===null)return null;const{shouldDisableDate:s,shouldDisableMonth:a,shouldDisableYear:o,disablePast:i,disableFuture:l,timezone:c}=t,d=n.utils.dateWithTimezone(void 0,c),u=kt(n.utils,t.minDate,n.defaultDates.minDate),f=kt(n.utils,t.maxDate,n.defaultDates.maxDate);switch(!0){case!n.utils.isValid(r):return"invalidDate";case!!(s&&s(r)):return"shouldDisableDate";case!!(a&&a(r)):return"shouldDisableMonth";case!!(o&&o(r)):return"shouldDisableYear";case!!(l&&n.utils.isAfterDay(r,d)):return"disableFuture";case!!(i&&n.utils.isBeforeDay(r,d)):return"disablePast";case!!(u&&n.utils.isBeforeDay(r,u)):return"minDate";case!!(f&&n.utils.isAfterDay(r,f)):return"maxDate";default:return null}};function og(t){return yt("MuiPickersDay",t)}const Cr=vt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),ig=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],lg=t=>{const{selected:r,disableMargin:n,disableHighlightToday:s,today:a,disabled:o,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:c}=t,d=i&&!l;return ft({root:["root",r&&!d&&"selected",o&&"disabled",!n&&"dayWithMargin",!s&&a&&"today",i&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},og,c)},fl=({theme:t,ownerState:r})=>V({},t.typography.caption,{width:fn,height:fn,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Hr(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${Cr.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Cr.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Cr.disabled}:not(.${Cr.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${Cr.disabled}&.${Cr.selected}`]:{opacity:.6}},!r.disableMargin&&{margin:`0 ${ks}px`},r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!r.disableHighlightToday&&r.today&&{[`&:not(.${Cr.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}),pl=(t,r)=>{const{ownerState:n}=t;return[r.root,!n.disableMargin&&r.dayWithMargin,!n.disableHighlightToday&&n.today&&r.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&r.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&r.hiddenDaySpacingFiller]},cg=ke(Hl,{name:"MuiPickersDay",slot:"Root",overridesResolver:pl})(fl),dg=ke("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:pl})(({theme:t,ownerState:r})=>V({},fl({theme:t,ownerState:r}),{opacity:0,pointerEvents:"none"})),ln=()=>{},ug=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiPickersDay"}),{autoFocus:a=!1,className:o,day:i,disabled:l=!1,disableHighlightToday:c=!1,disableMargin:d=!1,isAnimating:u,onClick:f,onDaySelect:p,onFocus:m=ln,onBlur:g=ln,onKeyDown:b=ln,onMouseDown:P=ln,onMouseEnter:j=ln,outsideCurrentMonth:w,selected:S=!1,showDaysOutsideCurrentMonth:y=!1,children:A,today:O=!1}=s,N=Le(s,ig),I=V({},s,{autoFocus:a,disabled:l,disableHighlightToday:c,disableMargin:d,selected:S,showDaysOutsideCurrentMonth:y,today:O}),E=lg(I),k=Ye(),C=x.useRef(null),T=Mr(C,n);Wr(()=>{a&&!l&&!u&&!w&&C.current.focus()},[a,l,u,w]);const F=R=>{P(R),w&&R.preventDefault()},_=R=>{l||p(i),w&&R.currentTarget.focus(),f&&f(R)};return w&&!y?e.jsx(dg,{className:ut(E.root,E.hiddenDaySpacingFiller,o),ownerState:I,role:N.role}):e.jsx(cg,V({className:ut(E.root,o),ref:T,centerRipple:!0,disabled:l,tabIndex:S?0:-1,onKeyDown:R=>b(R,i),onFocus:R=>m(R,i),onBlur:R=>g(R,i),onMouseEnter:R=>j(R,i),onClick:_,onMouseDown:F},N,{ownerState:I,children:A||k.format(i,"dayOfMonth")}))}),hg=x.memo(ug),mg=t=>yt("MuiPickersSlideTransition",t),St=vt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),fg=["children","className","reduceAnimations","slideDirection","transKey","classes"],pg=t=>{const{classes:r,slideDirection:n}=t,s={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return ft(s,mg,r)},xg=ke(Io,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,r)=>[r.root,{[`.${St["slideEnter-left"]}`]:r["slideEnter-left"]},{[`.${St["slideEnter-right"]}`]:r["slideEnter-right"]},{[`.${St.slideEnterActive}`]:r.slideEnterActive},{[`.${St.slideExit}`]:r.slideExit},{[`.${St["slideExitActiveLeft-left"]}`]:r["slideExitActiveLeft-left"]},{[`.${St["slideExitActiveLeft-right"]}`]:r["slideExitActiveLeft-right"]}]})(({theme:t})=>{const r=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${St["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${St["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${St.slideEnterActive}`]:{transform:"translate(0%)",transition:r},[`& .${St.slideExit}`]:{transform:"translate(0%)"},[`& .${St["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:r,zIndex:0},[`& .${St["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:r,zIndex:0}}});function gg(t){const r=ct({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:s,reduceAnimations:a,transKey:o}=r,i=Le(r,fg),l=pg(r),c=Ir();if(a)return e.jsx("div",{className:ut(l.root,s),children:n});const d={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return e.jsx(xg,{className:ut(l.root,s),childFactory:u=>x.cloneElement(u,{classNames:d}),role:"presentation",children:e.jsx(zl,V({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:d},i,{children:n}),o)})}const xl=({shouldDisableDate:t,shouldDisableMonth:r,shouldDisableYear:n,minDate:s,maxDate:a,disableFuture:o,disablePast:i,timezone:l})=>{const c=Or();return x.useCallback(d=>Ns({adapter:c,value:d,props:{shouldDisableDate:t,shouldDisableMonth:r,shouldDisableYear:n,minDate:s,maxDate:a,disableFuture:o,disablePast:i,timezone:l}})!==null,[c,t,r,n,s,a,o,i,l])},yg=t=>yt("MuiDayCalendar",t);vt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const vg=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],bg=["ownerState"],jg=t=>{const{classes:r}=t;return ft({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},yg,r)},gl=(fn+ks*2)*6,wg=ke("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),Cg=ke("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(t,r)=>r.header})({display:"flex",justifyContent:"center",alignItems:"center"}),Pg=ke(h,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(t,r)=>r.weekDayLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),Tg=ke(h,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(t,r)=>r.weekNumberLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled})),Sg=ke(h,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(t,r)=>r.weekNumber})(({theme:t})=>V({},t.typography.caption,{width:fn,height:fn,padding:0,margin:`0 ${ks}px`,color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Dg=ke("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(t,r)=>r.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:gl}),kg=ke(gg,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(t,r)=>r.slideTransition})({minHeight:gl}),Ag=ke("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(t,r)=>r.monthContainer})({overflow:"hidden"}),Ng=ke("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(t,r)=>r.weekContainer})({margin:`${ks}px 0`,display:"flex",justifyContent:"center"});function Mg(t){var r,n,s;let{parentProps:a,day:o,focusableDay:i,selectedDays:l,isDateDisabled:c,currentMonthNumber:d,isViewFocused:u}=t,f=Le(t,vg);const{disabled:p,disableHighlightToday:m,isMonthSwitchingAnimating:g,showDaysOutsideCurrentMonth:b,components:P,componentsProps:j,slots:w,slotProps:S,timezone:y}=a,A=Ye(),O=Ds(y),N=i!==null&&A.isSameDay(o,i),I=l.some(B=>A.isSameDay(B,o)),E=A.isSameDay(o,O),k=(r=(n=w==null?void 0:w.day)!=null?n:P==null?void 0:P.Day)!=null?r:hg,C=it({elementType:k,externalSlotProps:(s=S==null?void 0:S.day)!=null?s:j==null?void 0:j.day,additionalProps:V({disableHighlightToday:m,showDaysOutsideCurrentMonth:b,role:"gridcell",isAnimating:g,"data-timestamp":A.toJsDate(o).valueOf()},f),ownerState:V({},a,{day:o,selected:I})}),T=Le(C,bg),F=x.useMemo(()=>p||c(o),[p,c,o]),_=x.useMemo(()=>A.getMonth(o)!==d,[A,o,d]),R=x.useMemo(()=>{const B=A.startOfMonth(A.setMonth(o,d));return b?A.isSameDay(o,A.startOfWeek(B)):A.isSameDay(o,B)},[d,o,b,A]),q=x.useMemo(()=>{const B=A.endOfMonth(A.setMonth(o,d));return b?A.isSameDay(o,A.endOfWeek(B)):A.isSameDay(o,B)},[d,o,b,A]);return e.jsx(k,V({},T,{day:o,disabled:F,autoFocus:u&&N,today:E,outsideCurrentMonth:_,isFirstVisibleCell:R,isLastVisibleCell:q,selected:I,tabIndex:N?0:-1,"aria-selected":I,"aria-current":E?"date":void 0}))}function Rg(t){const r=ct({props:t,name:"MuiDayCalendar"}),{onFocusedDayChange:n,className:s,currentMonth:a,selectedDays:o,focusedDay:i,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:u,reduceAnimations:f,renderLoading:p=()=>e.jsx("span",{children:"..."}),slideDirection:m,TransitionProps:g,disablePast:b,disableFuture:P,minDate:j,maxDate:w,shouldDisableDate:S,shouldDisableMonth:y,shouldDisableYear:A,dayOfWeekFormatter:O,hasFocus:N,onFocusedViewChange:I,gridLabelId:E,displayWeekNumber:k,fixedWeekNumber:C,autoFocus:T,timezone:F}=r,_=Ds(F),R=Ye(),q=jg(r),$=Ir().direction==="rtl",H=O||((le,we)=>R.format(we,"weekdayShort").charAt(0).toUpperCase()),Q=xl({shouldDisableDate:S,shouldDisableMonth:y,shouldDisableYear:A,minDate:j,maxDate:w,disablePast:b,disableFuture:P,timezone:F}),J=jr(),[re,te]=gr({name:"DayCalendar",state:"hasFocus",controlled:N,default:T??!1}),[D,ee]=x.useState(()=>i||_),pe=ye(le=>{u||c(le)}),U=le=>{Q(le)||(n(le),ee(le),I==null||I(!0),te(!0))},Z=ye((le,we)=>{switch(le.key){case"ArrowUp":U(R.addDays(we,-7)),le.preventDefault();break;case"ArrowDown":U(R.addDays(we,7)),le.preventDefault();break;case"ArrowLeft":{const z=R.addDays(we,$?1:-1),G=R.addMonths(we,$?1:-1),Te=hn({utils:R,date:z,minDate:$?z:R.startOfMonth(G),maxDate:$?R.endOfMonth(G):z,isDateDisabled:Q,timezone:F});U(Te||z),le.preventDefault();break}case"ArrowRight":{const z=R.addDays(we,$?-1:1),G=R.addMonths(we,$?-1:1),Te=hn({utils:R,date:z,minDate:$?R.startOfMonth(G):z,maxDate:$?z:R.endOfMonth(G),isDateDisabled:Q,timezone:F});U(Te||z),le.preventDefault();break}case"Home":U(R.startOfWeek(we)),le.preventDefault();break;case"End":U(R.endOfWeek(we)),le.preventDefault();break;case"PageUp":U(R.addMonths(we,1)),le.preventDefault();break;case"PageDown":U(R.addMonths(we,-1)),le.preventDefault();break}}),ce=ye((le,we)=>U(we)),je=ye((le,we)=>{re&&R.isSameDay(D,we)&&(I==null||I(!1))}),me=R.getMonth(a),ge=x.useMemo(()=>o.filter(le=>!!le).map(le=>R.startOfDay(le)),[R,o]),ne=me,be=x.useMemo(()=>x.createRef(),[ne]),He=R.startOfWeek(_),Be=x.useMemo(()=>{const le=R.startOfMonth(a),we=R.endOfMonth(a);return Q(D)||R.isAfterDay(D,we)||R.isBeforeDay(D,le)?hn({utils:R,date:D,minDate:le,maxDate:we,disablePast:b,disableFuture:P,isDateDisabled:Q,timezone:F}):D},[a,P,b,D,Q,R,F]),lt=x.useMemo(()=>{const le=R.setTimezone(a,F),we=R.getWeekArray(le);let z=R.addMonths(le,1);for(;C&&we.length<C;){const G=R.getWeekArray(z),Te=R.isSameDay(we[we.length-1][0],G[0][0]);G.slice(Te?1:0).forEach(Ve=>{we.length<C&&we.push(Ve)}),z=R.addMonths(z,1)}return we},[a,C,R,F]);return e.jsxs(wg,{role:"grid","aria-labelledby":E,className:q.root,children:[e.jsxs(Cg,{role:"row",className:q.header,children:[k&&e.jsx(Tg,{variant:"caption",role:"columnheader","aria-label":J.calendarWeekNumberHeaderLabel,className:q.weekNumberLabel,children:J.calendarWeekNumberHeaderText}),bp(R,_).map((le,we)=>{var z;const G=R.format(le,"weekdayShort");return e.jsx(Pg,{variant:"caption",role:"columnheader","aria-label":R.format(R.addDays(He,we),"weekday"),className:q.weekDayLabel,children:(z=H==null?void 0:H(G,le))!=null?z:G},G+we.toString())})]}),l?e.jsx(Dg,{className:q.loadingContainer,children:p()}):e.jsx(kg,V({transKey:ne,onExited:d,reduceAnimations:f,slideDirection:m,className:ut(s,q.slideTransition)},g,{nodeRef:be,children:e.jsx(Ag,{ref:be,role:"rowgroup",className:q.monthContainer,children:lt.map((le,we)=>e.jsxs(Ng,{role:"row",className:q.weekContainer,"aria-rowindex":we+1,children:[k&&e.jsx(Sg,{className:q.weekNumber,role:"rowheader","aria-label":J.calendarWeekNumberAriaLabelText(R.getWeekNumber(le[0])),children:J.calendarWeekNumberText(R.getWeekNumber(le[0]))}),le.map((z,G)=>e.jsx(Mg,{parentProps:r,day:z,selectedDays:ge,focusableDay:Be,onKeyDown:Z,onFocus:ce,onBlur:je,onDaySelect:pe,isDateDisabled:Q,currentMonthNumber:me,isViewFocused:re,"aria-colindex":G+1},z.toString()))]},`week-${le[0]}`))})}))]})}const Eg=(t,r,n)=>(s,a)=>{switch(a.type){case"changeMonth":return V({},s,{slideDirection:a.direction,currentMonth:a.newMonth,isMonthSwitchingAnimating:!t});case"finishMonthSwitchingAnimation":return V({},s,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(s.focusedDay!=null&&a.focusedDay!=null&&n.isSameDay(a.focusedDay,s.focusedDay))return s;const o=a.focusedDay!=null&&!r&&!n.isSameMonth(s.currentMonth,a.focusedDay);return V({},s,{focusedDay:a.focusedDay,isMonthSwitchingAnimating:o&&!t&&!a.withoutMonthSwitchingAnimation,currentMonth:o?n.startOfMonth(a.focusedDay):s.currentMonth,slideDirection:a.focusedDay!=null&&n.isAfterDay(a.focusedDay,s.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},Ig=t=>{const{value:r,referenceDate:n,defaultCalendarMonth:s,disableFuture:a,disablePast:o,disableSwitchToMonthOnDayFocus:i=!1,maxDate:l,minDate:c,onMonthChange:d,reduceAnimations:u,shouldDisableDate:f,timezone:p}=t,m=Ye(),g=x.useRef(Eg(!!u,i,m)).current,b=x.useMemo(()=>{let N=null;return n?N=n:s&&(N=m.startOfMonth(s)),ar.getInitialReferenceValue({value:r,utils:m,timezone:p,props:t,referenceDate:N,granularity:Lt.day})},[]),[P,j]=x.useReducer(g,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:m.startOfMonth(b),slideDirection:"left"}),w=x.useCallback(N=>{j(V({type:"changeMonth"},N)),d&&d(N.newMonth)},[d]),S=x.useCallback(N=>{const I=N;m.isSameMonth(I,P.currentMonth)||w({newMonth:m.startOfMonth(I),direction:m.isAfterDay(I,P.currentMonth)?"left":"right"})},[P.currentMonth,w,m]),y=xl({shouldDisableDate:f,minDate:c,maxDate:l,disableFuture:a,disablePast:o,timezone:p}),A=x.useCallback(()=>{j({type:"finishMonthSwitchingAnimation"})},[]),O=ye((N,I)=>{y(N)||j({type:"changeFocusedDay",focusedDay:N,withoutMonthSwitchingAnimation:I})});return{referenceDate:b,calendarState:P,changeMonth:S,changeFocusedDay:O,isDateDisabled:y,onMonthSwitchingAnimationEnd:A,handleChangeMonth:w}},Og=["props","getOpenDialogAriaText"],_g=["ownerState"],Fg=["ownerState"],Lg=t=>{var r,n,s,a,o;let{props:i,getOpenDialogAriaText:l}=t,c=Le(t,Og);const{slots:d,slotProps:u,className:f,sx:p,format:m,formatDensity:g,timezone:b,name:P,label:j,inputRef:w,readOnly:S,disabled:y,autoFocus:A,localeText:O,reduceAnimations:N}=i,I=Ye(),E=x.useRef(null),k=x.useRef(null),C=pa(),T=(r=u==null||(n=u.toolbar)==null?void 0:n.hidden)!=null?r:!1,{open:F,actions:_,hasUIView:R,layoutProps:q,renderCurrentView:B,shouldRestoreFocus:$,fieldProps:H}=ll(V({},c,{props:i,inputRef:E,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),Q=(s=d.inputAdornment)!=null?s:xa,J=it({elementType:Q,externalSlotProps:u==null?void 0:u.inputAdornment,additionalProps:{position:"end"},ownerState:i}),re=Le(J,_g),te=(a=d.openPickerButton)!=null?a:Et,D=it({elementType:te,externalSlotProps:u==null?void 0:u.openPickerButton,additionalProps:{disabled:y||S,onClick:F?_.onClose:_.onOpen,"aria-label":l(H.value,I),edge:re.position},ownerState:i}),ee=Le(D,Fg),pe=d.openPickerIcon,U=d.field,Z=it({elementType:U,externalSlotProps:u==null?void 0:u.field,additionalProps:V({},H,T&&{id:C},{readOnly:S,disabled:y,className:f,sx:p,format:m,formatDensity:g,timezone:b,label:j,name:P,autoFocus:A&&!i.open,focused:F?!0:void 0}),ownerState:i});R&&(Z.InputProps=V({},Z.InputProps,{ref:k},!i.disableOpenPicker&&{[`${re.position}Adornment`]:e.jsx(Q,V({},re,{children:e.jsx(te,V({},ee,{children:e.jsx(pe,V({},u==null?void 0:u.openPickerIcon))}))}))}));const ce=V({textField:d.textField,clearIcon:d.clearIcon,clearButton:d.clearButton},Z.slots),je=(o=d.layout)!=null?o:ul,me=Mr(E,Z.inputRef,w);let ge=C;T&&(j?ge=`${C}-label`:ge=void 0);const ne=V({},u,{toolbar:V({},u==null?void 0:u.toolbar,{titleId:C}),popper:V({"aria-labelledby":ge},u==null?void 0:u.popper)});return{renderPicker:()=>e.jsxs(Kt,{localeText:O,children:[e.jsx(U,V({},Z,{slots:ce,slotProps:ne,inputRef:me})),e.jsx(kx,V({role:"dialog",placement:"bottom-start",anchorEl:k.current},_,{open:F,slots:d,slotProps:ne,shouldRestoreFocus:$,reduceAnimations:N,children:e.jsx(je,V({},q,ne==null?void 0:ne.layout,{slots:d,slotProps:ne,children:B()}))}))]})}},Vg=t=>{var r,n,s;const a=Ye(),o=Pn();return V({},t,{disablePast:(r=t.disablePast)!=null?r:!1,disableFuture:(n=t.disableFuture)!=null?n:!1,format:(s=t.format)!=null?s:a.formats.keyboardDate,minDate:kt(a,t.minDate,o.minDate),maxDate:kt(a,t.maxDate,o.maxDate)})},$g=({props:t,inputRef:r})=>{const n=Vg(t),{forwardedProps:s,internalProps:a}=ag(n);return Ex({inputRef:r,forwardedProps:s,internalProps:a,valueManager:ar,fieldValueManager:Fp,validator:Ns})},Bg=["ownerState"],Ug=({clearable:t,fieldProps:r,InputProps:n,onClear:s,slots:a,slotProps:o,components:i,componentsProps:l})=>{var c,d,u,f,p,m;const g=jr(),b=(c=(d=a==null?void 0:a.clearButton)!=null?d:i==null?void 0:i.ClearButton)!=null?c:Et,P=it({elementType:b,externalSlotProps:(u=o==null?void 0:o.clearButton)!=null?u:l==null?void 0:l.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:g.fieldClearLabel}}),j=Le(P,Bg),w=(f=(p=a==null?void 0:a.clearIcon)!=null?p:i==null?void 0:i.ClearIcon)!=null?f:rx,S=it({elementType:w,externalSlotProps:(m=o==null?void 0:o.clearIcon)!=null?m:l==null?void 0:l.clearIcon,ownerState:{}}),y=V({},n,{endAdornment:e.jsxs(x.Fragment,{children:[t&&e.jsx(xa,{position:"end",sx:{marginRight:n!=null&&n.endAdornment?-1:-1.5},children:e.jsx(b,V({},j,{onClick:s,children:e.jsx(w,V({fontSize:"small"},S))}))}),n==null?void 0:n.endAdornment]})}),A=V({},r,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(r.sx)?r.sx:[r.sx]]});return{InputProps:y,fieldProps:A}},Wg=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Hg=["inputRef"],zg=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],yl=x.forwardRef(function(r,n){var s,a,o;const i=ct({props:r,name:"MuiDateField"}),{components:l,componentsProps:c,slots:d,slotProps:u,InputProps:f,inputProps:p}=i,m=Le(i,Wg),g=i,b=(s=(a=d==null?void 0:d.textField)!=null?a:l==null?void 0:l.TextField)!=null?s:We,P=it({elementType:b,externalSlotProps:(o=u==null?void 0:u.textField)!=null?o:c==null?void 0:c.textField,externalForwardedProps:m,ownerState:g}),{inputRef:j}=P,w=Le(P,Hg);w.inputProps=V({},p,w.inputProps),w.InputProps=V({},f,w.InputProps);const S=$g({props:w,inputRef:j}),{ref:y,onPaste:A,onKeyDown:O,inputMode:N,readOnly:I,clearable:E,onClear:k}=S,C=Le(S,zg),{InputProps:T,fieldProps:F}=Ug({onClear:k,clearable:E,fieldProps:C,InputProps:C.InputProps,slots:d,slotProps:u,components:l,componentsProps:c});return e.jsx(b,V({ref:n},F,{InputProps:V({},T,{readOnly:I}),inputProps:V({},C.inputProps,{inputMode:N,onPaste:A,onKeyDown:O,ref:y})}))}),Yg=t=>yt("MuiPickersFadeTransitionGroup",t);vt("MuiPickersFadeTransitionGroup",["root"]);const qg=t=>{const{classes:r}=t;return ft({root:["root"]},Yg,r)},Qg=ke(Io,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"block",position:"relative"});function vl(t){const r=ct({props:t,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:s,reduceAnimations:a,transKey:o}=r,i=qg(r),l=Ir();return a?n:e.jsx(Qg,{className:ut(i.root,s),children:e.jsx(os,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:n},o)})}function Kg(t){return yt("MuiPickersMonth",t)}const Rn=vt("MuiPickersMonth",["root","monthButton","disabled","selected"]),Gg=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],Xg=t=>{const{disabled:r,selected:n,classes:s}=t;return ft({root:["root"],monthButton:["monthButton",r&&"disabled",n&&"selected"]},Kg,s)},Zg=ke("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(t,r)=>[r.root]})(({ownerState:t})=>({flexBasis:t.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),Jg=ke("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(t,r)=>[r.monthButton,{[`&.${Rn.disabled}`]:r.disabled},{[`&.${Rn.selected}`]:r.selected}]})(({theme:t})=>V({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Rn.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Rn.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),ey=x.memo(function(r){const n=ct({props:r,name:"MuiPickersMonth"}),{autoFocus:s,children:a,disabled:o,selected:i,value:l,tabIndex:c,onClick:d,onKeyDown:u,onFocus:f,onBlur:p,"aria-current":m,"aria-label":g}=n,b=Le(n,Gg),P=x.useRef(null),j=Xg(n);return Wr(()=>{if(s){var w;(w=P.current)==null||w.focus()}},[s]),e.jsx(Zg,V({className:j.root,ownerState:n},b,{children:e.jsx(Jg,{ref:P,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":m,"aria-checked":i,"aria-label":g,onClick:w=>d(w,l),onKeyDown:w=>u(w,l),onFocus:w=>f(w,l),onBlur:w=>p(w,l),className:j.monthButton,ownerState:n,children:a})}))});function ty(t){return yt("MuiMonthCalendar",t)}vt("MuiMonthCalendar",["root"]);const ry=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],ny=t=>{const{classes:r}=t;return ft({root:["root"]},ty,r)};function sy(t,r){const n=Ye(),s=Pn(),a=ct({props:t,name:r});return V({disableFuture:!1,disablePast:!1},a,{minDate:kt(n,a.minDate,s.minDate),maxDate:kt(n,a.maxDate,s.maxDate)})}const ay=ke("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:As,boxSizing:"border-box"}),oy=x.forwardRef(function(r,n){const s=sy(r,"MuiMonthCalendar"),{className:a,value:o,defaultValue:i,referenceDate:l,disabled:c,disableFuture:d,disablePast:u,maxDate:f,minDate:p,onChange:m,shouldDisableMonth:g,readOnly:b,disableHighlightToday:P,autoFocus:j=!1,onMonthFocus:w,hasFocus:S,onFocusedViewChange:y,monthsPerRow:A=3,timezone:O,gridLabelId:N}=s,I=Le(s,ry),{value:E,handleValueChange:k,timezone:C}=Ea({name:"MonthCalendar",timezone:O,value:o,defaultValue:i,onChange:m,valueManager:ar}),T=Ds(C),F=Oo(),_=Ye(),R=x.useMemo(()=>ar.getInitialReferenceValue({value:E,utils:_,props:s,timezone:C,referenceDate:l,granularity:Lt.month}),[]),q=s,B=ny(q),$=x.useMemo(()=>_.getMonth(T),[_,T]),H=x.useMemo(()=>E!=null?_.getMonth(E):P?null:_.getMonth(R),[E,_,P,R]),[Q,J]=x.useState(()=>H||$),[re,te]=gr({name:"MonthCalendar",state:"hasFocus",controlled:S,default:j??!1}),D=ye(me=>{te(me),y&&y(me)}),ee=x.useCallback(me=>{const ge=_.startOfMonth(u&&_.isAfter(T,p)?T:p),ne=_.startOfMonth(d&&_.isBefore(T,f)?T:f),be=_.startOfMonth(me);return _.isBefore(be,ge)||_.isAfter(be,ne)?!0:g?g(be):!1},[d,u,f,p,T,g,_]),pe=ye((me,ge)=>{if(b)return;const ne=_.setMonth(E??R,ge);k(ne)}),U=ye(me=>{ee(_.setMonth(E??R,me))||(J(me),D(!0),w&&w(me))});x.useEffect(()=>{J(me=>H!==null&&me!==H?H:me)},[H]);const Z=ye((me,ge)=>{switch(me.key){case"ArrowUp":U((12+ge-3)%12),me.preventDefault();break;case"ArrowDown":U((12+ge+3)%12),me.preventDefault();break;case"ArrowLeft":U((12+ge+(F.direction==="ltr"?-1:1))%12),me.preventDefault();break;case"ArrowRight":U((12+ge+(F.direction==="ltr"?1:-1))%12),me.preventDefault();break}}),ce=ye((me,ge)=>{U(ge)}),je=ye((me,ge)=>{Q===ge&&D(!1)});return e.jsx(ay,V({ref:n,className:ut(B.root,a),ownerState:q,role:"radiogroup","aria-labelledby":N},I,{children:ka(_,E??R).map(me=>{const ge=_.getMonth(me),ne=_.format(me,"monthShort"),be=_.format(me,"month"),He=ge===H,Be=c||ee(me);return e.jsx(ey,{selected:He,value:ge,onClick:pe,onKeyDown:Z,autoFocus:re&&ge===Q,disabled:Be,tabIndex:ge===Q?0:-1,onFocus:ce,onBlur:je,"aria-current":$===ge?"date":void 0,"aria-label":be,monthsPerRow:A,children:ne},ne)})}))});function iy(t){return yt("MuiPickersYear",t)}const En=vt("MuiPickersYear",["root","yearButton","selected","disabled"]),ly=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],cy=t=>{const{disabled:r,selected:n,classes:s}=t;return ft({root:["root"],yearButton:["yearButton",r&&"disabled",n&&"selected"]},iy,s)},dy=ke("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(t,r)=>[r.root]})(({ownerState:t})=>({flexBasis:t.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),uy=ke("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(t,r)=>[r.yearButton,{[`&.${En.disabled}`]:r.disabled},{[`&.${En.selected}`]:r.selected}]})(({theme:t})=>V({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:Hr(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${En.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${En.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),hy=x.memo(function(r){const n=ct({props:r,name:"MuiPickersYear"}),{autoFocus:s,className:a,children:o,disabled:i,selected:l,value:c,tabIndex:d,onClick:u,onKeyDown:f,onFocus:p,onBlur:m,"aria-current":g}=n,b=Le(n,ly),P=x.useRef(null),j=cy(n);return x.useEffect(()=>{s&&P.current.focus()},[s]),e.jsx(dy,V({className:ut(j.root,a),ownerState:n},b,{children:e.jsx(uy,{ref:P,disabled:i,type:"button",role:"radio",tabIndex:i?-1:d,"aria-current":g,"aria-checked":l,onClick:w=>u(w,c),onKeyDown:w=>f(w,c),onFocus:w=>p(w,c),onBlur:w=>m(w,c),className:j.yearButton,ownerState:n,children:o})}))});function my(t){return yt("MuiYearCalendar",t)}vt("MuiYearCalendar",["root"]);const fy=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],py=t=>{const{classes:r}=t;return ft({root:["root"]},my,r)};function xy(t,r){var n;const s=Ye(),a=Pn(),o=ct({props:t,name:r});return V({disablePast:!1,disableFuture:!1},o,{yearsPerRow:(n=o.yearsPerRow)!=null?n:3,minDate:kt(s,o.minDate,a.minDate),maxDate:kt(s,o.maxDate,a.maxDate)})}const gy=ke("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:As,maxHeight:ux,boxSizing:"border-box",position:"relative"}),yy=x.forwardRef(function(r,n){const s=xy(r,"MuiYearCalendar"),{autoFocus:a,className:o,value:i,defaultValue:l,referenceDate:c,disabled:d,disableFuture:u,disablePast:f,maxDate:p,minDate:m,onChange:g,readOnly:b,shouldDisableYear:P,disableHighlightToday:j,onYearFocus:w,hasFocus:S,onFocusedViewChange:y,yearsPerRow:A,timezone:O,gridLabelId:N}=s,I=Le(s,fy),{value:E,handleValueChange:k,timezone:C}=Ea({name:"YearCalendar",timezone:O,value:i,defaultValue:l,onChange:g,valueManager:ar}),T=Ds(C),F=Oo(),_=Ye(),R=x.useMemo(()=>ar.getInitialReferenceValue({value:E,utils:_,props:s,timezone:C,referenceDate:c,granularity:Lt.year}),[]),q=s,B=py(q),$=x.useMemo(()=>_.getYear(T),[_,T]),H=x.useMemo(()=>E!=null?_.getYear(E):j?null:_.getYear(R),[E,_,j,R]),[Q,J]=x.useState(()=>H||$),[re,te]=gr({name:"YearCalendar",state:"hasFocus",controlled:S,default:a??!1}),D=ye(ne=>{te(ne),y&&y(ne)}),ee=x.useCallback(ne=>{if(f&&_.isBeforeYear(ne,T)||u&&_.isAfterYear(ne,T)||m&&_.isBeforeYear(ne,m)||p&&_.isAfterYear(ne,p))return!0;if(!P)return!1;const be=_.startOfYear(ne);return P(be)},[u,f,p,m,T,P,_]),pe=ye((ne,be)=>{if(b)return;const He=_.setYear(E??R,be);k(He)}),U=ye(ne=>{ee(_.setYear(E??R,ne))||(J(ne),D(!0),w==null||w(ne))});x.useEffect(()=>{J(ne=>H!==null&&ne!==H?H:ne)},[H]);const Z=ye((ne,be)=>{switch(ne.key){case"ArrowUp":U(be-A),ne.preventDefault();break;case"ArrowDown":U(be+A),ne.preventDefault();break;case"ArrowLeft":U(be+(F.direction==="ltr"?-1:1)),ne.preventDefault();break;case"ArrowRight":U(be+(F.direction==="ltr"?1:-1)),ne.preventDefault();break}}),ce=ye((ne,be)=>{U(be)}),je=ye((ne,be)=>{Q===be&&D(!1)}),me=x.useRef(null),ge=Mr(n,me);return x.useEffect(()=>{if(a||me.current===null)return;const ne=me.current.querySelector('[tabindex="0"]');if(!ne)return;const be=ne.offsetHeight,He=ne.offsetTop,Be=me.current.clientHeight,lt=me.current.scrollTop,le=He+be;be>Be||He<lt||(me.current.scrollTop=le-Be/2-be/2)},[a]),e.jsx(gy,V({ref:ge,className:ut(B.root,o),ownerState:q,role:"radiogroup","aria-labelledby":N},I,{children:_.getYearRange(m,p).map(ne=>{const be=_.getYear(ne),He=be===H,Be=d||ee(ne);return e.jsx(hy,{selected:He,value:be,onClick:pe,onKeyDown:Z,autoFocus:re&&be===Q,disabled:Be,tabIndex:be===Q?0:-1,onFocus:ce,onBlur:je,"aria-current":$===be?"date":void 0,yearsPerRow:A,children:_.format(ne,"year")},_.format(ne,"year"))})}))}),vy=t=>yt("MuiPickersCalendarHeader",t),by=vt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),jy=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],wy=["ownerState"],Cy=t=>{const{classes:r}=t;return ft({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},vy,r)},Py=ke("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),Ty=ke("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(t,r)=>r.labelContainer})(({theme:t})=>V({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),Sy=ke("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(t,r)=>r.label})({marginRight:6}),Dy=ke(Et,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(t,r)=>r.switchViewButton})(({ownerState:t})=>V({marginRight:"auto"},t.view==="year"&&{[`.${by.switchViewIcon}`]:{transform:"rotate(180deg)"}})),ky=ke(Zp,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(t,r)=>r.switchViewIcon})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),Ay=x.forwardRef(function(r,n){var s,a,o,i;const l=jr(),c=Ye(),d=ct({props:r,name:"MuiPickersCalendarHeader"}),{slots:u,slotProps:f,components:p,currentMonth:m,disabled:g,disableFuture:b,disablePast:P,maxDate:j,minDate:w,onMonthChange:S,onViewChange:y,view:A,reduceAnimations:O,views:N,labelId:I,className:E,timezone:k}=d,C=Le(d,jy),T=d,F=Cy(d),_=(s=(a=u==null?void 0:u.switchViewButton)!=null?a:p==null?void 0:p.SwitchViewButton)!=null?s:Dy,R=it({elementType:_,externalSlotProps:f==null?void 0:f.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(A)},ownerState:T,className:F.switchViewButton}),q=(o=(i=u==null?void 0:u.switchViewIcon)!=null?i:p==null?void 0:p.SwitchViewIcon)!=null?o:ky,B=it({elementType:q,externalSlotProps:f==null?void 0:f.switchViewIcon,ownerState:void 0,className:F.switchViewIcon}),$=Le(B,wy),H=()=>S(c.addMonths(m,1),"left"),Q=()=>S(c.addMonths(m,-1),"right"),J=Jx(m,{disableFuture:b,maxDate:j,timezone:k}),re=eg(m,{disablePast:P,minDate:w,timezone:k}),te=()=>{if(!(N.length===1||!y||g))if(N.length===2)y(N.find(D=>D!==A)||N[0]);else{const D=N.indexOf(A)!==0?0:1;y(N[D])}};return N.length===1&&N[0]==="year"?null:e.jsxs(Py,V({},C,{ownerState:T,className:ut(E,F.root),ref:n,children:[e.jsxs(Ty,{role:"presentation",onClick:te,ownerState:T,"aria-live":"polite",className:F.labelContainer,children:[e.jsx(vl,{reduceAnimations:O,transKey:c.format(m,"monthAndYear"),children:e.jsx(Sy,{id:I,ownerState:T,className:F.label,children:c.format(m,"monthAndYear")})}),N.length>1&&!g&&e.jsx(_,V({},R,{children:e.jsx(q,V({},$))}))]}),e.jsx(os,{in:A==="day",children:e.jsx(dx,{slots:u,slotProps:f,onGoToPrevious:Q,isPreviousDisabled:re,previousLabel:l.previousMonth,onGoToNext:H,isNextDisabled:J,nextLabel:l.nextMonth})})]}))}),Ny=ke("div")({overflow:"hidden",width:As,maxHeight:Ma,display:"flex",flexDirection:"column",margin:"0 auto"}),My=t=>yt("MuiDateCalendar",t);vt("MuiDateCalendar",["root","viewTransitionContainer"]);const Ry=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],Ey=t=>{const{classes:r}=t;return ft({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},My,r)};function Iy(t,r){var n,s,a,o,i,l,c;const d=Ye(),u=Pn(),f=al(),p=ct({props:t,name:r});return V({},p,{loading:(n=p.loading)!=null?n:!1,disablePast:(s=p.disablePast)!=null?s:!1,disableFuture:(a=p.disableFuture)!=null?a:!1,openTo:(o=p.openTo)!=null?o:"day",views:(i=p.views)!=null?i:["year","day"],reduceAnimations:(l=p.reduceAnimations)!=null?l:f,renderLoading:(c=p.renderLoading)!=null?c:()=>e.jsx("span",{children:"..."}),minDate:kt(d,p.minDate,u.minDate),maxDate:kt(d,p.maxDate,u.maxDate)})}const Oy=ke(Ny,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexDirection:"column",height:Ma}),_y=ke(vl,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(t,r)=>r.viewTransitionContainer})({}),Fy=x.forwardRef(function(r,n){var s,a,o;const i=Ye(),l=pa(),c=Iy(r,"MuiDateCalendar"),{autoFocus:d,onViewChange:u,value:f,defaultValue:p,referenceDate:m,disableFuture:g,disablePast:b,defaultCalendarMonth:P,onChange:j,onYearChange:w,onMonthChange:S,reduceAnimations:y,shouldDisableDate:A,shouldDisableMonth:O,shouldDisableYear:N,view:I,views:E,openTo:k,className:C,disabled:T,readOnly:F,minDate:_,maxDate:R,disableHighlightToday:q,focusedView:B,onFocusedViewChange:$,showDaysOutsideCurrentMonth:H,fixedWeekNumber:Q,dayOfWeekFormatter:J,components:re,componentsProps:te,slots:D,slotProps:ee,loading:pe,renderLoading:U,displayWeekNumber:Z,yearsPerRow:ce,monthsPerRow:je,timezone:me}=c,ge=Le(c,Ry),{value:ne,handleValueChange:be,timezone:He}=Ea({name:"DateCalendar",timezone:me,value:f,defaultValue:p,onChange:j,valueManager:ar}),{view:Be,setView:lt,focusedView:le,setFocusedView:we,goToNextView:z,setValueAndGoToNextView:G}=il({view:I,views:E,openTo:k,onChange:be,onViewChange:u,autoFocus:d,focusedView:B,onFocusedViewChange:$}),{referenceDate:Te,calendarState:Ve,changeFocusedDay:K,changeMonth:oe,handleChangeMonth:Se,isDateDisabled:Ae,onMonthSwitchingAnimationEnd:rt}=Ig({value:ne,defaultCalendarMonth:P,referenceDate:m,reduceAnimations:y,onMonthChange:S,minDate:_,maxDate:R,shouldDisableDate:A,disablePast:b,disableFuture:g,timezone:He}),Tt=T&&ne||_,qt=T&&ne||R,dr=`${l}-grid-label`,wr=le!==null,Pt=(s=(a=D==null?void 0:D.calendarHeader)!=null?a:re==null?void 0:re.CalendarHeader)!=null?s:Ay,Ms=it({elementType:Pt,externalSlotProps:(o=ee==null?void 0:ee.calendarHeader)!=null?o:te==null?void 0:te.calendarHeader,additionalProps:{views:E,view:Be,currentMonth:Ve.currentMonth,onViewChange:lt,onMonthChange:(Ke,Ot)=>Se({newMonth:Ke,direction:Ot}),minDate:Tt,maxDate:qt,disabled:T,disablePast:b,disableFuture:g,reduceAnimations:y,timezone:He,labelId:dr,slots:D,slotProps:ee},ownerState:c}),Rs=ye(Ke=>{const Ot=i.startOfMonth(Ke),Zr=i.endOfMonth(Ke),ur=Ae(Ke)?hn({utils:i,date:Ke,minDate:i.isBefore(_,Ot)?Ot:_,maxDate:i.isAfter(R,Zr)?Zr:R,disablePast:b,disableFuture:g,isDateDisabled:Ae,timezone:He}):Ke;ur?(G(ur,"finish"),S==null||S(Ot)):(z(),oe(Ot)),K(ur,!0)}),Es=ye(Ke=>{const Ot=i.startOfYear(Ke),Zr=i.endOfYear(Ke),ur=Ae(Ke)?hn({utils:i,date:Ke,minDate:i.isBefore(_,Ot)?Ot:_,maxDate:i.isAfter(R,Zr)?Zr:R,disablePast:b,disableFuture:g,isDateDisabled:Ae,timezone:He}):Ke;ur?(G(ur,"finish"),w==null||w(ur)):(z(),oe(Ot)),K(ur,!0)}),Tn=ye(Ke=>be(Ke&&ts(i,Ke,ne??Te),"finish",Be));x.useEffect(()=>{ne!=null&&i.isValid(ne)&&oe(ne)},[ne]);const Xr=c,Sn=Ey(Xr),Ie={disablePast:b,disableFuture:g,maxDate:R,minDate:_},xe={disableHighlightToday:q,readOnly:F,disabled:T,timezone:He,gridLabelId:dr},Is=x.useRef(Be);x.useEffect(()=>{Is.current!==Be&&(le===Is.current&&we(Be,!0),Is.current=Be)},[le,we,Be]);const kl=x.useMemo(()=>[ne],[ne]);return e.jsxs(Oy,V({ref:n,className:ut(Sn.root,C),ownerState:Xr},ge,{children:[e.jsx(Pt,V({},Ms)),e.jsx(_y,{reduceAnimations:y,className:Sn.viewTransitionContainer,transKey:Be,ownerState:Xr,children:e.jsxs("div",{children:[Be==="year"&&e.jsx(yy,V({},Ie,xe,{value:ne,onChange:Es,shouldDisableYear:N,hasFocus:wr,onFocusedViewChange:Ke=>we("year",Ke),yearsPerRow:ce,referenceDate:Te})),Be==="month"&&e.jsx(oy,V({},Ie,xe,{hasFocus:wr,className:C,value:ne,onChange:Rs,shouldDisableMonth:O,onFocusedViewChange:Ke=>we("month",Ke),monthsPerRow:je,referenceDate:Te})),Be==="day"&&e.jsx(Rg,V({},Ve,Ie,xe,{onMonthSwitchingAnimationEnd:rt,onFocusedDayChange:K,reduceAnimations:y,selectedDays:kl,onSelectedDaysChange:Tn,shouldDisableDate:A,shouldDisableMonth:O,shouldDisableYear:N,hasFocus:wr,onFocusedViewChange:Ke=>we("day",Ke),showDaysOutsideCurrentMonth:H,fixedWeekNumber:Q,dayOfWeekFormatter:J,displayWeekNumber:Z,components:re,componentsProps:te,slots:D,slotProps:ee,loading:pe,renderLoading:U}))]})})]}))}),Ur=({view:t,onViewChange:r,views:n,focusedView:s,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:f,disablePast:p,minDate:m,maxDate:g,shouldDisableDate:b,shouldDisableMonth:P,shouldDisableYear:j,reduceAnimations:w,onMonthChange:S,monthsPerRow:y,onYearChange:A,yearsPerRow:O,defaultCalendarMonth:N,components:I,componentsProps:E,slots:k,slotProps:C,loading:T,renderLoading:F,disableHighlightToday:_,readOnly:R,disabled:q,showDaysOutsideCurrentMonth:B,dayOfWeekFormatter:$,sx:H,autoFocus:Q,fixedWeekNumber:J,displayWeekNumber:re,timezone:te})=>e.jsx(Fy,{view:t,onViewChange:r,views:n.filter(xo),focusedView:s&&xo(s)?s:null,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:f,disablePast:p,minDate:m,maxDate:g,shouldDisableDate:b,shouldDisableMonth:P,shouldDisableYear:j,reduceAnimations:w,onMonthChange:S,monthsPerRow:y,onYearChange:A,yearsPerRow:O,defaultCalendarMonth:N,components:I,componentsProps:E,slots:k,slotProps:C,loading:T,renderLoading:F,disableHighlightToday:_,readOnly:R,disabled:q,showDaysOutsideCurrentMonth:B,dayOfWeekFormatter:$,sx:H,autoFocus:Q,fixedWeekNumber:J,displayWeekNumber:re,timezone:te}),bl=x.forwardRef(function(r,n){var s,a,o,i;const l=jr(),c=Ye(),d=sl(r,"MuiDesktopDatePicker"),u=V({day:Ur,month:Ur,year:Ur},d.viewRenderers),f=V({},d,{viewRenderers:u,format:Aa(c,d,!1),yearsPerRow:(s=d.yearsPerRow)!=null?s:4,slots:V({openPickerIcon:tx,field:yl},d.slots),slotProps:V({},d.slotProps,{field:m=>{var g;return V({},Da((g=d.slotProps)==null?void 0:g.field,m),ml(d),{ref:n})},toolbar:V({hidden:!0},(a=d.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:p}=Lg({props:f,valueManager:ar,valueType:"date",getOpenDialogAriaText:(o=(i=f.localeText)==null?void 0:i.openDatePickerDialogue)!=null?o:l.openDatePickerDialogue,validator:Ns});return p()});bl.propTypes={autoFocus:L.bool,className:L.string,closeOnSelect:L.bool,components:L.object,componentsProps:L.object,dayOfWeekFormatter:L.func,defaultCalendarMonth:L.any,defaultValue:L.any,disabled:L.bool,disableFuture:L.bool,disableHighlightToday:L.bool,disableOpenPicker:L.bool,disablePast:L.bool,displayWeekNumber:L.bool,fixedWeekNumber:L.number,format:L.string,formatDensity:L.oneOf(["dense","spacious"]),inputRef:_o,label:L.node,loading:L.bool,localeText:L.object,maxDate:L.any,minDate:L.any,monthsPerRow:L.oneOf([3,4]),name:L.string,onAccept:L.func,onChange:L.func,onClose:L.func,onError:L.func,onMonthChange:L.func,onOpen:L.func,onSelectedSectionsChange:L.func,onViewChange:L.func,onYearChange:L.func,open:L.bool,openTo:L.oneOf(["day","month","year"]),orientation:L.oneOf(["landscape","portrait"]),readOnly:L.bool,reduceAnimations:L.bool,referenceDate:L.any,renderLoading:L.func,selectedSections:L.oneOfType([L.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),L.number,L.shape({endIndex:L.number.isRequired,startIndex:L.number.isRequired})]),shouldDisableDate:L.func,shouldDisableMonth:L.func,shouldDisableYear:L.func,showDaysOutsideCurrentMonth:L.bool,slotProps:L.object,slots:L.object,sx:L.oneOfType([L.arrayOf(L.oneOfType([L.func,L.object,L.bool])),L.func,L.object]),timezone:L.string,value:L.any,view:L.oneOf(["day","month","year"]),viewRenderers:L.shape({day:L.func,month:L.func,year:L.func}),views:L.arrayOf(L.oneOf(["day","month","year"]).isRequired),yearsPerRow:L.oneOf([3,4])};const Ly=["props","getOpenDialogAriaText"],Vy=t=>{var r,n,s;let{props:a,getOpenDialogAriaText:o}=t,i=Le(t,Ly);const{slots:l,slotProps:c,className:d,sx:u,format:f,formatDensity:p,timezone:m,name:g,label:b,inputRef:P,readOnly:j,disabled:w,localeText:S}=a,y=Ye(),A=x.useRef(null),O=pa(),N=(r=c==null||(n=c.toolbar)==null?void 0:n.hidden)!=null?r:!1,{open:I,actions:E,layoutProps:k,renderCurrentView:C,fieldProps:T}=ll(V({},i,{props:a,inputRef:A,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),F=l.field,_=it({elementType:F,externalSlotProps:c==null?void 0:c.field,additionalProps:V({},T,N&&{id:O},!(w||j)&&{onClick:E.onOpen,onKeyDown:gx(E.onOpen)},{readOnly:j??!0,disabled:w,className:d,sx:u,format:f,formatDensity:p,timezone:m,label:b,name:g}),ownerState:a});_.inputProps=V({},_.inputProps,{"aria-label":o(T.value,y)});const R=V({textField:l.textField},_.slots),q=(s=l.layout)!=null?s:ul,B=Mr(A,_.inputRef,P);let $=O;N&&(b?$=`${O}-label`:$=void 0);const H=V({},c,{toolbar:V({},c==null?void 0:c.toolbar,{titleId:O}),mobilePaper:V({"aria-labelledby":$},c==null?void 0:c.mobilePaper)});return{renderPicker:()=>e.jsxs(Kt,{localeText:S,children:[e.jsx(F,V({},_,{slots:R,slotProps:H,inputRef:B})),e.jsx(fx,V({},E,{open:I,slots:l,slotProps:H,children:e.jsx(q,V({},k,H==null?void 0:H.layout,{slots:l,slotProps:H,children:C()}))}))]})}},jl=x.forwardRef(function(r,n){var s,a,o;const i=jr(),l=Ye(),c=sl(r,"MuiMobileDatePicker"),d=V({day:Ur,month:Ur,year:Ur},c.viewRenderers),u=V({},c,{viewRenderers:d,format:Aa(l,c,!1),slots:V({field:yl},c.slots),slotProps:V({},c.slotProps,{field:p=>{var m;return V({},Da((m=c.slotProps)==null?void 0:m.field,p),ml(c),{ref:n})},toolbar:V({hidden:!1},(s=c.slotProps)==null?void 0:s.toolbar)})}),{renderPicker:f}=Vy({props:u,valueManager:ar,valueType:"date",getOpenDialogAriaText:(a=(o=u.localeText)==null?void 0:o.openDatePickerDialogue)!=null?a:i.openDatePickerDialogue,validator:Ns});return f()});jl.propTypes={autoFocus:L.bool,className:L.string,closeOnSelect:L.bool,components:L.object,componentsProps:L.object,dayOfWeekFormatter:L.func,defaultCalendarMonth:L.any,defaultValue:L.any,disabled:L.bool,disableFuture:L.bool,disableHighlightToday:L.bool,disableOpenPicker:L.bool,disablePast:L.bool,displayWeekNumber:L.bool,fixedWeekNumber:L.number,format:L.string,formatDensity:L.oneOf(["dense","spacious"]),inputRef:_o,label:L.node,loading:L.bool,localeText:L.object,maxDate:L.any,minDate:L.any,monthsPerRow:L.oneOf([3,4]),name:L.string,onAccept:L.func,onChange:L.func,onClose:L.func,onError:L.func,onMonthChange:L.func,onOpen:L.func,onSelectedSectionsChange:L.func,onViewChange:L.func,onYearChange:L.func,open:L.bool,openTo:L.oneOf(["day","month","year"]),orientation:L.oneOf(["landscape","portrait"]),readOnly:L.bool,reduceAnimations:L.bool,referenceDate:L.any,renderLoading:L.func,selectedSections:L.oneOfType([L.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),L.number,L.shape({endIndex:L.number.isRequired,startIndex:L.number.isRequired})]),shouldDisableDate:L.func,shouldDisableMonth:L.func,shouldDisableYear:L.func,showDaysOutsideCurrentMonth:L.bool,slotProps:L.object,slots:L.object,sx:L.oneOfType([L.arrayOf(L.oneOfType([L.func,L.object,L.bool])),L.func,L.object]),timezone:L.string,value:L.any,view:L.oneOf(["day","month","year"]),viewRenderers:L.shape({day:L.func,month:L.func,year:L.func}),views:L.arrayOf(L.oneOf(["day","month","year"]).isRequired),yearsPerRow:L.oneOf([3,4])};const $y=["desktopModeMediaQuery"],By=x.forwardRef(function(r,n){const s=ct({props:r,name:"MuiDatePicker"}),{desktopModeMediaQuery:a=yx}=s,o=Le(s,$y);return ua(a,{defaultMatches:!0})?e.jsx(bl,V({ref:n},o)):e.jsx(jl,V({ref:n},o))});var ca={exports:{}};(function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},s=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},a=function(c,d){var u=c.match(/(P+)(p+)?/)||[],f=u[1],p=u[2];if(!p)return n(c,d);var m;switch(f){case"P":m=d.dateTime({width:"short"});break;case"PP":m=d.dateTime({width:"medium"});break;case"PPP":m=d.dateTime({width:"long"});break;case"PPPP":default:m=d.dateTime({width:"full"});break}return m.replace("{{date}}",n(f,d)).replace("{{time}}",s(p,d))},o={p:s,P:a},i=o;r.default=i,t.exports=r.default})(ca,ca.exports);var Uy=ca.exports;const Wy=oc(Uy),Hy={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},zy={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Yy{constructor(r){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Hy,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(i).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:n,formats:s,longFormatters:a}=r;this.locale=n,this.formats=V({},zy,s),this.longFormatters=a}}class Sr extends Yy{constructor({locale:r,formats:n}={}){if(typeof Wn!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:r??Ca,formats:n,longFormatters:Wy}),this.parseISO=s=>pr(s),this.toISO=s=>lm(s,{format:"extended"}),this.parse=(s,a)=>s===""?null:gf(s,a,new Date,{locale:this.locale}),this.isValid=s=>ki(this.date(s)),this.format=(s,a)=>this.formatByString(s,this.formats[a]),this.formatByString=(s,a)=>fr(s,a,{locale:this.locale}),this.getDiff=(s,a,o)=>{switch(o){case"years":return uh(s,this.date(a));case"quarters":return lh(s,this.date(a));case"months":return Ni(s,this.date(a));case"weeks":return dh(s,this.date(a));case"days":return Ai(s,this.date(a));case"hours":return ah(s,this.date(a));case"minutes":return oh(s,this.date(a));case"seconds":return ch(s,this.date(a));default:return Cs(s,this.date(a))}},this.isEqual=(s,a)=>s===null&&a===null?!0:bm(s,a),this.isSameYear=(s,a)=>jf(s,a),this.isSameMonth=(s,a)=>bf(s,a),this.isSameDay=(s,a)=>eh(s,a),this.isSameHour=(s,a)=>vf(s,a),this.isAfter=(s,a)=>Hs(s,a),this.isAfterYear=(s,a)=>Hs(s,Bs(a)),this.isAfterDay=(s,a)=>Hs(s,aa(a)),this.isBefore=(s,a)=>nn(s,a),this.isBeforeYear=(s,a)=>nn(s,An(a)),this.isBeforeDay=(s,a)=>nn(s,qr(a)),this.isWithinRange=(s,[a,o])=>wf(s,{start:a,end:o}),this.startOfYear=s=>An(s),this.startOfMonth=s=>ao(s),this.startOfWeek=s=>kr(s,{locale:this.locale}),this.startOfDay=s=>qr(s),this.endOfYear=s=>Bs(s),this.endOfMonth=s=>oa(s),this.endOfWeek=s=>Us(s,{locale:this.locale}),this.endOfDay=s=>aa(s),this.addYears=(s,a)=>ro(s,a),this.addMonths=(s,a)=>Hn(s,a),this.addWeeks=(s,a)=>Zu(s,a),this.addDays=(s,a)=>Wn(s,a),this.addHours=(s,a)=>zu(s,a),this.addMinutes=(s,a)=>Gu(s,a),this.addSeconds=(s,a)=>Xu(s,a),this.getYear=s=>vm(s),this.getMonth=s=>mm(s),this.getDate=s=>cm(s),this.getHours=s=>dm(s),this.getMinutes=s=>hm(s),this.getSeconds=s=>fm(s),this.getMilliseconds=s=>um(s),this.setYear=(s,a)=>Hf(s,a),this.setMonth=(s,a)=>Lf(s,a),this.setDate=(s,a)=>Vf(s,a),this.setHours=(s,a)=>$f(s,a),this.setMinutes=(s,a)=>Uf(s,a),this.setSeconds=(s,a)=>Wf(s,a),this.setMilliseconds=(s,a)=>Bf(s,a),this.getDaysInMonth=s=>Li(s),this.getNextMonth=s=>Hn(s,1),this.getPreviousMonth=s=>Hn(s,-1),this.getMonthArray=s=>{const o=[An(s)];for(;o.length<12;){const i=o[o.length-1];o.push(this.getNextMonth(i))}return o},this.mergeDateAndTime=(s,a)=>this.setSeconds(this.setMinutes(this.setHours(s,this.getHours(a)),this.getMinutes(a)),this.getSeconds(a)),this.getWeekdays=()=>{const s=new Date;return hh({start:kr(s,{locale:this.locale}),end:Us(s,{locale:this.locale})}).map(a=>this.formatByString(a,"EEEEEE"))},this.getWeekArray=s=>{const a=kr(ao(s),{locale:this.locale}),o=Us(oa(s),{locale:this.locale});let i=0,l=a;const c=[];for(;nn(l,o);){const d=Math.floor(i/7);c[d]=c[d]||[],c[d].push(l),l=Wn(l,1),i+=1}return c},this.getWeekNumber=s=>ym(s,{locale:this.locale}),this.getYearRange=(s,a)=>{const o=An(s),i=Bs(a),l=[];let c=o;for(;nn(c,i);)l.push(c),c=ro(c,1);return l}}}class qy{constructor(){}async makeRequest(r,n,s){try{return(await Ne.api.request({method:r,url:n,data:s})).data}catch(a){throw this.handleServiceError(a)}}async createAsset(r){return this.makeRequest("POST","/api/v1/assets",r)}async getAssets(r={}){const n=new URLSearchParams;Object.entries(r).forEach(([a,o])=>{o!=null&&o!==""&&n.append(a,o.toString())});const s=`/api/v1/assets?${n.toString()}`;return this.makeRequest("GET",s)}async getAssetById(r){return this.makeRequest("GET",`/api/v1/assets/${r}`)}async updateAsset(r,n){console.log("AssetService.updateAsset called with:",{id:r,data:n}),console.log("Making PUT request to: /api/v1/assets/"+r);const s=await this.makeRequest("PUT",`/api/v1/assets/${r}`,n);return console.log("API response data:",s),s}async deleteAsset(r){await this.makeRequest("DELETE",`/api/v1/assets/${r}`)}async getAssetsByPortfolio(r,n={}){const s=new URLSearchParams;Object.entries(n).forEach(([o,i])=>{i!=null&&i!==""&&s.append(o,i.toString())});const a=`/api/v1/assets/portfolio/${r}?${s.toString()}`;return this.makeRequest("GET",a)}async searchAssets(r,n){const s=new URLSearchParams;s.append("q",r),n&&s.append("portfolioId",n);const a=`/api/v1/assets/search?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetStatistics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/statistics`)).data}async getAssetAnalytics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/analytics`)).data}async getAssetPerformance(r,n="ALL"){const s=new URLSearchParams;s.append("period",n);const a=`/api/v1/assets/portfolio/${r}/performance?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetAllocation(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/allocation`)).data}async getAssetTypes(){return(await this.makeRequest("GET","/api/v1/assets/types")).types}async getAssetRiskMetrics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/risk`)).data}async getRecentAssets(r,n){const s=new URLSearchParams;r&&s.append("limit",r.toString()),n&&s.append("portfolioId",n);const a=`/api/v1/assets/recent?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetsByValueRange(r,n,s){const a=new URLSearchParams;a.append("minValue",r.toString()),a.append("maxValue",n.toString()),s&&a.append("portfolioId",s);const o=`/api/v1/assets/value-range?${a.toString()}`;return(await this.makeRequest("GET",o)).data}async checkAssetExists(r){return(await this.makeRequest("GET",`/api/v1/assets/${r}/exists`)).data.exists}async getAssetCount(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/count`)).data.count}async getTradeCount(r){return await this.makeRequest("GET",`/api/v1/assets/${r}/trades/count`)}async deleteAllTrades(r){return(await this.makeRequest("DELETE",`/api/v1/assets/${r}/trades`)).deletedCount}async forceDeleteAsset(r){await this.makeRequest("DELETE",`/api/v1/assets/${r}/force`)}handleServiceError(r){return r instanceof Error?{message:r.message,status:0,code:"NETWORK_ERROR"}:r}}const Ar=new qy;function wl(t,r){return!t||t===0?0:(r-t)/t*100}function Cl(t){const{initialValue:r,currentValue:n,createdAt:s}=t,a=new Date(s),o=new Date,i=wl(r,n),l=Math.max(1,Math.floor((o.getTime()-a.getTime())/(1e3*60*60*24))),c=xr(i,l,1),d=xr(i,l,7),u=xr(i,l,30),f=xr(i,l,365);return{daily:Math.round(c*100)/100,weekly:Math.round(d*100)/100,monthly:Math.round(u*100)/100,yearly:Math.round(f*100)/100}}function xr(t,r,n){if(r<n)return t;const s=r/n;return t/s}function In(t,r){const n=Cl(t),s=Ky(r);return{daily:Math.round(n.daily*s.daily*100)/100,weekly:Math.round(n.weekly*s.weekly*100)/100,monthly:Math.round(n.monthly*s.monthly*100)/100,yearly:Math.round(n.yearly*s.yearly*100)/100}}function Qy(t){return{GOLD:.8,VFF:1.2,VESAF:1.1,SSISCA:1,HPG:1.3,VCB:.9}[t.toUpperCase()]||1}function Ky(t){const r=Qy(t),n=new Date,s=n.getHours(),a=n.getDay(),o=s>=9&&s<=15?1+(r-1)*.5:.8,i=a>=1&&a<=5?1+(r-1)*.3:.9,l=1+(r-1)*.2,c=1+(r-1)*.1;return{daily:o,weekly:i,monthly:l,yearly:c}}function On(t,r){if(!r||r.length===0)return Cl(t);const{currentValue:n}=t,s=r.filter(u=>u.side==="BUY").reduce((u,f)=>u+f.quantity*f.price,0),a=r.filter(u=>u.side==="SELL").reduce((u,f)=>u+f.quantity*f.price,0),o=s-a,i=wl(o,n),l=new Date(t.createdAt),d=Math.max(1,Math.floor((new Date().getTime()-l.getTime())/(1e3*60*60*24)));return{daily:xr(i,d,1),weekly:xr(i,d,7),monthly:xr(i,d,30),yearly:xr(i,d,365)}}function So(t){return t===0?"0.00%":t>0?`+${t.toFixed(2)}%`:`${t.toFixed(2)}%`}function Do(t){return t>0?"text-green-600":t<0?"text-red-600":"text-gray-600"}const Ia=(t={})=>{const{initialFilters:r={},autoFetch:n=!0}=t,{accountId:s}=At(),[a,o]=x.useState([]),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,f]=x.useState({createdBy:s,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC",...r}),[p,m]=x.useState({page:1,limit:25,total:0,totalPages:0}),g=x.useCallback(async k=>{l(!0),d(null);try{const C=new URLSearchParams;Object.entries(k).forEach(([_,R])=>{R!=null&&R!==""&&C.append(_,R.toString())});const F=`${k.createdBy?`/api/v1/assets/user/${k.createdBy}`:"/api/v1/assets"}?${C.toString()}`;try{const R=(await Ne.api.get(F)).data,q=B=>{const $={initialValue:B.initialValue||0,currentValue:B.currentQuantity&&B.currentPrice?B.currentQuantity*B.currentPrice:0,createdAt:B.createdAt,updatedAt:B.updatedAt};let H;return B.trades&&B.trades.length>0?H=On($,B.trades):H=In($,B.symbol),{...B,createdAt:B.createdAt,updatedAt:B.updatedAt,initialValue:B.initialValue,initialQuantity:B.initialQuantity,currentValue:B.currentQuantity&&B.currentPrice?B.currentQuantity*B.currentPrice:0,currentQuantity:B.currentQuantity,hasTrades:B.hasTrades,displayName:B.displayName,totalValue:B.hasTrades?B.currentQuantity&&B.currentPrice?B.currentQuantity*B.currentPrice:0:B.initialValue||0,totalQuantity:B.hasTrades?B.totalQuantity||B.currentQuantity||0:B.initialQuantity||0,currentPrice:B.currentPrice||0,avgCost:B.avgCost||0,quantity:B.hasTrades?B.currentQuantity||0:B.initialQuantity||0,performance:H}};if(Array.isArray(R)){const B=R.map(q);o(B),m({page:1,limit:B.length,total:B.length,totalPages:1})}else{const B=(R.data||[]).map(q);o(B),m({page:R.page||1,limit:R.limit||25,total:R.total||0,totalPages:R.totalPages||0})}}catch(_){throw console.error("Error fetching assets from API:",_),_}}catch(C){console.error("Error fetching assets:",C),d(C instanceof Error?C.message:"Failed to fetch assets"),o([]),m({page:1,limit:25,total:0,totalPages:0})}finally{l(!1)}},[]),b=x.useCallback(k=>{f(k),n&&g(k)},[n]),P=x.useCallback((k,C)=>{const T={...u,[k]:C};b(T)},[u,b]),j=x.useCallback(()=>{b({createdBy:s,portfolioId:void 0,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC"})},[b,s]),w=x.useCallback(()=>{g(u)},[u,g]),S=x.useCallback(async()=>{l(!0),d(null);try{await g(u)}catch(k){console.error("forceRefresh error:",k);const C=k instanceof Error?k.message:"Failed to refresh assets";d(C)}finally{l(!1)}},[u,g]),y=x.useCallback(k=>{P("page",k)},[P]),A=x.useCallback(k=>{P("limit",k),P("page",1)},[P]),O=x.useCallback((k,C)=>{P("sortBy",k),P("sortOrder",C)},[P]),N=x.useCallback(async(k,C)=>{try{console.log("useAssets updateAsset called with:",{id:k,data:C}),l(!0),d(null);const T={...C};console.log("Mapped backend data:",T),console.log("Calling assetService.updateAsset...");const F=await Ar.updateAsset(k,T);console.log("assetService.updateAsset result:",F);const _={initialValue:F.initialValue||0,currentValue:F.currentQuantity&&F.currentPrice?F.currentQuantity*F.currentPrice:0,createdAt:F.createdAt,updatedAt:F.updatedAt};let R;F.trades&&F.trades.length>0?R=On(_,F.trades):R=In(_,F.symbol);const q={...F,totalValue:F.hasTrades?F.currentQuantity&&F.currentPrice?F.currentQuantity*F.currentPrice:0:F.initialValue||0,totalQuantity:F.hasTrades?F.totalQuantity||F.currentQuantity||0:F.initialQuantity||0,quantity:F.hasTrades?F.currentQuantity||0:F.initialQuantity||0,performance:R};return o(B=>{console.log("Previous assets:",B),console.log("Asset to update ID:",k),console.log("Frontend asset data:",q);const $=B.map(H=>{if(H.id===k){const Q={...H,...q};return console.log("Updated asset:",Q),Q}return H});return console.log("New assets state:",$),$}),q}catch(T){console.error("Error in updateAsset:",T);const F=T instanceof Error?T.message:"Failed to update asset";throw d(F),T}finally{l(!1)}},[]),I=x.useCallback(async k=>{try{l(!0),d(null);const C=await Ar.createAsset(k),T={initialValue:C.initialValue||0,currentValue:C.currentQuantity&&C.currentPrice?C.currentQuantity*C.currentPrice:0,createdAt:C.createdAt,updatedAt:C.updatedAt};let F;C.trades&&C.trades.length>0?F=On(T,C.trades):F=In(T,C.symbol);const _={...C,totalValue:C.hasTrades?C.currentQuantity&&C.currentPrice?C.currentQuantity*C.currentPrice:0:C.initialValue||0,totalQuantity:C.hasTrades?C.totalQuantity||C.currentQuantity||0:C.initialQuantity||0,quantity:C.hasTrades?C.currentQuantity||0:C.initialQuantity||0,performance:F};return o(R=>[_,...R]),_}catch(C){const T=C instanceof Error?C.message:"Failed to create asset";throw d(T),C}finally{l(!1)}},[]),E=x.useCallback(async k=>{try{l(!0),d(null),await Ar.deleteAsset(k),o(C=>C.filter(T=>T.id!==k)),m(C=>({...C,total:Math.max(0,C.total-1)}))}catch(C){const T=C instanceof Error?C.message:"Failed to delete asset";throw d(T),C}finally{l(!1)}},[u,g]);return x.useEffect(()=>{s&&u.createdBy!==s&&f(k=>({...k,createdBy:s}))},[s]),x.useEffect(()=>{n&&g(u)},[n,g,u]),x.useEffect(()=>{const k=setInterval(()=>{if(a.length>0){const C=a.map(T=>{const F={initialValue:T.initialValue||0,currentValue:T.currentQuantity&&T.currentPrice?T.currentQuantity*T.currentPrice:0,createdAt:T.createdAt,updatedAt:T.updatedAt};let _;return T.trades&&T.trades.length>0?_=On(F,T.trades):_=In(F,T.symbol),{...T,totalValue:T.hasTrades?T.currentQuantity&&T.currentPrice?T.currentQuantity*T.currentPrice:0:T.initialValue||0,totalQuantity:T.hasTrades?T.totalQuantity||T.currentQuantity||0:T.initialQuantity||0,quantity:T.hasTrades?T.currentQuantity||0:T.initialQuantity||0,performance:_}});o(C)}},3e5);return()=>clearInterval(k)},[a]),{assets:a,loading:i,error:c,pagination:p,setFilters:b,updateFilter:P,clearFilters:j,refresh:w,forceRefresh:S,goToPage:y,setPageSize:A,setSorting:O,updateAsset:N,createAsset:I,deleteAsset:E}};var ht=(t=>(t.BUY="BUY",t.SELL="SELL",t))(ht||{}),bt=(t=>(t.MARKET="MARKET",t.LIMIT="LIMIT",t.STOP="STOP",t))(bt||{}),Nr=(t=>(t.MANUAL="MANUAL",t.API="API",t.IMPORT="IMPORT",t))(Nr||{}),Pl=(t=>(t.STOCK="STOCK",t.BOND="BOND",t.ETF="ETF",t.MUTUAL_FUND="MUTUAL_FUND",t.CRYPTO="CRYPTO",t.COMMODITY="COMMODITY",t.REIT="REIT",t.GOLD="GOLD",t.DEPOSIT="DEPOSIT",t.CASH="CASH",t.OTHER="OTHER",t))(Pl||{});const da={STOCK:"C phiu",BOND:"Tri phiu",ETF:"Qu ETF",MUTUAL_FUND:"Qu tng h",CRYPTO:"Tin in t",COMMODITY:"Hng ha",REIT:"Bt ng sn",GOLD:"Vng",DEPOSIT:"Tin gi",CASH:"Tin mt",OTHER:"Khc"},Gy=ls({portfolioId:dt().uuid("Invalid portfolio ID").required("Portfolio is required"),assetId:dt().uuid("Invalid asset ID").required("Asset is required"),tradeDate:dt().required("Trade date is required"),side:La().oneOf(Object.values(ht)).required("Trade side is required"),quantity:cn().positive("Quantity must be positive").min(.01,"Quantity must be at least 0.01").required("Quantity is required"),price:cn().positive("Price must be positive").min(.01,"Price must be at least 0.01").required("Price is required"),fee:cn().min(0,"Fee cannot be negative").optional(),tax:cn().min(0,"Tax cannot be negative").optional(),tradeType:La().oneOf(Object.values(bt)).optional(),notes:dt().max(500,"Notes cannot exceed 500 characters").optional()}),_n=({field:t,label:r,error:n,helperText:s,disabled:a,inputProps:o,currency:i})=>{const[l,c]=x.useState(""),[d,u]=x.useState(!1),f=j=>{if(!j||j==="")return"";const w=typeof j=="string"?parseFloat(j):j;return isNaN(w)?"":pt(w,i==="VND"?0:2)},p=j=>{if(!j||j.trim()==="")return"";const w=j.replace(/,/g,"").trim(),S=parseFloat(w);return isNaN(S)?"":S.toString()},m=j=>{if(!j)return!0;const w=j.replace(/,/g,"").trim();return/^\d*\.?\d*$/.test(w)};x.useEffect(()=>{d||c(f(t.value))},[t.value,d]);const g=()=>{var w;u(!0);let j=((w=t.value)==null?void 0:w.toString())||"";j.includes(".")&&(j=j.replace(/\.?0+$/,""),j.endsWith(".")&&(j=j.slice(0,-1))),c(j)},b=()=>{u(!1);const j=p(l);j?t.onChange(parseFloat(j)):t.onChange("");const w=f(t.value);c(w)},P=j=>{const w=j.target.value;if(!m(w))return;c(w);const S=p(w);S?t.onChange(parseFloat(S)):w===""&&t.onChange("")};return e.jsx(We,{value:l,onChange:P,onFocus:g,onBlur:b,label:r,type:"text",fullWidth:!0,error:n,helperText:s,disabled:a,inputProps:o,InputProps:{startAdornment:i?e.jsx(h,{variant:"body2",sx:{mr:1,color:"text.secondary"},children:zi[i]||i}):void 0}})},ns=({onSubmit:t,initialData:r,isLoading:n=!1,error:s,mode:a="create",defaultPortfolioId:o,showSubmitButton:i=!0,formRef:l})=>{const{accountId:c}=At(),{portfolios:d,isLoading:u,error:f}=vs(c),{assets:p,loading:m,error:g}=Ia(),{control:b,handleSubmit:P,watch:j,setValue:w,formState:{errors:S,isValid:y}}=cs({resolver:Ts(Gy),defaultValues:{portfolioId:(r==null?void 0:r.portfolioId)||o||"",assetId:(r==null?void 0:r.assetId)||"",tradeDate:(r==null?void 0:r.tradeDate)||new Date().toISOString(),side:(r==null?void 0:r.side)||ht.BUY,quantity:(r==null?void 0:r.quantity)||0,price:(r==null?void 0:r.price)||0,fee:(r==null?void 0:r.fee)||0,tax:(r==null?void 0:r.tax)||0,tradeType:(r==null?void 0:r.tradeType)||bt.MARKET,notes:(r==null?void 0:r.notes)||""}}),A=j("quantity"),O=j("price"),N=j("fee")||0,I=j("tax")||0,E=j("portfolioId"),k=j("assetId"),C=d==null?void 0:d.find($=>$.portfolioId===E),T=(C==null?void 0:C.baseCurrency)||"VND";x.useEffect(()=>{if(k&&p){const $=p.find(H=>H.id===k);$&&$.currentPrice&&$.currentPrice>0&&w("price",$.currentPrice)}},[k,p,w]);const F=x.useMemo(()=>{const $=Number(A)||0,H=Number(O)||0,Q=Number(N)||0,J=Number(I)||0,re=$*H,te=re+Q+J;return{value:re,cost:te,fee:Q,tax:J}},[A,O,N,I]);x.useEffect(()=>{r&&a==="edit"&&(w("portfolioId",r.portfolioId||""),w("assetId",r.assetId||""),w("tradeDate",r.tradeDate||new Date().toISOString()),w("side",r.side||ht.BUY),w("quantity",r.quantity||0),w("price",r.price||0),w("fee",r.fee||0),w("tax",r.tax||0),w("tradeType",r.tradeType||bt.MARKET),w("notes",r.notes||""))},[r,a,w]);const _=async $=>{try{const H=j(),Q={portfolioId:H.portfolioId,assetId:H.assetId,tradeDate:typeof H.tradeDate=="string"?H.tradeDate:H.tradeDate.toISOString(),side:H.side,quantity:H.quantity,price:H.price,fee:H.fee||0,tax:H.tax||0,tradeType:H.tradeType||bt.MARKET,notes:H.notes||""};await t(Q)}catch(H){console.error("Error submitting trade form:",H)}},R=$=>$===ht.BUY?"success":"error",q=$=>$===ht.BUY?"":"",B=()=>{if(k&&p){const $=p.find(H=>H.id===k);$&&$.currentPrice&&$.currentPrice>0&&w("price",$.currentPrice)}};return u||m?e.jsx(Kt,{dateAdapter:Sr,children:e.jsx(he,{children:e.jsx(fe,{children:e.jsxs(v,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(ze,{size:20}),e.jsx(h,{variant:"h5",children:"Loading trade form..."})]})})})}):!(d!=null&&d.length)&&!u?e.jsx(Kt,{dateAdapter:Sr,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(Ue,{severity:"error",sx:{mb:3},children:"No portfolios available. Please create a portfolio first."}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:f?`Error: ${f}`:"No portfolios found. Please check if the backend is running and try again."})]})})}):!(p!=null&&p.length)&&!m?e.jsx(Kt,{dateAdapter:Sr,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(Ue,{severity:"error",sx:{mb:3},children:"No assets available. Please create an asset first."}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:g?`Error: ${g}`:"No assets found. Please check if the backend is running and try again."})]})})}):e.jsxs(Kt,{dateAdapter:Sr,children:[s&&e.jsx(Ue,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:s}),e.jsxs("form",{ref:l,onSubmit:P(_),children:[e.jsxs(v,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Basic Information"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"portfolioId",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!S.portfolioId,children:[e.jsx(Je,{children:"Portfolio *"}),e.jsx(et,{...$,label:"Portfolio *",disabled:n||u,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:u?e.jsx(ue,{disabled:!0,children:"Loading portfolios..."}):(d==null?void 0:d.length)>0?d.map(H=>e.jsx(ue,{value:H.portfolioId,children:H.name},H.portfolioId)):e.jsx(ue,{disabled:!0,children:"No portfolios found"})}),S.portfolioId&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:S.portfolioId.message})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"assetId",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!S.assetId,children:[e.jsx(Je,{children:"Asset *"}),e.jsx(et,{...$,label:"Asset *",disabled:n||m,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:m?e.jsxs(ue,{disabled:!0,children:[e.jsx(ze,{size:20}),e.jsx("span",{style:{marginLeft:8},children:"Loading assets..."})]}):(p==null?void 0:p.length)===0?e.jsx(ue,{disabled:!0,children:"No assets available"}):p==null?void 0:p.map(H=>e.jsxs(ue,{value:H.id,children:[H.symbol||"N/A"," - ",H.name]},H.id))}),S.assetId&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:S.assetId.message})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"tradeDate",control:b,render:({field:$})=>{var H;return e.jsx(By,{label:"Trade Date *",disabled:n,value:(()=>{try{if(!$.value)return new Date;if(typeof $.value=="string"){const Q=new Date($.value);return isNaN(Q.getTime())?new Date:Q}return $.value}catch{return new Date}})(),onChange:Q=>{try{Q&&!isNaN(Q.getTime())?$.onChange(Q.toISOString()):$.onChange(new Date().toISOString())}catch{$.onChange(new Date().toISOString())}},slotProps:{textField:{fullWidth:!0,error:!!S.tradeDate,helperText:(H=S.tradeDate)==null?void 0:H.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}}})}})})]})]}),e.jsxs(v,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Details"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"side",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!S.side,children:[e.jsx(Je,{children:"Trade Side *"}),e.jsxs(et,{...$,label:"Trade Side *",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(ue,{value:ht.BUY,children:e.jsx(v,{display:"flex",alignItems:"center",gap:1,children:e.jsx(h,{color:"success.main",fontWeight:"medium",children:" BUY"})})}),e.jsx(ue,{value:ht.SELL,children:e.jsx(v,{display:"flex",alignItems:"center",gap:1,children:e.jsx(h,{color:"error.main",fontWeight:"medium",children:" SELL"})})})]}),S.side&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:S.side.message})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"quantity",control:b,render:({field:$})=>{var H;return e.jsx(_n,{field:$,label:"Quantity *",error:!!S.quantity,helperText:(H=S.quantity)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0.01"}})}})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"price",control:b,render:({field:$})=>{var H;return e.jsxs(v,{sx:{position:"relative"},children:[e.jsx(_n,{field:$,label:`Price per Unit (${T}) *`,error:!!S.price,helperText:(H=S.price)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0.01"},currency:T}),k&&e.jsx(as,{title:"Refresh market price",children:e.jsx(Et,{size:"small",onClick:B,disabled:n,sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",zIndex:1,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:e.jsx(zr,{fontSize:"small"})})})]})}})})]})]}),e.jsxs(v,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Additional Information"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"fee",control:b,render:({field:$})=>{var H;return e.jsx(_n,{field:$,label:`Trading Fee (${T})`,error:!!S.fee,helperText:(H=S.fee)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:T})}})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"tax",control:b,render:({field:$})=>{var H;return e.jsx(_n,{field:$,label:`Tax (${T})`,error:!!S.tax,helperText:(H=S.tax)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:T})}})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(qe,{name:"tradeType",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!S.tradeType,children:[e.jsx(Je,{children:"Trade Type"}),e.jsxs(et,{...$,label:"Trade Type",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(ue,{value:bt.MARKET,children:"Market Order"}),e.jsx(ue,{value:bt.LIMIT,children:"Limit Order"}),e.jsx(ue,{value:bt.STOP,children:"Stop Order"})]}),S.tradeType&&e.jsx(h,{variant:"caption",color:"error",children:S.tradeType.message})]})})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"notes",control:b,render:({field:$})=>{var H;return e.jsx(We,{...$,label:"Notes",multiline:!0,rows:3,fullWidth:!0,error:!!S.notes,helperText:(H=S.notes)==null?void 0:H.message,disabled:n,placeholder:"Additional notes about this trade...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}})})]})]}),e.jsxs(v,{mb:2,p:1.5,sx:{bgcolor:"grey.50",borderRadius:2,border:1,borderColor:"grey.200"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Summary"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"info.main",children:X(F.value,T)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"warning.main",children:X(F.fee+F.tax,T)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"primary.main",children:X(F.cost,T)})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Side"}),e.jsx(De,{label:j("side"),color:R(j("side")),icon:e.jsx("span",{children:q(j("side"))}),size:"small",sx:{fontWeight:600}})]})})]})]}),i&&e.jsx(v,{display:"flex",justifyContent:"flex-end",sx:{mt:2},children:e.jsx(Ce,{type:"submit",variant:"contained",disabled:!y||n,startIcon:n?e.jsx(ze,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:n?"Processing...":a==="create"?"Create Trade":"Update Trade"})})]})]})},Xy=({open:t,onClose:r,onSubmit:n,initialData:s,isLoading:a=!1,error:o})=>{const i=x.useRef(null),l=async d=>{try{await n(d),r()}catch(u){console.error("Error updating trade:",u)}},c=()=>{i.current&&i.current.requestSubmit()};return e.jsxs(or,{open:t,onClose:r,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh",maxHeight:"85vh",overflow:"hidden"}},children:[e.jsx(yr,{children:e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(h,{variant:"h6",children:"Edit Trade"}),e.jsx(Et,{onClick:r,size:"small",children:e.jsx(Fo,{})})]})}),e.jsx(ir,{dividers:!0,sx:{overflow:"auto",maxHeight:"calc(85vh - 100px)",p:0},children:e.jsx(v,{sx:{p:2},children:e.jsx(ns,{onSubmit:l,initialData:s,isLoading:a,error:o,mode:"edit",showSubmitButton:!1,formRef:i})})}),e.jsxs(lr,{sx:{p:2},children:[e.jsx(Ce,{onClick:r,disabled:a,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(Ce,{onClick:c,variant:"contained",disabled:a,startIcon:a?e.jsx(ze,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:a?"Updating...":"Update Trade"})]})]})},Zy=({trade:t,tradeDetails:r=[],onEdit:n,isLoading:s=!1})=>{const a=m=>m===ht.BUY?"success":"error",o=m=>m===ht.BUY?e.jsx(gt,{}):e.jsx(Dt,{}),i=m=>{switch(m){case bt.MARKET:return"primary";case bt.LIMIT:return"secondary";case bt.STOP:return"warning";default:return"default"}},l=m=>{switch(m){case Nr.MANUAL:return"info";case Nr.API:return"success";case Nr.IMPORT:return"warning";default:return"default"}},c=r.reduce((m,g)=>m+g.matchedQty,0),d=r.reduce((m,g)=>m+g.pnl,0),u=t.quantity*t.price,f=(Number(t.fee)||0)+(Number(t.tax)||0),p=u+f;return e.jsxs(v,{children:[e.jsxs(v,{sx:{bgcolor:"grey.50",p:2,borderRadius:2,mb:2,border:1,borderColor:"grey.200"},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h5",component:"h2",fontWeight:"bold",color:"primary",children:"Trade Details"}),e.jsxs(v,{display:"flex",gap:1,children:[e.jsx(De,{label:t.assetSymbol,color:"primary",variant:"outlined",size:"small",sx:{fontWeight:600}}),e.jsx(De,{label:t.side,color:a(t.side),icon:o(t.side),size:"small",sx:{fontWeight:600}}),e.jsx(De,{label:t.tradeType,color:i(t.tradeType),variant:"outlined",size:"small",sx:{fontWeight:600}})]})]}),e.jsx(v,{display:"flex",gap:1,children:n&&e.jsx(Ce,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>n(t),sx:{textTransform:"none",fontWeight:600,px:3,py:1},children:"Edit Trade"})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:[t.assetName,"  ",fr(pr(t.tradeDate.toString()),"MMM dd, yyyy HH:mm")]})]}),e.jsxs(M,{container:!0,spacing:2,mb:2,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{sx:{boxShadow:2,height:"100%"},children:e.jsxs(fe,{children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Basic Information"}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade ID"}),e.jsxs(h,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[t.tradeId.slice(0,8),"..."]})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Date & Time"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:fr(pr(t.tradeDate.toString()),"MMM dd, yyyy HH:mm")})]}),e.jsxs(M,{item:!0,xs:12,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset"}),e.jsxs(h,{variant:"body2",fontWeight:"medium",children:[t.assetSymbol," - ",t.assetName]})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Type"}),e.jsx(De,{label:t.tradeType,color:i(t.tradeType),size:"small"})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Source"}),e.jsx(De,{label:t.source,color:l(t.source),size:"small"})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(h,{variant:"body2",children:fr(pr(t.createdAt.toString()),"MMM dd, yyyy")})]})]})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{sx:{boxShadow:2,height:"100%"},children:e.jsxs(fe,{children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Financial Metrics"}),(t.totalValue!==u||t.totalCost!==p)&&e.jsx(Ue,{severity:"info",sx:{mb:2,fontSize:"0.75rem"},children:e.jsxs(h,{variant:"caption",children:[e.jsx("strong",{children:"Note:"})," Values shown are calculated from quantity  price. Database values: Total Value: ",X(Number(t.totalValue)||0),", Total Cost: ",X(Number(t.totalCost)||0)]})}),e.jsxs(M,{container:!0,spacing:1.5,children:[e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Quantity"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:pt(t.quantity,2)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Price per Unit"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:X(t.price)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"info.main",children:X(u)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"warning.main",children:X(f)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:X(p)})]}),e.jsxs(M,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Realized P&L"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:t.realizedPl&&t.realizedPl>=0?"success.main":"error.main",children:t.realizedPl?X(Number(t.realizedPl)||0):"N/A"})]})]})]})})})]}),t.notes&&e.jsx(v,{mb:2,children:e.jsx(he,{sx:{boxShadow:2},children:e.jsxs(fe,{sx:{p:2},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Notes"}),e.jsx(Ue,{severity:"info",variant:"outlined",sx:{bgcolor:"info.50",borderColor:"info.200","& .MuiAlert-message":{width:"100%"}},children:e.jsx(h,{variant:"body1",children:t.notes})})]})})}),t.side===ht.SELL&&r.length>0&&e.jsx(v,{mb:2,children:e.jsx(he,{sx:{boxShadow:2},children:e.jsxs(fe,{sx:{p:2},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Trade Matching Details"}),e.jsxs(M,{container:!0,spacing:2,mb:2,children:[e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"success.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Matched"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"success.main",children:pt(c,2)})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"warning.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Remaining"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"warning.main",children:pt(t.remainingQuantity||0,2)})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:d>=0?"success.50":"error.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Realized P&L"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:d>=0?"success.main":"error.main",children:X(d)})]})})]}),e.jsx(Gt,{component:nt,variant:"outlined",sx:{borderRadius:2,boxShadow:1},children:e.jsxs(Xt,{size:"small",children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(Y,{sx:{fontWeight:600},children:"Buy Trade ID"}),e.jsx(Y,{align:"right",sx:{fontWeight:600},children:"Matched Qty"}),e.jsx(Y,{align:"right",sx:{fontWeight:600},children:"Buy Price"}),e.jsx(Y,{align:"right",sx:{fontWeight:600},children:"Sell Price"}),e.jsx(Y,{align:"right",sx:{fontWeight:600},children:"P&L"}),e.jsx(Y,{sx:{fontWeight:600},children:"Matched Date"})]})}),e.jsx(Jt,{children:r.map(m=>e.jsxs(Ge,{sx:{"&:nth-of-type(odd)":{bgcolor:"grey.25"},"&:hover":{bgcolor:"action.hover"}},children:[e.jsx(Y,{children:e.jsxs(h,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[m.buyTradeId.slice(0,8),"..."]})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:pt(m.matchedQty,2)})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(m.buyPrice)})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(m.sellPrice)})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",color:m.pnl>=0?"success.main":"error.main",fontWeight:"bold",children:X(m.pnl)})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:fr(pr(m.createdAt.toString()),"MMM dd, yyyy")})})]},m.detailId))})]})})]})})}),t.side===ht.SELL&&(t.remainingQuantity||0)>0&&e.jsx(v,{mb:2,children:e.jsx(Ue,{severity:"warning",variant:"outlined",sx:{borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:e.jsxs(h,{variant:"body1",fontWeight:"medium",children:[" This sell trade has ",e.jsxs("strong",{children:[pt(t.remainingQuantity||0,2)," units"]})," remaining unmatched. Consider matching with available buy trades to realize P&L."]})})}),s&&e.jsx(v,{display:"flex",justifyContent:"center",py:4,children:e.jsx(h,{children:"Loading trade details..."})})]})},Jy=({open:t,onClose:r,onEdit:n,trade:s,tradeDetails:a=[],isLoading:o=!1,error:i})=>s?e.jsxs(or,{open:t,onClose:r,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh",borderRadius:3,boxShadow:24}},children:[e.jsx(yr,{sx:{bgcolor:"primary.50",borderBottom:1,borderColor:"divider",py:2},children:e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h5",fontWeight:"bold",children:"Trade Details"}),s&&e.jsx(v,{display:"flex",gap:1,children:e.jsxs(h,{variant:"body2",color:"text.secondary",children:[s.assetSymbol," - ",s.assetName]})})]}),e.jsx(Et,{onClick:r,size:"small",sx:{"&:hover":{bgcolor:"error.main",color:"white"}},children:e.jsx(Fo,{})})]})}),e.jsxs(ir,{sx:{p:0},children:[i&&e.jsx(Ue,{severity:"error",sx:{m:2,mb:0},children:i}),o?e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsxs(v,{textAlign:"center",children:[e.jsx(ze,{size:40}),e.jsx(h,{variant:"h6",sx:{mt:2},children:"Loading trade details..."})]})}):e.jsx(v,{sx:{p:2},children:e.jsx(Zy,{trade:s,tradeDetails:a,onEdit:n,isLoading:o})})]}),e.jsx(lr,{sx:{bgcolor:"grey.50",borderTop:1,borderColor:"divider",py:1.5,px:2},children:e.jsx(Ce,{onClick:r,variant:"contained",sx:{textTransform:"none",px:3},children:"Close"})})]}):null,ev=({trades:t,isLoading:r=!1,onEdit:n,onDelete:s,onView:a,onCreate:o,onPageChange:i,currentPage:l=1,totalPages:c=1,totalTrades:d=0})=>{const[u,f]=x.useState(""),[p,m]=x.useState("ALL"),[g,b]=x.useState("ALL"),[P,j]=x.useState("ALL"),[w,S]=x.useState(null),[y,A]=x.useState(null),O=x.useMemo(()=>t.filter(T=>{var B,$,H;const F=((B=T.assetSymbol)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))||(($=T.assetName)==null?void 0:$.toLowerCase().includes(u.toLowerCase()))||((H=T.notes)==null?void 0:H.toLowerCase().includes(u.toLowerCase())),_=p==="ALL"||T.side===p,R=g==="ALL"||T.tradeType===g,q=P==="ALL"||T.source===P;return F&&_&&R&&q}),[t,u,p,g,P]),N=(T,F)=>{S(T.currentTarget),A(F)},I=()=>{S(null),A(null)},E=T=>{if(y){switch(T){case"view":a==null||a(y);break;case"edit":n==null||n(y);break;case"delete":s==null||s(y);break}I()}},k=T=>T===ht.BUY?"success":"error",C=T=>T===ht.BUY?"":"";return e.jsxs(v,{sx:{p:3},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h5",component:"h2",gutterBottom:!0,children:"Trade History"}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Manage and track all your trading activities"})]}),e.jsxs(v,{display:"flex",gap:2,children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Yl,{}),onClick:()=>{},sx:{textTransform:"none"},children:"Filters"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:o,sx:{textTransform:"none"},children:"New Trade"})]})]}),e.jsx(v,{sx:{mb:3},children:e.jsxs(M,{container:!0,spacing:2,mb:3,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(We,{fullWidth:!0,placeholder:"Search trades by symbol, name, or notes...",value:u,onChange:T=>f(T.target.value),InputProps:{startAdornment:e.jsx(fa,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Side"}),e.jsxs(et,{value:p,label:"Side",onChange:T=>m(T.target.value),sx:{borderRadius:2},children:[e.jsx(ue,{value:"ALL",children:"All Sides"}),e.jsx(ue,{value:ht.BUY,children:"Buy"}),e.jsx(ue,{value:ht.SELL,children:"Sell"})]})]})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Type"}),e.jsxs(et,{value:g,label:"Type",onChange:T=>b(T.target.value),sx:{borderRadius:2},children:[e.jsx(ue,{value:"ALL",children:"All Types"}),e.jsx(ue,{value:bt.MARKET,children:"Market"}),e.jsx(ue,{value:bt.LIMIT,children:"Limit"}),e.jsx(ue,{value:bt.STOP,children:"Stop"})]})]})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Source"}),e.jsxs(et,{value:P,label:"Source",onChange:T=>j(T.target.value),sx:{borderRadius:2},children:[e.jsx(ue,{value:"ALL",children:"All Sources"}),e.jsx(ue,{value:Nr.MANUAL,children:"Manual"}),e.jsx(ue,{value:Nr.API,children:"API"}),e.jsx(ue,{value:Nr.IMPORT,children:"Import"})]})]})}),e.jsx(M,{item:!0,xs:12,md:2,children:e.jsx(v,{display:"flex",alignItems:"center",height:"100%",children:e.jsx(De,{label:`${O.length} of ${d} trades`,color:"primary",variant:"outlined",size:"small"})})})]})}),e.jsx(Gt,{component:nt,variant:"outlined",sx:{borderRadius:2,mb:3,boxShadow:1},children:e.jsxs(Xt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(Y,{sx:{fontWeight:600,color:"text.primary"},children:"Date"}),e.jsx(Y,{sx:{fontWeight:600,color:"text.primary"},children:"Asset"}),e.jsx(Y,{sx:{fontWeight:600,color:"text.primary"},children:"Side"}),e.jsx(Y,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Quantity"}),e.jsx(Y,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Price"}),e.jsx(Y,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Value"}),e.jsx(Y,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Fees"}),e.jsx(Y,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Cost"}),e.jsx(Y,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"P&L"}),e.jsx(Y,{align:"center",sx:{fontWeight:600,color:"text.primary"},children:"Actions"})]})}),e.jsx(Jt,{children:r?e.jsx(Ge,{children:e.jsx(Y,{colSpan:10,align:"center",sx:{py:6},children:e.jsxs(v,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(ze,{size:40}),e.jsx(h,{color:"text.secondary",children:"Loading trades..."})]})})}):O.length===0?e.jsx(Ge,{children:e.jsx(Y,{colSpan:10,align:"center",sx:{py:6},children:e.jsxs(v,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h6",color:"text.secondary",children:"No trades found"}),e.jsx(h,{color:"text.secondary",children:"No trades match your current filter criteria."}),e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Nt,{}),onClick:o,sx:{mt:1},children:"Create First Trade"})]})})}):O.map(T=>{var F,_;return e.jsxs(Ge,{hover:!0,onClick:()=>a==null?void 0:a(T),sx:{"&:hover":{bgcolor:"action.hover",cursor:"pointer"},"&:last-child td":{borderBottom:0}},children:[e.jsxs(Y,{children:[e.jsx(h,{variant:"body2",children:fr(pr(T.tradeDate.toString()),"MMM dd, yyyy")}),e.jsx(h,{variant:"caption",color:"text.secondary",children:fr(pr(T.tradeDate.toString()),"HH:mm")})]}),e.jsx(Y,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:T.assetSymbol||((F=T.asset)==null?void 0:F.symbol)||"N/A"}),e.jsx(h,{variant:"caption",color:"text.secondary",children:T.assetName||((_=T.asset)==null?void 0:_.name)||"N/A"})]})}),e.jsx(Y,{children:e.jsx(De,{label:T.side,color:k(T.side),size:"small",icon:e.jsx("span",{style:{fontSize:"14px"},children:C(T.side)}),sx:{fontWeight:600,"& .MuiChip-icon":{marginLeft:.5}}})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",children:pt(T.quantity,2)})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",children:X(T.price)})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(Number(T.totalValue)||T.quantity*T.price)})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",children:X((Number(T.fee)||0)+(Number(T.tax)||0))})}),e.jsx(Y,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:X(Number(T.totalCost)||T.quantity*T.price+(Number(T.fee)||0)+(Number(T.tax)||0))})}),e.jsx(Y,{align:"right",children:T.realizedPl!==void 0&&e.jsx(h,{variant:"body2",color:T.realizedPl>=0?"success.main":"error.main",fontWeight:"medium",children:X(Number(T.realizedPl)||0)})}),e.jsx(Y,{align:"center",children:e.jsx(as,{title:"Actions",children:e.jsx(Et,{size:"small",onClick:R=>N(R,T),sx:{"&:hover":{bgcolor:"primary.main",color:"white"}},children:e.jsx(Lo,{})})})})]},T.tradeId)})})]})}),c>1&&e.jsx(v,{display:"flex",justifyContent:"center",mt:3,children:e.jsx(ql,{count:c,page:l,onChange:(T,F)=>i==null?void 0:i(F),color:"primary",shape:"rounded",size:"large"})}),e.jsxs(Vo,{anchorEl:w,open:!!w,onClose:I,PaperProps:{sx:{borderRadius:2,boxShadow:3,minWidth:160}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(ue,{onClick:()=>E("view"),sx:{py:1.5},children:[e.jsx(Ut,{children:e.jsx(ma,{fontSize:"small",color:"primary"})}),e.jsx(Wt,{children:"View Details"})]}),e.jsxs(ue,{onClick:()=>E("edit"),sx:{py:1.5},children:[e.jsx(Ut,{children:e.jsx(is,{fontSize:"small",color:"primary"})}),e.jsx(Wt,{children:"Edit Trade"})]}),e.jsxs(ue,{onClick:()=>E("delete"),sx:{py:1.5,color:"error.main"},children:[e.jsx(Ut,{children:e.jsx($o,{fontSize:"small",color:"error"})}),e.jsx(Wt,{children:"Delete Trade"})]})]})]})},Tl=({portfolioId:t,onCreate:r,isCompactMode:n=!1})=>{var E;const[s,a]=x.useState({assetId:"",side:"",startDate:"",endDate:""}),[o,i]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState(null),{data:f,isLoading:p,error:m}=Sa(t,s),g=Zf(),b=Xf(),{data:P,isLoading:j,error:w}=Jf((d==null?void 0:d.tradeId)||""),S=k=>{a(k)},y=k=>{u(k),i(!0)},A=k=>{u(k),c(!0)},O=async k=>{if(window.confirm("Are you sure you want to delete this trade?"))try{await g.mutateAsync(k.tradeId)}catch(C){console.error("Error deleting trade:",C)}},N=()=>{i(!1),c(!1),u(null)},I=()=>{r&&r()};return p?e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(ze,{}),e.jsx(h,{sx:{ml:2},children:"Loading trades..."})]}):m?e.jsx(Ue,{severity:"error",children:(m==null?void 0:m.message)||"Failed to load trades"}):e.jsxs(v,{sx:{p:n?1:0},children:[e.jsx(ev,{trades:f||[],isLoading:p,error:m==null?void 0:m.message,onEdit:y,onView:A,onDelete:O,onCreate:I,onFiltersChange:S,filters:s,totalTrades:(f==null?void 0:f.length)||0}),e.jsx(Xy,{open:o,onClose:N,onSubmit:async k=>{if(d)try{await b.mutateAsync({id:d.tradeId,data:{...k,tradeDate:typeof k.tradeDate=="string"?k.tradeDate:k.tradeDate.toISOString()}}),N()}catch(C){console.error("Error updating trade:",C)}},initialData:d?{...d,tradeDate:typeof d.tradeDate=="string"?d.tradeDate:d.tradeDate.toISOString()}:void 0,isLoading:b.isLoading,error:(E=b.error)==null?void 0:E.message}),e.jsx(Jy,{open:l,onClose:N,onEdit:y,trade:d,tradeDetails:(P==null?void 0:P.tradeDetails)||[],isLoading:j,error:typeof w=="object"&&w!==null&&"message"in w?w.message:void 0})]})},tv=t=>!t||typeof t!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),rv=({analysis:t,currency:r="USD",isLoading:n=!1,error:s,selectedTimeframe:a="ALL",selectedMetric:o="pnl",onTimeframeChange:i,onMetricChange:l,isCompactMode:c=!1})=>{const[d,u]=x.useState("pie"),f=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98","#F4A460","#20B2AA","#FF6347","#4682B4","#D2691E"],m=(y=>{switch(y){case"VND":return"vi-VN";case"USD":return"en-US";case"EUR":return"de-DE";case"GBP":return"en-GB";case"JPY":return"ja-JP";default:return"en-US"}})(r),g=y=>y>=100?Mn(y,1,m):(y>=10,Mn(y,2,m)),b=x.useMemo(()=>{if(!t||!t.pnlSummary||!t.statistics||!t.riskMetrics||!Array.isArray(t.assetPerformance))return!1;if(t.pnlSummary.winRate!==void 0){const y=Number(t.pnlSummary.winRate);if(isNaN(y)||y<0||y>100)return!1}if(t.riskMetrics.volatility!==void 0){const y=Number(t.riskMetrics.volatility);if(isNaN(y)||y<0)return!1}return!0},[t]),P=x.useMemo(()=>t.monthlyPerformance.map(y=>{var A,O,N,I,E;return{month:y.month,pnl:parseFloat(((A=y.totalPl)==null?void 0:A.toString())||"0"),trades:y.tradesCount||0,winRate:y.winRate||0,totalVolume:parseFloat(((O=y.totalVolume)==null?void 0:O.toString())||"0"),winningTrades:y.winningTrades||0,losingTrades:y.losingTrades||0,formattedPnl:X(parseFloat(((N=y.totalPl)==null?void 0:N.toString())||"0"),r,{},m),formattedVolume:X(parseFloat(((I=y.totalVolume)==null?void 0:I.toString())||"0"),r,{},m),formattedWinRate:ve(y.winRate||0,1,m),color:parseFloat(((E=y.totalPl)==null?void 0:E.toString())||"0")>=0?"#00C49F":"#FF8042"}}),[t.monthlyPerformance,r,m]),j=x.useMemo(()=>{var O;if(console.log(" Asset Performance Debug:",{hasAnalysis:!!t,hasAssetPerformance:!!(t!=null&&t.assetPerformance),isArray:Array.isArray(t==null?void 0:t.assetPerformance),assetPerformance:t==null?void 0:t.assetPerformance,length:(O=t==null?void 0:t.assetPerformance)==null?void 0:O.length}),!t.assetPerformance||!Array.isArray(t.assetPerformance))return console.log("Asset performance not available or not an array"),[];const y=t.assetPerformance.map((N,I)=>{var C,T,F,_,R,q;const E=parseFloat(((C=N.totalPl)==null?void 0:C.toString())||"0"),k=Math.abs(E);return{assetId:N.assetId||`asset-${I}`,name:N.assetSymbol||"Unknown",fullName:N.assetName||"Unknown Asset",value:k,originalValue:E,trades:N.tradesCount||0,winRate:N.winRate||0,totalVolume:parseFloat(((T=N.totalVolume)==null?void 0:T.toString())||"0"),quantity:parseFloat(((F=N.quantity)==null?void 0:F.toString())||"0"),avgCost:parseFloat(((_=N.avgCost)==null?void 0:_.toString())||"0"),marketValue:parseFloat(((R=N.marketValue)==null?void 0:R.toString())||"0"),color:f[I%f.length],formattedValue:X(E,r,{},m),formattedVolume:X(parseFloat(((q=N.totalVolume)==null?void 0:q.toString())||"0"),r,{},m),formattedWinRate:ve(N.winRate||0,1,m)}}),A=y.sort((N,I)=>I.value-N.value);return console.log(" Asset Chart Data Processed:",{originalLength:y.length,sortedLength:A.length,sampleData:A.slice(0,3),allValues:A.map(N=>N.value),originalValues:A.map(N=>N.originalValue),hasPositiveValues:A.some(N=>N.value>0),colors:A.map(N=>N.color)}),A},[t.assetPerformance,r,m]),w=({active:y,payload:A,label:O})=>{var N;if(y&&A&&A.length){const I=(N=A[0])==null?void 0:N.payload;return e.jsxs(v,{sx:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:2,p:2,boxShadow:3,minWidth:200},children:[e.jsx(h,{variant:"subtitle2",fontWeight:"bold",color:"primary",gutterBottom:!0,children:O}),A.map((E,k)=>e.jsxs(v,{sx:{mb:.5},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",children:[E.dataKey==="pnl"?"P&L":E.dataKey==="trades"?"Trades":E.dataKey==="winRate"?"Win Rate":E.dataKey==="value"?"Value":E.dataKey,":"]}),e.jsx(h,{variant:"body2",fontWeight:"bold",color:E.color,children:E.dataKey==="pnl"&&(I!=null&&I.formattedPnl)?I.formattedPnl:E.dataKey==="trades"?E.value:E.dataKey==="winRate"&&(I!=null&&I.formattedWinRate)?I.formattedWinRate:E.dataKey==="value"&&(I!=null&&I.formattedValue)?I.formattedValue:E.dataKey==="pnl"?X(E.value,r,{},m):E.value})]},k)),(I==null?void 0:I.fullName)&&e.jsx(v,{sx:{mt:1,pt:1,borderTop:"1px solid #f0f0f0"},children:e.jsx(h,{variant:"caption",color:"text.secondary",children:I.fullName})})]})}return null},S=({name:y,percent:A,payload:O})=>{const N=Mn(A*100,1,m),I=(O==null?void 0:O.formattedValue)||X((O==null?void 0:O.value)||0,r,{},m);return A<.02?`${y}
${I}`:A<.05?`${y}
${N}
${I}`:`${y}
${N}
${I}`};return n?e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(ze,{}),e.jsx(h,{sx:{ml:2},children:"Loading analysis..."})]}):s?e.jsx(Ue,{severity:"error",children:(s==null?void 0:s.message)||"Failed to load trade analysis"}):t?b?e.jsxs(v,{sx:{p:c?1:3},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:c?2:4,children:[e.jsxs(v,{children:[e.jsx(h,{variant:c?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontSize:c?"0.9rem":void 0},children:"Trading Analysis"}),e.jsx(h,{variant:c?"body2":"body1",color:"text.secondary",sx:{fontSize:c?"0.75rem":void 0},children:"Comprehensive performance insights and analytics"})]}),e.jsxs(v,{display:"flex",gap:2,children:[e.jsxs(Ze,{size:"small",sx:{minWidth:140},children:[e.jsx(Je,{children:"Timeframe"}),e.jsxs(et,{value:a,label:"Timeframe",onChange:y=>i==null?void 0:i(y.target.value),sx:{borderRadius:2},children:[e.jsx(ue,{value:"ALL",children:"All Time"}),e.jsx(ue,{value:"1M",children:"1 Month"}),e.jsx(ue,{value:"3M",children:"3 Months"}),e.jsx(ue,{value:"6M",children:"6 Months"}),e.jsx(ue,{value:"1Y",children:"1 Year"})]})]}),e.jsxs(Ze,{size:"small",sx:{minWidth:140},children:[e.jsx(Je,{children:"Metric"}),e.jsxs(et,{value:o,label:"Metric",onChange:y=>l==null?void 0:l(y.target.value),sx:{borderRadius:2},children:[e.jsx(ue,{value:"pnl",children:"P&L"}),e.jsx(ue,{value:"trades",children:"Trades"}),e.jsx(ue,{value:"winrate",children:"Win Rate"})]})]})]})]}),e.jsxs(M,{container:!0,spacing:c?1:3,mb:c?2:4,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:140,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),e.jsx(h,{variant:"h4",color:t.pnlSummary.totalPnl>=0?"success.main":"error.main",children:X(t.pnlSummary.totalPnl,r,{},m)})]}),e.jsx(v,{sx:{color:t.pnlSummary.totalPnl>=0?"success.main":"error.main",display:"flex",alignItems:"center"},children:e.jsx(gt,{})})]}),e.jsx(v,{display:"flex",alignItems:"center",gap:1,children:e.jsx(De,{label:`${ve(t.pnlSummary.winRate,1,m)} Win Rate`,color:t.pnlSummary.winRate>=50?"success":"warning",size:"small",variant:"outlined"})})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:140,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Trades"}),e.jsx(h,{variant:"h4",children:pt(t.statistics.totalTrades,0,m)})]}),e.jsx(v,{sx:{color:"primary.main",display:"flex",alignItems:"center"},children:e.jsx(zn,{})})]}),e.jsxs(v,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(De,{label:`${t.statistics.buyTrades} Buy`,color:"success",size:"small",variant:"outlined"}),e.jsx(De,{label:`${t.statistics.sellTrades} Sell`,color:"error",size:"small",variant:"outlined"})]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:140,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Volume"}),e.jsx(h,{variant:"h4",children:X(t.statistics.totalVolume,r,{},m)})]}),e.jsx(v,{sx:{color:"info.main",display:"flex",alignItems:"center"},children:e.jsx(Ql,{})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Avg: ",X(t.statistics.averagePrice,r,{},m)]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:140,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sharpe Ratio"}),e.jsx(h,{variant:"h4",color:"primary",children:t.riskMetrics.sharpeRatio})]}),e.jsx(v,{sx:{color:"warning.main",display:"flex",alignItems:"center"},children:e.jsx(Kl,{})})]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Risk-Adjusted Return"})]})})})]}),e.jsxs(M,{container:!0,spacing:3,mb:4,children:[e.jsx(M,{item:!0,xs:12,lg:8,children:e.jsx(he,{sx:{boxShadow:2,height:400},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Monthly Performance"}),e.jsx(De,{label:"P&L Trend",color:"primary",size:"small",variant:"outlined"})]}),e.jsx(v,{sx:{flex:1,minHeight:0},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(ds,{data:P,children:[e.jsx(tr,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(rr,{dataKey:"month",tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"}}),e.jsx(nr,{tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"},tickFormatter:y=>X(y,r,{},m)}),e.jsx(Rt,{content:e.jsx(w,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(Yr,{type:"monotone",dataKey:"pnl",stroke:"#1976d2",strokeWidth:3,dot:y=>{const{cx:A,cy:O,payload:N,index:I}=y;return e.jsx("circle",{cx:A,cy:O,r:4,fill:(N==null?void 0:N.color)||"#1976d2",stroke:"#fff",strokeWidth:2},`dot-${I}`)},activeDot:{r:6,stroke:"#1976d2",strokeWidth:2},name:"P&L"})]})})})]})})}),e.jsx(M,{item:!0,xs:12,lg:4,children:e.jsx(he,{sx:{boxShadow:2,height:400},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(h,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Asset Performance"}),e.jsxs(v,{display:"flex",gap:1,children:[e.jsx(De,{label:"Pie Chart",size:"small",color:d==="pie"?"primary":"default",onClick:()=>u("pie"),sx:{cursor:"pointer"}}),e.jsx(De,{label:"Compact List",size:"small",color:d==="compact"?"primary":"default",onClick:()=>u("compact"),sx:{cursor:"pointer"}})]})]}),j&&j.length>0&&j.some(y=>y.value>0)?e.jsx(v,{sx:{height:350,display:"flex",flexDirection:"column"},children:d==="pie"?e.jsx(v,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center","& .recharts-pie-label-text":{fontSize:"10px !important",fontWeight:"bold !important",fill:"#333 !important",textShadow:"1px 1px 2px rgba(255,255,255,0.8) !important"}},children:e.jsx(Mt,{width:"100%",height:"100%",children:e.jsxs(Ho,{children:[e.jsx(zo,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:S,outerRadius:90,innerRadius:35,fill:"#8884d8",dataKey:"value",minAngle:1,paddingAngle:1,children:j.map((y,A)=>e.jsx(gn,{fill:y.color||f[A%f.length]},`cell-${A}`))}),e.jsx(Rt,{content:e.jsx(w,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})})}):e.jsx(v,{sx:{flex:1,overflow:"auto",border:"1px solid",borderColor:"grey.200",borderRadius:1,backgroundColor:"grey.50",p:2},children:e.jsx(v,{display:"flex",flexWrap:"wrap",gap:1,children:j.map((y,A)=>{const O=j.reduce((I,E)=>I+E.value,0),N=O>0?y.value/O*100:0;return e.jsx(De,{icon:e.jsx(v,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:y.color||f[A%f.length],border:"1px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.2)"}}),label:e.jsxs(v,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(h,{variant:"caption",fontWeight:"bold",children:y.name}),e.jsx(h,{variant:"caption",fontWeight:"bold",color:y.originalValue>=0?"success.main":"error.main",children:y.formattedValue}),e.jsxs(h,{variant:"caption",color:"primary",fontWeight:"bold",children:["(",ve(N,1,m),")"]})]}),variant:"outlined",sx:{height:32,backgroundColor:y.originalValue>=0?"success.50":"error.50",borderColor:"grey.300",borderWidth:1,"&:hover":{backgroundColor:y.originalValue>=0?"success.100":"error.100",transform:"scale(1.02)",borderColor:y.originalValue>=0?"success.main":"error.main"},transition:"all 0.2s ease-in-out"}},A)})})})}):e.jsxs(v,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:300,children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,children:"No asset performance data available"}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Debug: assetChartData length = ",(j==null?void 0:j.length)||0]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Analysis has assetPerformance: ",t!=null&&t.assetPerformance?"Yes":"No"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Has positive values: ",j!=null&&j.some(y=>y.value>0)?"Yes":"No"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Values: ",j==null?void 0:j.map(y=>`${y.name}: ${y.value}`).join(", ")]})]})]})})})]}),e.jsx(M,{container:!0,spacing:3,mb:4,children:e.jsx(M,{item:!0,xs:12,children:e.jsx(he,{sx:{boxShadow:2},children:e.jsxs(fe,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Risk Metrics"}),e.jsx(De,{label:"Risk Assessment",color:"warning",size:"small",variant:"outlined"})]}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:t.riskMetrics.sharpeRatio}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Sharpe Ratio"})]})}),e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:t.riskMetrics.volatility>200?"error.50":"warning.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:t.riskMetrics.volatility>200?"error.main":"warning.main",fontWeight:"bold",children:g(t.riskMetrics.volatility)}),e.jsxs(h,{variant:"body2",color:"text.secondary",mt:1,children:["Volatility",t.riskMetrics.volatility>200&&e.jsx(h,{variant:"caption",color:"error.main",display:"block",children:" Extreme volatility"})]})]})}),e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"error.main",fontWeight:"bold",children:X(t.riskMetrics.var95,r,{},m)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"VaR (95%)"})]})}),e.jsx(M,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"error.main",fontWeight:"bold",children:X(t.riskMetrics.maxDrawdown,r,{},m)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Max Drawdown"})]})})]})]})})})}),e.jsxs(M,{container:!0,spacing:3,mb:4,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{sx:{boxShadow:2,height:500},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Top Performing Trades"}),e.jsx(De,{label:"Best",color:"success",size:"small",variant:"outlined"})]}),e.jsx(Gt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Xt,{size:"small",stickyHeader:!0,children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(Y,{sx:{fontWeight:600},children:"Asset"}),e.jsx(Y,{sx:{fontWeight:600},children:"Side"}),e.jsx(Y,{sx:{fontWeight:600},children:"P&L"}),e.jsx(Y,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(Jt,{children:t.topTrades.slice(0,5).map(y=>e.jsxs(Ge,{children:[e.jsx(Y,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),e.jsx(Y,{children:e.jsx(De,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),e.jsx(Y,{color:y.realizedPl>=0?"success.main":"error.main",children:X(Number(y.realizedPl)||0,r,{},m)}),e.jsx(Y,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{sx:{boxShadow:2,height:500},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Worst Performing Trades"}),e.jsx(De,{label:"Worst",color:"error",size:"small",variant:"outlined"})]}),e.jsx(Gt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Xt,{size:"small",stickyHeader:!0,children:[e.jsx(Zt,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(Y,{sx:{fontWeight:600},children:"Asset"}),e.jsx(Y,{sx:{fontWeight:600},children:"Side"}),e.jsx(Y,{sx:{fontWeight:600},children:"P&L"}),e.jsx(Y,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(Jt,{children:t.worstTrades.slice(0,5).map(y=>e.jsxs(Ge,{children:[e.jsx(Y,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),e.jsx(Y,{children:e.jsx(De,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),e.jsx(Y,{color:y.realizedPl>=0?"success.main":"error.main",children:X(Number(y.realizedPl)||0,r,{},m)}),e.jsx(Y,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})})]}),e.jsx(M,{container:!0,spacing:3,children:e.jsx(M,{item:!0,xs:12,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Performance Details"}),e.jsx(Gt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Xt,{stickyHeader:!0,children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(Y,{children:"Asset"}),e.jsx(Y,{children:"Quantity"}),e.jsx(Y,{children:"Avg Cost"}),e.jsx(Y,{children:"Market Value"}),e.jsx(Y,{children:"P&L"}),e.jsx(Y,{children:"Trades"}),e.jsx(Y,{children:"Win Rate"})]})}),e.jsx(Jt,{children:j&&j.length>0?j.map(y=>e.jsxs(Ge,{hover:!0,children:[e.jsx(Y,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"bold",children:y.name}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.fullName})]})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:pt(y.quantity,2,m)})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:X(y.avgCost,r,{},m)})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:X(y.marketValue,r,{},m)})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",fontWeight:"bold",color:y.value>=0?"success.main":"error.main",children:y.formattedValue})}),e.jsx(Y,{children:e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(h,{variant:"body2",children:y.trades}),e.jsx(De,{label:y.winRate>=50?"Win":"Loss",size:"small",color:y.winRate>=50?"success":"error",variant:"outlined"})]})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",fontWeight:"bold",children:y.formattedWinRate})})]},y.assetId||y.name)):e.jsx(Ge,{children:e.jsx(Y,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(h,{color:"text.secondary",children:"No asset performance data available"})})})})]})})]})})})})]}):e.jsx(Ue,{severity:"error",children:"Invalid analysis data format"}):e.jsx(Ue,{severity:"info",children:"No trade data available for analysis"})},Sl=({portfolioId:t,isCompactMode:r=!1})=>{const[n,s]=x.useState("ALL"),[a,o]=x.useState("pnl");if(!tv(t))return e.jsx(Ue,{severity:"error",children:"Invalid portfolio ID format"});const{portfolio:i,isLoading:l,error:c}=Di(t),d={timeframe:n,metric:a},{data:u,isLoading:f,error:p}=ep(t,d);return console.log(" TradeAnalysisContainer - Filters:",{selectedTimeframe:n,selectedMetric:a,portfolioId:t}),console.log(" TradeAnalysisContainer - Analysis Data:",{hasAnalysis:!!u,analysisKeys:u?Object.keys(u):[],assetPerformance:u==null?void 0:u.assetPerformance,monthlyPerformance:u==null?void 0:u.monthlyPerformance,pnlSummary:u==null?void 0:u.pnlSummary,statistics:u==null?void 0:u.statistics,riskMetrics:u==null?void 0:u.riskMetrics}),l||f?e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(ze,{}),e.jsx(h,{sx:{ml:2},children:"Loading analysis..."})]}):c?e.jsx(Ue,{severity:"error",children:(c==null?void 0:c.message)||"Failed to load portfolio information"}):p?e.jsx(Ue,{severity:"error",children:(p==null?void 0:p.message)||"Failed to load trade analysis"}):i?u?e.jsx(rv,{analysis:u,currency:i.baseCurrency,selectedTimeframe:n,selectedMetric:a,onTimeframeChange:s,onMetricChange:o,isCompactMode:r}):e.jsx(Ue,{severity:"info",children:"No trade data available for analysis"}):e.jsx(Ue,{severity:"error",children:"Portfolio not found"})};function qs(t){const{children:r,value:n,index:s,...a}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==s,id:`portfolio-tabpanel-${s}`,"aria-labelledby":`portfolio-tab-${s}`,...a,children:n===s&&e.jsx(v,{sx:{p:3},children:r})})}const nv=()=>{const{portfolioId:t}=Wo(),r=xn(),[n,s]=x.useState(1),[a,o]=x.useState(!1),[i,l]=x.useState(null),[c,d]=x.useState(!1),[u,f]=x.useState(null),[p,m]=x.useState(null),[g,b]=x.useState(!1),[P,j]=x.useState(null),[w,S]=x.useState(null),[y,A]=x.useState(!1),[O,N]=x.useState(null),[I,E]=x.useState(null),[k,C]=x.useState(!1),[T,F]=x.useState(null),[_,R]=x.useState(null),[q,B]=x.useState(!1),[$,H]=x.useState(null),[Q,J]=x.useState(null),[re,te]=x.useState(!1),[D,ee]=x.useState(null),[pe,U]=x.useState(null),[Z,ce]=x.useState(!1),[je,me]=x.useState(null),[ge,ne]=x.useState(null),[be,He]=x.useState(!1),[Be,lt]=x.useState(null),[le,we]=x.useState(!1),z=(Ie,xe)=>le?xe:Ie,{portfolio:G,isLoading:Te,error:Ve}=Di(t),{navData:K,performanceData:oe,allocationData:Se,isLoading:Ae,error:rt}=Wu(t);x.useEffect(()=>{(async()=>{if(t)try{d(!0),f(null);const xe=await Ne.getPortfolioRiskReturn(t);l(xe)}catch(xe){console.error("Error fetching risk-return data:",xe),f("Failed to load risk-return data")}finally{d(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{b(!0),j(null);const xe=await Ne.getPortfolioAssetPerformance(t);m(xe)}catch(xe){console.error("Error fetching asset performance data:",xe),j("Failed to load asset performance data")}finally{b(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{A(!0),N(null);const xe=await Ne.getPortfolioRiskMetrics(t);S(xe)}catch(xe){console.error("Error fetching risk metrics data:",xe),N("Failed to load risk metrics data")}finally{A(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{C(!0),F(null);const xe=await Ne.getPortfolioDiversificationHeatmap(t);E(xe)}catch(xe){console.error("Error fetching diversification data:",xe),F("Failed to load diversification data")}finally{C(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{B(!0),H(null);const xe=await Ne.getPortfolioAllocationTimeline(t);R(xe)}catch(xe){console.error("Error fetching allocation timeline data:",xe),H("Failed to load allocation timeline data")}finally{B(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{te(!0),ee(null);const xe=await Ne.getPortfolioCashFlowAnalysis(t);J(xe)}catch(xe){console.error("Error fetching cash flow data:",xe),ee("Failed to load cash flow data")}finally{te(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{ce(!0),me(null);const xe=await Ne.getPortfolioBenchmarkComparison(t);U(xe)}catch(xe){console.error("Error fetching benchmark data:",xe),me("Failed to load benchmark data")}finally{ce(!1)}})()},[t]),x.useEffect(()=>{(async()=>{if(t)try{He(!0),lt(null);const xe=await Ne.getPortfolioAssetDetailSummary(t);ne(xe)}catch(xe){console.error("Error fetching asset detail data:",xe),lt("Failed to load asset detail data")}finally{He(!1)}})()},[t]);const Tt=qi(),dr=Sa(t).data||[],wr=(Ie,xe)=>{s(xe)},Pt=async Ie=>{try{await Tt.mutateAsync(Ie),o(!1)}catch(xe){console.error("Error creating trade:",xe)}},Ms=dr.length,Rs=dr.reduce((Ie,xe)=>Ie+(Number(xe.quantity)*Number(xe.price)||0),0),Es=dr.reduce((Ie,xe)=>Ie+(Number(xe.fee)||0)+(Number(xe.tax)||0),0),Tn=dr.reduce((Ie,xe)=>Ie+(Number(xe.realizedPl)||0),0),Xr=[{title:"Total Trades",value:Ms,color:"primary",icon:e.jsx(gt,{})},{title:"Total Volume",value:X(Rs,(G==null?void 0:G.baseCurrency)||"VND"),color:"info",icon:e.jsx(er,{})},{title:"Fees & Taxes",value:X(Es,(G==null?void 0:G.baseCurrency)||"VND"),color:"warning",icon:e.jsx(Dt,{})},{title:"Realized P&L",value:X(Tn,(G==null?void 0:G.baseCurrency)||"VND"),color:Tn>=0?"success":"error",icon:e.jsx(gt,{})}];Ht.useEffect(()=>{console.log("Portfolio Detail Debug:",{portfolio:G,navData:K,performanceData:oe,allocationData:Se,isAnalyticsLoading:Ae,analyticsError:rt})},[G,K,oe,Se,Ae,rt]);const Sn=()=>{r("/portfolios")};return Te?e.jsx($r,{maxWidth:"xl",children:e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(ze,{})})}):Ve||!G?e.jsx($r,{maxWidth:"xl",children:e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(h,{color:"error",children:"Failed to load portfolio. Please try again."})})}):e.jsxs($r,{maxWidth:"xl",children:[e.jsx(v,{sx:{mb:4},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:G.name}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Portfolio Management & Trading"})]}),e.jsxs(v,{display:"flex",gap:2,children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Bo,{}),onClick:Sn,sx:{borderRadius:2,textTransform:"none"},children:"Back to Portfolios"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:()=>o(!0),sx:{borderRadius:2,textTransform:"none"},children:"New Trade"})]})]})}),e.jsxs(M,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:120,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Current NAV"}),e.jsx(h,{variant:"h5",component:"div",children:K?X(K.navValue,G.baseCurrency):"N/A"})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:120,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Total Return"}),e.jsx(h,{variant:"h5",component:"div",color:((oe==null?void 0:oe.totalReturn)||0)>=0?"success.main":"error.main",children:oe?ve(oe.totalReturn):"N/A"})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:120,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Annualized Return"}),e.jsx(h,{variant:"h5",component:"div",color:((oe==null?void 0:oe.annualizedReturn)||0)>=0?"success.main":"error.main",children:oe?ve(oe.annualizedReturn):"N/A"})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:120,boxShadow:2},children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Base Currency"}),e.jsx(h,{variant:"h5",component:"div",children:G.baseCurrency})]})})})]}),e.jsx(M,{container:!0,spacing:3,sx:{mb:4},children:Xr.map((Ie,xe)=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{sx:{height:120,boxShadow:2},children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(v,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:Ie.title}),e.jsx(h,{variant:"h5",component:"div",children:Ie.value})]}),e.jsx(v,{sx:{color:`${Ie.color}.main`,display:"flex",alignItems:"center"},children:Ie.icon})]})})})},xe))}),e.jsxs(nt,{sx:{width:"100%",mb:4},children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:2,py:1},children:[e.jsxs(pn,{value:n,onChange:wr,"aria-label":"portfolio tabs",children:[e.jsx(xt,{label:"Trading Management"}),e.jsx(xt,{label:"Trading Analysis",defaultChecked:!0}),e.jsx(xt,{label:"Asset Allocation"})]}),e.jsx(as,{title:le?"Switch to Normal View":"Switch to Compact View",children:e.jsx(Gl,{control:e.jsx(Jl,{checked:le,onChange:Ie=>we(Ie.target.checked),color:"primary",size:"small"}),label:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:.5},children:[le?e.jsx(Xl,{fontSize:"small"}):e.jsx(Zl,{fontSize:"small"}),e.jsx(h,{variant:"caption",sx:{fontSize:"0.75rem"},children:le?"Compact":"Normal"})]}),sx:{m:0}})})]})}),e.jsx(qs,{value:n,index:0,children:e.jsx(v,{sx:{p:z(3,1)},children:e.jsx(M,{container:!0,spacing:z(3,1),children:e.jsx(M,{item:!0,xs:12,children:e.jsx(Tl,{portfolioId:t,onCreate:()=>o(!0),isCompactMode:le})})})})}),e.jsx(qs,{value:n,index:1,children:e.jsx(v,{sx:{p:z(3,1)},children:e.jsxs(M,{container:!0,spacing:z(3,1),children:[e.jsx(M,{item:!0,xs:12,children:e.jsx(rp,{portfolioId:t,baseCurrency:G.baseCurrency,title:"Portfolio Performance"})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(Sl,{portfolioId:t,isCompactMode:le})})]})})}),e.jsx(qs,{value:n,index:2,children:e.jsxs(v,{sx:{p:z(3,1),backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Portfolio Overview"}),e.jsxs(M,{container:!0,spacing:z(3,1),children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:X(G.totalValue,G.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Total Value"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"success.main",fontWeight:"bold",children:X(G.unrealizedPl,G.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Unrealized P&L"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:X(G.cashBalance,G.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Cash Balance"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"warning.main",fontWeight:"bold",children:Object.keys((Se==null?void 0:Se.allocation)||{}).length}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Asset Classes"})]})})]})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Asset Allocation"}),e.jsxs(M,{container:!0,spacing:z(3,1),children:[e.jsx(M,{item:!0,xs:12,md:8,children:e.jsx(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:Ae?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):rt?e.jsx(h,{color:"error",children:"Failed to load allocation data"}):e.jsx(tp,{data:Se||{allocation:{},totalValue:0,assetCount:0},baseCurrency:G.baseCurrency})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsxs(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Allocation Summary"}),Se&&Object.keys(Se.allocation).length>0?e.jsxs(v,{children:[Object.entries(Se.allocation).map(([Ie,xe])=>e.jsxs(v,{sx:{mb:3},children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body1",fontWeight:"medium",children:Ie.toUpperCase()}),e.jsxs(h,{variant:"body1",fontWeight:"bold",color:"primary",children:[xe.percentage.toFixed(1),"%"]})]}),e.jsx(v,{sx:{width:"100%",height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:e.jsx(v,{sx:{width:`${xe.percentage}%`,height:"100%",backgroundColor:"#1976d2",transition:"width 0.3s ease"}})}),e.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:X(xe.value,G.baseCurrency)})]},Ie)),e.jsxs(v,{sx:{mt:3,pt:3,borderTop:"1px solid #e0e0e0",textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Portfolio Value"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:X(G.totalValue,G.baseCurrency)})]})]}):e.jsx(h,{variant:"body2",color:"text.secondary",children:"No allocation data available"})]})})]})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Asset Detail Summary"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:be?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):Be?e.jsx(h,{color:"error",children:Be}):e.jsx(dp,{data:(ge==null?void 0:ge.data)||[],baseCurrency:G.baseCurrency,title:"Individual Asset Holdings"})})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Risk & Performance Analysis"}),e.jsxs(M,{container:!0,spacing:z(3,1),children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:c?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):u?e.jsx(h,{color:"error",children:u}):e.jsx(np,{data:(i==null?void 0:i.data)||[],baseCurrency:G.baseCurrency,title:"Risk-Return Analysis"})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:g?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):P?e.jsx(h,{color:"error",children:P}):e.jsx(sp,{data:(p==null?void 0:p.data)||[],baseCurrency:G.baseCurrency,title:"Asset Performance Comparison"})})})]})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Risk Metrics"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:y?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):O?e.jsx(h,{color:"error",children:O}):e.jsx(ap,{data:(w==null?void 0:w.data)||{},baseCurrency:G.baseCurrency,title:"Risk Metrics Dashboard"})})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Diversification & Timeline"}),e.jsxs(M,{container:!0,spacing:z(3,1),children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:k?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):T?e.jsx(h,{color:"error",children:T}):e.jsx(op,{data:(I==null?void 0:I.data)||[],title:"Diversification Heatmap"})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:z(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:q?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):$?e.jsx(h,{color:"error",children:$}):e.jsx(ip,{data:(_==null?void 0:_.data)||[],baseCurrency:G.baseCurrency,title:"Allocation Timeline"})})})]})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Cash Flow Analysis"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:re?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):D?e.jsx(h,{color:"error",children:D}):e.jsx(lp,{data:(Q==null?void 0:Q.data)||[],baseCurrency:G.baseCurrency,title:"Cash Flow Analysis"})})]}),e.jsxs(v,{sx:{mb:z(4,1)},children:[e.jsx(h,{variant:le?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:z(3,1),fontSize:le?"0.9rem":void 0},children:"Benchmark Comparison"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:Z?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(ze,{})}):je?e.jsx(h,{color:"error",children:je}):e.jsx(cp,{data:(pe==null?void 0:pe.data)||[],baseCurrency:G.baseCurrency,title:"Benchmark Comparison",benchmarkName:(pe==null?void 0:pe.benchmarkName)||"S&P 500"})})]})]})})]}),a&&e.jsx(v,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:()=>o(!1),children:e.jsx(v,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out"},onClick:Ie=>Ie.stopPropagation(),children:e.jsx(ns,{onSubmit:Pt,defaultPortfolioId:t})})})]})};function Qs(t){const{children:r,value:n,index:s,...a}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==s,id:`trading-tabpanel-${s}`,"aria-labelledby":`trading-tab-${s}`,...a,children:n===s&&e.jsx(v,{sx:{p:0},children:r})})}const sv=()=>{var I,E;const{portfolioId:t}=Wo(),r=xn(),[n,s]=x.useState(0),[a,o]=x.useState(!1),i=qi(),c=Sa(t).data||[],d=(k,C)=>{s(C)},u=()=>{r(`/portfolios/${t}`)},f=async k=>{try{await i.mutateAsync(k),o(!1)}catch(C){console.error("Error creating trade:",C)}},p=async k=>{const C={...k,tradeDate:k.tradeDate};await f(C)},m=()=>{o(!1)},g=()=>{s(2)},b=(c==null?void 0:c.length)||0,P=(c==null?void 0:c.filter(k=>k.side==="BUY").length)||0,j=(c==null?void 0:c.filter(k=>k.side==="SELL").length)||0,w=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.totalValue)||0),0))||0,S=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.fee)||0),0))||0,y=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.tax)||0),0))||0,A=S+y,O=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.realizedPl)||0),0))||0,N=[{title:"Total Trades",value:b.toString(),icon:e.jsx(er,{}),color:"primary"},{title:"Buy Orders",value:P.toString(),icon:e.jsx(gt,{}),color:"success"},{title:"Sell Orders",value:j.toString(),icon:e.jsx(Dt,{}),color:"error"},{title:"Total Volume",value:X(w),icon:e.jsx(zn,{}),color:"info"}];return t?e.jsxs($r,{maxWidth:"xl",children:[e.jsx(v,{sx:{mb:4},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Trading Management"}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Manage your trades, analyze performance, and track positions"})]}),e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(Bo,{}),onClick:u,sx:{borderRadius:2,textTransform:"none",px:3,py:1},children:"Back to Portfolio"})]})}),e.jsx(M,{container:!0,spacing:3,sx:{mb:4},children:N.map((k,C)=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{children:e.jsx(fe,{children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(v,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:k.title}),e.jsx(h,{variant:"h5",component:"div",children:k.value})]}),e.jsx(v,{sx:{color:`${k.color}.main`,display:"flex",alignItems:"center"},children:k.icon})]})})})},C))}),e.jsx(M,{container:!0,spacing:3,sx:{mb:4},children:e.jsx(M,{item:!0,xs:12,children:e.jsx(he,{sx:{boxShadow:2},children:e.jsxs(fe,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Trading Performance"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"grey.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"text.primary",fontWeight:"bold",children:X(A)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Fees & Taxes"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:O>=0?"success.50":"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:O>=0?"success.main":"error.main",fontWeight:"bold",children:X(O)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Realized P&L"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"info.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:X(w)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Volume"})]})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"primary.main",fontWeight:"bold",children:b}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Trades"})]})})]})]})})})}),e.jsxs(nt,{sx:{width:"100%",boxShadow:2},children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider",bgcolor:"grey.50"},children:e.jsxs(pn,{value:n,onChange:d,"aria-label":"trading tabs",variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500,minHeight:48},"& .Mui-selected":{color:"primary.main",fontWeight:600}},children:[e.jsx(xt,{label:"Trade History",icon:e.jsx(er,{}),iconPosition:"start"}),e.jsx(xt,{label:"Analysis",icon:e.jsx(zn,{}),iconPosition:"start"}),e.jsx(xt,{label:"Create Trade",icon:e.jsx(Nt,{}),iconPosition:"start"})]})}),e.jsx(Qs,{value:n,index:0,children:e.jsx(Tl,{portfolioId:t,onCreate:g})}),e.jsx(Qs,{value:n,index:1,children:e.jsx(Sl,{portfolioId:t})}),e.jsx(Qs,{value:n,index:2,children:e.jsx(v,{sx:{p:2},children:e.jsx(ns,{onSubmit:p,isLoading:i.isLoading,error:(I=i.error)==null?void 0:I.message,mode:"create",defaultPortfolioId:t})})})]}),e.jsx(Eo,{color:"primary","aria-label":"add trade",sx:{position:"fixed",bottom:24,right:24,boxShadow:3,"&:hover":{boxShadow:6,transform:"scale(1.05)"},transition:"all 0.2s ease-in-out"},onClick:()=>o(!0),children:e.jsx(Nt,{})}),a&&e.jsx(v,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:m,children:e.jsx(v,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out","@keyframes modalSlideIn":{from:{opacity:0,transform:"translateY(-20px) scale(0.95)"},to:{opacity:1,transform:"translateY(0) scale(1)"}}},onClick:k=>k.stopPropagation(),children:e.jsx(ns,{onSubmit:p,isLoading:i.isLoading,error:(E=i.error)==null?void 0:E.message,mode:"create",defaultPortfolioId:t})})})]}):e.jsx($r,{maxWidth:"lg",children:e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Portfolio not found"})})},Dl=()=>{const[t,r]=x.useState([]),[n,s]=x.useState(!0),[a,o]=x.useState(null),i=x.useCallback(async()=>{try{s(!0),o(null);const c=await Ar.getAssetTypes();r(c)}catch(c){const d=c instanceof Error?c.message:"Failed to fetch asset types";o(d),console.error("Error fetching asset types:",c)}finally{s(!1)}},[]),l=x.useCallback(async()=>{await i()},[i]);return x.useEffect(()=>{i()},[i]),{assetTypes:t,loading:n,error:a,refresh:l}},av=(t,r,n="ASC")=>[...t].sort((s,a)=>{let o,i;switch(r){case"name":o=s.name.toLowerCase(),i=a.name.toLowerCase();break;case"type":o=s.type,i=a.type;break;case"totalValue":o=s.totalValue,i=a.totalValue;break;case"totalQuantity":o=s.totalQuantity,i=a.totalQuantity;break;case"createdAt":o=new Date(s.createdAt).getTime(),i=new Date(a.createdAt).getTime();break;case"updatedAt":o=new Date(s.updatedAt).getTime(),i=new Date(a.updatedAt).getTime();break;default:o=s.name.toLowerCase(),i=a.name.toLowerCase()}return o<i?n==="ASC"?-1:1:o>i?n==="ASC"?1:-1:0}),ov=(t,r)=>{if(!r.trim())return t;const n=r.toLowerCase();return t.filter(s=>{var a,o;return s.name.toLowerCase().includes(n)||((a=s.symbol)==null?void 0:a.toLowerCase().includes(n))||((o=s.description)==null?void 0:o.toLowerCase().includes(n))})},iv=(t,r)=>t.filter(n=>n.type===r),lv=(t,r,n)=>t.filter(s=>(Number(s.totalValue)||0)>=r&&(Number(s.totalValue)||0)<=n),cv=t=>{const r=t.currentQuantity&&t.currentPrice?t.currentQuantity*t.currentPrice:0,n=r-(t.initialValue||0),s=t.currentQuantity?t.currentQuantity-(t.initialQuantity||0):0,a=(t.initialValue||0)>0?n/(t.initialValue||0)*100:0,o=(t.initialQuantity||0)>0?s/(t.initialQuantity||0)*100:0;return{currentValue:r,valueChange:n,quantityChange:s,valueChangePercentage:a,quantityChangePercentage:o,isGaining:n>0,isLosing:n<0}},dv=({portfolioId:t,initialFilters:r={},onAssetSelect:n,onAssetEdit:s,onAssetDelete:a,showActions:o=!0,className:i=""})=>{const{baseCurrency:l}=At(),c=x.useMemo(()=>({...r,...t&&{portfolioId:t}}),[t,r]),{assets:d,loading:u,error:f,pagination:p,clearFilters:m,refresh:g,goToPage:b,setPageSize:P,setSorting:j}=Ia({initialFilters:c||{},autoFetch:!0}),{assetTypes:w}=Dl(),[S,y]=x.useState(""),[A,O]=x.useState("ALL"),[N,I]=x.useState("name"),[E,k]=x.useState("ASC"),[C,T]=x.useState(!1),[F,_]=x.useState({min:"",max:""}),R=x.useMemo(()=>{let D=d;if(S&&(D=ov(D,S)),A!=="ALL"&&(D=iv(D,A)),F.min||F.max){const ee=F.min?parseFloat(F.min):0,pe=F.max?parseFloat(F.max):1/0;D=lv(D,ee,pe)}return av(D,N,E)},[d,S,A,F,N,E]),q=D=>{y(D)},B=D=>{O(D)},$=D=>{N===D?k(E==="ASC"?"DESC":"ASC"):(I(D),k("ASC")),j(D,E)},H=(D,ee)=>{_(pe=>({...pe,[D]:ee}))},Q=()=>{y(""),O("ALL"),_({min:"",max:""}),m()},J=D=>{b(D)},re=D=>{P(D)},te=()=>{g()};return u&&d.length===0?e.jsx("div",{className:`asset-list ${i}`,children:e.jsxs("div",{className:"asset-list__loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading assets..."})]})}):f?e.jsx("div",{className:`asset-list ${i}`,children:e.jsxs("div",{className:"asset-list__error",children:[e.jsxs("p",{children:["Error: ",f]}),e.jsx("button",{onClick:te,className:"btn btn--primary",children:"Retry"})]})}):e.jsxs("div",{className:`asset-list ${i}`,children:[e.jsxs("div",{className:"asset-list__header",children:[e.jsxs("div",{className:"asset-list__title",children:[e.jsxs("h2",{children:["Assets (",p.total,")"]}),e.jsxs("button",{onClick:te,className:"btn btn--secondary btn--icon",disabled:u,children:[e.jsx("span",{className:"icon",children:""}),"Refresh"]})]}),e.jsxs("div",{className:"asset-list__controls",children:[e.jsx("div",{className:"asset-list__search",children:e.jsx("input",{type:"text",placeholder:"Search assets...",value:S,onChange:D=>q(D.target.value),className:"input"})}),e.jsx("div",{className:"asset-list__filters",children:e.jsxs("button",{onClick:()=>T(!C),className:"btn btn--secondary",children:["Filters ",C?"":""]})})]}),C&&e.jsxs("div",{className:"asset-list__advanced-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Type:"}),e.jsxs("select",{value:A,onChange:D=>B(D.target.value),className:"select",children:[e.jsx("option",{value:"ALL",children:"All Types"}),w.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Value Range:"}),e.jsxs("div",{className:"value-range",children:[e.jsx("input",{type:"number",placeholder:"Min",value:F.min,onChange:D=>H("min",D.target.value),className:"input input--small"}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",placeholder:"Max",value:F.max,onChange:D=>H("max",D.target.value),className:"input input--small"})]})]}),e.jsx("button",{onClick:Q,className:"btn btn--outline",children:"Clear Filters"})]})]}),e.jsx("div",{className:"asset-list__table-container",children:e.jsxs("table",{className:"asset-list__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"sortable",onClick:()=>$("name"),children:["Name ",N==="name"&&(E==="ASC"?"":"")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("type"),children:["Type ",N==="type"&&(E==="ASC"?"":"")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("totalValue"),children:["Value ",N==="totalValue"&&(E==="ASC"?"":"")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("totalQuantity"),children:["Quantity ",N==="totalQuantity"&&(E==="ASC"?"":"")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("currentPrice"),children:["Market Price ",N==="currentPrice"&&(E==="ASC"?"":"")]}),e.jsx("th",{children:"Performance"}),e.jsxs("th",{className:"sortable",onClick:()=>$("updatedAt"),children:["Updated ",N==="updatedAt"&&(E==="ASC"?"":"")]}),o&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:o?8:7,className:"asset-list__empty",children:"No assets found"})}):R.map(D=>{var pe;const ee=cv(D);return e.jsxs("tr",{className:"asset-list__row",onClick:()=>n==null?void 0:n(D),children:[e.jsx("td",{className:"asset-list__cell asset-list__cell--name",children:e.jsxs("div",{className:"asset-name",children:[e.jsx("div",{className:"asset-name__primary",children:D.name}),D.symbol&&e.jsx("div",{className:"asset-name__secondary",children:D.symbol})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsx("span",{className:`asset-type asset-type--${D.type.toLowerCase()}`,children:((pe=w.find(U=>U.value===D.type))==null?void 0:pe.label)||D.type})}),e.jsx("td",{className:"asset-list__cell asset-list__cell--value",children:e.jsxs("div",{className:"value-display",children:[e.jsx("div",{className:"value-display__primary",children:X(Number(D.totalValue)||0)}),D.currentValue&&D.currentValue!==D.initialValue&&e.jsxs("div",{className:"value-display__secondary",children:["Initial: ",X(D.initialValue||0)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:"quantity-display",children:[e.jsx("div",{className:"quantity-display__primary",children:pt(Number(D.totalQuantity)||0,2)}),D.currentQuantity&&D.currentQuantity!==D.initialQuantity&&e.jsxs("div",{className:"quantity-display__secondary",children:["Initial: ",pt(D.initialQuantity||0,2)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:"price-display",children:[e.jsx("div",{className:"price-display__primary price-display__primary--current",children:X(Number(D.currentPrice)||0)}),D.avgCost!==void 0&&D.avgCost>0&&D.avgCost!==D.currentPrice&&e.jsxs("div",{className:"price-display__secondary",children:["Avg: ",X(Number(D.avgCost)||0)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:`performance ${ee.isGaining?"performance--positive":ee.isLosing?"performance--negative":""}`,children:[e.jsx("div",{className:"performance__value",children:X(ee.valueChange,l)}),e.jsx("div",{className:"performance__percentage",children:ve(ee.valueChangePercentage,2)})]})}),e.jsx("td",{className:"asset-list__cell",children:new Date(D.updatedAt).toLocaleDateString()}),o&&e.jsx("td",{className:"asset-list__cell asset-list__cell--actions",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:U=>{U.stopPropagation(),s==null||s(D)},className:"btn btn--small btn--secondary",title:"Edit Asset",children:""}),e.jsx("button",{onClick:U=>{U.stopPropagation(),a==null||a(D)},className:"btn btn--small btn--danger",title:"Delete Asset",children:""})]})})]},D.id)})})]})}),p.total>0&&e.jsxs("div",{className:"asset-list__pagination",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(p.page-1)*p.limit+1," to"," ",Math.min(p.page*p.limit,p.total)," of"," ",p.total," assets"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>J(p.page-1),disabled:p.page<=1,className:"btn btn--secondary",children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(p.total/p.limit)},(D,ee)=>ee+1).filter(D=>{const ee=p.page;return D===1||D===ee||D===ee-1||D===ee+1||D===Math.ceil(p.total/p.limit)}).map((D,ee,pe)=>e.jsxs(Ht.Fragment,{children:[ee>0&&pe[ee-1]!==D-1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>J(D),className:`btn ${D===p.page?"btn--primary":"btn--secondary"}`,children:D})]},D))}),e.jsx("button",{onClick:()=>J(p.page+1),disabled:p.page>=Math.ceil(p.total/p.limit),className:"btn btn--secondary",children:"Next"})]}),e.jsxs("div",{className:"pagination-size",children:[e.jsx("label",{children:"Show:"}),e.jsxs("select",{value:p.limit,onChange:D=>re(Number(D.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]})},uv=({performance:t,className:r="",showLabels:n=!0,compact:s=!1})=>{const a=[{key:"daily",label:"Hm nay",value:t.daily},{key:"weekly",label:"Tun",value:t.weekly},{key:"monthly",label:"Thng",value:t.monthly},{key:"yearly",label:"Nm",value:t.yearly}];return s?e.jsx("div",{className:`asset-performance asset-performance--compact ${r}`,children:a.map(({key:o,label:i,value:l})=>e.jsxs("div",{className:"performance-metric performance-metric--compact",children:[n&&e.jsxs("span",{className:"performance-label",children:[i,":"]}),e.jsx("span",{className:`performance-value performance-value--compact ${Do(l)}`,children:So(l)})]},o))}):e.jsx("div",{className:`asset-performance asset-performance--grid ${r}`,children:a.map(({key:o,label:i,value:l})=>e.jsxs("div",{className:"performance-metric",children:[e.jsx("div",{className:"performance-label",children:i}),e.jsx("div",{className:`performance-value ${Do(l)}`,children:So(l)})]},o))})},hv=({asset:t,onEdit:r,onDelete:n,onView:s,showActions:a=!0,compact:o=!1,className:i=""})=>{const{baseCurrency:l}=At(),c={valueChange:(Number(t.totalValue)||0)-(Number(t.initialValue)||0),valueChangePercentage:t.initialValue?((Number(t.totalValue)||0)-(Number(t.initialValue)||0))/(Number(t.initialValue)||1)*100:0,isGaining:(Number(t.totalValue)||0)>(Number(t.initialValue)||0),isLosing:(Number(t.totalValue)||0)<(Number(t.initialValue)||0)},d=()=>{s==null||s(t)},u=p=>{p.stopPropagation(),r==null||r(t)},f=p=>{p.stopPropagation(),n==null||n(t)};return e.jsxs("div",{className:`asset-card ${o?"asset-card--compact":""} ${i}`,onClick:d,children:[e.jsxs("div",{className:"asset-card__header",children:[e.jsxs("div",{className:"asset-card__title",children:[e.jsx("h3",{className:"asset-card__name",children:t.name}),t.symbol&&e.jsx("span",{className:"asset-card__code",children:t.symbol})]}),e.jsx("div",{className:"asset-card__type",children:e.jsx("span",{className:`asset-type asset-type--${t.type.toLowerCase()}`,children:da[t.type]||t.type})})]}),t.description&&!o&&e.jsx("div",{className:"asset-card__description",children:e.jsx("p",{children:t.description})}),e.jsxs("div",{className:"asset-card__content",children:[e.jsxs("div",{className:"asset-card__value",children:[e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{className:"value-item__primary",children:X(Number(t.totalValue)||0,l)}),t.currentValue&&t.currentValue!==t.initialValue&&e.jsxs("span",{className:"value-item__secondary",children:["Initial: ",X(t.initialValue||0,l)]})]}),e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Current Price"}),e.jsx("span",{className:"value-item__primary",children:X(t.currentPrice||0,l)}),t.currentPrice&&e.jsx("span",{className:"value-item__secondary",children:"Market Price"})]}),e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{className:"value-item__primary",children:pt(Number(t.totalQuantity)||0,2)}),t.currentQuantity&&t.currentQuantity!==t.initialQuantity&&e.jsxs("span",{className:"value-item__secondary",children:["Initial: ",pt(t.initialQuantity||0,2)]})]})]}),e.jsxs("div",{className:"asset-card__performance",children:[e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Performance"}),e.jsxs("div",{className:`performance ${c.isGaining?"performance--positive":c.isLosing?"performance--negative":""}`,children:[e.jsx("span",{className:"performance__value",children:X(c.valueChange,l)}),e.jsx("span",{className:"performance__percentage",children:ve(c.valueChangePercentage,2)})]})]}),t.performance&&e.jsx("div",{className:"performance-metrics",children:e.jsx(uv,{performance:t.performance,compact:!0,showLabels:!0,className:"mt-2"})})]}),!o&&e.jsxs("div",{className:"asset-card__info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Created"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Updated"}),e.jsx("span",{children:new Date(t.updatedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Has Trades"}),e.jsx("span",{className:t.hasTrades?"status status--active":"status status--inactive",children:t.hasTrades?"Yes":"No"})]})]})]}),a&&e.jsxs("div",{className:"asset-card__actions",children:[e.jsx("button",{onClick:u,className:"btn btn--small btn--secondary",title:"Edit Asset",children:" Edit"}),e.jsx("button",{onClick:f,className:"btn btn--small btn--danger",title:"Delete Asset",children:" Delete"})]}),e.jsxs("div",{className:"asset-card__indicators",children:[t.hasTrades&&e.jsx("span",{className:"indicator indicator--trades",title:"Has trading activity",children:""}),c.isGaining&&e.jsx("span",{className:"indicator indicator--gaining",title:"Positive performance",children:""}),c.isLosing&&e.jsx("span",{className:"indicator indicator--losing",title:"Negative performance",children:""})]})]})},mv=({filters:t,onFiltersChange:r,onClearFilters:n,className:s="",showAdvanced:a=!1,onToggleAdvanced:o})=>{var E,k;const[i,l]=x.useState(t.search||""),[c,d]=x.useState(t.type||"ALL"),[u,f]=x.useState(t.sortBy||"name"),[p,m]=x.useState(t.sortOrder||"ASC"),[g,b]=x.useState({min:((E=t.minValue)==null?void 0:E.toString())||"",max:((k=t.maxValue)==null?void 0:k.toString())||""}),[P,j]=x.useState(t.limit||25);x.useEffect(()=>{var C,T;l(t.search||""),d(t.type||"ALL"),f(t.sortBy||"name"),m(t.sortOrder||"ASC"),b({min:((C=t.minValue)==null?void 0:C.toString())||"",max:((T=t.maxValue)==null?void 0:T.toString())||""}),j(t.limit||25)},[t]);const w=x.useCallback(C=>{l(C),r({...t,search:C||void 0})},[t,r]),S=x.useCallback(C=>{d(C),r({...t,type:C==="ALL"?void 0:C})},[t,r]),y=x.useCallback((C,T)=>{const F={...g,[C]:T};b(F);const _=F.min?parseFloat(F.min):void 0,R=F.max?parseFloat(F.max):void 0;r({...t,minValue:_,maxValue:R})},[t,r,g]),A=x.useCallback(C=>{j(C),r({...t,limit:C})},[t,r]),O=x.useCallback(()=>{l(""),d("ALL"),f("name"),m("ASC"),b({min:"",max:""}),j(25),n()},[n]),N=x.useCallback(()=>{o==null||o(!a)},[a,o]),I=i||c!=="ALL"||g.min||g.max;return e.jsxs("div",{className:`asset-filters ${s}`,children:[e.jsxs("div",{className:"asset-filters__basic",children:[e.jsxs("div",{className:"asset-filters__search",children:[e.jsx("input",{type:"text",placeholder:"Search assets...",value:i,onChange:C=>w(C.target.value),className:"input input--search"}),i&&e.jsx("button",{onClick:()=>w(""),className:"btn btn--icon btn--clear",title:"Clear search",children:""})]}),e.jsx("div",{className:"asset-filters__type",children:e.jsxs("select",{value:c,onChange:C=>S(C.target.value),className:"select",children:[e.jsx("option",{value:"ALL",children:"All Types"}),Object.entries(da).map(([C,T])=>e.jsx("option",{value:C,children:T},C))]})}),e.jsx("div",{className:"asset-filters__sort",children:e.jsxs("select",{value:`${u}-${p}`,onChange:C=>{const[T,F]=C.target.value.split("-");f(T),m(F),r({...t,sortBy:T,sortOrder:F})},className:"select",children:[e.jsx("option",{value:"name-ASC",children:"Name A-Z"}),e.jsx("option",{value:"name-DESC",children:"Name Z-A"}),e.jsx("option",{value:"totalValue-ASC",children:"Value Low-High"}),e.jsx("option",{value:"totalValue-DESC",children:"Value High-Low"}),e.jsx("option",{value:"totalQuantity-ASC",children:"Quantity Low-High"}),e.jsx("option",{value:"totalQuantity-DESC",children:"Quantity High-Low"}),e.jsx("option",{value:"updatedAt-ASC",children:"Oldest First"}),e.jsx("option",{value:"updatedAt-DESC",children:"Newest First"})]})}),e.jsx("div",{className:"asset-filters__limit",children:e.jsxs("select",{value:P,onChange:C=>A(Number(C.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"})]})}),e.jsxs("div",{className:"asset-filters__actions",children:[e.jsxs("button",{onClick:N,className:"btn btn--secondary",children:[a?"Hide":"Show"," Advanced"]}),I&&e.jsx("button",{onClick:O,className:"btn btn--outline",children:"Clear All"})]})]}),a&&e.jsxs("div",{className:"asset-filters__advanced",children:[e.jsx("div",{className:"asset-filters__advanced-header",children:e.jsx("h4",{children:"Advanced Filters"})}),e.jsxs("div",{className:"asset-filters__advanced-content",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Value Range"}),e.jsxs("div",{className:"value-range",children:[e.jsx("input",{type:"number",placeholder:"Min value",value:g.min,onChange:C=>y("min",C.target.value),className:"input input--small",min:"0",step:"0.01"}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",placeholder:"Max value",value:g.max,onChange:C=>y("max",C.target.value),className:"input input--small",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort Options"}),e.jsxs("div",{className:"sort-options",children:[e.jsxs("div",{className:"sort-field",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("select",{value:u,onChange:C=>{f(C.target.value),r({...t,sortBy:C.target.value})},className:"select select--small",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"type",children:"Type"}),e.jsx("option",{value:"totalValue",children:"Total Value"}),e.jsx("option",{value:"totalQuantity",children:"Total Quantity"}),e.jsx("option",{value:"createdAt",children:"Created Date"}),e.jsx("option",{value:"updatedAt",children:"Updated Date"})]})]}),e.jsxs("div",{className:"sort-order",children:[e.jsx("label",{children:"Order:"}),e.jsxs("select",{value:p,onChange:C=>{m(C.target.value),r({...t,sortOrder:C.target.value})},className:"select select--small",children:[e.jsx("option",{value:"ASC",children:"Ascending"}),e.jsx("option",{value:"DESC",children:"Descending"})]})]})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Results per page"}),e.jsxs("select",{value:P,onChange:C=>A(Number(C.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:250,children:"250"}),e.jsx("option",{value:500,children:"500"})]})]})]})]}),I&&e.jsx("div",{className:"asset-filters__summary",children:e.jsxs("div",{className:"active-filters",children:[e.jsx("span",{className:"active-filters__label",children:"Active filters:"}),e.jsxs("div",{className:"active-filters__tags",children:[i&&e.jsxs("span",{className:"filter-tag",children:['Search: "',i,'"',e.jsx("button",{onClick:()=>w(""),className:"filter-tag__remove",children:""})]}),c!=="ALL"&&e.jsxs("span",{className:"filter-tag",children:["Type: ",da[c],e.jsx("button",{onClick:()=>S("ALL"),className:"filter-tag__remove",children:""})]}),g.min&&e.jsxs("span",{className:"filter-tag",children:["Min: ",g.min,e.jsx("button",{onClick:()=>y("min",""),className:"filter-tag__remove",children:""})]}),g.max&&e.jsxs("span",{className:"filter-tag",children:["Max: ",g.max,e.jsx("button",{onClick:()=>y("max",""),className:"filter-tag__remove",children:""})]})]})]})})]})},fv=({onSubmit:t,onCancel:r,userId:n,initialData:s,submitText:a="Create Asset",mode:o="create",loading:i=!1,className:l=""})=>{var A;const{accountId:c}=At(),d=n||c,u=o==="edit"||s&&s.symbol,{assetTypes:f,loading:p,error:m}=Dl(),[g,b]=x.useState({name:"",symbol:"",type:((A=f[0])==null?void 0:A.value)||Pl.STOCK,description:"",initialValue:void 0,initialQuantity:void 0,currentValue:void 0,currentQuantity:void 0,createdBy:d,updatedBy:d,...s}),[P,j]=x.useState({}),w=()=>{var N,I;const O={};return(N=g.name)!=null&&N.trim()||(O.name="Asset name is required"),!u&&!((I=g.symbol)!=null&&I.trim())&&(O.symbol="Asset symbol is required"),g.type||(O.type="Asset type is required"),j(O),Object.keys(O).length===0},S=O=>{O.preventDefault(),console.log("AssetForm handleSubmit called"),console.log("Form data:",g),console.log("Form validation result:",w()),w()?(console.log("Calling onSubmit with formData"),t(g)):console.log("Form validation failed")},y=O=>N=>{if(O==="initialValue"||O==="initialQuantity"||O==="currentValue"||O==="currentQuantity")return;const I=N.target.value;b(E=>({...E,[O]:I})),P[O]&&j(E=>({...E,[O]:""}))};return e.jsxs("div",{className:"asset-form",children:[e.jsxs("div",{className:"asset-form__header",children:[e.jsx("h2",{children:a}),e.jsx("button",{type:"button",onClick:r,className:"btn btn--secondary btn--icon","aria-label":"Close form",children:""})]}),e.jsx("div",{className:"asset-form__content",children:e.jsxs(v,{component:"form",onSubmit:S,children:[e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Asset Name",value:g.name,onChange:y("name"),error:!!P.name,helperText:P.name,required:!0})}),!u&&e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Asset Symbol",value:g.symbol,onChange:y("symbol"),placeholder:"e.g., AAPL, HPG",error:!!P.symbol,helperText:"Symbol cannot be changed after creation. ",required:!0})}),u&&e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Asset Symbol",value:g.symbol||"",disabled:!0,helperText:"Symbol cannot be changed after creation"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsxs(Ze,{fullWidth:!0,error:!!P.type,children:[e.jsx(Je,{children:"Asset Type"}),e.jsx(et,{value:g.type,onChange:y("type"),label:"Asset Type",disabled:p,children:p?e.jsxs(ue,{disabled:!0,children:[e.jsx(ze,{size:20,sx:{mr:1}}),"Loading asset types..."]}):m?e.jsx(ue,{disabled:!0,children:"Error loading asset types"}):f.map(O=>e.jsx(ue,{value:O.value,children:O.label},O.value))}),P.type&&e.jsx(Ue,{severity:"error",sx:{mt:1},children:P.type}),m&&e.jsx(Ue,{severity:"warning",sx:{mt:1},children:m})]})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Currency",value:"VND",disabled:!0,helperText:"Currently only VND is supported"})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(We,{fullWidth:!0,label:"Description",value:g.description,onChange:y("description"),multiline:!0,rows:2,placeholder:"Optional description of the asset"})}),e.jsx(M,{item:!0,xs:12,children:e.jsxs(Ue,{severity:"info",sx:{mb:2},children:[e.jsx("strong",{children:"Computed Fields:"})," Initial value, initial quantity, current value, and current quantity are automatically calculated based on your trades and market prices. These fields will be updated when you create trades for this asset."]})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Initial Value",type:"number",value:g.initialValue??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:0,step:.01},placeholder:g.initialValue?void 0:"No data available"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Initial Quantity",type:"number",value:g.initialQuantity??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:1e-4,step:1e-4},placeholder:g.initialQuantity?void 0:"No data available"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Current Value",type:"number",value:g.currentValue??"",disabled:!0,helperText:"Calculated from trades  current market price",inputProps:{min:0,step:.01},placeholder:g.currentValue?void 0:"No data available"})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{fullWidth:!0,label:"Current Quantity",type:"number",value:g.currentQuantity??"",disabled:!0,helperText:"Calculated from all trades",inputProps:{min:0,step:1e-4},placeholder:g.currentQuantity?void 0:"No data available"})})]}),e.jsxs("div",{className:"asset-form__actions",children:[e.jsx(Ce,{type:"button",variant:"outlined",onClick:r,size:"large",children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",size:"large",disabled:i,children:i?"ang x l...":a})]})]})})]})},pv=({assets:t,statistics:r,onClose:n,className:s=""})=>{const{baseCurrency:a}=At(),o=Ht.useMemo(()=>{const c=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.daily)||0)},0),d=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.weekly)||0)},0),u=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.monthly)||0)},0),f=t.reduce((p,m)=>{var g;return p+(Number((g=m.performance)==null?void 0:g.yearly)||0)},0);return{averageDailyReturn:t.length>0?c/t.length:0,averageWeeklyReturn:t.length>0?d/t.length:0,averageMonthlyReturn:t.length>0?u/t.length:0,averageYearlyReturn:t.length>0?f/t.length:0}},[t]),i=Ht.useMemo(()=>{const c=[{label:"Under 10K",min:0,max:1e4,count:0},{label:"10K - 50K",min:1e4,max:5e4,count:0},{label:"50K - 100K",min:5e4,max:1e5,count:0},{label:"100K - 500K",min:1e5,max:5e5,count:0},{label:"Over 500K",min:5e5,max:1/0,count:0}];return t.forEach(d=>{const u=Number(d.totalValue)||0,f=c.find(p=>u>=p.min&&u<p.max);f&&f.count++}),c},[t]),l=Ht.useMemo(()=>[...t].filter(c=>{var d;return((d=c.performance)==null?void 0:d.yearly)!==void 0}).sort((c,d)=>{var u,f;return(((u=d.performance)==null?void 0:u.yearly)||0)-(((f=c.performance)==null?void 0:f.yearly)||0)}).slice(0,5),[t]);return e.jsxs("div",{className:`asset-analytics ${s}`,children:[e.jsxs("div",{className:"asset-analytics__header",children:[e.jsx("h3",{children:"Asset Analytics"}),n&&e.jsx("button",{onClick:n,className:"btn btn--secondary btn--icon","aria-label":"Close analytics",children:""})]}),e.jsxs("div",{className:"asset-analytics__content",children:[e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Performance Overview"}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageDailyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Daily Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageWeeklyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Weekly Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageMonthlyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Monthly Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageYearlyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Yearly Return"})]})]})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Asset Type Distribution"}),e.jsx("div",{className:"distribution-chart",children:Object.entries(r.assetsByType).map(([c,d])=>{const u=r.totalAssets>0?d/r.totalAssets*100:0;return e.jsxs("div",{className:"distribution-item",children:[e.jsxs("div",{className:"distribution-item__label",children:[e.jsx("span",{className:"distribution-item__type",children:c}),e.jsx("span",{className:"distribution-item__count",children:d})]}),e.jsx("div",{className:"distribution-item__bar",children:e.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),e.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},c)})})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Value Distribution"}),e.jsx("div",{className:"distribution-chart",children:i.map((c,d)=>{const u=r.totalAssets>0?c.count/r.totalAssets*100:0;return e.jsxs("div",{className:"distribution-item",children:[e.jsxs("div",{className:"distribution-item__label",children:[e.jsx("span",{className:"distribution-item__type",children:c.label}),e.jsx("span",{className:"distribution-item__count",children:c.count})]}),e.jsx("div",{className:"distribution-item__bar",children:e.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),e.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},d)})})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Top Performers (Yearly)"}),e.jsx("div",{className:"performers-list",children:l.map((c,d)=>{var u,f;return e.jsxs("div",{className:"performer-item",children:[e.jsxs("div",{className:"performer-item__rank",children:["#",d+1]}),e.jsxs("div",{className:"performer-item__info",children:[e.jsx("div",{className:"performer-item__name",children:c.name}),e.jsx("div",{className:"performer-item__code",children:c.symbol})]}),e.jsxs("div",{className:"performer-item__performance",children:[e.jsx("div",{className:`performer-item__return ${(((u=c.performance)==null?void 0:u.yearly)||0)>=0?"positive":"negative"}`,children:ve(((f=c.performance)==null?void 0:f.yearly)||0,2)}),e.jsx("div",{className:"performer-item__value",children:X(Number(c.totalValue)||0,a)})]})]},c.id)})})]})]})]})},xv=({selectedAsset:t,editingAsset:r,deletingAsset:n,showCreateForm:s=!1,onClose:a,onSubmit:o,onDeleteConfirm:i,onEditAsset:l,portfolioId:c,className:d=""})=>{const{baseCurrency:u}=At(),f=()=>{a()},p=()=>{n&&i(n)},m=()=>{a()};return e.jsxs("div",{className:`asset-dialogs ${d}`,children:[t&&e.jsx("div",{className:"modal-overlay",onClick:f,children:e.jsx("div",{className:"modal-content",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"asset-dialog",children:[e.jsxs("div",{className:"asset-dialog__header",children:[e.jsx("h3",{children:"Asset Details"}),e.jsx("button",{onClick:f,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:""})]}),e.jsx("div",{className:"asset-dialog__content",children:e.jsxs("div",{className:"asset-details",children:[e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Name"}),e.jsx("span",{children:t.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Symbol"}),e.jsx("span",{children:t.symbol})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Type"}),e.jsx("span",{className:`asset-type-badge asset-type-badge--${t.type.toLowerCase()}`,children:t.type})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Description"}),e.jsx("span",{children:t.description||"No description"})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Financial Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Current Price"}),e.jsx("span",{className:"detail-value--highlight",children:X(t.currentPrice||t.currentValue||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Average Cost"}),e.jsx("span",{children:X(t.avgCost||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{children:pt(t.quantity||t.totalQuantity||0,2)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{className:"detail-value--highlight",children:X(Number(t.totalValue)||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Initial Value"}),e.jsx("span",{children:X(t.initialValue||0,u)})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Profit & Loss Analysis"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Unrealized P&L"}),e.jsx("span",{className:`detail-value ${(t.currentPrice||0)>=(t.avgCost||0)?"positive":"negative"}`,children:X(((t.currentPrice||0)-(t.avgCost||0))*(t.quantity||t.totalQuantity||0),u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"P&L Percentage"}),e.jsx("span",{className:`detail-value ${(t.currentPrice||0)>=(t.avgCost||0)?"positive":"negative"}`,children:t.avgCost&&t.avgCost>0?ve(((t.currentPrice||0)-t.avgCost)/t.avgCost*100,2):"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Cost Basis"}),e.jsx("span",{children:X((t.avgCost||0)*(t.quantity||t.totalQuantity||0),u)})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Performance"}),e.jsx("div",{className:"performance-grid",children:t.performance?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Daily"}),e.jsx("span",{className:`performance-value ${(t.performance.daily||0)>=0?"positive":"negative"}`,children:ve(t.performance.daily||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Weekly"}),e.jsx("span",{className:`performance-value ${(t.performance.weekly||0)>=0?"positive":"negative"}`,children:ve(t.performance.weekly||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Monthly"}),e.jsx("span",{className:`performance-value ${(t.performance.monthly||0)>=0?"positive":"negative"}`,children:ve(t.performance.monthly||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Yearly"}),e.jsx("span",{className:`performance-value ${(t.performance.yearly||0)>=0?"positive":"negative"}`,children:ve(t.performance.yearly||0,2)})]})]}):e.jsx("div",{className:"performance-item",children:e.jsx("span",{children:"No performance data available"})})})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Metadata"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Created"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Last Updated"}),e.jsx("span",{children:new Date(t.updatedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Asset ID"}),e.jsx("span",{children:t.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Asset Class"}),e.jsx("span",{children:t.assetClass})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Currency"}),e.jsx("span",{children:t.currency})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Status"}),e.jsx("span",{className:`status-badge ${t.isActive?"status-badge--active":"status-badge--inactive"}`,children:t.isActive?"Active":"Inactive"})]})]})]})]})}),e.jsxs("div",{className:"asset-dialog__actions",children:[e.jsx("button",{onClick:()=>{l&&t&&l(t)},className:"btn btn--secondary",disabled:!l,title:"Edit this asset",children:" Edit Asset"}),e.jsx("button",{onClick:()=>{i&&t&&i(t)},className:"btn btn--danger",title:"Delete this asset",children:" Delete"}),e.jsx("button",{onClick:f,className:"btn btn--primary",children:"Close"})]})]})})}),n&&e.jsx("div",{className:"modal-overlay",onClick:m,children:e.jsx("div",{className:"modal-content modal-content--small",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"asset-dialog",children:[e.jsxs("div",{className:"asset-dialog__header",children:[e.jsx("h3",{children:"Delete Asset"}),e.jsx("button",{onClick:m,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:""})]}),e.jsx("div",{className:"asset-dialog__content",children:e.jsxs("div",{className:"delete-confirmation",children:[e.jsx("div",{className:"delete-confirmation__icon",children:""}),e.jsx("h4",{children:"Are you sure you want to delete this asset?"}),e.jsxs("p",{children:["This action cannot be undone. The asset ",e.jsx("strong",{children:n.name})," (",n.symbol,") will be permanently removed from your portfolio."]}),e.jsxs("div",{className:"delete-confirmation__details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{children:X(Number(n.totalValue)||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{children:pt(n.quantity||n.totalQuantity||0,2)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Type"}),e.jsx("span",{children:n.type})]})]})]})}),e.jsxs("div",{className:"asset-dialog__actions",children:[e.jsx("button",{onClick:m,className:"btn btn--secondary",children:"Cancel"}),e.jsx("button",{onClick:p,className:"btn btn--danger",children:"Delete Asset"})]})]})})})]})},gv=({open:t,assetName:r,tradeCount:n,onConfirm:s,onCancel:a,isDeleting:o=!1})=>e.jsxs(or,{open:t,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[e.jsx(yr,{sx:{pb:1},children:e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Yn,{color:"warning"}),e.jsx(h,{variant:"h6",component:"div",children:n>0?"Delete Asset with Trades":"Delete Asset"})]})}),e.jsxs(ir,{sx:{pt:1},children:[e.jsx(Ue,{severity:"warning",sx:{mb:2},children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:"This action cannot be undone!"})}),n>0?e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"body1",paragraph:!0,children:["The asset ",e.jsxs("strong",{children:['"',r,'"']})," has ",e.jsx("strong",{children:n})," associated trade(s)."]}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Deleting this asset will also permanently delete all associated trades. This action cannot be undone and may affect your portfolio calculations."}),e.jsxs(v,{sx:{bgcolor:"grey.50",p:2,borderRadius:1,border:"1px solid",borderColor:"grey.200"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"What will be deleted:"})}),e.jsxs(h,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[e.jsxs("li",{children:['The asset "',r,'"']}),e.jsxs("li",{children:[n," trade record(s)"]}),e.jsx("li",{children:"All associated transaction history"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"body1",paragraph:!0,children:["The asset ",e.jsxs("strong",{children:['"',r,'"']})," has no associated trades."]}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This asset can be safely deleted without affecting any trading history. This action cannot be undone."}),e.jsxs(v,{sx:{bgcolor:"green.50",p:2,borderRadius:1,border:"1px solid",borderColor:"green.200"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"What will be deleted:"})}),e.jsxs(h,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[e.jsxs("li",{children:['The asset "',r,'"']}),e.jsx("li",{children:"No trade records (safe to delete)"})]})]})]})]}),e.jsxs(lr,{sx:{p:3,pt:1},children:[e.jsx(Ce,{onClick:a,disabled:o,variant:"outlined",size:"large",children:"Cancel"}),e.jsx(Ce,{onClick:s,disabled:o,variant:"contained",color:"error",size:"large",startIcon:o?e.jsx(ze,{size:20}):e.jsx(Yn,{}),children:o?"Deleting...":n>0?"Delete Asset & Trades":"Delete Asset"})]})]}),yv=({portfolioId:t,className:r=""})=>{const{baseCurrency:n,accountId:s}=At(),[a,o]=x.useState("list"),[i,l]=x.useState(!1),[c,d]=x.useState(!1),[u,f]=x.useState(!1),[p,m]=x.useState(null),[g,b]=x.useState(null),[P,j]=x.useState(null),[w,S]=x.useState(!1),[y,A]=x.useState(!1),[O,N]=x.useState(null),[I,E]=x.useState(0),[k,C]=x.useState(null),[T,F]=x.useState(!1),_=x.useMemo(()=>({portfolioId:t,limit:25,sortBy:"name",sortOrder:"ASC"}),[t]),[R,q]=x.useState(_),{assets:B,loading:$,error:H,pagination:Q,setFilters:J,clearFilters:re,refresh:te,forceRefresh:D,goToPage:ee,setPageSize:pe,updateAsset:U,createAsset:Z}=Ia({initialFilters:_,autoFetch:!0}),ce=x.useCallback(K=>{q(K),J(K)},[J]),je=x.useCallback(()=>{q(_),re()},[_,re]),me=x.useCallback(()=>{o(K=>K==="list"?"grid":"list")},[]),ge=x.useCallback(K=>{l(K)},[]),ne=x.useCallback(()=>{d(K=>!K)},[]),be=x.useCallback(()=>{f(K=>!K)},[]),He=x.useCallback(K=>{m(K)},[]),Be=x.useCallback(K=>{console.log("handleAssetEdit called with asset:",K),b(K)},[]),lt=x.useCallback(()=>{m(null),b(null),j(null),f(!1),C(null)},[]),le=x.useCallback(async(K,oe)=>{try{if(B.filter(Ae=>{var rt;return((rt=Ae.symbol)==null?void 0:rt.toLowerCase())===K.toLowerCase()&&Ae.id!==oe}).length>0)return!0;try{const Ae=await Ne.api.get(`/api/v1/assets?symbol=${encodeURIComponent(K)}&createdBy=${s}`),rt=Ae.data.data||Ae.data;return Array.isArray(rt)&&rt.length>0}catch{return!1}return!1}catch(Se){return console.error("Error checking symbol:",Se),!1}},[B,s]),we=x.useCallback(async K=>{F(!0),C(null);try{if(console.log("Form submitted with data:",K),console.log("Editing asset:",g),!g&&K.symbol){console.log("Checking symbol uniqueness for:",K.symbol),console.log("Current assets:",B.map(Se=>({symbol:Se.symbol,id:Se.id})));const oe=await le(K.symbol);if(console.log("Symbol exists:",oe),oe){console.log("Setting form error: Symbol already exists"),C("M ti sn ny  tn ti. Vui lng chn m khc."),F(!1);return}}if(g){const oe={name:K.name,symbol:K.symbol,type:K.type,description:K.description,updatedBy:K.updatedBy||s};Object.keys(oe).forEach(Ae=>{oe[Ae]===void 0&&delete oe[Ae],Ae==="description"&&oe[Ae]===""||oe[Ae]===""&&delete oe[Ae]});const Se=await U(g.id,oe);console.log("Update result:",Se)}else{const oe={name:K.name,symbol:K.symbol,type:K.type,description:K.description,createdBy:K.createdBy||s,updatedBy:K.updatedBy||s};Object.keys(oe).forEach(Ae=>{(oe[Ae]===void 0||oe[Ae]==="")&&delete oe[Ae]}),console.log("Creating new asset"),console.log("Create data:",oe);const Se=await Z(oe);console.log("Create result:",Se)}lt()}catch(oe){console.error("Error saving asset:",oe);let Se="C li xy ra khi lu ti sn";oe instanceof Error&&(oe.message.includes("already exists")?Se="M ti sn ny  tn ti. Vui lng chn m khc.":oe.message.includes("required")?Se="Vui lng in y  thng tin bt buc.":oe.message.includes("invalid")?Se="Thng tin khng hp l. Vui lng kim tra li.":Se=oe.message),C(Se)}finally{F(!1)}},[g,U,Z,lt,s]),z=x.useCallback(async K=>{try{const oe=await Ar.getTradeCount(K.id);N(K),E(oe.count),S(!0)}catch(oe){console.error("Error getting trade count:",oe),alert(`Error getting trade information: ${oe instanceof Error?oe.message:"Unknown error"}`)}},[]),G=x.useCallback(async()=>{if(O){A(!0);try{I>0?await Ar.forceDeleteAsset(O.id):await Ar.deleteAsset(O.id),await new Promise(K=>setTimeout(K,500)),await D(),await new Promise(K=>setTimeout(K,100)),await D(),S(!1),N(null),lt()}catch(K){console.error("Error deleting asset:",K),alert(`Error deleting asset: ${K instanceof Error?K.message:"Unknown error"}`)}finally{A(!1)}}},[O,I,D,lt]),Te=x.useCallback(()=>{S(!1),N(null),E(0)},[]),Ve=x.useMemo(()=>{const K=B.length,oe=B.reduce((rt,Tt)=>rt+(Number(Tt.totalValue)||0),0),Se=K>0?oe/K:0,Ae=B.reduce((rt,Tt)=>(rt[Tt.type]=(rt[Tt.type]||0)+1,rt),{});return{totalAssets:K,totalValue:oe,averageValue:Se,assetsByType:Ae}},[B]);return $&&B.length===0?e.jsx("div",{className:`asset-management ${r}`,children:e.jsxs("div",{className:"asset-management__loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading assets..."})]})}):H?e.jsx("div",{className:`asset-management ${r}`,children:e.jsxs("div",{className:"asset-management__error",children:[e.jsx("h2",{children:"Error Loading Assets"}),e.jsx("p",{children:H}),e.jsx("button",{onClick:te,className:"btn btn--primary",children:"Retry"})]})}):e.jsxs("div",{className:`asset-management ${r}`,children:[e.jsxs("div",{className:"asset-management__header",children:[e.jsxs("div",{className:"asset-management__title",children:[e.jsx("h1",{children:"Asset Management"}),e.jsx("p",{children:"Manage your portfolio assets"})]}),e.jsxs("div",{className:"asset-management__actions",children:[e.jsx("button",{onClick:ne,className:`btn btn--secondary ${c?"btn--active":""}`,children:" Analytics"}),e.jsx("button",{onClick:be,className:"btn btn--primary",children:" Add Asset"})]})]}),e.jsxs("div",{className:"asset-management__stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Ve.totalAssets}),e.jsx("div",{className:"stat-card__label",children:"Total Assets"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:X(Ve.totalValue,n)}),e.jsx("div",{className:"stat-card__label",children:"Total Value"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:X(Ve.averageValue,n)}),e.jsx("div",{className:"stat-card__label",children:"Average Value"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Object.keys(Ve.assetsByType).length}),e.jsx("div",{className:"stat-card__label",children:"Asset Types"})]})]}),c&&e.jsx("div",{className:"asset-management__analytics",children:e.jsx(pv,{assets:B,statistics:Ve,onClose:ne})}),e.jsx(mv,{filters:R,onFiltersChange:ce,onClearFilters:je,showAdvanced:i,onToggleAdvanced:ge,className:"asset-management__filters"}),e.jsxs("div",{className:"asset-management__controls",children:[e.jsxs("div",{className:"asset-management__view-controls",children:[e.jsx("button",{onClick:me,className:`btn btn--secondary ${a==="list"?"btn--active":""}`,children:" List"}),e.jsx("button",{onClick:me,className:`btn btn--secondary ${a==="grid"?"btn--active":""}`,children:" Grid"})]}),e.jsxs("div",{className:"asset-management__pagination-info",children:["Showing ",(Q.page-1)*Q.limit+1," to"," ",Math.min(Q.page*Q.limit,Q.total)," of"," ",Q.total," assets"]})]}),e.jsx("div",{className:"asset-management__content",children:a==="list"?e.jsx(dv,{portfolioId:t,initialFilters:R,onAssetSelect:He,onAssetEdit:Be,onAssetDelete:z,showActions:!0,className:"asset-management__list"}):e.jsx("div",{className:"asset-management__grid",children:B.length===0?e.jsx("div",{className:"asset-management__empty",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state__icon",children:""}),e.jsx("h3",{children:"No Assets Found"}),e.jsx("p",{children:"No assets match your current filters. Try adjusting your search criteria."}),e.jsx("button",{onClick:je,className:"btn btn--primary",children:"Clear Filters"})]})}):e.jsx("div",{className:"asset-grid",children:B.map(K=>e.jsx(hv,{asset:K,onEdit:Be,onDelete:z,onView:He,showActions:!0,className:"asset-grid__item"},K.id))})})}),Q.total>0&&e.jsxs("div",{className:"asset-management__pagination",children:[e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>ee(Q.page-1),disabled:Q.page<=1,className:"btn btn--secondary",children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(Q.total/Q.limit)},(K,oe)=>oe+1).filter(K=>{const oe=Q.page;return K===1||K===oe||K===oe-1||K===oe+1||K===Math.ceil(Q.total/Q.limit)}).map((K,oe,Se)=>e.jsxs(Ht.Fragment,{children:[oe>0&&Se[oe-1]!==K-1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>ee(K),className:`btn ${K===Q.page?"btn--primary":"btn--secondary"}`,children:K})]},K))}),e.jsx("button",{onClick:()=>ee(Q.page+1),disabled:Q.page>=Math.ceil(Q.total/Q.limit),className:"btn btn--secondary",children:"Next"})]}),e.jsxs("div",{className:"pagination-size",children:[e.jsx("label",{children:"Show:"}),e.jsxs("select",{value:Q.limit,onChange:K=>pe(Number(K.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsx(xv,{selectedAsset:p,editingAsset:g,deletingAsset:P,showCreateForm:!1,onClose:lt,onSubmit:we,onDeleteConfirm:z,onEditAsset:Be,portfolioId:t}),(u||g)&&e.jsx("div",{className:"modal-overlay",onClick:lt,children:e.jsxs("div",{className:"modal-content modal-content--form",onClick:K=>K.stopPropagation(),children:[k&&e.jsx("div",{className:"error-message",style:{backgroundColor:"#fee",color:"#c33",padding:"12px",margin:"0 0 16px 0",borderRadius:"4px",border:"1px solid #fcc",fontSize:"14px"},children:k}),e.jsx(fv,{userId:s,initialData:g?(()=>{const K={name:g.name||"",symbol:g.symbol||"",type:g.type,description:g.description||"",initialValue:g.initialValue||void 0,initialQuantity:g.initialQuantity||void 0,currentValue:g.currentValue||void 0,currentQuantity:g.currentQuantity||void 0,createdBy:g.createdBy||s,updatedBy:g.updatedBy||s};return console.log("Initial data for AssetForm:",K),console.log("Editing asset:",g),K})():void 0,submitText:g?"Update Asset":"Create Asset",mode:g?"edit":"create",onSubmit:we,onCancel:lt,loading:T})]})}),e.jsx(gv,{open:w,assetName:(O==null?void 0:O.name)||"",tradeCount:I,onConfirm:G,onCancel:Te,isDeleting:y})]})},vv=ls({symbol:dt().required("Symbol is required").min(1,"Symbol must be at least 1 character").max(20,"Symbol must be at most 20 characters").matches(/^[A-Z0-9.-]+$/,"Symbol must contain only uppercase letters, numbers, dots, and hyphens"),name:dt().required("Name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be at most 100 characters"),type:dt().required("Asset type is required").oneOf(["STOCK","BOND","CRYPTO","COMMODITY","CURRENCY","ETF","MUTUAL_FUND"],"Invalid asset type"),nation:dt().required("Nation is required"),marketCode:dt().required("Market code is required"),currency:dt().required("Currency is required"),timezone:dt().required("Timezone is required"),description:dt().max(500,"Description must be at most 500 characters")}),bv=[{value:"STOCK",label:"Stock"},{value:"BOND",label:"Bond"},{value:"CRYPTO",label:"Cryptocurrency"},{value:"COMMODITY",label:"Commodity"},{value:"CURRENCY",label:"Currency"},{value:"ETF",label:"ETF"},{value:"MUTUAL_FUND",label:"Mutual Fund"}],Fn=[{code:"VN",name:"Vietnam",currency:"VND",timezone:"Asia/Ho_Chi_Minh",marketCodes:[{code:"HOSE",name:"Ho Chi Minh Stock Exchange"},{code:"HNX",name:"Hanoi Stock Exchange"},{code:"UPCOM",name:"Unlisted Public Company Market"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{3,4}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"Asia/Ho_Chi_Minh",days:[{day:"Monday",open:"09:00",close:"15:00"},{day:"Tuesday",open:"09:00",close:"15:00"},{day:"Wednesday",open:"09:00",close:"15:00"},{day:"Thursday",open:"09:00",close:"15:00"},{day:"Friday",open:"09:00",close:"15:00"}]}},{code:"US",name:"United States",currency:"USD",timezone:"America/New_York",marketCodes:[{code:"NYSE",name:"New York Stock Exchange"},{code:"NASDAQ",name:"NASDAQ"},{code:"AMEX",name:"American Stock Exchange"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{1,5}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"America/New_York",days:[{day:"Monday",open:"09:30",close:"16:00"},{day:"Tuesday",open:"09:30",close:"16:00"},{day:"Wednesday",open:"09:30",close:"16:00"},{day:"Thursday",open:"09:30",close:"16:00"},{day:"Friday",open:"09:30",close:"16:00"}]}},{code:"UK",name:"United Kingdom",currency:"GBP",timezone:"Europe/London",marketCodes:[{code:"LSE",name:"London Stock Exchange"},{code:"AIM",name:"Alternative Investment Market"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{2,4}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"Europe/London",days:[{day:"Monday",open:"08:00",close:"16:30"},{day:"Tuesday",open:"08:00",close:"16:30"},{day:"Wednesday",open:"08:00",close:"16:30"},{day:"Thursday",open:"08:00",close:"16:30"},{day:"Friday",open:"08:00",close:"16:30"}]}}],jv=({open:t,onClose:r,onSubmit:n,initialData:s,mode:a,loading:o=!1})=>{const[i,l]=x.useState(""),[c,d]=x.useState([]),[u,f]=x.useState({isValid:!0,message:""}),{control:p,handleSubmit:m,reset:g,watch:b,setValue:P,formState:{errors:j,isDirty:w}}=cs({resolver:Ts(vv),defaultValues:{symbol:"",name:"",type:"STOCK",nation:"",marketCode:"",currency:"",timezone:"",description:"",...s}}),S=b("nation"),y=b("type"),A=b("symbol");x.useEffect(()=>{if(S){const k=Fn.find(C=>C.code===S);k&&(d(k.marketCodes),P("currency",k.currency),P("timezone",k.timezone),l(S))}},[S,P]),x.useEffect(()=>{if(A&&S&&y){const k=Fn.find(C=>C.code===S);if(k&&k.assetTypePatterns[y]){const T=new RegExp(k.assetTypePatterns[y]).test(A);f({isValid:T,message:T?"":`Symbol format is invalid for ${y} in ${k.name}`})}}},[A,S,y]);const O=()=>{g(),l(""),d([]),f({isValid:!0,message:""}),r()},N=async k=>{try{await n(k),O()}catch(C){console.error("Form submission error:",C)}},I=k=>{const C=Fn.find(T=>T.code===k);return C?`${C.name} (${k})`:k},E=k=>{const C=c.find(T=>T.code===k);return C?`${C.name} (${k})`:k};return e.jsx(Kt,{dateAdapter:Sr,children:e.jsxs(or,{open:t,onClose:O,maxWidth:"md",fullWidth:!0,children:[e.jsx(yr,{children:e.jsx(h,{variant:"h6",component:"div",children:a==="create"?"Create New Global Asset":"Edit Global Asset"})}),e.jsxs("form",{onSubmit:m(N),children:[e.jsx(ir,{children:e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"symbol",control:p,render:({field:k})=>{var C;return e.jsx(We,{...k,label:"Symbol",fullWidth:!0,error:!!j.symbol||!u.isValid,helperText:((C=j.symbol)==null?void 0:C.message)||u.message,placeholder:"e.g., AAPL, HPG",disabled:a==="edit"})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"name",control:p,render:({field:k})=>{var C;return e.jsx(We,{...k,label:"Asset Name",fullWidth:!0,error:!!j.name,helperText:(C=j.name)==null?void 0:C.message,placeholder:"e.g., Apple Inc., Hoa Phat Group"})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"type",control:p,render:({field:k})=>e.jsxs(Ze,{fullWidth:!0,error:!!j.type,children:[e.jsx(Je,{children:"Asset Type"}),e.jsx(et,{...k,label:"Asset Type",children:bv.map(C=>e.jsx(ue,{value:C.value,children:C.label},C.value))}),j.type&&e.jsx(h,{variant:"caption",color:"error",children:j.type.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"nation",control:p,render:({field:k})=>e.jsxs(Ze,{fullWidth:!0,error:!!j.nation,children:[e.jsx(Je,{children:"Nation"}),e.jsx(et,{...k,label:"Nation",children:Fn.map(C=>e.jsx(ue,{value:C.code,children:I(C.code)},C.code))}),j.nation&&e.jsx(h,{variant:"caption",color:"error",children:j.nation.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"marketCode",control:p,render:({field:k})=>e.jsxs(Ze,{fullWidth:!0,error:!!j.marketCode,disabled:!S,children:[e.jsx(Je,{children:"Market Code"}),e.jsx(et,{...k,label:"Market Code",children:c.map(C=>e.jsx(ue,{value:C.code,children:E(C.code)},C.code))}),j.marketCode&&e.jsx(h,{variant:"caption",color:"error",children:j.marketCode.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"currency",control:p,render:({field:k})=>{var C;return e.jsx(We,{...k,label:"Currency",fullWidth:!0,error:!!j.currency,helperText:(C=j.currency)==null?void 0:C.message,disabled:!0})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"timezone",control:p,render:({field:k})=>{var C;return e.jsx(We,{...k,label:"Timezone",fullWidth:!0,error:!!j.timezone,helperText:(C=j.timezone)==null?void 0:C.message,disabled:!0})}})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"description",control:p,render:({field:k})=>{var C;return e.jsx(We,{...k,label:"Description",fullWidth:!0,multiline:!0,rows:3,error:!!j.description,helperText:(C=j.description)==null?void 0:C.message,placeholder:"Optional description of the asset"})}})}),i&&e.jsx(M,{item:!0,xs:12,children:e.jsxs(v,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Nation Configuration"}),e.jsxs(v,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(De,{label:`Currency: ${b("currency")}`,size:"small"}),e.jsx(De,{label:`Timezone: ${b("timezone")}`,size:"small"}),e.jsx(De,{label:`Markets: ${c.length}`,size:"small"})]})]})})]})}),e.jsxs(lr,{children:[e.jsx(Ce,{onClick:O,disabled:o,children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",disabled:o||!w||!u.isValid,startIcon:o?e.jsx(ze,{size:20}):null,children:o?"Saving...":a==="create"?"Create Asset":"Update Asset"})]})]})]})})},wv={STOCK:"#1976d2",BOND:"#388e3c",CRYPTO:"#f57c00",COMMODITY:"#7b1fa2",CURRENCY:"#d32f2f",ETF:"#0288d1",MUTUAL_FUND:"#5d4037"},Cv={VN:"Vietnam",US:"United States",UK:"United Kingdom",JP:"Japan",SG:"Singapore",AU:"Australia",CA:"Canada",DE:"Germany",FR:"France",CN:"China"},Pv={HOSE:"Ho Chi Minh Stock Exchange",HNX:"Hanoi Stock Exchange",UPCOM:"Unlisted Public Company Market",NYSE:"New York Stock Exchange",NASDAQ:"NASDAQ",AMEX:"American Stock Exchange",LSE:"London Stock Exchange",AIM:"Alternative Investment Market",TSE:"Tokyo Stock Exchange",SGX:"Singapore Exchange",ASX:"Australian Securities Exchange",TSX:"Toronto Stock Exchange",XETRA:"XETRA",EPA:"Euronext Paris",SSE:"Shanghai Stock Exchange",SZSE:"Shenzhen Stock Exchange"},Tv=({assets:t,loading:r=!1,onEdit:n,onDelete:s,onView:a,onRefresh:o,error:i})=>{const[l,c]=x.useState(0),[d,u]=x.useState(10),[f,p]=x.useState(""),[m,g]=x.useState(""),[b,P]=x.useState(""),[j,w]=x.useState("symbol"),[S,y]=x.useState("asc"),[A,O]=x.useState(null),[N,I]=x.useState(null),E=x.useMemo(()=>[...new Set(t.map(ee=>ee.type))].sort(),[t]),k=x.useMemo(()=>[...new Set(t.map(ee=>ee.nation))].sort(),[t]),C=x.useMemo(()=>{let D=t.filter(ee=>{var ce;const pe=ee.symbol.toLowerCase().includes(f.toLowerCase())||ee.name.toLowerCase().includes(f.toLowerCase())||((ce=ee.description)==null?void 0:ce.toLowerCase().includes(f.toLowerCase())),U=!m||ee.type===m,Z=!b||ee.nation===b;return pe&&U&&Z});return D.sort((ee,pe)=>{let U=ee[j],Z=pe[j];return j==="createdAt"?(U=new Date(U).getTime(),Z=new Date(Z).getTime()):typeof U=="string"&&(U=U.toLowerCase(),Z=Z.toLowerCase()),U<Z?S==="asc"?-1:1:U>Z?S==="asc"?1:-1:0}),D},[t,f,m,b,j,S]),T=x.useMemo(()=>{const D=l*d;return C.slice(D,D+d)},[C,l,d]),F=(D,ee)=>{c(ee)},_=D=>{u(parseInt(D.target.value,10)),c(0)},R=D=>{j===D?y(S==="asc"?"desc":"asc"):(w(D),y("asc"))},q=(D,ee)=>{O(D.currentTarget),I(ee)},B=()=>{O(null),I(null)},$=D=>{if(N)switch(D){case"view":a(N);break;case"edit":n(N);break;case"delete":s(N);break}B()},H=(D,ee)=>new Intl.NumberFormat("en-US",{style:"currency",currency:ee,minimumFractionDigits:2,maximumFractionDigits:2}).format(D),Q=D=>{if(!D.assetPrice)return e.jsx(Ks,{color:"disabled"});const ee=Math.random()-.5;return ee>.1?e.jsx(gt,{color:"success"}):ee<-.1?e.jsx(Dt,{color:"error"}):e.jsx(Ks,{color:"disabled"})},J=D=>wv[D]||"#666",re=D=>Cv[D]||D,te=D=>Pv[D]||D;return i?e.jsx(Ue,{severity:"error",action:e.jsx(Ce,{color:"inherit",size:"small",onClick:o,children:"Retry"}),children:i}):e.jsxs(v,{children:[e.jsx(nt,{sx:{p:2,mb:2},children:e.jsxs(M,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsx(We,{fullWidth:!0,placeholder:"Search assets...",value:f,onChange:D=>p(D.target.value),InputProps:{startAdornment:e.jsx(xa,{position:"start",children:e.jsx(fa,{})})}})}),e.jsx(M,{item:!0,xs:12,sm:3,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Type"}),e.jsxs(et,{value:m,onChange:D=>g(D.target.value),label:"Type",children:[e.jsx(ue,{value:"",children:"All Types"}),E.map(D=>e.jsx(ue,{value:D,children:D},D))]})]})}),e.jsx(M,{item:!0,xs:12,sm:3,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Nation"}),e.jsxs(et,{value:b,onChange:D=>P(D.target.value),label:"Nation",children:[e.jsx(ue,{value:"",children:"All Nations"}),k.map(D=>e.jsx(ue,{value:D,children:re(D)},D))]})]})}),e.jsx(M,{item:!0,xs:12,sm:2,children:e.jsx(Ce,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(zr,{}),onClick:o,disabled:r,children:"Refresh"})})]})}),e.jsxs(he,{children:[e.jsx(Gt,{children:e.jsxs(Xt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(Y,{children:e.jsx(Jr,{active:j==="symbol",direction:j==="symbol"?S:"asc",onClick:()=>R("symbol"),children:"Symbol"})}),e.jsx(Y,{children:e.jsx(Jr,{active:j==="name",direction:j==="name"?S:"asc",onClick:()=>R("name"),children:"Name"})}),e.jsx(Y,{children:e.jsx(Jr,{active:j==="type",direction:j==="type"?S:"asc",onClick:()=>R("type"),children:"Type"})}),e.jsx(Y,{children:e.jsx(Jr,{active:j==="nation",direction:j==="nation"?S:"asc",onClick:()=>R("nation"),children:"Nation"})}),e.jsx(Y,{children:e.jsx(Jr,{active:j==="marketCode",direction:j==="marketCode"?S:"asc",onClick:()=>R("marketCode"),children:"Market"})}),e.jsx(Y,{children:"Price"}),e.jsx(Y,{children:"Status"}),e.jsx(Y,{align:"right",children:"Actions"})]})}),e.jsx(Jt,{children:r?e.jsx(Ge,{children:e.jsx(Y,{colSpan:8,align:"center",children:e.jsx(ze,{})})}):T.length===0?e.jsx(Ge,{children:e.jsx(Y,{colSpan:8,align:"center",children:e.jsx(h,{variant:"body2",color:"text.secondary",children:"No assets found"})})}):T.map(D=>e.jsxs(Ge,{hover:!0,children:[e.jsx(Y,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:D.symbol})}),e.jsxs(Y,{children:[e.jsx(h,{variant:"body2",children:D.name}),D.description&&e.jsx(h,{variant:"caption",color:"text.secondary",children:D.description})]}),e.jsx(Y,{children:e.jsx(De,{label:D.type,size:"small",sx:{backgroundColor:J(D.type),color:"white"}})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:re(D.nation)})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:te(D.marketCode)})}),e.jsxs(Y,{children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[Q(D),e.jsx(h,{variant:"body2",children:D.assetPrice?H(D.assetPrice.currentPrice,D.currency):"No price data"})]}),D.assetPrice&&e.jsxs(h,{variant:"caption",color:"text.secondary",children:[D.assetPrice.priceSource,"  ",new Date(D.assetPrice.lastPriceUpdate).toLocaleDateString()]})]}),e.jsx(Y,{children:e.jsx(De,{label:D.isActive?"Active":"Inactive",size:"small",color:D.isActive?"success":"default"})}),e.jsx(Y,{align:"right",children:e.jsx(Et,{onClick:ee=>q(ee,D),size:"small",children:e.jsx(Lo,{})})})]},D.id))})]})}),e.jsx(ec,{rowsPerPageOptions:[5,10,25,50],component:"div",count:C.length,rowsPerPage:d,page:l,onPageChange:F,onRowsPerPageChange:_})]}),e.jsxs(Vo,{anchorEl:A,open:!!A,onClose:B,children:[e.jsxs(ue,{onClick:()=>$("view"),children:[e.jsx(Ut,{children:e.jsx(ma,{fontSize:"small"})}),e.jsx(Wt,{children:"View Details"})]}),e.jsxs(ue,{onClick:()=>$("edit"),children:[e.jsx(Ut,{children:e.jsx(is,{fontSize:"small"})}),e.jsx(Wt,{children:"Edit"})]}),e.jsxs(ue,{onClick:()=>$("delete"),children:[e.jsx(Ut,{children:e.jsx($o,{fontSize:"small"})}),e.jsx(Wt,{children:"Delete"})]})]})]})},Sv=async(t,r={})=>{const n=new URLSearchParams;return r.page&&n.append("page",r.page.toString()),r.limit&&n.append("limit",r.limit.toString()),r.sortBy&&n.append("sortBy",r.sortBy),r.sortOrder&&n.append("sortOrder",r.sortOrder),r.startDate&&n.append("startDate",r.startDate),r.endDate&&n.append("endDate",r.endDate),r.priceType&&n.append("priceType",r.priceType),r.priceSource&&n.append("priceSource",r.priceSource),(await Ne.api.get(`/api/v1/price-history/asset/${t}?${n.toString()}`)).data},Dv=(t,r={})=>jt(["priceHistory",t,r],()=>Sv(t,r),{enabled:!!t,staleTime:0,refetchOnWindowFocus:!1}),kv=ls({price:cn().required("Price is required").positive("Price must be positive").min(.01,"Price must be at least 0.01"),priceType:dt().required("Price type is required").oneOf(["MANUAL","MARKET_DATA","EXTERNAL","CALCULATED"],"Invalid price type"),priceSource:dt().required("Price source is required").oneOf(["USER","MARKET_DATA_SERVICE","EXTERNAL_API","CALCULATED"],"Invalid price source"),changeReason:dt().max(200,"Change reason must be at most 200 characters")}),ko=[{value:"MANUAL",label:"Manual Entry",color:"#1976d2"},{value:"MARKET_DATA",label:"Market Data",color:"#388e3c"},{value:"EXTERNAL",label:"External Source",color:"#f57c00"},{value:"CALCULATED",label:"Calculated",color:"#7b1fa2"}],Ao=[{value:"USER",label:"User Input",color:"#1976d2"},{value:"MARKET_DATA_SERVICE",label:"Market Data Service",color:"#388e3c"},{value:"EXTERNAL_API",label:"External API",color:"#f57c00"},{value:"CALCULATED",label:"Calculated",color:"#7b1fa2"}],Av=({asset:t,onPriceUpdate:r,onPriceHistoryRefresh:n,loading:s=!1,error:a})=>{var _,R,q,B,$,H,Q;const[o,i]=x.useState(0),[l,c]=x.useState(!1),d=cr(),{data:u,isLoading:f,error:p,refetch:m}=Dv(t.id,{limit:50,sortBy:"createdAt",sortOrder:"DESC"}),g=(u==null?void 0:u.data)||[],{control:b,handleSubmit:P,reset:j,formState:{errors:w}}=cs({resolver:Ts(kv),defaultValues:{price:((_=t.assetPrice)==null?void 0:_.currentPrice)||0,priceType:((R=t.assetPrice)==null?void 0:R.priceType)||"MANUAL",priceSource:((q=t.assetPrice)==null?void 0:q.priceSource)||"USER",changeReason:""}}),S=x.useMemo(()=>{if(g.length<2)return 0;const J=typeof g[0].price=="string"?parseFloat(g[0].price):g[0].price,re=typeof g[1].price=="string"?parseFloat(g[1].price):g[1].price;return(J-re)/re*100},[g]),y=(J,re)=>{const te=typeof J=="string"?parseFloat(J):J;return new Intl.NumberFormat("en-US",{style:"currency",currency:re,minimumFractionDigits:2,maximumFractionDigits:2}).format(te)},A=J=>new Date(J).toLocaleString(),O=()=>S>.1?e.jsx(gt,{color:"success"}):S<-.1?e.jsx(Dt,{color:"error"}):e.jsx(Ks,{color:"disabled"}),N=J=>{const re=ko.find(te=>te.value===J);return(re==null?void 0:re.color)||"#666"},I=J=>{const re=Ao.find(te=>te.value===J);return(re==null?void 0:re.color)||"#666"},E=async J=>{try{await r(t.id,J.price,J.priceType,J.priceSource,J.changeReason),c(!1),j(),d.invalidateQueries(["priceHistory",t.id]),await m()}catch(re){console.error("Price update error:",re)}},k=async()=>{try{await n(t.id),d.invalidateQueries(["priceHistory",t.id]),await m()}catch(J){console.error("Price history refresh error:",J)}},C=(J,re)=>{i(re),re===1&&(d.invalidateQueries(["priceHistory",t.id]),m())},T=J=>{const re=new Date,te=new Date(J),D=Math.floor((re.getTime()-te.getTime())/(1e3*60*60));return D<1?"Just now":D<24?`${D}h ago`:`${Math.floor(D/24)}d ago`},F=J=>{const re=new Date,te=new Date(J),D=Math.floor((re.getTime()-te.getTime())/(1e3*60*60));return D<1?"success":D<24?"warning":"error"};return a?e.jsx(Ue,{severity:"error",children:a}):e.jsx(Kt,{dateAdapter:Sr,children:e.jsxs(v,{children:[e.jsx(he,{sx:{mb:2},children:e.jsx(fe,{children:e.jsxs(M,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(M,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"h4",component:"div",children:y(((B=t.assetPrice)==null?void 0:B.currentPrice)||0,t.currency)}),e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[O(),e.jsxs(h,{variant:"body2",color:S>0?"success.main":S<0?"error.main":"text.secondary",children:[S>0?"+":"",S.toFixed(2),"%"]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"vs previous"})]})]}),e.jsxs(M,{item:!0,xs:12,sm:6,children:[e.jsx(v,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:t.assetPrice&&e.jsxs(e.Fragment,{children:[e.jsx(De,{label:t.assetPrice.priceType,size:"small",sx:{backgroundColor:N(t.assetPrice.priceType),color:"white"}}),e.jsx(De,{label:t.assetPrice.priceSource,size:"small",sx:{backgroundColor:I(t.assetPrice.priceSource),color:"white"}}),e.jsx(De,{label:T(t.assetPrice.lastPriceUpdate),size:"small",color:F(t.assetPrice.lastPriceUpdate)})]})}),e.jsxs(h,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last updated: ",t.assetPrice?A(t.assetPrice.lastPriceUpdate):"Never"]})]})]})})}),e.jsxs(he,{children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(pn,{value:o,onChange:C,children:[e.jsx(xt,{label:"Price Settings"}),e.jsx(xt,{label:"Price History"})]})}),e.jsxs(fe,{children:[o===0&&e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"h6",children:"Price Management"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(is,{}),onClick:()=>c(!0),disabled:s,children:"Update Price"})]}),e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{label:"Current Price",value:y((($=t.assetPrice)==null?void 0:$.currentPrice)||0,t.currency),fullWidth:!0,disabled:!0})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{label:"Price Type",value:((H=t.assetPrice)==null?void 0:H.priceType)||"N/A",fullWidth:!0,disabled:!0})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{label:"Price Source",value:((Q=t.assetPrice)==null?void 0:Q.priceSource)||"N/A",fullWidth:!0,disabled:!0})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(We,{label:"Last Update",value:t.assetPrice?A(t.assetPrice.lastPriceUpdate):"Never",fullWidth:!0,disabled:!0})})]})]}),o===1&&e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"h6",children:"Price History"}),e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(zr,{}),onClick:k,disabled:f,children:"Refresh"})]}),p?e.jsxs(Ue,{severity:"error",sx:{mb:2},children:["Failed to load price history: ",p instanceof Error?p.message:"Unknown error"]}):null,f?e.jsx(Uo,{}):g.length===0?e.jsx(Ue,{severity:"info",children:"No price history available for this asset."}):e.jsx(Gt,{component:nt,children:e.jsxs(Xt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(Y,{children:"Price"}),e.jsx(Y,{children:"Type"}),e.jsx(Y,{children:"Source"}),e.jsx(Y,{children:"Reason"}),e.jsx(Y,{children:"Date"})]})}),e.jsx(Jt,{children:g.map(J=>e.jsxs(Ge,{children:[e.jsx(Y,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:y(J.price,t.currency)})}),e.jsx(Y,{children:e.jsx(De,{label:J.priceType,size:"small",sx:{backgroundColor:N(J.priceType),color:"white"}})}),e.jsx(Y,{children:e.jsx(De,{label:J.priceSource,size:"small",sx:{backgroundColor:I(J.priceSource),color:"white"}})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:J.changeReason||"N/A"})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:A(J.createdAt)})})]},J.id))})]})})]})]})]}),e.jsxs(or,{open:l,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(yr,{children:"Update Price"}),e.jsxs("form",{onSubmit:P(E),children:[e.jsx(ir,{children:e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"price",control:b,render:({field:J})=>{var re;return e.jsx(We,{...J,label:"Price",type:"number",fullWidth:!0,error:!!w.price,helperText:(re=w.price)==null?void 0:re.message,InputProps:{startAdornment:e.jsx(h,{sx:{mr:1},children:t.currency})}})}})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"priceType",control:b,render:({field:J})=>e.jsxs(Ze,{fullWidth:!0,error:!!w.priceType,children:[e.jsx(Je,{children:"Price Type"}),e.jsx(et,{...J,label:"Price Type",children:ko.map(re=>e.jsx(ue,{value:re.value,children:re.label},re.value))}),w.priceType&&e.jsx(h,{variant:"caption",color:"error",children:w.priceType.message})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(qe,{name:"priceSource",control:b,render:({field:J})=>e.jsxs(Ze,{fullWidth:!0,error:!!w.priceSource,children:[e.jsx(Je,{children:"Price Source"}),e.jsx(et,{...J,label:"Price Source",children:Ao.map(re=>e.jsx(ue,{value:re.value,children:re.label},re.value))}),w.priceSource&&e.jsx(h,{variant:"caption",color:"error",children:w.priceSource.message})]})})}),e.jsx(M,{item:!0,xs:12,children:e.jsx(qe,{name:"changeReason",control:b,render:({field:J})=>{var re;return e.jsx(We,{...J,label:"Change Reason",fullWidth:!0,multiline:!0,rows:2,error:!!w.changeReason,helperText:(re=w.changeReason)==null?void 0:re.message,placeholder:"Optional reason for price change"})}})})]})}),e.jsxs(lr,{children:[e.jsx(Ce,{onClick:()=>c(!1),children:"Cancel"}),e.jsx(Ce,{type:"submit",variant:"contained",disabled:s,startIcon:s?e.jsx(ze,{size:20}):null,children:s?"Updating...":"Update Price"})]})]})]})]})})},Nv={totalAssets:150,successfulUpdates:142,failedUpdates:8,successRate:94.7,averageUpdateTime:1250,lastUpdate:"2024-01-15T10:30:00Z",nextUpdate:"2024-01-15T10:45:00Z"},Mv=[{name:"MockProvider",baseUrl:"https://api.mockprovider.com",isActive:!0,rateLimit:100,lastCheck:"2024-01-15T10:30:00Z",status:"connected"},{name:"AlphaVantage",baseUrl:"https://www.alphavantage.co",isActive:!1,rateLimit:5,lastCheck:"2024-01-15T09:15:00Z",status:"error"},{name:"Yahoo Finance",baseUrl:"https://query1.finance.yahoo.com",isActive:!0,rateLimit:2e3,lastCheck:"2024-01-15T10:25:00Z",status:"connected"}],Rv=[{assetId:"asset-1",symbol:"HPG",success:!0,newPrice:15e4,timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-2",symbol:"AAPL",success:!0,newPrice:185.5,timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-3",symbol:"MSFT",success:!1,error:"API rate limit exceeded",timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-4",symbol:"GOOGL",success:!0,newPrice:142.75,timestamp:"2024-01-15T10:30:00Z"}],Ev=({stats:t=Nv,providers:r=Mv,recentUpdates:n=Rv,onRefresh:s,onUpdateAll:a,onUpdateByNation:o,onUpdateByMarket:i,onTestProvider:l,loading:c=!1,error:d})=>{const[u,f]=x.useState(0),[p,m]=x.useState(!1),[g,b]=x.useState(""),[P,j]=x.useState(""),w=T=>new Date(T).toLocaleString(),S=()=>{const T=new Date,F=new Date(t.nextUpdate),_=Math.floor((F.getTime()-T.getTime())/(1e3*60));if(_<=0)return"Updating now...";if(_<60)return`${_}m`;const R=Math.floor(_/60),q=_%60;return`${R}h ${q}m`},y=T=>{switch(T){case"connected":return"success";case"disconnected":return"warning";case"error":return"error";default:return"default"}},A=T=>{switch(T){case"connected":return e.jsx(Ln,{});case"disconnected":return e.jsx(Yn,{});case"error":return e.jsx(Fs,{});default:return e.jsx(rc,{})}},O=T=>T?e.jsx(Ln,{color:"success"}):e.jsx(Fs,{color:"error"}),N=(T,F)=>{f(F)},I=()=>{a()},E=()=>{g&&o(g)},k=()=>{P&&i(P)},C=T=>{l(T)};return d?e.jsx(Ue,{severity:"error",action:e.jsx(Ce,{color:"inherit",size:"small",onClick:s,children:"Retry"}),children:d}):e.jsx(Kt,{dateAdapter:Sr,children:e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(h,{variant:"h4",component:"h1",children:"Market Data Dashboard"}),e.jsxs(v,{sx:{display:"flex",gap:1},children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(zr,{}),onClick:s,disabled:c,children:"Refresh"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(tc,{}),onClick:I,disabled:c,children:"Update All Prices"}),e.jsx(Et,{onClick:()=>m(!0),children:e.jsx(Mo,{})})]})]}),e.jsxs(M,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h4",children:t.totalAssets})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Success Rate"}),e.jsxs(h,{variant:"h4",color:"success.main",children:[t.successRate.toFixed(1),"%"]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Avg Update Time"}),e.jsxs(h,{variant:"h4",children:[t.averageUpdateTime,"ms"]})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Next Update"}),e.jsx(h,{variant:"h4",children:S()})]})})})]}),e.jsxs(he,{children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(pn,{value:u,onChange:N,children:[e.jsx(xt,{label:"Overview"}),e.jsx(xt,{label:"Providers"}),e.jsx(xt,{label:"Recent Updates"}),e.jsx(xt,{label:"Statistics"})]})}),e.jsxs(fe,{children:[u===0&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(M,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Update by Nation"}),e.jsxs(et,{value:g,onChange:T=>b(T.target.value),label:"Update by Nation",children:[e.jsx(ue,{value:"VN",children:"Vietnam"}),e.jsx(ue,{value:"US",children:"United States"}),e.jsx(ue,{value:"UK",children:"United Kingdom"}),e.jsx(ue,{value:"JP",children:"Japan"})]})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Update by Market"}),e.jsxs(et,{value:P,onChange:T=>j(T.target.value),label:"Update by Market",children:[e.jsx(ue,{value:"HOSE",children:"Ho Chi Minh Stock Exchange"}),e.jsx(ue,{value:"NYSE",children:"New York Stock Exchange"}),e.jsx(ue,{value:"NASDAQ",children:"NASDAQ"}),e.jsx(ue,{value:"LSE",children:"London Stock Exchange"})]})]})}),e.jsx(M,{item:!0,xs:12,sm:4,children:e.jsxs(v,{sx:{display:"flex",gap:1},children:[e.jsx(Ce,{variant:"outlined",onClick:E,disabled:!g||c,fullWidth:!0,children:"Update Nation"}),e.jsx(Ce,{variant:"outlined",onClick:k,disabled:!P||c,fullWidth:!0,children:"Update Market"})]})})]}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"System Status"}),e.jsxs(M,{container:!0,spacing:2,children:[e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(he,{variant:"outlined",children:e.jsxs(fe,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Last Update"}),e.jsx(h,{variant:"body2",children:w(t.lastUpdate)})]})})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx(he,{variant:"outlined",children:e.jsxs(fe,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Next Update"}),e.jsx(h,{variant:"body2",children:w(t.nextUpdate)})]})})})]})]}),u===1&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Data Providers"}),e.jsx(Gt,{component:nt,children:e.jsxs(Xt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(Y,{children:"Provider"}),e.jsx(Y,{children:"Status"}),e.jsx(Y,{children:"Rate Limit"}),e.jsx(Y,{children:"Last Check"}),e.jsx(Y,{children:"Actions"})]})}),e.jsx(Jt,{children:r.map(T=>e.jsxs(Ge,{children:[e.jsxs(Y,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:T.name}),e.jsx(h,{variant:"caption",color:"text.secondary",children:T.baseUrl})]}),e.jsx(Y,{children:e.jsx(De,{icon:A(T.status),label:T.status,color:y(T.status),size:"small"})}),e.jsx(Y,{children:e.jsxs(h,{variant:"body2",children:[T.rateLimit," req/min"]})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:w(T.lastCheck)})}),e.jsx(Y,{children:e.jsx(Ce,{size:"small",onClick:()=>C(T.name),disabled:c,children:"Test Connection"})})]},T.name))})]})})]}),u===2&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Recent Updates"}),e.jsx(Gt,{component:nt,children:e.jsxs(Xt,{children:[e.jsx(Zt,{children:e.jsxs(Ge,{children:[e.jsx(Y,{children:"Symbol"}),e.jsx(Y,{children:"Result"}),e.jsx(Y,{children:"Price"}),e.jsx(Y,{children:"Error"}),e.jsx(Y,{children:"Time"})]})}),e.jsx(Jt,{children:n.map((T,F)=>e.jsxs(Ge,{children:[e.jsx(Y,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:T.symbol})}),e.jsx(Y,{children:O(T.success)}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:T.newPrice?`$${T.newPrice.toFixed(2)}`:"N/A"})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",color:"error",children:T.error||"N/A"})}),e.jsx(Y,{children:e.jsx(h,{variant:"body2",children:w(T.timestamp)})})]},F))})]})})]}),u===3&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Performance Statistics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{variant:"outlined",children:e.jsxs(fe,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Update Success Rate"}),e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Uo,{variant:"determinate",value:t.successRate,sx:{flexGrow:1}}),e.jsxs(h,{variant:"body2",children:[t.successRate.toFixed(1),"%"]})]})]})})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(he,{variant:"outlined",children:e.jsxs(fe,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Update Performance"}),e.jsxs(ha,{dense:!0,children:[e.jsxs(dn,{children:[e.jsx(Ut,{children:e.jsx(Ln,{color:"success"})}),e.jsx(Wt,{primary:"Successful Updates",secondary:t.successfulUpdates})]}),e.jsxs(dn,{children:[e.jsx(Ut,{children:e.jsx(Fs,{color:"error"})}),e.jsx(Wt,{primary:"Failed Updates",secondary:t.failedUpdates})]}),e.jsxs(dn,{children:[e.jsx(Ut,{children:e.jsx(zr,{})}),e.jsx(Wt,{primary:"Average Response Time",secondary:`${t.averageUpdateTime}ms`})]})]})]})})})]})]})]})]}),e.jsxs(or,{open:p,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(yr,{children:"Market Data Settings"}),e.jsx(ir,{children:e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure market data providers and update settings."})}),e.jsxs(lr,{children:[e.jsx(Ce,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(Ce,{variant:"contained",children:"Save Settings"})]})]})]})})},Iv=async(t={})=>{const r=new URLSearchParams;t.page&&r.append("page",t.page.toString()),t.limit&&r.append("limit",t.limit.toString()),t.sortBy&&r.append("sortBy",t.sortBy),t.sortOrder&&r.append("sortOrder",t.sortOrder),t.search&&r.append("search",t.search),t.type&&r.append("type",t.type),t.nation&&r.append("nation",t.nation),t.marketCode&&r.append("marketCode",t.marketCode),t.isActive!==void 0&&r.append("isActive",t.isActive.toString()),console.log("fetchGlobalAssets - query:",t),console.log("fetchGlobalAssets - params:",r.toString());const n=await Ne.api.get(`/api/v1/global-assets?${r.toString()}`);return console.log("fetchGlobalAssets - response:",n),console.log("fetchGlobalAssets - response.data:",n.data),n.data},Ov=async t=>{await Ne.api.delete(`/api/v1/global-assets/${t}`)},_v=(t={})=>{var n,s,a,o,i;const r=jt(["globalAssets",t],async()=>{const l=await Iv(t),c=await Promise.all(l.data.map(async d=>{try{const u=await Ne.api.get(`/api/v1/asset-prices/asset/${d.id}`);return{...d,assetPrice:u.data}}catch{return d}}));return{...l,data:c}},{staleTime:3e5});return{...r,data:((n=r.data)==null?void 0:n.data)||[],total:((s=r.data)==null?void 0:s.total)||0,page:((a=r.data)==null?void 0:a.page)||1,limit:((o=r.data)==null?void 0:o.limit)||10,totalPages:((i=r.data)==null?void 0:i.totalPages)||1}},Fv=()=>{const t=cr();return zt(Ov,{onSuccess:()=>{t.invalidateQueries(["globalAssets"])}})},Lv=()=>{const t=cr();return zt(async({assetId:r,price:n,priceType:s,priceSource:a,changeReason:o})=>{var i;try{console.log("useUpdateAssetPrice - trying to get existing price for assetId:",r);const c=(await Ne.api.get(`/api/v1/asset-prices/asset/${r}`)).data;return console.log("useUpdateAssetPrice - found existing price:",c),(await Ne.api.put(`/api/v1/asset-prices/asset/${r}`,{currentPrice:n,priceType:s,priceSource:a,changeReason:o,metadata:{changeReason:o,source:"manual_update"}})).data}catch(l){if(((i=l.response)==null?void 0:i.status)===404)return(await Ne.api.post("/api/v1/asset-prices",{assetId:r,currentPrice:n,priceType:s,priceSource:a,changeReason:o,metadata:{changeReason:o,source:"manual_update"}})).data;throw l}},{onSuccess:()=>{t.invalidateQueries(["globalAssets"]),t.invalidateQueries(["assetPrices"]),t.invalidateQueries(["priceHistory"]),t.refetchQueries(["globalAssets"]),t.refetchQueries(["priceHistory"])}})},Vv=()=>{const t=cr();return zt(async r=>(await Ne.api.post(`/api/v1/market-data/update/${r}`)).data,{onSuccess:()=>{t.invalidateQueries(["globalAssets"]),t.invalidateQueries(["assetPrices"])}})},$v=({assets:t,loading:r=!1,error:n,onRefresh:s,onCreateAsset:a,onUpdateAsset:o,total:i=0,page:l=1,totalPages:c=1,onPriceUpdate:d,onPriceHistoryRefresh:u,marketDataStats:f,marketDataProviders:p,recentUpdates:m,onMarketDataRefresh:g,onUpdateAllPrices:b,onUpdateByNation:P,onUpdateByMarket:j,onTestProvider:w,onUpdateConfig:S})=>{const[y,A]=x.useState(0),[O,N]=x.useState(!1),[I,E]=x.useState(null),[k,C]=x.useState(!1),[T,F]=x.useState("create"),[_,R]=x.useState(!1),q=Fv(),B=(U,Z)=>{A(Z)},$=()=>{F("create"),E(null),N(!0)},H=U=>{F("edit"),E(U),N(!0)},Q=async U=>{if(window.confirm(`Are you sure you want to delete ${U.symbol}?`))try{await q.mutateAsync(U.id),alert(`Asset ${U.symbol} deleted successfully`),s()}catch(Z){console.error("Delete error:",Z);const ce=Z instanceof Error?Z.message:"Failed to delete asset";alert(`Error deleting asset: ${ce}`)}},J=U=>{E(U),C(!0)},re=async U=>{R(!0);try{T==="create"?await a(U):I&&await o(I.id,U),N(!1),s()}catch(Z){console.error("Form submission error:",Z)}finally{R(!1)}},te=()=>{N(!1),E(null)},D=()=>{C(!1),E(null)},ee=U=>({STOCK:"#1976d2",BOND:"#388e3c",CRYPTO:"#f57c00",COMMODITY:"#7b1fa2",CURRENCY:"#d32f2f",ETF:"#0288d1",MUTUAL_FUND:"#5d4037"})[U]||"#666",pe=U=>({VN:"Vietnam",US:"United States",UK:"United Kingdom",JP:"Japan",SG:"Singapore",AU:"Australia",CA:"Canada",DE:"Germany",FR:"France",CN:"China"})[U]||U;return n?e.jsx(Ue,{severity:"error",action:e.jsx(Ce,{color:"inherit",size:"small",onClick:s,children:"Retry"}),children:n}):e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h4",component:"h1",children:"Global Asset Management"}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Showing ",t.length," of ",i," assets (Page ",l," of ",c,")"]})]}),e.jsxs(v,{sx:{display:"flex",gap:1},children:[e.jsx(Ce,{variant:"outlined",startIcon:e.jsx(zr,{}),onClick:s,disabled:r,children:"Refresh"}),e.jsx(Ce,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:$,disabled:r,children:"Add Asset"})]})]}),e.jsxs(he,{children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(pn,{value:y,onChange:B,children:[e.jsx(xt,{label:"Assets"}),e.jsx(xt,{label:"Market Data"}),e.jsx(xt,{label:"Analytics"})]})}),e.jsxs(v,{sx:{p:3},children:[y===0&&e.jsx(v,{children:e.jsx(Tv,{assets:t,loading:r,onEdit:H,onDelete:Q,onView:J,onRefresh:s,error:n})}),y===1&&e.jsx(v,{children:e.jsx(Ev,{stats:f,providers:p,recentUpdates:m,onRefresh:g,onUpdateAll:b,onUpdateByNation:P,onUpdateByMarket:j,onTestProvider:w,onUpdateConfig:S,loading:r,error:n})}),y===2&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Analytics"}),e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h4",children:t.length})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Active Assets"}),e.jsx(h,{variant:"h4",children:t.filter(U=>U.isActive).length})]})})}),e.jsx(M,{item:!0,xs:12,md:4,children:e.jsx(he,{children:e.jsxs(fe,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Nations"}),e.jsx(h,{variant:"h4",children:new Set(t.map(U=>U.nation)).size})]})})})]}),e.jsxs(v,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Distribution by Type"}),e.jsx(M,{container:!0,spacing:2,children:Object.entries(t.reduce((U,Z)=>(U[Z.type]=(U[Z.type]||0)+1,U),{})).map(([U,Z])=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{variant:"outlined",children:e.jsx(fe,{children:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{label:U,size:"small",sx:{backgroundColor:ee(U),color:"white"}}),e.jsx(h,{variant:"h6",children:Z})]})})})},U))})]}),e.jsxs(v,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Distribution by Nation"}),e.jsx(M,{container:!0,spacing:2,children:Object.entries(t.reduce((U,Z)=>(U[Z.nation]=(U[Z.nation]||0)+1,U),{})).map(([U,Z])=>e.jsx(M,{item:!0,xs:12,sm:6,md:3,children:e.jsx(he,{variant:"outlined",children:e.jsx(fe,{children:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:pe(U)}),e.jsx(h,{variant:"h6",children:Z})]})})})},U))})]})]})]})]}),e.jsx(jv,{open:O,onClose:te,onSubmit:re,initialData:I||void 0,mode:T,loading:_}),I&&e.jsxs(or,{open:k,onClose:D,maxWidth:"md",fullWidth:!0,children:[e.jsxs(yr,{children:["Price Management - ",I.symbol]}),e.jsx(ir,{children:e.jsx(Av,{asset:{id:I.id,symbol:I.symbol,name:I.name,currency:I.currency,assetPrice:I.assetPrice?{id:"",assetId:I.id,currentPrice:I.assetPrice.currentPrice,priceType:I.assetPrice.priceType,priceSource:I.assetPrice.priceSource,lastPriceUpdate:I.assetPrice.lastPriceUpdate}:void 0},onPriceUpdate:d,onPriceHistoryRefresh:u,loading:r,error:n})}),e.jsx(lr,{children:e.jsx(Ce,{onClick:D,children:"Close"})})]})]})},Bv=async()=>(await Ne.api.get("/api/v1/market-data/statistics")).data,Uv=async()=>(await Ne.api.get("/api/v1/market-data/providers")).data,Wv=async(t=50)=>(console.warn("Recent updates endpoint not implemented in backend yet"),[]),Hv=()=>jt(["marketDataStats"],Bv,{staleTime:30*1e3,refetchInterval:60*1e3}),zv=()=>jt(["marketDataProviders"],Uv,{staleTime:5*60*1e3}),Yv=(t=50)=>jt(["recentUpdates",t],()=>Wv(t),{staleTime:30*1e3,refetchInterval:30*1e3}),qv=()=>{const{data:t=[],isLoading:r,error:n,refetch:s,total:a,page:o,totalPages:i}=_v({limit:50}),{data:l,isLoading:c,error:d}=Hv(),{data:u=[],isLoading:f,error:p}=zv(),{data:m=[],isLoading:g,error:b}=Yv(50),P=Lv(),j=Vv(),w=async()=>{await s()},S=async q=>{},y=async(q,B)=>{},A=async(q,B,$,H,Q)=>{try{await P.mutateAsync({assetId:q,price:B,priceType:$,priceSource:H,changeReason:Q})}catch(J){throw console.error("Price update error:",J),J}},O=async q=>{try{await j.mutateAsync(q)}catch(B){throw console.error("Price history refresh error:",B),B}},N=async()=>{},I=async()=>{},E=async q=>{},k=async q=>{},C=async q=>{},T=async q=>{},F=r||c||f||g||P.isLoading||j.isLoading,_=n||d||p||b,R=_?(_==null?void 0:_.message)||String(_):void 0;return e.jsx($r,{maxWidth:"xl",sx:{py:3},children:e.jsx($v,{assets:t,loading:F,error:R,onRefresh:w,onCreateAsset:S,onUpdateAsset:y,total:a,page:o,totalPages:i,onPriceUpdate:A,onPriceHistoryRefresh:O,marketDataStats:l,marketDataProviders:u,recentUpdates:m,onMarketDataRefresh:N,onUpdateAllPrices:I,onUpdateByNation:E,onUpdateByMarket:k,onTestProvider:C,onUpdateConfig:T})})},Qv=nc({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}}}}),Kv=new uc({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}}),Gv=()=>(x.useEffect(()=>()=>{},[]),e.jsx(hc,{client:Kv,children:e.jsxs(sc,{theme:Qv,children:[e.jsx(No,{}),e.jsx(lc,{children:e.jsx(ud,{children:e.jsx(v,{sx:{minHeight:"100vh"},children:e.jsxs(cc,{children:[e.jsx(_t,{path:"/",element:e.jsx(zf,{})}),e.jsx(_t,{path:"/portfolios",element:e.jsx(Gf,{})}),e.jsx(_t,{path:"/portfolios/:portfolioId",element:e.jsx(nv,{})}),e.jsx(_t,{path:"/portfolios/:portfolioId/trading",element:e.jsx(sv,{})}),e.jsx(_t,{path:"/assets",element:e.jsx(yv,{})}),e.jsx(_t,{path:"/global-assets",element:e.jsx(qv,{})}),e.jsx(_t,{path:"/analytics",element:e.jsx("div",{children:"Analytics Page - Coming Soon"})}),e.jsx(_t,{path:"/reports",element:e.jsx("div",{children:"Reports Page - Coming Soon"})}),e.jsx(_t,{path:"/settings",element:e.jsx("div",{children:"Settings Page - Coming Soon"})}),e.jsx(_t,{path:"*",element:e.jsx(dc,{to:"/",replace:!0})})]})})})}),e.jsx(cd,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}}),e.jsx(jc.ReactQueryDevtools,{initialIsOpen:!1})]})})),Xv=Gs.createRoot(document.getElementById("root"));Xv.render(e.jsx(Ht.StrictMode,{children:e.jsx(Gv,{})}));
//# sourceMappingURL=index-D2f5O-zE.js.map
