var Ml=Object.defineProperty;var Rl=(t,r,n)=>r in t?Ml(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;var Va=(t,r,n)=>Rl(t,typeof r!="symbol"?r+"":r,n);import{u as Ir,b as ha,j as e,T as _s,d as h,L as ma,e as fn,f as El,g as Bt,h as Ut,B as v,C as Oo,A as Il,I as St,M as Ol,D as $a,i as _l,k as rr,l as Fl,G as Ll,m as gt,n as Qn,S as fa,o as os,p as Vl,q as ce,t as _o,r as kt,V as pa,s as Ye,v as We,w as $l,x as N,y as pe,z as ge,E as rt,F as Se,H as Mt,J as He,K as xa,N as Ze,O as Je,Q as et,R as de,U as Fo,W as zt,X as lr,Y as Yt,Z as qt,$ as ke,a0 as Bl,a1 as zr,a2 as Bn,a3 as Ar,a4 as Ul,c as ut,_ as V,a5 as Ve,a6 as ct,a7 as yt,a8 as vt,a9 as Ne,aa as ft,ab as xr,ac as is,ad as Ba,ae as Nr,af as Wl,ag as Hl,ah as je,ai as Fs,aj as zl,ak as pr,al as Yr,P as L,am as Yl,an as qr,ao as ql,ap as Lo,aq as ga,ar as ya,as as Vo,at as $o,au as Mr,av as va,aw as ls,ax as Zt,ay as Jt,az as er,aA as Ge,aB as z,aC as tr,aD as Ua,aE as ba,aF as Ql,aG as Bo,aH as Kl,aI as Uo,aJ as Gl,aK as Xl,aL as Ur,aM as Wo,aN as vn,aO as xt,aP as Zl,aQ as Jl,aR as nn,aS as ec,aT as tc,aU as Gs,aV as Ho,aW as rc,aX as Ls,aY as nc,aZ as sc,a_ as ac,a$ as oc,b0 as ic,b1 as lc,b2 as cc}from"./mui-BKLGbS1R.js";import{d as dc,r as p,b as Wt,g as uc}from"./vendor-Cr2nE3UY.js";import{u as bn,a as hc,b as zo,B as mc,R as fc,c as Ot,N as pc}from"./router-DkWuIpoj.js";import{u as Qt,a as wt,b as Ht,Q as xc,c as gc}from"./query-DgE5DSgB.js";import{o as yc,r as vc,a as bc,c as cs,b as dt,u as ds,C as Qe,d as Wa,e as mn}from"./forms-DotYSCGd.js";import{R as Rt,P as Yo,a as qo,C as jn,T as Et,L as ja,b as us,c as nr,X as sr,Y as ar,d as Qr,e as Qo,S as jc,f as wc,B as Ko,g as Kn,h as Cc,A as Pc,i as Sc}from"./charts-WPFGyavV.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Xs={},Ha=dc;Xs.createRoot=Ha.createRoot,Xs.hydrateRoot=Ha.hydrateRoot;var Go={exports:{}};Go.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var Tc=Go.exports;let Dc={data:""},kc=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Dc,Ac=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Nc=/\/\*[^]*?\*\/|  +/g,za=/\n+/g,ur=(t,r)=>{let n="",s="",a="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+i+";":s+=o[1]=="f"?ur(i,o):o+"{"+ur(i,o[1]=="k"?"":r)+"}":typeof i=="object"?s+=ur(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=ur.p?ur.p(o,i):o+":"+i+";")}return n+(r&&a?r+"{"+a+"}":a)+s},Gt={},Xo=t=>{if(typeof t=="object"){let r="";for(let n in t)r+=n+Xo(t[n]);return r}return t},Mc=(t,r,n,s,a)=>{let o=Xo(t),i=Gt[o]||(Gt[o]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(o));if(!Gt[i]){let c=o!==t?t:(d=>{let u,m,x=[{}];for(;u=Ac.exec(d.replace(Nc,""));)u[4]?x.shift():u[3]?(m=u[3].replace(za," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][u[1]]=u[2].replace(za," ").trim();return x[0]})(t);Gt[i]=ur(a?{["@keyframes "+i]:c}:c,n?"":"."+i)}let l=n&&Gt.g?Gt.g:null;return n&&(Gt.g=Gt[i]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Gt[i],r,s,l),i},Rc=(t,r,n)=>t.reduce((s,a,o)=>{let i=r[o];if(i&&i.call){let l=i(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":ur(l,""):l===!1?"":l}return s+a+(i??"")},"");function hs(t){let r=this||{},n=t.call?t(r.p):t;return Mc(n.unshift?n.raw?Rc(n,[].slice.call(arguments,1),r.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(r.p):a),{}):n,kc(r.target),r.g,r.o,r.k)}let Zo,Zs,Js;hs.bind({g:1});let or=hs.bind({k:1});function Ec(t,r,n,s){ur.p=r,Zo=t,Zs=n,Js=s}function gr(t,r){let n=this||{};return function(){let s=arguments;function a(o,i){let l=Object.assign({},o),c=l.className||a.className;n.p=Object.assign({theme:Zs&&Zs()},l),n.o=/ *go\d+/.test(c),l.className=hs.apply(n,s)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),Js&&d[0]&&Js(l),Zo(d,l)}return a}}var Ic=t=>typeof t=="function",Gn=(t,r)=>Ic(t)?t(r):t,Oc=(()=>{let t=0;return()=>(++t).toString()})(),Jo=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),_c=20,wa="default",ei=(t,r)=>{let{toastLimit:n}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:s}=r;return ei(t,{type:t.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=r;return{...t,toasts:t.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let o=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Un=[],ti={toasts:[],pausedAt:void 0,settings:{toastLimit:_c}},$t={},ri=(t,r=wa)=>{$t[r]=ei($t[r]||ti,t),Un.forEach(([n,s])=>{n===r&&s($t[r])})},ni=t=>Object.keys($t).forEach(r=>ri(t,r)),Fc=t=>Object.keys($t).find(r=>$t[r].toasts.some(n=>n.id===t)),ms=(t=wa)=>r=>{ri(r,t)},Lc={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Vc=(t={},r=wa)=>{let[n,s]=p.useState($t[r]||ti),a=p.useRef($t[r]);p.useEffect(()=>(a.current!==$t[r]&&s($t[r]),Un.push([r,s]),()=>{let i=Un.findIndex(([l])=>l===r);i>-1&&Un.splice(i,1)}),[r]);let o=n.toasts.map(i=>{var l,c,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((l=t[i.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Lc[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...n,toasts:o}},$c=(t,r="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Oc()}),wn=t=>(r,n)=>{let s=$c(r,t,n);return ms(s.toasterId||Fc(s.id))({type:2,toast:s}),s.id},Ke=(t,r)=>wn("blank")(t,r);Ke.error=wn("error");Ke.success=wn("success");Ke.loading=wn("loading");Ke.custom=wn("custom");Ke.dismiss=(t,r)=>{let n={type:3,toastId:t};r?ms(r)(n):ni(n)};Ke.dismissAll=t=>Ke.dismiss(void 0,t);Ke.remove=(t,r)=>{let n={type:4,toastId:t};r?ms(r)(n):ni(n)};Ke.removeAll=t=>Ke.remove(void 0,t);Ke.promise=(t,r,n)=>{let s=Ke.loading(r.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let o=r.success?Gn(r.success,a):void 0;return o?Ke.success(o,{id:s,...n,...n==null?void 0:n.success}):Ke.dismiss(s),a}).catch(a=>{let o=r.error?Gn(r.error,a):void 0;o?Ke.error(o,{id:s,...n,...n==null?void 0:n.error}):Ke.dismiss(s)}),t};var Bc=1e3,Uc=(t,r="default")=>{let{toasts:n,pausedAt:s}=Vc(t,r),a=p.useRef(new Map).current,o=p.useCallback((m,x=Bc)=>{if(a.has(m))return;let f=setTimeout(()=>{a.delete(m),i({type:4,toastId:m})},x);a.set(m,f)},[]);p.useEffect(()=>{if(s)return;let m=Date.now(),x=n.map(f=>{if(f.duration===1/0)return;let g=(f.duration||0)+f.pauseDuration-(m-f.createdAt);if(g<0){f.visible&&Ke.dismiss(f.id);return}return setTimeout(()=>Ke.dismiss(f.id,r),g)});return()=>{x.forEach(f=>f&&clearTimeout(f))}},[n,s,r]);let i=p.useCallback(ms(r),[r]),l=p.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=p.useCallback((m,x)=>{i({type:1,toast:{id:m,height:x}})},[i]),d=p.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),u=p.useCallback((m,x)=>{let{reverseOrder:f=!1,gutter:g=8,defaultPosition:b}=x||{},S=n.filter(T=>(T.position||b)===(m.position||b)&&T.height),j=S.findIndex(T=>T.id===m.id),w=S.filter((T,y)=>y<j&&T.visible).length;return S.filter(T=>T.visible).slice(...f?[w+1]:[0,w]).reduce((T,y)=>T+(y.height||0)+g,0)},[n]);return p.useEffect(()=>{n.forEach(m=>{if(m.dismissed)o(m.id,m.removeDelay);else{let x=a.get(m.id);x&&(clearTimeout(x),a.delete(m.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Wc=or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Hc=or`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zc=or`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yc=gr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Hc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${zc} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,qc=or`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Qc=gr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${qc} 1s linear infinite;
`,Kc=or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Gc=or`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Xc=gr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Kc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Gc} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Zc=gr("div")`
  position: absolute;
`,Jc=gr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ed=or`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,td=gr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ed} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rd=({toast:t})=>{let{icon:r,type:n,iconTheme:s}=t;return r!==void 0?typeof r=="string"?p.createElement(td,null,r):r:n==="blank"?null:p.createElement(Jc,null,p.createElement(Qc,{...s}),n!=="loading"&&p.createElement(Zc,null,n==="error"?p.createElement(Yc,{...s}):p.createElement(Xc,{...s})))},nd=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,sd=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ad="0%{opacity:0;} 100%{opacity:1;}",od="0%{opacity:1;} 100%{opacity:0;}",id=gr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ld=gr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,cd=(t,r)=>{let n=t.includes("top")?1:-1,[s,a]=Jo()?[ad,od]:[nd(n),sd(n)];return{animation:r?`${or(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${or(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dd=p.memo(({toast:t,position:r,style:n,children:s})=>{let a=t.height?cd(t.position||r||"top-center",t.visible):{opacity:0},o=p.createElement(rd,{toast:t}),i=p.createElement(ld,{...t.ariaProps},Gn(t.message,t));return p.createElement(id,{className:t.className,style:{...a,...n,...t.style}},typeof s=="function"?s({icon:o,message:i}):p.createElement(p.Fragment,null,o,i))});Ec(p.createElement);var ud=({id:t,className:r,style:n,onHeightUpdate:s,children:a})=>{let o=p.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return p.createElement("div",{ref:o,className:r,style:n},a)},hd=(t,r)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Jo()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(n?1:-1)}px)`,...s,...a}},md=hs`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Nn=16,fd=({reverseOrder:t,position:r="top-center",toastOptions:n,gutter:s,children:a,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=Uc(n,o);return p.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Nn,left:Nn,right:Nn,bottom:Nn,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let m=u.position||r,x=d.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:r}),f=hd(m,x);return p.createElement(ud,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?md:"",style:f},u.type==="custom"?Gn(u.message,u):a?a(u):p.createElement(dd,{toast:u,position:m}))}))};const Lr=240,pd=[{text:"Dashboard",icon:e.jsx(_l,{}),path:"/"},{text:"Portfolios",icon:e.jsx(rr,{}),path:"/portfolios"},{text:"Assets",icon:e.jsx(Fl,{}),path:"/assets"},{text:"Global Assets",icon:e.jsx(Ll,{}),path:"/global-assets"},{text:"Analytics",icon:e.jsx(gt,{}),path:"/analytics"},{text:"Reports",icon:e.jsx(Qn,{}),path:"/reports"},{text:"Settings",icon:e.jsx(fa,{}),path:"/settings"}],xd=({children:t})=>{const r=Ir(),n=ha(r.breakpoints.down("md")),s=bn(),a=hc(),[o,i]=p.useState(!1),l=()=>{i(!o)},c=u=>{s(u),n&&i(!1)},d=e.jsxs("div",{children:[e.jsx(_s,{children:e.jsx(h,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Manager"})}),e.jsx(ma,{children:pd.map(u=>e.jsx(fn,{disablePadding:!0,children:e.jsxs(El,{selected:a.pathname===u.path,onClick:()=>c(u.path),children:[e.jsx(Bt,{children:u.icon}),e.jsx(Ut,{primary:u.text})]})},u.text))})]});return e.jsxs(v,{sx:{display:"flex"},children:[e.jsx(Oo,{}),e.jsx(Il,{position:"fixed",sx:{width:{md:`calc(100% - ${Lr}px)`},ml:{md:`${Lr}px`}},children:e.jsxs(_s,{children:[e.jsx(St,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,sx:{mr:2,display:{md:"none"}},children:e.jsx(Ol,{})}),e.jsx(h,{variant:"h6",noWrap:!0,component:"div",children:"Portfolio Management System"})]})}),e.jsxs(v,{component:"nav",sx:{width:{md:Lr},flexShrink:{md:0}},"aria-label":"navigation",children:[e.jsx($a,{variant:"temporary",open:o,onClose:l,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Lr}},children:d}),e.jsx($a,{variant:"permanent",sx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Lr}},open:!0,children:d})]}),e.jsxs(v,{component:"main",sx:{flexGrow:1,p:3,width:{md:`calc(100% - ${Lr}px)`}},children:[e.jsx(_s,{}),t]})]})};function si(t,r){return function(){return t.apply(r,arguments)}}const{toString:gd}=Object.prototype,{getPrototypeOf:Ca}=Object,{iterator:fs,toStringTag:ai}=Symbol,ps=(t=>r=>{const n=gd.call(r);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),It=t=>(t=t.toLowerCase(),r=>ps(r)===t),xs=t=>r=>typeof r===t,{isArray:Xr}=Array,gn=xs("undefined");function Cn(t){return t!==null&&!gn(t)&&t.constructor!==null&&!gn(t.constructor)&&Ct(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oi=It("ArrayBuffer");function yd(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&oi(t.buffer),r}const vd=xs("string"),Ct=xs("function"),ii=xs("number"),Pn=t=>t!==null&&typeof t=="object",bd=t=>t===!0||t===!1,Wn=t=>{if(ps(t)!=="object")return!1;const r=Ca(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(ai in t)&&!(fs in t)},jd=t=>{if(!Pn(t)||Cn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},wd=It("Date"),Cd=It("File"),Pd=It("Blob"),Sd=It("FileList"),Td=t=>Pn(t)&&Ct(t.pipe),Dd=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Ct(t.append)&&((r=ps(t))==="formdata"||r==="object"&&Ct(t.toString)&&t.toString()==="[object FormData]"))},kd=It("URLSearchParams"),[Ad,Nd,Md,Rd]=["ReadableStream","Request","Response","Headers"].map(It),Ed=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sn(t,r,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,a;if(typeof t!="object"&&(t=[t]),Xr(t))for(s=0,a=t.length;s<a;s++)r.call(null,t[s],s,t);else{if(Cn(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(s=0;s<i;s++)l=o[s],r.call(null,t[l],l,t)}}function li(t,r){if(Cn(t))return null;r=r.toLowerCase();const n=Object.keys(t);let s=n.length,a;for(;s-- >0;)if(a=n[s],r===a.toLowerCase())return a;return null}const Cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ci=t=>!gn(t)&&t!==Cr;function ea(){const{caseless:t}=ci(this)&&this||{},r={},n=(s,a)=>{const o=t&&li(r,a)||a;Wn(r[o])&&Wn(s)?r[o]=ea(r[o],s):Wn(s)?r[o]=ea({},s):Xr(s)?r[o]=s.slice():r[o]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Sn(arguments[s],n);return r}const Id=(t,r,n,{allOwnKeys:s}={})=>(Sn(r,(a,o)=>{n&&Ct(a)?t[o]=si(a,n):t[o]=a},{allOwnKeys:s}),t),Od=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_d=(t,r,n,s)=>{t.prototype=Object.create(r.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),n&&Object.assign(t.prototype,n)},Fd=(t,r,n,s)=>{let a,o,i;const l={};if(r=r||{},t==null)return r;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)i=a[o],(!s||s(i,t,r))&&!l[i]&&(r[i]=t[i],l[i]=!0);t=n!==!1&&Ca(t)}while(t&&(!n||n(t,r))&&t!==Object.prototype);return r},Ld=(t,r,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=r.length;const s=t.indexOf(r,n);return s!==-1&&s===n},Vd=t=>{if(!t)return null;if(Xr(t))return t;let r=t.length;if(!ii(r))return null;const n=new Array(r);for(;r-- >0;)n[r]=t[r];return n},$d=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&Ca(Uint8Array)),Bd=(t,r)=>{const s=(t&&t[fs]).call(t);let a;for(;(a=s.next())&&!a.done;){const o=a.value;r.call(t,o[0],o[1])}},Ud=(t,r)=>{let n;const s=[];for(;(n=t.exec(r))!==null;)s.push(n);return s},Wd=It("HTMLFormElement"),Hd=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,a){return s.toUpperCase()+a}),Ya=(({hasOwnProperty:t})=>(r,n)=>t.call(r,n))(Object.prototype),zd=It("RegExp"),di=(t,r)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Sn(n,(a,o)=>{let i;(i=r(a,o,t))!==!1&&(s[o]=i||a)}),Object.defineProperties(t,s)},Yd=t=>{di(t,(r,n)=>{if(Ct(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Ct(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},qd=(t,r)=>{const n={},s=a=>{a.forEach(o=>{n[o]=!0})};return Xr(t)?s(t):s(String(t).split(r)),n},Qd=()=>{},Kd=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function Gd(t){return!!(t&&Ct(t.append)&&t[ai]==="FormData"&&t[fs])}const Xd=t=>{const r=new Array(10),n=(s,a)=>{if(Pn(s)){if(r.indexOf(s)>=0)return;if(Cn(s))return s;if(!("toJSON"in s)){r[a]=s;const o=Xr(s)?[]:{};return Sn(s,(i,l)=>{const c=n(i,a+1);!gn(c)&&(o[l]=c)}),r[a]=void 0,o}}return s};return n(t,0)},Zd=It("AsyncFunction"),Jd=t=>t&&(Pn(t)||Ct(t))&&Ct(t.then)&&Ct(t.catch),ui=((t,r)=>t?setImmediate:r?((n,s)=>(Cr.addEventListener("message",({source:a,data:o})=>{a===Cr&&o===n&&s.length&&s.shift()()},!1),a=>{s.push(a),Cr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ct(Cr.postMessage)),eu=typeof queueMicrotask<"u"?queueMicrotask.bind(Cr):typeof process<"u"&&process.nextTick||ui,tu=t=>t!=null&&Ct(t[fs]),W={isArray:Xr,isArrayBuffer:oi,isBuffer:Cn,isFormData:Dd,isArrayBufferView:yd,isString:vd,isNumber:ii,isBoolean:bd,isObject:Pn,isPlainObject:Wn,isEmptyObject:jd,isReadableStream:Ad,isRequest:Nd,isResponse:Md,isHeaders:Rd,isUndefined:gn,isDate:wd,isFile:Cd,isBlob:Pd,isRegExp:zd,isFunction:Ct,isStream:Td,isURLSearchParams:kd,isTypedArray:$d,isFileList:Sd,forEach:Sn,merge:ea,extend:Id,trim:Ed,stripBOM:Od,inherits:_d,toFlatObject:Fd,kindOf:ps,kindOfTest:It,endsWith:Ld,toArray:Vd,forEachEntry:Bd,matchAll:Ud,isHTMLForm:Wd,hasOwnProperty:Ya,hasOwnProp:Ya,reduceDescriptors:di,freezeMethods:Yd,toObjectSet:qd,toCamelCase:Hd,noop:Qd,toFiniteNumber:Kd,findKey:li,global:Cr,isContextDefined:ci,isSpecCompliantForm:Gd,toJSONObject:Xd,isAsyncFn:Zd,isThenable:Jd,setImmediate:ui,asap:eu,isIterable:tu};function Ae(t,r,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}W.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const hi=Ae.prototype,mi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mi[t]={value:t}});Object.defineProperties(Ae,mi);Object.defineProperty(hi,"isAxiosError",{value:!0});Ae.from=(t,r,n,s,a,o)=>{const i=Object.create(hi);return W.toFlatObject(t,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ae.call(i,t.message,r,n,s,a),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const ru=null;function ta(t){return W.isPlainObject(t)||W.isArray(t)}function fi(t){return W.endsWith(t,"[]")?t.slice(0,-2):t}function qa(t,r,n){return t?t.concat(r).map(function(a,o){return a=fi(a),!n&&o?"["+a+"]":a}).join(n?".":""):r}function nu(t){return W.isArray(t)&&!t.some(ta)}const su=W.toFlatObject(W,{},null,function(r){return/^is[A-Z]/.test(r)});function gs(t,r,n){if(!W.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,S){return!W.isUndefined(S[b])});const s=n.metaTokens,a=n.visitor||u,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(r);if(!W.isFunction(a))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(W.isDate(g))return g.toISOString();if(W.isBoolean(g))return g.toString();if(!c&&W.isBlob(g))throw new Ae("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(g)||W.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,b,S){let j=g;if(g&&!S&&typeof g=="object"){if(W.endsWith(b,"{}"))b=s?b:b.slice(0,-2),g=JSON.stringify(g);else if(W.isArray(g)&&nu(g)||(W.isFileList(g)||W.endsWith(b,"[]"))&&(j=W.toArray(g)))return b=fi(b),j.forEach(function(T,y){!(W.isUndefined(T)||T===null)&&r.append(i===!0?qa([b],y,o):i===null?b:b+"[]",d(T))}),!1}return ta(g)?!0:(r.append(qa(S,b,o),d(g)),!1)}const m=[],x=Object.assign(su,{defaultVisitor:u,convertValue:d,isVisitable:ta});function f(g,b){if(!W.isUndefined(g)){if(m.indexOf(g)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(g),W.forEach(g,function(j,w){(!(W.isUndefined(j)||j===null)&&a.call(r,j,W.isString(w)?w.trim():w,b,x))===!0&&f(j,b?b.concat(w):[w])}),m.pop()}}if(!W.isObject(t))throw new TypeError("data must be an object");return f(t),r}function Qa(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function Pa(t,r){this._pairs=[],t&&gs(t,this,r)}const pi=Pa.prototype;pi.append=function(r,n){this._pairs.push([r,n])};pi.toString=function(r){const n=r?function(s){return r.call(this,s,Qa)}:Qa;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function au(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xi(t,r,n){if(!r)return t;const s=n&&n.encode||au;W.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(r,n):o=W.isURLSearchParams(r)?r.toString():new Pa(r,n).toString(s),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Ka{constructor(){this.handlers=[]}use(r,n,s){return this.handlers.push({fulfilled:r,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){W.forEach(this.handlers,function(s){s!==null&&r(s)})}}const gi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ou=typeof URLSearchParams<"u"?URLSearchParams:Pa,iu=typeof FormData<"u"?FormData:null,lu=typeof Blob<"u"?Blob:null,cu={isBrowser:!0,classes:{URLSearchParams:ou,FormData:iu,Blob:lu},protocols:["http","https","file","blob","url","data"]},Sa=typeof window<"u"&&typeof document<"u",ra=typeof navigator=="object"&&navigator||void 0,du=Sa&&(!ra||["ReactNative","NativeScript","NS"].indexOf(ra.product)<0),uu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hu=Sa&&window.location.href||"http://localhost",mu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sa,hasStandardBrowserEnv:du,hasStandardBrowserWebWorkerEnv:uu,navigator:ra,origin:hu},Symbol.toStringTag,{value:"Module"})),mt={...mu,...cu};function fu(t,r){return gs(t,new mt.classes.URLSearchParams,{visitor:function(n,s,a,o){return mt.isNode&&W.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function pu(t){return W.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function xu(t){const r={},n=Object.keys(t);let s;const a=n.length;let o;for(s=0;s<a;s++)o=n[s],r[o]=t[o];return r}function yi(t){function r(n,s,a,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=n.length;return i=!i&&W.isArray(a)?a.length:i,c?(W.hasOwnProp(a,i)?a[i]=[a[i],s]:a[i]=s,!l):((!a[i]||!W.isObject(a[i]))&&(a[i]=[]),r(n,s,a[i],o)&&W.isArray(a[i])&&(a[i]=xu(a[i])),!l)}if(W.isFormData(t)&&W.isFunction(t.entries)){const n={};return W.forEachEntry(t,(s,a)=>{r(pu(s),a,n,0)}),n}return null}function gu(t,r,n){if(W.isString(t))try{return(r||JSON.parse)(t),W.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Tn={transitional:gi,adapter:["xhr","http","fetch"],transformRequest:[function(r,n){const s=n.getContentType()||"",a=s.indexOf("application/json")>-1,o=W.isObject(r);if(o&&W.isHTMLForm(r)&&(r=new FormData(r)),W.isFormData(r))return a?JSON.stringify(yi(r)):r;if(W.isArrayBuffer(r)||W.isBuffer(r)||W.isStream(r)||W.isFile(r)||W.isBlob(r)||W.isReadableStream(r))return r;if(W.isArrayBufferView(r))return r.buffer;if(W.isURLSearchParams(r))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return fu(r,this.formSerializer).toString();if((l=W.isFileList(r))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return gs(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),gu(r)):r}],transformResponse:[function(r){const n=this.transitional||Tn.transitional,s=n&&n.forcedJSONParsing,a=this.responseType==="json";if(W.isResponse(r)||W.isReadableStream(r))return r;if(r&&W.isString(r)&&(s&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(r)}catch(l){if(i)throw l.name==="SyntaxError"?Ae.from(l,Ae.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mt.classes.FormData,Blob:mt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],t=>{Tn.headers[t]={}});const yu=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vu=t=>{const r={};let n,s,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),s=i.substring(a+1).trim(),!(!n||r[n]&&yu[n])&&(n==="set-cookie"?r[n]?r[n].push(s):r[n]=[s]:r[n]=r[n]?r[n]+", "+s:s)}),r},Ga=Symbol("internals");function sn(t){return t&&String(t).trim().toLowerCase()}function Hn(t){return t===!1||t==null?t:W.isArray(t)?t.map(Hn):String(t)}function bu(t){const r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)r[s[1]]=s[2];return r}const ju=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Vs(t,r,n,s,a){if(W.isFunction(s))return s.call(this,r,n);if(a&&(r=n),!!W.isString(r)){if(W.isString(s))return r.indexOf(s)!==-1;if(W.isRegExp(s))return s.test(r)}}function wu(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,n,s)=>n.toUpperCase()+s)}function Cu(t,r){const n=W.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(a,o,i){return this[s].call(this,r,a,o,i)},configurable:!0})})}let Pt=class{constructor(r){r&&this.set(r)}set(r,n,s){const a=this;function o(l,c,d){const u=sn(c);if(!u)throw new Error("header name must be a non-empty string");const m=W.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=Hn(l))}const i=(l,c)=>W.forEach(l,(d,u)=>o(d,u,c));if(W.isPlainObject(r)||r instanceof this.constructor)i(r,n);else if(W.isString(r)&&(r=r.trim())&&!ju(r))i(vu(r),n);else if(W.isObject(r)&&W.isIterable(r)){let l={},c,d;for(const u of r){if(!W.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?W.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,n)}else r!=null&&o(n,r,s);return this}get(r,n){if(r=sn(r),r){const s=W.findKey(this,r);if(s){const a=this[s];if(!n)return a;if(n===!0)return bu(a);if(W.isFunction(n))return n.call(this,a,s);if(W.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,n){if(r=sn(r),r){const s=W.findKey(this,r);return!!(s&&this[s]!==void 0&&(!n||Vs(this,this[s],s,n)))}return!1}delete(r,n){const s=this;let a=!1;function o(i){if(i=sn(i),i){const l=W.findKey(s,i);l&&(!n||Vs(s,s[l],l,n))&&(delete s[l],a=!0)}}return W.isArray(r)?r.forEach(o):o(r),a}clear(r){const n=Object.keys(this);let s=n.length,a=!1;for(;s--;){const o=n[s];(!r||Vs(this,this[o],o,r,!0))&&(delete this[o],a=!0)}return a}normalize(r){const n=this,s={};return W.forEach(this,(a,o)=>{const i=W.findKey(s,o);if(i){n[i]=Hn(a),delete n[o];return}const l=r?wu(o):String(o).trim();l!==o&&delete n[o],n[l]=Hn(a),s[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const n=Object.create(null);return W.forEach(this,(s,a)=>{s!=null&&s!==!1&&(n[a]=r&&W.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,n])=>r+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...n){const s=new this(r);return n.forEach(a=>s.set(a)),s}static accessor(r){const s=(this[Ga]=this[Ga]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=sn(i);s[l]||(Cu(a,i),s[l]=!0)}return W.isArray(r)?r.forEach(o):o(r),this}};Pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Pt.prototype,({value:t},r)=>{let n=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[n]=s}}});W.freezeMethods(Pt);function $s(t,r){const n=this||Tn,s=r||n,a=Pt.from(s.headers);let o=s.data;return W.forEach(t,function(l){o=l.call(n,o,a.normalize(),r?r.status:void 0)}),a.normalize(),o}function vi(t){return!!(t&&t.__CANCEL__)}function Zr(t,r,n){Ae.call(this,t??"canceled",Ae.ERR_CANCELED,r,n),this.name="CanceledError"}W.inherits(Zr,Ae,{__CANCEL__:!0});function bi(t,r,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):r(new Ae("Request failed with status code "+n.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Pu(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Su(t,r){t=t||10;const n=new Array(t),s=new Array(t);let a=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),u=s[o];i||(i=d),n[a]=c,s[a]=d;let m=o,x=0;for(;m!==a;)x+=n[m++],m=m%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),d-i<r)return;const f=u&&d-u;return f?Math.round(x*1e3/f):void 0}}function Tu(t,r){let n=0,s=1e3/r,a,o;const i=(d,u=Date.now())=>{n=u,a=null,o&&(clearTimeout(o),o=null),t(...d)};return[(...d)=>{const u=Date.now(),m=u-n;m>=s?i(d,u):(a=d,o||(o=setTimeout(()=>{o=null,i(a)},s-m)))},()=>a&&i(a)]}const Xn=(t,r,n=3)=>{let s=0;const a=Su(50,250);return Tu(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-s,d=a(c),u=i<=l;s=i;const m={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(m)},n)},Xa=(t,r)=>{const n=t!=null;return[s=>r[0]({lengthComputable:n,total:t,loaded:s}),r[1]]},Za=t=>(...r)=>W.asap(()=>t(...r)),Du=mt.hasStandardBrowserEnv?((t,r)=>n=>(n=new URL(n,mt.origin),t.protocol===n.protocol&&t.host===n.host&&(r||t.port===n.port)))(new URL(mt.origin),mt.navigator&&/(msie|trident)/i.test(mt.navigator.userAgent)):()=>!0,ku=mt.hasStandardBrowserEnv?{write(t,r,n,s,a,o){const i=[t+"="+encodeURIComponent(r)];W.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),W.isString(s)&&i.push("path="+s),W.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const r=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Au(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Nu(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function ji(t,r,n){let s=!Au(r);return t&&(s||n==!1)?Nu(t,r):r}const Ja=t=>t instanceof Pt?{...t}:t;function Rr(t,r){r=r||{};const n={};function s(d,u,m,x){return W.isPlainObject(d)&&W.isPlainObject(u)?W.merge.call({caseless:x},d,u):W.isPlainObject(u)?W.merge({},u):W.isArray(u)?u.slice():u}function a(d,u,m,x){if(W.isUndefined(u)){if(!W.isUndefined(d))return s(void 0,d,m,x)}else return s(d,u,m,x)}function o(d,u){if(!W.isUndefined(u))return s(void 0,u)}function i(d,u){if(W.isUndefined(u)){if(!W.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,m){if(m in r)return s(d,u);if(m in t)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,m)=>a(Ja(d),Ja(u),m,!0)};return W.forEach(Object.keys({...t,...r}),function(u){const m=c[u]||a,x=m(t[u],r[u],u);W.isUndefined(x)&&m!==l||(n[u]=x)}),n}const wi=t=>{const r=Rr({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=r;r.headers=i=Pt.from(i),r.url=xi(ji(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(W.isFormData(n)){if(mt.hasStandardBrowserEnv||mt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(mt.hasStandardBrowserEnv&&(s&&W.isFunction(s)&&(s=s(r)),s||s!==!1&&Du(r.url))){const d=a&&o&&ku.read(o);d&&i.set(a,d)}return r},Mu=typeof XMLHttpRequest<"u",Ru=Mu&&function(t){return new Promise(function(n,s){const a=wi(t);let o=a.data;const i=Pt.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,m,x,f,g;function b(){f&&f(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let S=new XMLHttpRequest;S.open(a.method.toUpperCase(),a.url,!0),S.timeout=a.timeout;function j(){if(!S)return;const T=Pt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:T,config:t,request:S};bi(function(M){n(M),b()},function(M){s(M),b()},A),S=null}"onloadend"in S?S.onloadend=j:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(j)},S.onabort=function(){S&&(s(new Ae("Request aborted",Ae.ECONNABORTED,t,S)),S=null)},S.onerror=function(){s(new Ae("Network Error",Ae.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let y=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const A=a.transitional||gi;a.timeoutErrorMessage&&(y=a.timeoutErrorMessage),s(new Ae(y,A.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,t,S)),S=null},o===void 0&&i.setContentType(null),"setRequestHeader"in S&&W.forEach(i.toJSON(),function(y,A){S.setRequestHeader(A,y)}),W.isUndefined(a.withCredentials)||(S.withCredentials=!!a.withCredentials),l&&l!=="json"&&(S.responseType=a.responseType),d&&([x,g]=Xn(d,!0),S.addEventListener("progress",x)),c&&S.upload&&([m,f]=Xn(c),S.upload.addEventListener("progress",m),S.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=T=>{S&&(s(!T||T.type?new Zr(null,t,S):T),S.abort(),S=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const w=Pu(a.url);if(w&&mt.protocols.indexOf(w)===-1){s(new Ae("Unsupported protocol "+w+":",Ae.ERR_BAD_REQUEST,t));return}S.send(o||null)})},Eu=(t,r)=>{const{length:n}=t=t?t.filter(Boolean):[];if(r||n){let s=new AbortController,a;const o=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Ae?u:new Zr(u instanceof Error?u.message:u))}};let i=r&&setTimeout(()=>{i=null,o(new Ae(`timeout ${r} of ms exceeded`,Ae.ETIMEDOUT))},r);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>W.asap(l),c}},Iu=function*(t,r){let n=t.byteLength;if(n<r){yield t;return}let s=0,a;for(;s<n;)a=s+r,yield t.slice(s,a),s=a},Ou=async function*(t,r){for await(const n of _u(t))yield*Iu(n,r)},_u=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:n,value:s}=await r.read();if(n)break;yield s}}finally{await r.cancel()}},eo=(t,r,n,s)=>{const a=Ou(t,r);let o=0,i,l=c=>{i||(i=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let m=u.byteLength;if(n){let x=o+=m;n(x)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},ys=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ci=ys&&typeof ReadableStream=="function",Fu=ys&&(typeof TextEncoder=="function"?(t=>r=>t.encode(r))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Pi=(t,...r)=>{try{return!!t(...r)}catch{return!1}},Lu=Ci&&Pi(()=>{let t=!1;const r=new Request(mt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!r}),to=64*1024,na=Ci&&Pi(()=>W.isReadableStream(new Response("").body)),Zn={stream:na&&(t=>t.body)};ys&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Zn[r]&&(Zn[r]=W.isFunction(t[r])?n=>n[r]():(n,s)=>{throw new Ae(`Response type '${r}' is not supported`,Ae.ERR_NOT_SUPPORT,s)})})})(new Response);const Vu=async t=>{if(t==null)return 0;if(W.isBlob(t))return t.size;if(W.isSpecCompliantForm(t))return(await new Request(mt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(W.isArrayBufferView(t)||W.isArrayBuffer(t))return t.byteLength;if(W.isURLSearchParams(t)&&(t=t+""),W.isString(t))return(await Fu(t)).byteLength},$u=async(t,r)=>{const n=W.toFiniteNumber(t.getContentLength());return n??Vu(r)},Bu=ys&&(async t=>{let{url:r,method:n,data:s,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:x}=wi(t);d=d?(d+"").toLowerCase():"text";let f=Eu([a,o&&o.toAbortSignal()],i),g;const b=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let S;try{if(c&&Lu&&n!=="get"&&n!=="head"&&(S=await $u(u,s))!==0){let A=new Request(r,{method:"POST",body:s,duplex:"half"}),I;if(W.isFormData(s)&&(I=A.headers.get("content-type"))&&u.setContentType(I),A.body){const[M,O]=Xa(S,Xn(Za(c)));s=eo(A.body,to,M,O)}}W.isString(m)||(m=m?"include":"omit");const j="credentials"in Request.prototype;g=new Request(r,{...x,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:j?m:void 0});let w=await fetch(g,x);const T=na&&(d==="stream"||d==="response");if(na&&(l||T&&b)){const A={};["status","statusText","headers"].forEach(E=>{A[E]=w[E]});const I=W.toFiniteNumber(w.headers.get("content-length")),[M,O]=l&&Xa(I,Xn(Za(l),!0))||[];w=new Response(eo(w.body,to,M,()=>{O&&O(),b&&b()}),A)}d=d||"text";let y=await Zn[W.findKey(Zn,d)||"text"](w,t);return!T&&b&&b(),await new Promise((A,I)=>{bi(A,I,{data:y,headers:Pt.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:g})})}catch(j){throw b&&b(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,t,g),{cause:j.cause||j}):Ae.from(j,j&&j.code,t,g)}}),sa={http:ru,xhr:Ru,fetch:Bu};W.forEach(sa,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const ro=t=>`- ${t}`,Uu=t=>W.isFunction(t)||t===null||t===!1,Si={getAdapter:t=>{t=W.isArray(t)?t:[t];const{length:r}=t;let n,s;const a={};for(let o=0;o<r;o++){n=t[o];let i;if(s=n,!Uu(n)&&(s=sa[(i=String(n)).toLowerCase()],s===void 0))throw new Ae(`Unknown adapter '${i}'`);if(s)break;a[i||"#"+o]=s}if(!s){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(ro).join(`
`):" "+ro(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:sa};function Bs(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zr(null,t)}function no(t){return Bs(t),t.headers=Pt.from(t.headers),t.data=$s.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Si.getAdapter(t.adapter||Tn.adapter)(t).then(function(s){return Bs(t),s.data=$s.call(t,t.transformResponse,s),s.headers=Pt.from(s.headers),s},function(s){return vi(s)||(Bs(t),s&&s.response&&(s.response.data=$s.call(t,t.transformResponse,s.response),s.response.headers=Pt.from(s.response.headers))),Promise.reject(s)})}const Ti="1.11.0",vs={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{vs[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const so={};vs.transitional=function(r,n,s){function a(o,i){return"[Axios v"+Ti+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(r===!1)throw new Ae(a(i," has been removed"+(n?" in "+n:"")),Ae.ERR_DEPRECATED);return n&&!so[i]&&(so[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),r?r(o,i,l):!0}};vs.spelling=function(r){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function Wu(t,r,n){if(typeof t!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let a=s.length;for(;a-- >0;){const o=s[a],i=r[o];if(i){const l=t[o],c=l===void 0||i(l,o,t);if(c!==!0)throw new Ae("option "+o+" must be "+c,Ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const zn={assertOptions:Wu,validators:vs},_t=zn.validators;let Sr=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Ka,response:new Ka}}async request(r,n){try{return await this._request(r,n)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,n){typeof r=="string"?(n=n||{},n.url=r):n=r||{},n=Rr(this.defaults,n);const{transitional:s,paramsSerializer:a,headers:o}=n;s!==void 0&&zn.assertOptions(s,{silentJSONParsing:_t.transitional(_t.boolean),forcedJSONParsing:_t.transitional(_t.boolean),clarifyTimeoutError:_t.transitional(_t.boolean)},!1),a!=null&&(W.isFunction(a)?n.paramsSerializer={serialize:a}:zn.assertOptions(a,{encode:_t.function,serialize:_t.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),zn.assertOptions(n,{baseUrl:_t.spelling("baseURL"),withXsrfToken:_t.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&W.merge(o.common,o[n.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),n.headers=Pt.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let u,m=0,x;if(!c){const g=[no.bind(this),void 0];for(g.unshift(...l),g.push(...d),x=g.length,u=Promise.resolve(n);m<x;)u=u.then(g[m++],g[m++]);return u}x=l.length;let f=n;for(m=0;m<x;){const g=l[m++],b=l[m++];try{f=g(f)}catch(S){b.call(this,S);break}}try{u=no.call(this,f)}catch(g){return Promise.reject(g)}for(m=0,x=d.length;m<x;)u=u.then(d[m++],d[m++]);return u}getUri(r){r=Rr(this.defaults,r);const n=ji(r.baseURL,r.url,r.allowAbsoluteUrls);return xi(n,r.params,r.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(r){Sr.prototype[r]=function(n,s){return this.request(Rr(s||{},{method:r,url:n,data:(s||{}).data}))}});W.forEach(["post","put","patch"],function(r){function n(s){return function(o,i,l){return this.request(Rr(l||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Sr.prototype[r]=n(),Sr.prototype[r+"Form"]=n(!0)});let Hu=class Di{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(a);return i.cancel=function(){s.unsubscribe(o)},i},r(function(o,i,l){s.reason||(s.reason=new Zr(o,i,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const r=new AbortController,n=s=>{r.abort(s)};return this.subscribe(n),r.signal.unsubscribe=()=>this.unsubscribe(n),r.signal}static source(){let r;return{token:new Di(function(a){r=a}),cancel:r}}};function zu(t){return function(n){return t.apply(null,n)}}function Yu(t){return W.isObject(t)&&t.isAxiosError===!0}const aa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(aa).forEach(([t,r])=>{aa[r]=t});function ki(t){const r=new Sr(t),n=si(Sr.prototype.request,r);return W.extend(n,Sr.prototype,r,{allOwnKeys:!0}),W.extend(n,r,null,{allOwnKeys:!0}),n.create=function(a){return ki(Rr(t,a))},n}const at=ki(Tn);at.Axios=Sr;at.CanceledError=Zr;at.CancelToken=Hu;at.isCancel=vi;at.VERSION=Ti;at.toFormData=gs;at.AxiosError=Ae;at.Cancel=at.CanceledError;at.all=function(r){return Promise.all(r)};at.spread=zu;at.isAxiosError=Yu;at.mergeConfig=Rr;at.AxiosHeaders=Pt;at.formToJSON=t=>yi(W.isHTMLForm(t)?new FormData(t):t);at.getAdapter=Si.getAdapter;at.HttpStatusCode=aa;at.default=at;const{Axios:fb,AxiosError:pb,CanceledError:xb,isCancel:gb,CancelToken:yb,VERSION:vb,all:bb,Cancel:jb,isAxiosError:wb,spread:Cb,toFormData:Pb,AxiosHeaders:Sb,HttpStatusCode:Tb,formToJSON:Db,getAdapter:kb,mergeConfig:Ab}=at;class qu{constructor(){Va(this,"api");this.api=at.create({baseURL:"http://localhost:3000",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(r=>{const n=localStorage.getItem("auth_token");return n&&(r.headers.Authorization=`Bearer ${n}`),r},r=>Promise.reject(r)),this.api.interceptors.response.use(r=>r,r=>{var n;return((n=r.response)==null?void 0:n.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(r)})}async getHealth(){return(await this.api.get("/health")).data}async getAssets(){return(await this.api.get("/api/v1/assets")).data}async createAsset(r){return(await this.api.post("/api/v1/assets",r)).data}async updateAsset(r,n){return(await this.api.put(`/api/v1/assets/${r}`,n)).data}async deleteAsset(r){await this.api.delete(`/api/v1/assets/${r}`)}async getPortfolios(r){return(await this.api.get(`/api/v1/portfolios?accountId=${r}`)).data}async getPortfolio(r){return(await this.api.get(`/api/v1/portfolios/${r}`)).data}async createPortfolio(r){return(await this.api.post("/api/v1/portfolios",r)).data}async updatePortfolio(r,n){return(await this.api.put(`/api/v1/portfolios/${r}`,n)).data}async deletePortfolio(r){await this.api.delete(`/api/v1/portfolios/${r}`)}async getPortfolioNav(r){return(await this.api.get(`/api/v1/portfolios/${r}/nav`)).data}async getPortfolioPerformance(r){return(await this.api.get(`/api/v1/portfolios/${r}/performance`)).data}async getPortfolioAllocation(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation`)).data}async getPortfolioPerformanceHistory(r,n){const s=n?{period:n}:{};return(await this.api.get(`/api/v1/portfolios/${r}/analytics/performance-history`,{params:s})).data}async getPortfolioRiskReturn(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/risk-return`)).data}async getPortfolioAssetPerformance(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/asset-performance`)).data}async getPortfolioRiskMetrics(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/risk-metrics`)).data}async getPortfolioDiversificationHeatmap(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/diversification-heatmap`)).data}async getPortfolioAllocationTimeline(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation-timeline`)).data}async getPortfolioCashFlowAnalysis(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/cash-flow-analysis`)).data}async getPortfolioBenchmarkComparison(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/benchmark-comparison`)).data}async getPortfolioAssetDetailSummary(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/asset-detail-summary`)).data}async getPortfolioPositions(r){return(await this.api.get(`/api/v1/portfolios/${r}/positions`)).data}async getPortfolioAnalyticsPerformance(r,n){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/performance`,{params:{period:n}})).data}async getPortfolioAnalyticsAllocation(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/allocation`)).data}async getPortfolioAnalyticsHistory(r,n){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/history`,{params:{period:n}})).data}async getPortfolioAnalyticsReport(r){return(await this.api.get(`/api/v1/portfolios/${r}/analytics/report`)).data}async getPortfolioCashFlows(r){return(await this.api.get(`/api/v1/portfolios/${r}/cash-flows`)).data}async createCashFlow(r,n){return(await this.api.post(`/api/v1/portfolios/${r}/cash-flows`,n)).data}async createTrade(r){return(await this.api.post("/api/v1/trades",r)).data}async getTrades(r,n){const s=new URLSearchParams({portfolioId:r});return n&&Object.entries(n).forEach(([o,i])=>{i&&s.append(o,i)}),(await this.api.get(`/api/v1/trades?${s}`)).data}async getTrade(r){return(await this.api.get(`/api/v1/trades/${r}`)).data}async updateTrade(r,n){return(await this.api.put(`/api/v1/trades/${r}`,n)).data}async deleteTrade(r){await this.api.delete(`/api/v1/trades/${r}`)}async getTradeDetails(r){return(await this.api.get(`/api/v1/trades/${r}/details`)).data}async getTradeAnalysis(r,n){const s=new URLSearchParams({portfolioId:r});n&&Object.entries(n).forEach(([i,l])=>{l&&s.append(i,l)});const a=`/api/v1/trades/analysis/portfolio?${s}`;return(await this.api.get(a)).data}async getTradingPerformance(r,n){const s=new URLSearchParams({portfolioId:r});return n&&Object.entries(n).forEach(([o,i])=>{i&&s.append(o,i)}),(await this.api.get(`/api/v1/trades/performance/portfolio?${s}`)).data}async getCurrentPositions(r,n){const s=new URLSearchParams;return n&&s.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/portfolios/${r}/positions?${s}`)).data}async getPositionByAsset(r,n,s){const a=new URLSearchParams;return s&&a.append("marketPrice",s.toString()),(await this.api.get(`/api/v1/portfolios/${r}/positions/${n}?${a}`)).data}async setRiskTargets(r,n){return(await this.api.post(`/api/v1/assets/${r}/targets`,n)).data}async getRiskTargets(r){return(await this.api.get(`/api/v1/assets/${r}/targets`)).data}async updateRiskTargets(r,n){return(await this.api.put(`/api/v1/assets/${r}/targets`,n)).data}async removeRiskTargets(r){await this.api.delete(`/api/v1/assets/${r}/targets`)}async getPortfolioRiskTargets(r){return(await this.api.get(`/api/v1/assets/targets/portfolio/${r}`)).data}async monitorRiskTargets(r,n){const s=new URLSearchParams;return r&&s.append("portfolioId",r),n&&s.append("marketPrices",JSON.stringify(n)),(await this.api.get(`/api/v1/assets/targets/monitor?${s}`)).data}async testConnection(){try{return await this.getHealth(),!0}catch(r){return console.error("API connection test failed:",r),!1}}}const we=new qu,bs=t=>{const r=Qt(),{data:n,isLoading:s,error:a,refetch:o}=wt(["portfolios",t],()=>t?we.getPortfolios(t):Promise.resolve([]),{enabled:!!t,staleTime:5*60*1e3,cacheTime:10*60*1e3}),i=Ht(d=>we.createPortfolio(d),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}}),l=Ht(({id:d,data:u})=>we.updatePortfolio(d,u),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}}),c=Ht(d=>we.deletePortfolio(d),{onSuccess:()=>{r.invalidateQueries(["portfolios",t])}});return{portfolios:n||[],isLoading:s,error:a,refetch:o,createPortfolio:i.mutate,updatePortfolio:l.mutate,deletePortfolio:c.mutate,isCreating:i.isLoading,isUpdating:l.isLoading,isDeleting:c.isLoading}},Ai=t=>{const r=Qt(),{data:n,isLoading:s,error:a,refetch:o}=wt(["portfolio",t],()=>we.getPortfolio(t),{enabled:!!t,staleTime:2*60*1e3,cacheTime:5*60*1e3}),i=Ht(l=>we.updatePortfolio(t,l),{onSuccess:()=>{r.invalidateQueries(["portfolio",t]),r.invalidateQueries("portfolios")}});return{portfolio:n,isLoading:s,error:a,refetch:o,updatePortfolio:i.mutate,isUpdating:i.isLoading}},Qu=t=>{const{data:r,isLoading:n,error:s}=wt(["portfolio-nav",t],()=>we.getPortfolioNav(t),{enabled:!!t,staleTime:6e4,refetchInterval:3e5}),{data:a,isLoading:o,error:i}=wt(["portfolio-performance",t],()=>we.getPortfolioPerformance(t),{enabled:!!t,staleTime:5*60*1e3}),{data:l,isLoading:c,error:d}=wt(["portfolio-allocation",t],()=>we.getPortfolioAllocation(t),{enabled:!!t,staleTime:5*60*1e3}),{data:u,isLoading:m,error:x}=wt(["portfolio-positions",t],()=>we.getPortfolioPositions(t),{enabled:!!t,staleTime:2*60*1e3});return Wt.useEffect(()=>{console.log("usePortfolioAnalytics Debug:",{portfolioId:t,navData:r,performanceData:a,allocationData:l,positionsData:u,isNavLoading:n,isPerformanceLoading:o,isAllocationLoading:c,isPositionsLoading:m,navError:s,performanceError:i,allocationError:d,positionsError:x})},[t,r,a,l,u,n,o,c,m,s,i,d,x]),{navData:r,performanceData:a,allocationData:l,positionsData:u,isLoading:n||o||c||m,error:s||i||d||x}},ao="86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",Mn={id:ao,accountId:ao,name:"John Doe",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},oo={"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5":{id:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",accountId:"86c2ae61-8f69-4608-a5fd-8fecb44ed2c5",name:"John Doe (VND)",email:"john.doe@example.com",baseCurrency:"VND",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"usd-account-123":{id:"usd-account-123",accountId:"usd-account-123",name:"Jane Smith (USD)",email:"jane.smith@example.com",baseCurrency:"USD",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"},"eur-account-456":{id:"eur-account-456",accountId:"eur-account-456",name:"Pierre Dubois (EUR)",email:"pierre.dubois@example.com",baseCurrency:"EUR",createdAt:"2024-01-15T08:00:00.000Z",updatedAt:"2024-12-19T10:30:00.000Z"}},Nt=()=>{const[t,r]=p.useState(Mn);return p.useEffect(()=>{const a=localStorage.getItem("currentAccountId"),o=a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a);if(o&&a!==t.accountId){const i=oo[a]||Mn;r(i)}else a&&!o&&(console.warn("Invalid account ID in localStorage, using default:",a),localStorage.removeItem("currentAccountId"),r(Mn))},[t.accountId]),{currentAccount:t,switchAccount:a=>{localStorage.setItem("currentAccountId",a);const o=oo[a]||Mn;r(o)},getCurrentAccountId:()=>t.accountId,accountId:t.accountId,baseCurrency:t.baseCurrency}};function Oe(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function ne(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function se(t){ne(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||os(t)==="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Yn(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function qn(t,r){ne(2,arguments);var n=se(t),s=Oe(r);if(isNaN(s))return new Date(NaN);if(!s)return n;var a=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+s+1,0);var i=o.getDate();return a>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}function js(t,r){ne(2,arguments);var n=se(t).getTime(),s=Oe(r);return new Date(n+s)}var Ku=36e5;function Gu(t,r){ne(2,arguments);var n=Oe(r);return js(t,n*Ku)}var Xu={};function Kt(){return Xu}function Tr(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=Kt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=se(t),f=x.getDay(),g=(f<m?7:0)+f-m;return x.setDate(x.getDate()-g),x.setHours(0,0,0,0),x}function Jn(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}function Kr(t){ne(1,arguments);var r=se(t);return r.setHours(0,0,0,0),r}var Zu=864e5;function Ju(t,r){ne(2,arguments);var n=Kr(t),s=Kr(r),a=n.getTime()-Jn(n),o=s.getTime()-Jn(s);return Math.round((a-o)/Zu)}var eh=6e4;function th(t,r){ne(2,arguments);var n=Oe(r);return js(t,n*eh)}function rh(t,r){ne(2,arguments);var n=Oe(r);return js(t,n*1e3)}function nh(t,r){ne(2,arguments);var n=Oe(r),s=n*7;return Yn(t,s)}function io(t,r){ne(2,arguments);var n=Oe(r);return qn(t,n*12)}function pn(t,r){ne(2,arguments);var n=se(t),s=se(r),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}var ws=6e4,Cs=36e5,sh=1e3;function ah(t,r){ne(2,arguments);var n=Kr(t),s=Kr(r);return n.getTime()===s.getTime()}function oh(t){return ne(1,arguments),t instanceof Date||os(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ni(t){if(ne(1,arguments),!oh(t)&&typeof t!="number")return!1;var r=se(t);return!isNaN(Number(r))}function ih(t,r){ne(2,arguments);var n=se(t),s=se(r),a=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return a*12+o}function lh(t,r){ne(2,arguments);var n=se(t),s=se(r);return n.getFullYear()-s.getFullYear()}function lo(t,r){var n=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return n<0?-1:n>0?1:n}function Mi(t,r){ne(2,arguments);var n=se(t),s=se(r),a=lo(n,s),o=Math.abs(Ju(n,s));n.setDate(n.getDate()-a*o);var i=+(lo(n,s)===-a),l=a*(o-i);return l===0?0:l}function Ps(t,r){return ne(2,arguments),se(t).getTime()-se(r).getTime()}var co={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(r){return r<0?Math.ceil(r):Math.floor(r)}},ch="trunc";function Dn(t){return t?co[t]:co[ch]}function dh(t,r,n){ne(2,arguments);var s=Ps(t,r)/Cs;return Dn(void 0)(s)}function uh(t,r,n){ne(2,arguments);var s=Ps(t,r)/ws;return Dn(void 0)(s)}function oa(t){ne(1,arguments);var r=se(t);return r.setHours(23,59,59,999),r}function ia(t){ne(1,arguments);var r=se(t),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function hh(t){ne(1,arguments);var r=se(t);return oa(r).getTime()===ia(r).getTime()}function Ri(t,r){ne(2,arguments);var n=se(t),s=se(r),a=pn(n,s),o=Math.abs(ih(n,s)),i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*o);var l=pn(n,s)===-a;hh(se(t))&&o===1&&pn(t,s)===1&&(l=!1),i=a*(o-Number(l))}return i===0?0:i}function mh(t,r,n){ne(2,arguments);var s=Ri(t,r)/3;return Dn(void 0)(s)}function fh(t,r,n){ne(2,arguments);var s=Ps(t,r)/1e3;return Dn(void 0)(s)}function ph(t,r,n){ne(2,arguments);var s=Mi(t,r)/7;return Dn(void 0)(s)}function xh(t,r){ne(2,arguments);var n=se(t),s=se(r),a=pn(n,s),o=Math.abs(lh(n,s));n.setFullYear(1584),s.setFullYear(1584);var i=pn(n,s)===-a,l=a*(o-Number(i));return l===0?0:l}function gh(t,r){var n;ne(1,arguments);var s=t||{},a=se(s.start),o=se(s.end),i=o.getTime();if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var l=[],c=a;c.setHours(0,0,0,0);var d=Number((n=void 0)!==null&&n!==void 0?n:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=i;)l.push(se(c)),c.setDate(c.getDate()+d),c.setHours(0,0,0,0);return l}function uo(t){ne(1,arguments);var r=se(t);return r.setDate(1),r.setHours(0,0,0,0),r}function Us(t){ne(1,arguments);var r=se(t),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function Rn(t){ne(1,arguments);var r=se(t),n=new Date(0);return n.setFullYear(r.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ws(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=Kt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=se(t),f=x.getDay(),g=(f<m?-7:0)+6-(f-m);return x.setDate(x.getDate()+g),x.setHours(23,59,59,999),x}function Ei(t,r){ne(2,arguments);var n=Oe(r);return js(t,-n)}var yh=864e5;function vh(t){ne(1,arguments);var r=se(t),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var s=r.getTime(),a=n-s;return Math.floor(a/yh)+1}function Gr(t){ne(1,arguments);var r=1,n=se(t),s=n.getUTCDay(),a=(s<r?7:0)+s-r;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Ii(t){ne(1,arguments);var r=se(t),n=r.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var a=Gr(s),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=Gr(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function bh(t){ne(1,arguments);var r=Ii(t),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var s=Gr(n);return s}var jh=6048e5;function Oi(t){ne(1,arguments);var r=se(t),n=Gr(r).getTime()-bh(r).getTime();return Math.round(n/jh)+1}function Er(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=Kt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.weekStartsOn)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=se(t),f=x.getUTCDay(),g=(f<m?7:0)+f-m;return x.setUTCDate(x.getUTCDate()-g),x.setUTCHours(0,0,0,0),x}function Ta(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=se(t),m=u.getUTCFullYear(),x=Kt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&s!==void 0?s:(c=x.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,f),g.setUTCHours(0,0,0,0);var b=Er(g,r),S=new Date(0);S.setUTCFullYear(m,0,f),S.setUTCHours(0,0,0,0);var j=Er(S,r);return u.getTime()>=b.getTime()?m+1:u.getTime()>=j.getTime()?m:m-1}function wh(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=Kt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),x=Ta(t,r),f=new Date(0);f.setUTCFullYear(x,0,m),f.setUTCHours(0,0,0,0);var g=Er(f,r);return g}var Ch=6048e5;function _i(t,r){ne(1,arguments);var n=se(t),s=Er(n,r).getTime()-wh(n,r).getTime();return Math.round(s/Ch)+1}function Re(t,r){for(var n=t<0?"-":"",s=Math.abs(t).toString();s.length<r;)s="0"+s;return n+s}var dr={y:function(r,n){var s=r.getUTCFullYear(),a=s>0?s:1-s;return Re(n==="yy"?a%100:a,n.length)},M:function(r,n){var s=r.getUTCMonth();return n==="M"?String(s+1):Re(s+1,2)},d:function(r,n){return Re(r.getUTCDate(),n.length)},a:function(r,n){var s=r.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(r,n){return Re(r.getUTCHours()%12||12,n.length)},H:function(r,n){return Re(r.getUTCHours(),n.length)},m:function(r,n){return Re(r.getUTCMinutes(),n.length)},s:function(r,n){return Re(r.getUTCSeconds(),n.length)},S:function(r,n){var s=n.length,a=r.getUTCMilliseconds(),o=Math.floor(a*Math.pow(10,s-3));return Re(o,n.length)}},Vr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ph={G:function(r,n,s){var a=r.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(r,n,s){if(n==="yo"){var a=r.getUTCFullYear(),o=a>0?a:1-a;return s.ordinalNumber(o,{unit:"year"})}return dr.y(r,n)},Y:function(r,n,s,a){var o=Ta(r,a),i=o>0?o:1-o;if(n==="YY"){var l=i%100;return Re(l,2)}return n==="Yo"?s.ordinalNumber(i,{unit:"year"}):Re(i,n.length)},R:function(r,n){var s=Ii(r);return Re(s,n.length)},u:function(r,n){var s=r.getUTCFullYear();return Re(s,n.length)},Q:function(r,n,s){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return Re(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,n,s){var a=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return Re(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,n,s){var a=r.getUTCMonth();switch(n){case"M":case"MM":return dr.M(r,n);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(r,n,s){var a=r.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return Re(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(r,n,s,a){var o=_i(r,a);return n==="wo"?s.ordinalNumber(o,{unit:"week"}):Re(o,n.length)},I:function(r,n,s){var a=Oi(r);return n==="Io"?s.ordinalNumber(a,{unit:"week"}):Re(a,n.length)},d:function(r,n,s){return n==="do"?s.ordinalNumber(r.getUTCDate(),{unit:"date"}):dr.d(r,n)},D:function(r,n,s){var a=vh(r);return n==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):Re(a,n.length)},E:function(r,n,s){var a=r.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(r,n,s,a){var o=r.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Re(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(o,{width:"short",context:"formatting"});case"eeee":default:return s.day(o,{width:"wide",context:"formatting"})}},c:function(r,n,s,a){var o=r.getUTCDay(),i=(o-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Re(i,n.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(o,{width:"narrow",context:"standalone"});case"cccccc":return s.day(o,{width:"short",context:"standalone"});case"cccc":default:return s.day(o,{width:"wide",context:"standalone"})}},i:function(r,n,s){var a=r.getUTCDay(),o=a===0?7:a;switch(n){case"i":return String(o);case"ii":return Re(o,n.length);case"io":return s.ordinalNumber(o,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(r,n,s){var a=r.getUTCHours(),o=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,n,s){var a=r.getUTCHours(),o;switch(a===12?o=Vr.noon:a===0?o=Vr.midnight:o=a/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,n,s){var a=r.getUTCHours(),o;switch(a>=17?o=Vr.evening:a>=12?o=Vr.afternoon:a>=4?o=Vr.morning:o=Vr.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,n,s){if(n==="ho"){var a=r.getUTCHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return dr.h(r,n)},H:function(r,n,s){return n==="Ho"?s.ordinalNumber(r.getUTCHours(),{unit:"hour"}):dr.H(r,n)},K:function(r,n,s){var a=r.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(a,{unit:"hour"}):Re(a,n.length)},k:function(r,n,s){var a=r.getUTCHours();return a===0&&(a=24),n==="ko"?s.ordinalNumber(a,{unit:"hour"}):Re(a,n.length)},m:function(r,n,s){return n==="mo"?s.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):dr.m(r,n)},s:function(r,n,s){return n==="so"?s.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):dr.s(r,n)},S:function(r,n){return dr.S(r,n)},X:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return mo(i);case"XXXX":case"XX":return wr(i);case"XXXXX":case"XXX":default:return wr(i,":")}},x:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"x":return mo(i);case"xxxx":case"xx":return wr(i);case"xxxxx":case"xxx":default:return wr(i,":")}},O:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+ho(i,":");case"OOOO":default:return"GMT"+wr(i,":")}},z:function(r,n,s,a){var o=a._originalDate||r,i=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+ho(i,":");case"zzzz":default:return"GMT"+wr(i,":")}},t:function(r,n,s,a){var o=a._originalDate||r,i=Math.floor(o.getTime()/1e3);return Re(i,n.length)},T:function(r,n,s,a){var o=a._originalDate||r,i=o.getTime();return Re(i,n.length)}};function ho(t,r){var n=t>0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),o=s%60;if(o===0)return n+String(a);var i=r;return n+String(a)+i+Re(o,2)}function mo(t,r){if(t%60===0){var n=t>0?"-":"+";return n+Re(Math.abs(t)/60,2)}return wr(t,r)}function wr(t,r){var n=r||"",s=t>0?"-":"+",a=Math.abs(t),o=Re(Math.floor(a/60),2),i=Re(a%60,2);return s+o+n+i}var fo=function(r,n){switch(r){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Fi=function(r,n){switch(r){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Sh=function(r,n){var s=r.match(/(P+)(p+)?/)||[],a=s[1],o=s[2];if(!o)return fo(r,n);var i;switch(a){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",fo(a,n)).replace("{{time}}",Fi(o,n))},la={p:Fi,P:Sh},Th=["D","DD"],Dh=["YY","YYYY"];function Li(t){return Th.indexOf(t)!==-1}function Vi(t){return Dh.indexOf(t)!==-1}function es(t,r,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var kh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ah=function(r,n,s){var a,o=kh[r];return typeof o=="string"?a=o:n===1?a=o.one:a=o.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function Hs(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):t.defaultWidth,s=t.formats[n]||t.formats[t.defaultWidth];return s}}var Nh={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rh={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Eh={date:Hs({formats:Nh,defaultWidth:"full"}),time:Hs({formats:Mh,defaultWidth:"full"}),dateTime:Hs({formats:Rh,defaultWidth:"full"})},Ih={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Oh=function(r,n,s,a){return Ih[r]};function an(t){return function(r,n){var s=n!=null&&n.context?String(n.context):"standalone",a;if(s==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,i=n!=null&&n.width?String(n.width):o;a=t.formattingValues[i]||t.formattingValues[o]}else{var l=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(r):r;return a[d]}}var _h={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fh={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vh={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$h={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uh=function(r,n){var s=Number(r),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Wh={ordinalNumber:Uh,era:an({values:_h,defaultWidth:"wide"}),quarter:an({values:Fh,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:an({values:Lh,defaultWidth:"wide"}),day:an({values:Vh,defaultWidth:"wide"}),dayPeriod:an({values:$h,defaultWidth:"wide",formattingValues:Bh,defaultFormattingWidth:"wide"})};function on(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=r.match(a);if(!o)return null;var i=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?zh(l,function(m){return m.test(i)}):Hh(l,function(m){return m.test(i)}),d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;var u=r.slice(i.length);return{value:d,rest:u}}}function Hh(t,r){for(var n in t)if(t.hasOwnProperty(n)&&r(t[n]))return n}function zh(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n}function Yh(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.match(t.matchPattern);if(!s)return null;var a=s[0],o=r.match(t.parsePattern);if(!o)return null;var i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;var l=r.slice(a.length);return{value:i,rest:l}}}var qh=/^(\d+)(th|st|nd|rd)?/i,Qh=/\d+/i,Kh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gh={any:[/^b/i,/^(a|c)/i]},Xh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zh={any:[/1/i,/2/i,/3/i,/4/i]},Jh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},em={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tm={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rm={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nm={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sm={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},am={ordinalNumber:Yh({matchPattern:qh,parsePattern:Qh,valueCallback:function(r){return parseInt(r,10)}}),era:on({matchPatterns:Kh,defaultMatchWidth:"wide",parsePatterns:Gh,defaultParseWidth:"any"}),quarter:on({matchPatterns:Xh,defaultMatchWidth:"wide",parsePatterns:Zh,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:on({matchPatterns:Jh,defaultMatchWidth:"wide",parsePatterns:em,defaultParseWidth:"any"}),day:on({matchPatterns:tm,defaultMatchWidth:"wide",parsePatterns:rm,defaultParseWidth:"any"}),dayPeriod:on({matchPatterns:nm,defaultMatchWidth:"any",parsePatterns:sm,defaultParseWidth:"any"})},Da={code:"en-US",formatDistance:Ah,formatLong:Eh,formatRelative:Oh,localize:Wh,match:am,options:{weekStartsOn:0,firstWeekContainsDate:1}},om=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,im=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lm=/^'([^]*?)'?$/,cm=/''/g,dm=/[a-zA-Z]/;function hr(t,r,n){var s,a,o,i,l,c,d,u,m,x,f,g,b,S,j,w,T,y;ne(2,arguments);var A=String(r),I=Kt(),M=(s=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:I.locale)!==null&&s!==void 0?s:Da,O=Oe((o=(i=(l=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:I.firstWeekContainsDate)!==null&&i!==void 0?i:(m=I.locale)===null||m===void 0||(x=m.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(O>=1&&O<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=Oe((f=(g=(b=(S=n==null?void 0:n.weekStartsOn)!==null&&S!==void 0?S:n==null||(j=n.locale)===null||j===void 0||(w=j.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&b!==void 0?b:I.weekStartsOn)!==null&&g!==void 0?g:(T=I.locale)===null||T===void 0||(y=T.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&f!==void 0?f:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!M.localize)throw new RangeError("locale must contain localize property");if(!M.formatLong)throw new RangeError("locale must contain formatLong property");var k=se(t);if(!Ni(k))throw new RangeError("Invalid time value");var C=Jn(k),P=Ei(k,C),F={firstWeekContainsDate:O,weekStartsOn:E,locale:M,_originalDate:k},_=A.match(im).map(function(R){var Y=R[0];if(Y==="p"||Y==="P"){var U=la[Y];return U(R,M.formatLong)}return R}).join("").match(om).map(function(R){if(R==="''")return"'";var Y=R[0];if(Y==="'")return um(R);var U=Ph[Y];if(U)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Vi(R)&&es(R,r,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Li(R)&&es(R,r,String(t)),U(P,R,M.localize,F);if(Y.match(dm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");return R}).join("");return _}function um(t){var r=t.match(lm);return r?r[1].replace(cm,"'"):t}function hm(t,r){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t}function mm(t,r){var n,s;ne(1,arguments);var a=se(t);if(isNaN(a.getTime()))throw new RangeError("Invalid time value");var o=String((n=r==null?void 0:r.format)!==null&&n!==void 0?n:"extended"),i=String((s=r==null?void 0:r.representation)!==null&&s!==void 0?s:"complete");if(o!=="extended"&&o!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(i!=="date"&&i!=="time"&&i!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var l="",c="",d=o==="extended"?"-":"",u=o==="extended"?":":"";if(i!=="time"){var m=Re(a.getDate(),2),x=Re(a.getMonth()+1,2),f=Re(a.getFullYear(),4);l="".concat(f).concat(d).concat(x).concat(d).concat(m)}if(i!=="date"){var g=a.getTimezoneOffset();if(g!==0){var b=Math.abs(g),S=Re(Math.floor(b/60),2),j=Re(b%60,2),w=g<0?"+":"-";c="".concat(w).concat(S,":").concat(j)}else c="Z";var T=Re(a.getHours(),2),y=Re(a.getMinutes(),2),A=Re(a.getSeconds(),2),I=l===""?"":"T",M=[T,y,A].join(u);l="".concat(l).concat(I).concat(M).concat(c)}return l}function fm(t){ne(1,arguments);var r=se(t),n=r.getDate();return n}function $i(t){ne(1,arguments);var r=se(t),n=r.getFullYear(),s=r.getMonth(),a=new Date(0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function pm(t){ne(1,arguments);var r=se(t),n=r.getHours();return n}function xm(t){ne(1,arguments);var r=se(t),n=r.getMilliseconds();return n}function gm(t){ne(1,arguments);var r=se(t),n=r.getMinutes();return n}function ym(t){ne(1,arguments);var r=se(t),n=r.getMonth();return n}function vm(t){ne(1,arguments);var r=se(t),n=r.getSeconds();return n}function bm(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=se(t),m=u.getFullYear(),x=Kt(),f=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&s!==void 0?s:(c=x.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,f),g.setHours(0,0,0,0);var b=Tr(g,r),S=new Date(0);S.setFullYear(m,0,f),S.setHours(0,0,0,0);var j=Tr(S,r);return u.getTime()>=b.getTime()?m+1:u.getTime()>=j.getTime()?m:m-1}function jm(t,r){var n,s,a,o,i,l,c,d;ne(1,arguments);var u=Kt(),m=Oe((n=(s=(a=(o=r==null?void 0:r.firstWeekContainsDate)!==null&&o!==void 0?o:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),x=bm(t,r),f=new Date(0);f.setFullYear(x,0,m),f.setHours(0,0,0,0);var g=Tr(f,r);return g}var wm=6048e5;function Cm(t,r){ne(1,arguments);var n=se(t),s=Tr(n,r).getTime()-jm(n,r).getTime();return Math.round(s/wm)+1}function Pm(t){return ne(1,arguments),se(t).getFullYear()}function zs(t,r){ne(2,arguments);var n=se(t),s=se(r);return n.getTime()>s.getTime()}function ln(t,r){ne(2,arguments);var n=se(t),s=se(r);return n.getTime()<s.getTime()}function Sm(t,r){ne(2,arguments);var n=se(t),s=se(r);return n.getTime()===s.getTime()}function po(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,s=Array(r);n<r;n++)s[n]=t[n];return s}function Tm(t,r){if(t){if(typeof t=="string")return po(t,r);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?po(t,r):void 0}}function xo(t,r){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Tm(t))||r){n&&(t=n);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return i=d.done,d},e:function(d){l=!0,o=d},f:function(){try{i||n.return==null||n.return()}finally{if(l)throw o}}}}function _e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Vl(t,r)}function ts(t){return ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ts(t)}function Bi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bi=function(){return!!t})()}function Dm(t,r){if(r&&(os(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ce(t)}function Fe(t){var r=Bi();return function(){var n,s=ts(t);if(r){var a=ts(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return Dm(this,n)}}function Ee(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function km(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,_o(s.key),s)}}function Ie(t,r,n){return r&&km(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ie(t,r,n){return(r=_o(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Am=10,Ui=function(){function t(){Ee(this,t),ie(this,"priority",void 0),ie(this,"subPriority",0)}return Ie(t,[{key:"validate",value:function(n,s){return!0}}]),t}(),Nm=function(t){_e(n,t);var r=Fe(n);function n(s,a,o,i,l){var c;return Ee(this,n),c=r.call(this),c.value=s,c.validateValue=a,c.setValue=o,c.priority=i,l&&(c.subPriority=l),c}return Ie(n,[{key:"validate",value:function(a,o){return this.validateValue(a,this.value,o)}},{key:"set",value:function(a,o,i){return this.setValue(a,o,this.value,i)}}]),n}(Ui),Mm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",Am),ie(ce(s),"subPriority",-1),s}return Ie(n,[{key:"set",value:function(a,o){if(o.timestampIsSet)return a;var i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}}]),n}(Ui),$e=function(){function t(){Ee(this,t),ie(this,"incompatibleTokens",void 0),ie(this,"priority",void 0),ie(this,"subPriority",void 0)}return Ie(t,[{key:"run",value:function(n,s,a,o){var i=this.parse(n,s,a,o);return i?{setter:new Nm(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(n,s,a){return!0}}]),t}(),Rm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",140),ie(ce(s),"incompatibleTokens",["R","u","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"G":case"GG":case"GGG":return i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"});case"GGGGG":return i.era(a,{width:"narrow"});case"GGGG":default:return i.era(a,{width:"wide"})||i.era(a,{width:"abbreviated"})||i.era(a,{width:"narrow"})}}},{key:"set",value:function(a,o,i){return o.era=i,a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),nt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Lt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function st(t,r){return t&&{value:r(t.value),rest:t.rest}}function Xe(t,r){var n=r.match(t);return n?{value:parseInt(n[0],10),rest:r.slice(n[0].length)}:null}function Vt(t,r){var n=r.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:r.slice(1)};var s=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:s*(a*Cs+o*ws+i*sh),rest:r.slice(n[0].length)}}function Wi(t){return Xe(nt.anyDigitsSigned,t)}function tt(t,r){switch(t){case 1:return Xe(nt.singleDigit,r);case 2:return Xe(nt.twoDigits,r);case 3:return Xe(nt.threeDigits,r);case 4:return Xe(nt.fourDigits,r);default:return Xe(new RegExp("^\\d{1,"+t+"}"),r)}}function rs(t,r){switch(t){case 1:return Xe(nt.singleDigitSigned,r);case 2:return Xe(nt.twoDigitsSigned,r);case 3:return Xe(nt.threeDigitsSigned,r);case 4:return Xe(nt.fourDigitsSigned,r);default:return Xe(new RegExp("^-?\\d{1,"+t+"}"),r)}}function ka(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Hi(t,r){var n=r>0,s=n?r:1-r,a;if(s<=50)a=t||100;else{var o=s+50,i=Math.floor(o/100)*100,l=t>=o%100;a=t+i-(l?100:0)}return n?a:1-a}function zi(t){return t%400===0||t%4===0&&t%100!==0}var Em=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",130),ie(ce(s),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){var l=function(d){return{year:d,isTwoDigitYear:o==="yy"}};switch(o){case"y":return st(tt(4,a),l);case"yo":return st(i.ordinalNumber(a,{unit:"year"}),l);default:return st(tt(o.length,a),l)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,i){var l=a.getUTCFullYear();if(i.isTwoDigitYear){var c=Hi(i.year,l);return a.setUTCFullYear(c,0,1),a.setUTCHours(0,0,0,0),a}var d=!("era"in o)||o.era===1?i.year:1-i.year;return a.setUTCFullYear(d,0,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Im=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",130),ie(ce(s),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){var l=function(d){return{year:d,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return st(tt(4,a),l);case"Yo":return st(i.ordinalNumber(a,{unit:"year"}),l);default:return st(tt(o.length,a),l)}}},{key:"validate",value:function(a,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(a,o,i,l){var c=Ta(a,l);if(i.isTwoDigitYear){var d=Hi(i.year,c);return a.setUTCFullYear(d,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Er(a,l)}var u=!("era"in o)||o.era===1?i.year:1-i.year;return a.setUTCFullYear(u,0,l.firstWeekContainsDate),a.setUTCHours(0,0,0,0),Er(a,l)}}]),n}($e),Om=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",130),ie(ce(s),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o){return rs(o==="R"?4:o.length,a)}},{key:"set",value:function(a,o,i){var l=new Date(0);return l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0),Gr(l)}}]),n}($e),_m=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",130),ie(ce(s),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o){return rs(o==="u"?4:o.length,a)}},{key:"set",value:function(a,o,i){return a.setUTCFullYear(i,0,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Fm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",120),ie(ce(s),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"Q":case"QQ":return tt(o.length,a);case"Qo":return i.ordinalNumber(a,{unit:"quarter"});case"QQQ":return i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(a,{width:"wide",context:"formatting"})||i.quarter(a,{width:"abbreviated",context:"formatting"})||i.quarter(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Lm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",120),ie(ce(s),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"q":case"qq":return tt(o.length,a);case"qo":return i.ordinalNumber(a,{unit:"quarter"});case"qqq":return i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(a,{width:"wide",context:"standalone"})||i.quarter(a,{width:"abbreviated",context:"standalone"})||i.quarter(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=1&&o<=4}},{key:"set",value:function(a,o,i){return a.setUTCMonth((i-1)*3,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),Vm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ie(ce(s),"priority",110),s}return Ie(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d-1};switch(o){case"M":return st(Xe(nt.month,a),l);case"MM":return st(tt(2,a),l);case"Mo":return st(i.ordinalNumber(a,{unit:"month"}),l);case"MMM":return i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(a,{width:"wide",context:"formatting"})||i.month(a,{width:"abbreviated",context:"formatting"})||i.month(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),n}($e),$m=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",110),ie(ce(s),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d-1};switch(o){case"L":return st(Xe(nt.month,a),l);case"LL":return st(tt(2,a),l);case"Lo":return st(i.ordinalNumber(a,{unit:"month"}),l);case"LLL":return i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(a,{width:"wide",context:"standalone"})||i.month(a,{width:"abbreviated",context:"standalone"})||i.month(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){return a.setUTCMonth(i,1),a.setUTCHours(0,0,0,0),a}}]),n}($e);function Bm(t,r,n){ne(2,arguments);var s=se(t),a=Oe(r),o=_i(s,n)-a;return s.setUTCDate(s.getUTCDate()-o*7),s}var Um=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",100),ie(ce(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"w":return Xe(nt.week,a);case"wo":return i.ordinalNumber(a,{unit:"week"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,i,l){return Er(Bm(a,i,l),l)}}]),n}($e);function Wm(t,r){ne(2,arguments);var n=se(t),s=Oe(r),a=Oi(n)-s;return n.setUTCDate(n.getUTCDate()-a*7),n}var Hm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",100),ie(ce(s),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"I":return Xe(nt.week,a);case"Io":return i.ordinalNumber(a,{unit:"week"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=53}},{key:"set",value:function(a,o,i){return Gr(Wm(a,i))}}]),n}($e),zm=[31,28,31,30,31,30,31,31,30,31,30,31],Ym=[31,29,31,30,31,30,31,31,30,31,30,31],qm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",90),ie(ce(s),"subPriority",1),ie(ce(s),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"d":return Xe(nt.date,a);case"do":return i.ordinalNumber(a,{unit:"date"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){var i=a.getUTCFullYear(),l=zi(i),c=a.getUTCMonth();return l?o>=1&&o<=Ym[c]:o>=1&&o<=zm[c]}},{key:"set",value:function(a,o,i){return a.setUTCDate(i),a.setUTCHours(0,0,0,0),a}}]),n}($e),Qm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",90),ie(ce(s),"subpriority",1),ie(ce(s),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"D":case"DD":return Xe(nt.dayOfYear,a);case"Do":return i.ordinalNumber(a,{unit:"date"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){var i=a.getUTCFullYear(),l=zi(i);return l?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(a,o,i){return a.setUTCMonth(0,i),a.setUTCHours(0,0,0,0),a}}]),n}($e);function Aa(t,r,n){var s,a,o,i,l,c,d,u;ne(2,arguments);var m=Kt(),x=Oe((s=(a=(o=(i=n==null?void 0:n.weekStartsOn)!==null&&i!==void 0?i:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&o!==void 0?o:m.weekStartsOn)!==null&&a!==void 0?a:(d=m.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=se(t),g=Oe(r),b=f.getUTCDay(),S=g%7,j=(S+7)%7,w=(j<x?7:0)+g-b;return f.setUTCDate(f.getUTCDate()+w),f}var Km=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",90),ie(ce(s),"incompatibleTokens",["D","i","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"E":case"EE":case"EEE":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Aa(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}($e),Gm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",90),ie(ce(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i,l){var c=function(u){var m=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+m};switch(o){case"e":case"ee":return st(tt(o.length,a),c);case"eo":return st(i.ordinalNumber(a,{unit:"day"}),c);case"eee":return i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Aa(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}($e),Xm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",90),ie(ce(s),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i,l){var c=function(u){var m=Math.floor((u-1)/7)*7;return(u+l.weekStartsOn+6)%7+m};switch(o){case"c":case"cc":return st(tt(o.length,a),c);case"co":return st(i.ordinalNumber(a,{unit:"day"}),c);case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(a,{width:"wide",context:"standalone"})||i.day(a,{width:"abbreviated",context:"standalone"})||i.day(a,{width:"short",context:"standalone"})||i.day(a,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(a,o){return o>=0&&o<=6}},{key:"set",value:function(a,o,i,l){return a=Aa(a,i,l),a.setUTCHours(0,0,0,0),a}}]),n}($e);function Zm(t,r){ne(2,arguments);var n=Oe(r);n%7===0&&(n=n-7);var s=1,a=se(t),o=a.getUTCDay(),i=n%7,l=(i+7)%7,c=(l<s?7:0)+n-o;return a.setUTCDate(a.getUTCDate()+c),a}var Jm=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",90),ie(ce(s),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){var l=function(d){return d===0?7:d};switch(o){case"i":case"ii":return tt(o.length,a);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return st(i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l);case"iiiii":return st(i.day(a,{width:"narrow",context:"formatting"}),l);case"iiiiii":return st(i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l);case"iiii":default:return st(i.day(a,{width:"wide",context:"formatting"})||i.day(a,{width:"abbreviated",context:"formatting"})||i.day(a,{width:"short",context:"formatting"})||i.day(a,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(a,o){return o>=1&&o<=7}},{key:"set",value:function(a,o,i){return a=Zm(a,i),a.setUTCHours(0,0,0,0),a}}]),n}($e),ef=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",80),ie(ce(s),"incompatibleTokens",["b","B","H","k","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"a":case"aa":case"aaa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(ka(i),0,0,0),a}}]),n}($e),tf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",80),ie(ce(s),"incompatibleTokens",["a","B","H","k","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"b":case"bb":case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(ka(i),0,0,0),a}}]),n}($e),rf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",80),ie(ce(s),"incompatibleTokens",["a","b","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(a,{width:"wide",context:"formatting"})||i.dayPeriod(a,{width:"abbreviated",context:"formatting"})||i.dayPeriod(a,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(a,o,i){return a.setUTCHours(ka(i),0,0,0),a}}]),n}($e),nf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",70),ie(ce(s),"incompatibleTokens",["H","K","k","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"h":return Xe(nt.hour12h,a);case"ho":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=12}},{key:"set",value:function(a,o,i){var l=a.getUTCHours()>=12;return l&&i<12?a.setUTCHours(i+12,0,0,0):!l&&i===12?a.setUTCHours(0,0,0,0):a.setUTCHours(i,0,0,0),a}}]),n}($e),sf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",70),ie(ce(s),"incompatibleTokens",["a","b","h","K","k","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"H":return Xe(nt.hour23h,a);case"Ho":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=23}},{key:"set",value:function(a,o,i){return a.setUTCHours(i,0,0,0),a}}]),n}($e),af=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",70),ie(ce(s),"incompatibleTokens",["h","H","k","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"K":return Xe(nt.hour11h,a);case"Ko":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=11}},{key:"set",value:function(a,o,i){var l=a.getUTCHours()>=12;return l&&i<12?a.setUTCHours(i+12,0,0,0):a.setUTCHours(i,0,0,0),a}}]),n}($e),of=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",70),ie(ce(s),"incompatibleTokens",["a","b","h","H","K","t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"k":return Xe(nt.hour24h,a);case"ko":return i.ordinalNumber(a,{unit:"hour"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=1&&o<=24}},{key:"set",value:function(a,o,i){var l=i<=24?i%24:i;return a.setUTCHours(l,0,0,0),a}}]),n}($e),lf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",60),ie(ce(s),"incompatibleTokens",["t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"m":return Xe(nt.minute,a);case"mo":return i.ordinalNumber(a,{unit:"minute"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,i){return a.setUTCMinutes(i,0,0),a}}]),n}($e),cf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",50),ie(ce(s),"incompatibleTokens",["t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o,i){switch(o){case"s":return Xe(nt.second,a);case"so":return i.ordinalNumber(a,{unit:"second"});default:return tt(o.length,a)}}},{key:"validate",value:function(a,o){return o>=0&&o<=59}},{key:"set",value:function(a,o,i){return a.setUTCSeconds(i,0),a}}]),n}($e),df=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",30),ie(ce(s),"incompatibleTokens",["t","T"]),s}return Ie(n,[{key:"parse",value:function(a,o){var i=function(c){return Math.floor(c*Math.pow(10,-o.length+3))};return st(tt(o.length,a),i)}},{key:"set",value:function(a,o,i){return a.setUTCMilliseconds(i),a}}]),n}($e),uf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",10),ie(ce(s),"incompatibleTokens",["t","T","x"]),s}return Ie(n,[{key:"parse",value:function(a,o){switch(o){case"X":return Vt(Lt.basicOptionalMinutes,a);case"XX":return Vt(Lt.basic,a);case"XXXX":return Vt(Lt.basicOptionalSeconds,a);case"XXXXX":return Vt(Lt.extendedOptionalSeconds,a);case"XXX":default:return Vt(Lt.extended,a)}}},{key:"set",value:function(a,o,i){return o.timestampIsSet?a:new Date(a.getTime()-i)}}]),n}($e),hf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",10),ie(ce(s),"incompatibleTokens",["t","T","X"]),s}return Ie(n,[{key:"parse",value:function(a,o){switch(o){case"x":return Vt(Lt.basicOptionalMinutes,a);case"xx":return Vt(Lt.basic,a);case"xxxx":return Vt(Lt.basicOptionalSeconds,a);case"xxxxx":return Vt(Lt.extendedOptionalSeconds,a);case"xxx":default:return Vt(Lt.extended,a)}}},{key:"set",value:function(a,o,i){return o.timestampIsSet?a:new Date(a.getTime()-i)}}]),n}($e),mf=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",40),ie(ce(s),"incompatibleTokens","*"),s}return Ie(n,[{key:"parse",value:function(a){return Wi(a)}},{key:"set",value:function(a,o,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),n}($e),ff=function(t){_e(n,t);var r=Fe(n);function n(){var s;Ee(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return s=r.call.apply(r,[this].concat(o)),ie(ce(s),"priority",20),ie(ce(s),"incompatibleTokens","*"),s}return Ie(n,[{key:"parse",value:function(a){return Wi(a)}},{key:"set",value:function(a,o,i){return[new Date(i),{timestampIsSet:!0}]}}]),n}($e),pf={G:new Rm,y:new Em,Y:new Im,R:new Om,u:new _m,Q:new Fm,q:new Lm,M:new Vm,L:new $m,w:new Um,I:new Hm,d:new qm,D:new Qm,E:new Km,e:new Gm,c:new Xm,i:new Jm,a:new ef,b:new tf,B:new rf,h:new nf,H:new sf,K:new af,k:new of,m:new lf,s:new cf,S:new df,X:new uf,x:new hf,t:new mf,T:new ff},xf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yf=/^'([^]*?)'?$/,vf=/''/g,bf=/\S/,jf=/[a-zA-Z]/;function wf(t,r,n,s){var a,o,i,l,c,d,u,m,x,f,g,b,S,j,w,T,y,A;ne(3,arguments);var I=String(t),M=String(r),O=Kt(),E=(a=(o=s==null?void 0:s.locale)!==null&&o!==void 0?o:O.locale)!==null&&a!==void 0?a:Da;if(!E.match)throw new RangeError("locale must contain match property");var k=Oe((i=(l=(c=(d=s==null?void 0:s.firstWeekContainsDate)!==null&&d!==void 0?d:s==null||(u=s.locale)===null||u===void 0||(m=u.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&c!==void 0?c:O.firstWeekContainsDate)!==null&&l!==void 0?l:(x=O.locale)===null||x===void 0||(f=x.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Oe((g=(b=(S=(j=s==null?void 0:s.weekStartsOn)!==null&&j!==void 0?j:s==null||(w=s.locale)===null||w===void 0||(T=w.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&S!==void 0?S:O.weekStartsOn)!==null&&b!==void 0?b:(y=O.locale)===null||y===void 0||(A=y.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&g!==void 0?g:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(M==="")return I===""?se(n):new Date(NaN);var P={firstWeekContainsDate:k,weekStartsOn:C,locale:E},F=[new Mm],_=M.match(gf).map(function(K){var le=K[0];if(le in la){var Te=la[le];return Te(K,E.formatLong)}return K}).join("").match(xf),R=[],Y=xo(_),U;try{var $=function(){var le=U.value;!(s!=null&&s.useAdditionalWeekYearTokens)&&Vi(le)&&es(le,M,t),!(s!=null&&s.useAdditionalDayOfYearTokens)&&Li(le)&&es(le,M,t);var Te=le[0],xe=pf[Te];if(xe){var be=xe.incompatibleTokens;if(Array.isArray(be)){var re=R.find(function(ze){return be.includes(ze.token)||ze.token===Te});if(re)throw new RangeError("The format string mustn't contain `".concat(re.fullToken,"` and `").concat(le,"` at the same time"))}else if(xe.incompatibleTokens==="*"&&R.length>0)throw new RangeError("The format string mustn't contain `".concat(le,"` and any other token at the same time"));R.push({token:Te,fullToken:le});var Pe=xe.run(I,le,E.match,P);if(!Pe)return{v:new Date(NaN)};F.push(Pe.setter),I=Pe.rest}else{if(Te.match(jf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Te+"`");if(le==="''"?le="'":Te==="'"&&(le=Cf(le)),I.indexOf(le)===0)I=I.slice(le.length);else return{v:new Date(NaN)}}};for(Y.s();!(U=Y.n()).done;){var H=$();if(os(H)==="object")return H.v}}catch(K){Y.e(K)}finally{Y.f()}if(I.length>0&&bf.test(I))return new Date(NaN);var q=F.map(function(K){return K.priority}).sort(function(K,le){return le-K}).filter(function(K,le,Te){return Te.indexOf(K)===le}).map(function(K){return F.filter(function(le){return le.priority===K}).sort(function(le,Te){return Te.subPriority-le.subPriority})}).map(function(K){return K[0]}),G=se(n);if(isNaN(G.getTime()))return new Date(NaN);var ee=Ei(G,Jn(G)),J={},D=xo(q),Z;try{for(D.s();!(Z=D.n()).done;){var ye=Z.value;if(!ye.validate(ee,P))return new Date(NaN);var B=ye.set(ee,J,P);Array.isArray(B)?(ee=B[0],hm(J,B[1])):ee=B}}catch(K){D.e(K)}finally{D.f()}return ee}function Cf(t){return t.match(yf)[1].replace(vf,"'")}function go(t){ne(1,arguments);var r=se(t);return r.setMinutes(0,0,0),r}function Pf(t,r){ne(2,arguments);var n=go(t),s=go(r);return n.getTime()===s.getTime()}function Sf(t,r){ne(2,arguments);var n=se(t),s=se(r);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Tf(t,r){ne(2,arguments);var n=se(t),s=se(r);return n.getFullYear()===s.getFullYear()}function Df(t,r){ne(2,arguments);var n=se(t).getTime(),s=se(r.start).getTime(),a=se(r.end).getTime();if(!(s<=a))throw new RangeError("Invalid interval");return n>=s&&n<=a}function mr(t,r){var n;ne(1,arguments);var s=Oe((n=void 0)!==null&&n!==void 0?n:2);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=Mf(t),o;if(a.date){var i=Rf(a.date,s);o=Ef(i.restDateString,i.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var l=o.getTime(),c=0,d;if(a.time&&(c=If(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(d=Of(a.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(l+c),m=new Date(0);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return new Date(l+c+d)}var En={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},kf=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Af=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Nf=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Mf(t){var r={},n=t.split(En.dateTimeDelimiter),s;if(n.length>2)return r;if(/:/.test(n[0])?s=n[0]:(r.date=n[0],s=n[1],En.timeZoneDelimiter.test(r.date)&&(r.date=t.split(En.timeZoneDelimiter)[0],s=t.substr(r.date.length,t.length))),s){var a=En.timezone.exec(s);a?(r.time=s.replace(a[1],""),r.timezone=a[1]):r.time=s}return r}function Rf(t,r){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};var a=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function Ef(t,r){if(r===null)return new Date(NaN);var n=t.match(kf);if(!n)return new Date(NaN);var s=!!n[4],a=cn(n[1]),o=cn(n[2])-1,i=cn(n[3]),l=cn(n[4]),c=cn(n[5])-1;if(s)return $f(r,l,c)?_f(r,l,c):new Date(NaN);var d=new Date(0);return!Lf(r,o,i)||!Vf(r,a)?new Date(NaN):(d.setUTCFullYear(r,o,Math.max(a,i)),d)}function cn(t){return t?parseInt(t):1}function If(t){var r=t.match(Af);if(!r)return NaN;var n=Ys(r[1]),s=Ys(r[2]),a=Ys(r[3]);return Bf(n,s,a)?n*Cs+s*ws+a*1e3:NaN}function Ys(t){return t&&parseFloat(t.replace(",","."))||0}function Of(t){if(t==="Z")return 0;var r=t.match(Nf);if(!r)return 0;var n=r[1]==="+"?-1:1,s=parseInt(r[2]),a=r[3]&&parseInt(r[3])||0;return Uf(s,a)?n*(s*Cs+a*ws):NaN}function _f(t,r,n){var s=new Date(0);s.setUTCFullYear(t,0,4);var a=s.getUTCDay()||7,o=(r-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+o),s}var Ff=[31,null,31,30,31,30,31,31,30,31,30,31];function Yi(t){return t%400===0||t%4===0&&t%100!==0}function Lf(t,r,n){return r>=0&&r<=11&&n>=1&&n<=(Ff[r]||(Yi(t)?29:28))}function Vf(t,r){return r>=1&&r<=(Yi(t)?366:365)}function $f(t,r,n){return r>=1&&r<=53&&n>=0&&n<=6}function Bf(t,r,n){return t===24?r===0&&n===0:n>=0&&n<60&&r>=0&&r<60&&t>=0&&t<25}function Uf(t,r){return r>=0&&r<=59}function Wf(t,r){ne(2,arguments);var n=se(t),s=Oe(r),a=n.getFullYear(),o=n.getDate(),i=new Date(0);i.setFullYear(a,s,15),i.setHours(0,0,0,0);var l=$i(i);return n.setMonth(s,Math.min(o,l)),n}function Hf(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return n.setDate(s),n}function zf(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return n.setHours(s),n}function Yf(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return n.setMilliseconds(s),n}function qf(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return n.setMinutes(s),n}function Qf(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return n.setSeconds(s),n}function Kf(t,r){ne(2,arguments);var n=se(t),s=Oe(r);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}const qi={USD:"$",VND:"₫",EUR:"€",GBP:"£",JPY:"¥",CNY:"¥",KRW:"₩",SGD:"S$",THB:"฿",IDR:"Rp",MYR:"RM",PHP:"₱",INR:"₹",AUD:"A$",CAD:"C$",CHF:"CHF",NZD:"NZ$"},Q=(t,r="VND",n={},s="en-US")=>{s="en-US";const{compact:a=!1,precision:o=r==="VND"?0:2,showSymbol:i=!0}=n;(t==null||isNaN(t))&&(t=0);const l=new Intl.NumberFormat(s,{minimumFractionDigits:o,maximumFractionDigits:o,notation:a?"compact":"standard"}).format(t);if(i){const c=qi[r]||r;return`${l} ${c}`}return l},pt=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(0):new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(t)),Ce=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(0):new Intl.NumberFormat(n,{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(t/100)),In=(t,r=2,n="en-US")=>(n="en-US",t==null||isNaN(t)?new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(0)+"%":new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:r}).format(t)+"%"),Ss=(t,r="MMM dd, yyyy")=>{try{const n=typeof t=="string"?mr(t):t;return hr(n,r)}catch{return"Invalid Date"}},Qi=({portfolio:t,onView:r,onEdit:n})=>{const s=(Number(t.unrealizedPl)||0)>=0,a=(Number(t.realizedPl)||0)>=0,o=()=>{r(t.portfolioId)},i=c=>{c.stopPropagation(),n&&n(t.portfolioId)},l=c=>{c.stopPropagation(),o()};return e.jsxs("div",{className:"portfolio-card",onClick:o,children:[e.jsxs("div",{className:"portfolio-card__content",children:[e.jsxs("div",{className:"portfolio-card__header",children:[e.jsx("h2",{className:"portfolio-card__title",children:t.name}),e.jsx("span",{className:`portfolio-card__currency ${t.baseCurrency==="USD"?"portfolio-card__currency--primary":""}`,children:t.baseCurrency})]}),e.jsxs("div",{className:"portfolio-card__metrics",children:[e.jsxs("div",{className:"portfolio-card__total-value",children:[e.jsx(rr,{className:"portfolio-card__total-value-icon"}),e.jsxs("div",{children:[e.jsx("div",{className:"portfolio-card__total-value-amount",children:Q(Number(t.totalValue)||0,t.baseCurrency)}),e.jsx("div",{className:"portfolio-card__total-value-label",children:"Total Value"})]})]}),e.jsxs("div",{className:"portfolio-card__pl-section",children:[e.jsxs("div",{className:"portfolio-card__pl-item",children:[e.jsxs("div",{className:"portfolio-card__pl-header",children:[s?e.jsx(gt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):e.jsx(kt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),e.jsx("div",{className:`portfolio-card__pl-amount ${s?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:Q(Number(t.unrealizedPl)||0,t.baseCurrency)})]}),e.jsx("div",{className:"portfolio-card__pl-label",children:"Unrealized P&L"})]}),e.jsxs("div",{className:"portfolio-card__pl-item",children:[e.jsxs("div",{className:"portfolio-card__pl-header",children:[a?e.jsx(gt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--positive"}):e.jsx(kt,{className:"portfolio-card__pl-icon portfolio-card__pl-icon--negative"}),e.jsx("div",{className:`portfolio-card__pl-amount ${a?"portfolio-card__pl-amount--positive":"portfolio-card__pl-amount--negative"}`,children:Q(Number(t.realizedPl)||0,t.baseCurrency)})]}),e.jsx("div",{className:"portfolio-card__pl-label",children:"Realized P&L"})]})]}),e.jsxs("div",{className:"portfolio-card__cash-balance",children:[e.jsx("div",{className:"portfolio-card__cash-label",children:"Cash Balance"}),e.jsx("div",{className:"portfolio-card__cash-amount",children:Q(Number(t.cashBalance)||0,t.baseCurrency)})]})]})]}),e.jsxs("div",{className:"portfolio-card__actions",children:[e.jsxs("button",{className:"portfolio-card__view-btn",onClick:l,children:[e.jsx(pa,{}),"View Details"]}),n&&e.jsx("button",{className:"portfolio-card__edit-btn",onClick:i,children:"Edit"})]})]})},Gf=()=>{var j;const t=bn(),{accountId:r}=Nt(),{portfolios:n,isLoading:s,error:a}=bs(r);if(s)return e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(Ye,{})});if(a)return e.jsx(We,{severity:"error",sx:{mb:2},children:"Failed to load dashboard data. Please try again."});const o=n.length,i=n.reduce((w,T)=>{var y;return w+(parseFloat((y=T.totalValue)==null?void 0:y.toString())||0)},0),l=n.reduce((w,T)=>{var y;return w+(parseFloat((y=T.unrealizedPl)==null?void 0:y.toString())||0)},0),c=n.reduce((w,T)=>{var y;return w+(parseFloat((y=T.realizedPl)==null?void 0:y.toString())||0)},0),d=n.reduce((w,T)=>{var y;return w+(parseFloat((y=T.cashBalance)==null?void 0:y.toString())||0)},0),u=l+c,m=i>0?u/(i-u)*100:0,x=((j=n.find(w=>w.baseCurrency))==null?void 0:j.baseCurrency)||"VND",f=w=>{t(`/portfolios/${w}`)},g=w=>{t(`/portfolios/${w}/edit`)},b=()=>{t("/portfolios/new")},S=[{title:"Total Portfolios",value:o.toString(),icon:e.jsx(rr,{}),color:"primary"},{title:"Total Value",value:Q(i,x),icon:e.jsx($l,{}),color:"success"},{title:"Total P&L",value:Q(u,x),icon:u>=0?e.jsx(gt,{}):e.jsx(kt,{}),color:u>=0?"success":"error"},{title:"Total Return",value:Ce(m),icon:m>=0?e.jsx(gt,{}):e.jsx(kt,{}),color:m>=0?"success":"error"}];return e.jsxs(v,{children:[e.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"Dashboard"}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Overview of your investment portfolios and performance"}),e.jsxs(N,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(N,{item:!0,xs:12,lg:8,children:e.jsx(N,{container:!0,spacing:3,sx:{height:"100%"},children:S.map((w,T)=>e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsx(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,children:[e.jsxs(v,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:w.title}),e.jsx(h,{variant:"h5",component:"div",children:w.value})]}),e.jsx(v,{sx:{color:`${w.color}.main`,display:"flex",alignItems:"center"},children:w.icon})]})})})},T))})}),n.length>0&&e.jsx(N,{item:!0,xs:12,lg:4,children:e.jsxs(rt,{sx:{p:3,height:"fit-content"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Portfolio Insights"}),e.jsxs(v,{children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Average Portfolio Value:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:Q(i/n.length,x)})]}),e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Cash Allocation:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:Ce(d/i*100)})]}),e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,borderBottom:"1px solid",borderColor:"divider",children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Best Performer:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",color:"success.main",children:n.length>0?n.reduce((w,T)=>(T.unrealizedPl||0)>(w.unrealizedPl||0)?T:w).name:"N/A"})]}),e.jsxs(v,{display:"flex",justifyContent:"space-between",py:1.5,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Total Cash Balance:"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:Q(d,x)})]})]})]})})]}),e.jsxs(v,{children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h5",component:"h2",children:"Your Portfolios"}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(Mt,{}),onClick:b,sx:{borderRadius:2},children:"Create Portfolio"})]}),n.length===0?e.jsxs(rt,{sx:{p:4,textAlign:"center"},children:[e.jsx(rr,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No portfolios found"}),e.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first portfolio to start tracking your investments"}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(Mt,{}),onClick:b,size:"large",sx:{borderRadius:2},children:"Create Your First Portfolio"})]}):e.jsx(N,{container:!0,spacing:3,children:n.map(w=>e.jsx(N,{item:!0,xs:12,sm:6,lg:4,xl:3,children:e.jsx(Qi,{portfolio:w,onView:f,onEdit:g})},w.portfolioId))})]})]})},Xf=({onViewPortfolio:t,onEditPortfolio:r,onCreatePortfolio:n})=>{const{accountId:s}=Nt(),{portfolios:a,isLoading:o,error:i}=bs(s),[l,c]=p.useState(""),[d,u]=p.useState(""),m=a.filter(f=>{const g=f.name.toLowerCase().includes(l.toLowerCase()),b=!d||f.baseCurrency===d;return g&&b}),x=Array.from(new Set(a.map(f=>f.baseCurrency)));return o?e.jsx("div",{className:"portfolio-list",children:e.jsx("div",{className:"portfolio-list__loading",children:e.jsx(Ye,{})})}):i?e.jsx("div",{className:"portfolio-list",children:e.jsx("div",{className:"portfolio-list__error",children:"Failed to load portfolios. Please try again."})}):e.jsxs("div",{className:"portfolio-list",children:[e.jsxs("div",{className:"portfolio-list__header",children:[e.jsx("h1",{className:"portfolio-list__title",children:"Portfolios"}),n&&e.jsxs("button",{className:"portfolio-list__create-btn",onClick:n,children:[e.jsx(Mt,{}),"Create Portfolio"]})]}),e.jsxs("div",{className:"portfolio-list__filters",children:[e.jsx(He,{label:"Search portfolios",variant:"outlined",size:"small",value:l,onChange:f=>c(f.target.value),InputProps:{startAdornment:e.jsx(xa,{sx:{mr:1,color:"text.secondary"}})},className:"portfolio-list__search"}),e.jsxs(Ze,{size:"small",className:"portfolio-list__currency-filter",children:[e.jsx(Je,{children:"Currency"}),e.jsxs(et,{value:d,label:"Currency",onChange:f=>u(f.target.value),children:[e.jsx(de,{value:"",children:"All Currencies"}),x.map(f=>e.jsx(de,{value:f,children:f},f))]})]})]}),m.length===0?e.jsxs("div",{className:"portfolio-list__empty",children:[e.jsx("div",{className:"portfolio-list__empty-icon",children:"📊"}),e.jsx("h3",{className:"portfolio-list__empty-title",children:a.length===0?"No portfolios found. Create your first portfolio to get started.":"No portfolios match your search criteria."}),n&&a.length===0&&e.jsxs("button",{className:"portfolio-list__empty-btn",onClick:n,children:[e.jsx(Mt,{}),"Create Your First Portfolio"]})]}):e.jsx("div",{className:"portfolio-list__grid",children:m.map(f=>e.jsx(Qi,{portfolio:f,onView:t,onEdit:r},f.portfolioId))}),n&&e.jsx(Fo,{color:"primary","aria-label":"add portfolio",onClick:n,className:"portfolio-list__fab",children:e.jsx(Mt,{})})]})};function Ts(t,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),function(s,a,o){try{return Promise.resolve(function(i,l){try{var c=(r.context,Promise.resolve(t[n.mode==="sync"?"validateSync":"validate"](s,Object.assign({abortEarly:!1},r,{context:a}))).then(function(d){return o.shouldUseNativeValidation&&yc({},o),{values:n.raw?s:d,errors:{}}}))}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(!i.inner)throw i;return{values:{},errors:vc((l=i,c=!o.shouldUseNativeValidation&&o.criteriaMode==="all",(l.inner||[]).reduce(function(d,u){if(d[u.path]||(d[u.path]={message:u.message,type:u.type}),c){var m=d[u.path].types,x=m&&m[u.type];d[u.path]=bc(u.path,c,d,u.type,x?[].concat(x,u.message):u.message)}return d},{})),o)};var l,c}))}catch(i){return Promise.reject(i)}}}const Zf=cs({name:dt().required("Portfolio name is required").min(2,"Name must be at least 2 characters"),baseCurrency:dt().required("Base currency is required"),accountId:dt().required("Account ID is required")}),Jf=[{code:"VND",name:"Vietnamese Dong"},{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"JPY",name:"Japanese Yen"}],ep=({open:t,onClose:r,onSubmit:n,initialData:s,isEditing:a=!1,isLoading:o=!1,error:i})=>{const{accountId:l}=Nt(),{control:c,handleSubmit:d,reset:u,formState:{errors:m}}=ds({resolver:Ts(Zf),defaultValues:{name:(s==null?void 0:s.name)||"",baseCurrency:(s==null?void 0:s.baseCurrency)||"VND",accountId:(s==null?void 0:s.accountId)||l}});Wt.useEffect(()=>{t&&u({name:(s==null?void 0:s.name)||"",baseCurrency:(s==null?void 0:s.baseCurrency)||"VND",accountId:(s==null?void 0:s.accountId)||l})},[t,s,u,l]),Wt.useEffect(()=>{t&&s&&u({name:s.name||"",baseCurrency:s.baseCurrency||"VND",accountId:s.accountId||l})},[s,t,u,l]);const x=g=>{n(g)},f=()=>{u(),r()};return e.jsxs(zt,{open:t,onClose:f,maxWidth:"sm",fullWidth:!0,children:[e.jsx(lr,{children:a?"Edit Portfolio":"Create New Portfolio"}),e.jsxs("form",{onSubmit:d(x),children:[e.jsxs(Yt,{children:[i&&e.jsx(We,{severity:"error",sx:{mb:2},children:i}),e.jsxs(v,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Qe,{name:"name",control:c,render:({field:g})=>{var b;return e.jsx(He,{...g,label:"Portfolio Name",fullWidth:!0,error:!!m.name,helperText:(b=m.name)==null?void 0:b.message,placeholder:"e.g., Growth Portfolio, Retirement Fund"})}}),e.jsx(Qe,{name:"baseCurrency",control:c,render:({field:g})=>e.jsxs(Ze,{fullWidth:!0,error:!!m.baseCurrency,children:[e.jsx(Je,{children:"Base Currency"}),e.jsx(et,{...g,label:"Base Currency",children:Jf.map(b=>e.jsxs(de,{value:b.code,children:[b.code," - ",b.name]},b.code))}),m.baseCurrency&&e.jsx(v,{component:"span",sx:{color:"error.main",fontSize:"0.75rem",mt:.5,ml:1.75},children:m.baseCurrency.message})]})}),e.jsx(Qe,{name:"accountId",control:c,render:({field:g})=>{var b;return e.jsx(He,{...g,label:"Account ID",fullWidth:!0,error:!!m.accountId,helperText:(b=m.accountId)==null?void 0:b.message,placeholder:"Enter account ID",disabled:a})}})]})]}),e.jsxs(qt,{children:[e.jsx(Se,{onClick:f,disabled:o,children:"Cancel"}),e.jsx(Se,{type:"submit",variant:"contained",disabled:o,children:o?"Saving...":a?"Update":"Create"})]})]})]})},tp=()=>{const t=bn(),[r,n]=p.useState(!1),[s,a]=p.useState(null),[o,i]=p.useState(""),{accountId:l}=Nt(),{portfolios:c,createPortfolio:d,updatePortfolio:u,isCreating:m,isUpdating:x,isDeleting:f}=bs(l),g=y=>{t(`/portfolios/${y}`)},b=y=>{a(y),n(!0)},S=()=>{a(null),i(""),n(!0)},j=()=>{n(!1),a(null),i("")},w=async y=>{var A,I;try{i(""),s?await u({id:s,data:y}):await d(y),j()}catch(M){i(((I=(A=M.response)==null?void 0:A.data)==null?void 0:I.message)||"An error occurred. Please try again.")}},T=()=>{if(!s)return;const y=c.find(A=>A.portfolioId===s);if(y)return{name:y.name,baseCurrency:y.baseCurrency,accountId:y.accountId}};return e.jsxs(v,{children:[e.jsx(Xf,{onViewPortfolio:g,onEditPortfolio:b,onCreatePortfolio:S}),e.jsx(ep,{open:r,onClose:j,onSubmit:w,initialData:T(),isEditing:!!s,isLoading:m||x,error:o}),(m||x||f)&&e.jsxs(We,{severity:"info",sx:{mt:2},children:[m&&"Creating portfolio...",x&&"Updating portfolio...",f&&"Deleting portfolio..."]})]})},Na=(t,r)=>wt(["trades",t,r],()=>we.getTrades(t,r),{enabled:!!t,staleTime:2*60*1e3}),Ki=()=>{const t=Qt();return Ht(r=>we.createTrade(r),{onSuccess:r=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Ke.success("Trade created successfully!")},onError:r=>{var n,s;Ke.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to create trade")}})},rp=()=>{const t=Qt();return Ht(({id:r,data:n})=>we.updateTrade(r,n),{onSuccess:()=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Ke.success("Trade updated successfully!")},onError:r=>{var n,s;Ke.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to update trade")}})},np=()=>{const t=Qt();return Ht(r=>we.deleteTrade(r),{onSuccess:()=>{t.invalidateQueries("trades"),t.invalidateQueries("portfolios"),Ke.success("Trade deleted successfully!")},onError:r=>{var n,s;Ke.error(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to delete trade")}})},sp=t=>wt(["tradeDetails",t],()=>we.getTradeDetails(t),{enabled:!!t,staleTime:2*60*1e3}),ap=(t,r)=>{const n=["tradeAnalysis",t,(r==null?void 0:r.timeframe)||"ALL",(r==null?void 0:r.metric)||"pnl"];return wt(n,()=>we.getTradeAnalysis(t,r),{enabled:!!t,staleTime:0,cacheTime:0})},yo=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],op=({data:t,baseCurrency:r})=>{const n=Object.entries(t.allocation).map(([o,i],l)=>({name:o.toUpperCase(),value:i.percentage,marketValue:i.value,color:yo[l%yo.length]})),s=({active:o,payload:i})=>{if(o&&i&&i.length){const l=i[0].payload;return e.jsxs(v,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:l.name}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Allocation: ",Ce(l.value)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Market Value: ",Q(l.marketValue,r)]})]})}return null},a=({payload:o})=>e.jsx(v,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:1,mt:2},children:o.map((i,l)=>e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(v,{sx:{width:12,height:12,backgroundColor:i.color,borderRadius:"50%"}}),e.jsxs(h,{variant:"caption",children:[i.value," (",Ce(i.payload.value),")"]})]},l))});return!t||Object.keys(t.allocation).length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset allocation data available"})}):e.jsx(v,{sx:{height:400},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(Yo,{children:[e.jsx(qo,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,value:i})=>`${o}: ${Ce(i)}`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:n.map((o,i)=>e.jsx(jn,{fill:o.color},`cell-${i}`))}),e.jsx(Et,{content:e.jsx(s,{})}),e.jsx(ja,{content:e.jsx(a,{})})]})})})},ip=({portfolioId:t,baseCurrency:r,title:n="Performance Chart",showReferenceLine:s=!1,referenceValue:a=0})=>{const[o,i]=p.useState("1Y"),[l,c]=p.useState([]),[d,u]=p.useState(!0),[m,x]=p.useState(null);p.useEffect(()=>{(async()=>{try{u(!0),x(null);const S=await we.getPortfolioPerformanceHistory(t,o);c(S.data)}catch(S){console.error("Error fetching performance data:",S),x("Failed to load performance data")}finally{u(!1)}})()},[t,o]);const f=({active:b,payload:S,label:j})=>b&&S&&S.length?e.jsxs(rt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ss(j)}),e.jsxs(h,{variant:"body2",color:"primary",children:["Value: ",Q(S[0].value,r)]})]}):null,g=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric"});return d?e.jsxs(rt,{sx:{p:3,textAlign:"center"},children:[e.jsx(Ye,{}),e.jsx(h,{variant:"body2",sx:{mt:2},children:"Loading performance data..."})]}):m?e.jsx(rt,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"error",children:m})}):l.length===0?e.jsx(rt,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):e.jsxs(rt,{sx:{p:3},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"h6",children:n}),e.jsxs(Ze,{size:"small",sx:{minWidth:120},children:[e.jsx(Je,{children:"Timeframe"}),e.jsxs(et,{value:o,label:"Timeframe",onChange:b=>i(b.target.value),children:[e.jsx(de,{value:"1M",children:"1 Month"}),e.jsx(de,{value:"3M",children:"3 Months"}),e.jsx(de,{value:"6M",children:"6 Months"}),e.jsx(de,{value:"1Y",children:"1 Year"}),e.jsx(de,{value:"2Y",children:"2 Years"}),e.jsx(de,{value:"5Y",children:"5 Years"}),e.jsx(de,{value:"ALL",children:"All Time"})]})]})]}),e.jsx(v,{sx:{height:400},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(us,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"date",tickFormatter:g,tick:{fontSize:12}}),e.jsx(ar,{tickFormatter:b=>Q(b,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Et,{content:e.jsx(f,{})}),e.jsx(Qr,{type:"monotone",dataKey:"value",stroke:"#1976d2",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#1976d2",strokeWidth:2}}),s&&e.jsx(Qo,{y:a,stroke:"#ff9800",strokeDasharray:"5 5",label:{value:"Reference",position:"top"}})]})})})]})},lp=({data:t,baseCurrency:r,title:n="Risk-Return Analysis"})=>{const s=({active:a,payload:o})=>{if(a&&o&&o.length){const i=o[0].payload;return e.jsxs(rt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:i.assetType.toUpperCase()}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Return: ",Ce(i.return)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Risk: ",Ce(i.risk)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",Q(i.value,r)]})]})}return null};return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No risk-return data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Risk vs Return analysis of portfolio assets"}),e.jsx(v,{sx:{height:400},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(jc,{margin:{top:20,right:20,bottom:20,left:20},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{type:"number",dataKey:"risk",name:"Risk",tickFormatter:a=>Ce(a),label:{value:"Risk (Volatility)",position:"insideBottom",offset:-10}}),e.jsx(ar,{type:"number",dataKey:"return",name:"Return",tickFormatter:a=>Ce(a),label:{value:"Return",angle:-90,position:"insideLeft"}}),e.jsx(Et,{content:e.jsx(s,{})}),e.jsx(wc,{data:t,fill:"#1976d2",children:t.map((a,o)=>e.jsx(jn,{fill:a.color},`cell-${o}`))})]})})})]})},cp=({data:t,baseCurrency:r,title:n="Asset Performance Comparison"})=>{const s=({active:a,payload:o})=>{if(a&&o&&o.length){const i=o[0].payload;return e.jsxs(rt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:i.assetType.toUpperCase()}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Performance: ",Ce(i.performance)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",Q(i.value,r)]})]})}return null};return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No performance data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Performance comparison across asset types"}),e.jsx(v,{sx:{height:400},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(Ko,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"assetType",tick:{fontSize:12},tickFormatter:a=>a.toUpperCase()}),e.jsx(ar,{tickFormatter:a=>Ce(a),tick:{fontSize:12}}),e.jsx(Et,{content:e.jsx(s,{})}),e.jsx(Kn,{dataKey:"performance",radius:[4,4,0,0],children:t.map((a,o)=>e.jsx(jn,{fill:a.color},`cell-${o}`))})]})})})]})},dp=({data:t,title:r="Risk Metrics Dashboard"})=>{if(!t)return e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No risk metrics data available"})});const n=(d,u)=>{switch(u){case"var":return d>.1?"high":d>.05?"medium":"low";case"volatility":return d>.3?"high":d>.15?"medium":"low";case"drawdown":return d>.2?"high":d>.1?"medium":"low";case"ratio":return d>1.5?"excellent":d>1?"good":d>.5?"fair":"poor";default:return"medium"}},s=d=>{switch(d){case"excellent":case"low":return"success";case"good":return"info";case"fair":case"medium":return"warning";case"poor":case"high":return"error";default:return"default"}},a=d=>{switch(d){case"excellent":case"good":case"low":return e.jsx(Bn,{color:"success"});case"fair":case"medium":return e.jsx(zr,{color:"warning"});case"poor":case"high":return e.jsx(kt,{color:"error"});default:return e.jsx(Bl,{})}},o=n(t.var95||0,"var"),i=n(t.volatility||0,"volatility"),l=n(t.maxDrawdown||0,"drawdown"),c=n(t.sharpeRatio||0,"ratio");return e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Comprehensive risk analysis and portfolio health metrics"}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Value at Risk (95%)"}),a(o)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:Ce(t.var95)}),e.jsx(ke,{label:o.toUpperCase(),color:s(o),size:"small",sx:{mt:1}})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Sharpe Ratio"}),a(c)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:(t.sharpeRatio||0).toFixed(2)}),e.jsx(ke,{label:c.toUpperCase(),color:s(c),size:"small",sx:{mt:1}})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Volatility"}),a(i)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:Ce(t.volatility)}),e.jsx(ke,{label:i.toUpperCase(),color:s(i),size:"small",sx:{mt:1}})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Max Drawdown"}),a(l)]}),e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:Ce(t.maxDrawdown)}),e.jsx(ke,{label:l.toUpperCase(),color:s(l),size:"small",sx:{mt:1}})]})})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Additional Risk Metrics"}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"VaR (99%)"}),e.jsx(h,{variant:"h6",children:Ce(t.var99)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Beta"}),e.jsx(h,{variant:"h6",children:(t.beta||0).toFixed(2)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Calmar Ratio"}),e.jsx(h,{variant:"h6",children:(t.calmarRatio||0).toFixed(2)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sortino Ratio"}),e.jsx(h,{variant:"h6",children:(t.sortinoRatio||0).toFixed(2)})]})})]})]})})})]})]})},up=({data:t,title:r="Diversification Heatmap"})=>{const n=Array.from(new Set(t.flatMap(l=>[l.asset1,l.asset2]))),a=(()=>{const l={};return n.forEach(c=>{l[c]={},n.forEach(d=>{c===d?l[c][d]=1:l[c][d]=0})}),t.forEach(c=>{l[c.asset1][c.asset2]=c.correlation,l[c.asset2][c.asset1]=c.correlation}),l})(),o=l=>{const c=Math.abs(l);return c>=.8?"#d32f2f":c>=.6?"#f57c00":c>=.4?"#fbc02d":c>=.2?"#689f38":"#388e3c"},i=l=>Math.abs(l)*100;return n.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No diversification data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Correlation matrix showing diversification between asset types"}),e.jsx(v,{sx:{overflowX:"auto"},children:e.jsxs(v,{sx:{minWidth:400},children:[e.jsxs(N,{container:!0,spacing:.5,sx:{mb:1},children:[e.jsx(N,{item:!0,xs:2,children:e.jsx(v,{sx:{height:40}})}),n.map(l=>e.jsx(N,{item:!0,xs:2,children:e.jsx(v,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})},l))]}),n.map(l=>e.jsxs(N,{container:!0,spacing:.5,sx:{mb:.5},children:[e.jsx(N,{item:!0,xs:2,children:e.jsx(v,{sx:{height:40,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",color:"text.secondary"},children:l.toUpperCase()})}),n.map(c=>{const d=a[l][c],u=l===c;return e.jsx(N,{item:!0,xs:2,children:e.jsx(Ar,{title:`${l} vs ${c}: ${Ce(d)}`,arrow:!0,children:e.jsx(v,{sx:{height:40,backgroundColor:u?"#e0e0e0":o(d),opacity:u?.3:i(d)/100,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease","&:hover":{opacity:1,transform:"scale(1.05)"},borderRadius:1,border:"1px solid rgba(0,0,0,0.1)"},children:!u&&e.jsx(h,{variant:"caption",sx:{color:"white",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:Ce(d)})})})},`${l}-${c}`)})]},l))]})}),e.jsxs(v,{sx:{mt:3,display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Correlation Level:"}),[{label:"High (≥0.8)",color:"#d32f2f"},{label:"Medium-High (0.6-0.8)",color:"#f57c00"},{label:"Medium (0.4-0.6)",color:"#fbc02d"},{label:"Low (0.2-0.4)",color:"#689f38"},{label:"Very Low (<0.2)",color:"#388e3c"}].map((l,c)=>e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(v,{sx:{width:16,height:16,backgroundColor:l.color,borderRadius:.5,border:"1px solid rgba(0,0,0,0.1)"}}),e.jsx(h,{variant:"caption",color:"text.secondary",children:l.label})]},c))]})]})},hp=({data:t,title:r="Asset Allocation Timeline"})=>{const n=["#1976d2","#dc004e","#9c27b0","#ff9800","#4caf50","#f44336","#00bcd4","#8bc34a"],s=t.length>0?Array.from(new Set(t.flatMap(i=>Object.keys(i).filter(l=>l!=="date")))):[],a=({active:i,payload:l,label:c})=>i&&l&&l.length?e.jsxs(rt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ss(c)}),l.map((d,u)=>e.jsxs(h,{variant:"body2",color:d.color,children:[d.dataKey,": ",Ce(d.value)]},u))]}):null,o=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No timeline data available"})}):s.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset allocation data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Historical allocation changes over time"}),e.jsx(v,{sx:{height:400},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(us,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"date",tickFormatter:o,tick:{fontSize:12}}),e.jsx(ar,{tickFormatter:i=>`${i}%`,tick:{fontSize:12},domain:[0,100]}),e.jsx(Et,{content:e.jsx(a,{})}),e.jsx(ja,{}),s.map((i,l)=>e.jsx(Qr,{type:"monotone",dataKey:i,stroke:n[l%n.length],strokeWidth:2,dot:!1,activeDot:{r:4}},i))]})})})]})},mp=({data:t,baseCurrency:r,title:n="Cash Flow Analysis"})=>{const s=({active:d,payload:u,label:m})=>d&&u&&u.length?e.jsxs(rt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ss(m)}),u.map((x,f)=>e.jsxs(h,{variant:"body2",color:x.color,children:[x.name,": ",Q(x.value,r)]},f))]}):null,a=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=t.reduce((d,u)=>d+u.inflow,0),i=t.reduce((d,u)=>d+u.outflow,0),l=o-i,c=t.length>0?t[t.length-1].cumulativeBalance:0;return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No cash flow data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Portfolio cash flow analysis and balance tracking"}),e.jsxs(N,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(gt,{color:"success"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Inflow"})]}),e.jsx(h,{variant:"h6",color:"success.main",fontWeight:"bold",children:Q(o,r)})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(kt,{color:"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Outflow"})]}),e.jsx(h,{variant:"h6",color:"error.main",fontWeight:"bold",children:Q(i,r)})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(rr,{color:l>=0?"success":"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Net Flow"})]}),e.jsx(h,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:Q(l,r)})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(rr,{color:"primary"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Current Balance"})]}),e.jsx(h,{variant:"h6",color:"primary.main",fontWeight:"bold",children:Q(c,r)})]})})})]}),e.jsx(v,{sx:{height:400,mb:3},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(Cc,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(ar,{tickFormatter:d=>Q(d,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Et,{content:e.jsx(s,{})}),e.jsx(Kn,{dataKey:"inflow",fill:"#4caf50",name:"Inflow"}),e.jsx(Kn,{dataKey:"outflow",fill:"#f44336",name:"Outflow"}),e.jsx(Qr,{type:"monotone",dataKey:"netFlow",stroke:"#1976d2",strokeWidth:3,name:"Net Flow",dot:{fill:"#1976d2",strokeWidth:2,r:4}})]})})}),e.jsxs(v,{sx:{height:300},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Cumulative Balance"}),e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(Pc,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(ar,{tickFormatter:d=>Q(d,r,{compact:!0}),tick:{fontSize:12}}),e.jsx(Et,{content:e.jsx(s,{})}),e.jsx(Sc,{type:"monotone",dataKey:"cumulativeBalance",stroke:"#1976d2",fill:"#1976d2",fillOpacity:.3,strokeWidth:2})]})})]})]})},fp=({data:t,title:r="Benchmark Comparison",benchmarkName:n="Market Index"})=>{const s=({active:u,payload:m,label:x})=>{var f,g;return u&&m&&m.length?e.jsxs(rt,{sx:{p:2,boxShadow:3},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:Ss(x)}),m.map((b,S)=>e.jsxs(h,{variant:"body2",color:b.color,children:[b.name,": ",Ce(b.value)]},S)),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Difference: ",Ce(((g=(f=m[0])==null?void 0:f.payload)==null?void 0:g.difference)||0)]})]}):null},a=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),o=t.length>0?t[t.length-1].portfolio-t[0].portfolio:0,i=t.length>0?t[t.length-1].benchmark-t[0].benchmark:0,l=o-i,c=Math.sqrt(t.reduce((u,m)=>u+Math.pow(m.difference,2),0)/t.length),d=c>0?l/c:0;return t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No benchmark data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:r}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Portfolio performance vs ",n]}),e.jsxs(N,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(gt,{color:"primary"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Portfolio Return"})]}),e.jsx(h,{variant:"h6",color:o>=0?"success.main":"error.main",fontWeight:"bold",children:Ce(o)})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(gt,{color:"info"}),e.jsxs(h,{variant:"subtitle2",color:"text.secondary",children:[n," Return"]})]}),e.jsx(h,{variant:"h6",color:i>=0?"success.main":"error.main",fontWeight:"bold",children:Ce(i)})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Ul,{color:l>=0?"success":"error"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Excess Return"})]}),e.jsx(h,{variant:"h6",color:l>=0?"success.main":"error.main",fontWeight:"bold",children:Ce(l)}),e.jsx(ke,{label:l>=0?"OUTPERFORMING":"UNDERPERFORMING",color:l>=0?"success":"error",size:"small",sx:{mt:1}})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(kt,{color:"warning"}),e.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Tracking Error"})]}),e.jsx(h,{variant:"h6",color:"warning.main",fontWeight:"bold",children:Ce(c)})]})})})]}),e.jsx(v,{sx:{height:400,mb:3},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(us,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"date",tickFormatter:a,tick:{fontSize:12}}),e.jsx(ar,{tickFormatter:u=>Ce(u),tick:{fontSize:12}}),e.jsx(Et,{content:e.jsx(s,{})}),e.jsx(ja,{}),e.jsx(Qr,{type:"monotone",dataKey:"portfolio",stroke:"#1976d2",strokeWidth:3,name:"Portfolio",dot:!1,activeDot:{r:6}}),e.jsx(Qr,{type:"monotone",dataKey:"benchmark",stroke:"#dc004e",strokeWidth:2,name:n,dot:!1,activeDot:{r:4},strokeDasharray:"5 5"}),e.jsx(Qo,{y:0,stroke:"#666",strokeDasharray:"2 2"})]})})}),e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Risk-Adjusted Metrics"}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Information Ratio:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:d.toFixed(2)})]}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Beta:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:(Math.random()*.8+.6).toFixed(2)})]}),e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Alpha:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",children:Ce(l*.7)})]})]})})}),e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Performance Summary"}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:l>=0?`Your portfolio has outperformed the ${n} by ${Ce(l)} over the selected period.`:`Your portfolio has underperformed the ${n} by ${Ce(Math.abs(l))} over the selected period.`}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["The tracking error of ",Ce(c)," indicates the level of deviation from the benchmark."]})]})})})]})]})},vo=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98"],pp=({data:t,baseCurrency:r,title:n="Asset Detail Summary"})=>{if(!t||t.length===0)return e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset detail data available"})});const s=t.map((o,i)=>({symbol:o.symbol,name:o.name,assetType:o.assetType,totalValue:o.totalValue,percentage:o.percentage,unrealizedPl:o.unrealizedPl,unrealizedPlPercentage:o.unrealizedPlPercentage,color:vo[i%vo.length]})),a=({active:o,payload:i})=>{if(o&&i&&i.length){const l=i[0].payload;return e.jsxs(v,{sx:{p:2,backgroundColor:"white",borderRadius:1,boxShadow:3,border:"1px solid #e0e0e0"},children:[e.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[l.symbol," - ",l.name]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Allocation: ",Ce(l.percentage||0)]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Value: ",Q(l.totalValue,r)]}),e.jsxs(h,{variant:"body2",color:(l.unrealizedPl||0)>=0?"success.main":"error.main",children:["P&L: ",Q(l.unrealizedPl||0,r)," (",Ce(l.unrealizedPlPercentage||0),")"]})]})}return null};return!t||t.length===0?e.jsx(v,{sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",color:"text.secondary",children:"No asset detail data available"})}):e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:n}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Individual asset holdings with values and performance"}),e.jsx(v,{sx:{height:300,mb:3},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(Ko,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(nr,{strokeDasharray:"3 3"}),e.jsx(sr,{dataKey:"symbol",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(ar,{tickFormatter:o=>Ce(o),tick:{fontSize:12}}),e.jsx(Et,{content:e.jsx(a,{})}),e.jsx(Kn,{dataKey:"percentage",radius:[4,4,0,0],children:s.map((o,i)=>e.jsx(jn,{fill:o.color},`cell-${i}`))})]})})}),e.jsx(N,{container:!0,spacing:2,children:s.map((o,i)=>e.jsx(N,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(ge,{children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(v,{sx:{width:16,height:16,backgroundColor:o.color,borderRadius:"50%",mr:1}}),e.jsx(h,{variant:"subtitle2",fontWeight:"bold",children:o.symbol})]}),e.jsx(ke,{label:o.assetType,size:"small",color:"primary",variant:"outlined"})]}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:o.name}),e.jsx(h,{variant:"h6",color:"primary",fontWeight:"bold",gutterBottom:!0,children:Ce(o.percentage)}),e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:Q(o.totalValue,r)}),e.jsxs(v,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"P&L:"}),e.jsx(h,{variant:"body2",fontWeight:"bold",color:o.unrealizedPl>=0?"success.main":"error.main",children:Q(o.unrealizedPl,r)})]}),e.jsx(h,{variant:"caption",color:o.unrealizedPl>=0?"success.main":"error.main",sx:{display:"block",textAlign:"right"},children:Ce(o.unrealizedPlPercentage)})]})})},i))}),e.jsx(v,{sx:{mt:3,p:3,backgroundColor:"#f5f5f5",borderRadius:2},children:e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:t.length})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:Q(t.reduce((o,i)=>o+i.totalValue,0),r)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),e.jsx(h,{variant:"h5",fontWeight:"bold",color:t.reduce((o,i)=>o+i.unrealizedPl,0)>=0?"success.main":"error.main",children:Q(t.reduce((o,i)=>o+i.unrealizedPl,0),r)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset Types"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:new Set(t.map(o=>o.assetType)).size})]})})]})})]})};function xp(t){return typeof t=="string"}function gp(t,r,n){return t===void 0||xp(t)?r:{...r,ownerState:{...r.ownerState,...n}}}function yp(t,r=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(s=>s.match(/^on[A-Z]/)&&typeof t[s]=="function"&&!r.includes(s)).forEach(s=>{n[s]=t[s]}),n}function Ma(t,r,n){return typeof t=="function"?t(r,n):t}function vp(...t){const r=p.useRef(void 0),n=p.useCallback(s=>{const a=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,l=i(s);return typeof l=="function"?l:()=>{i(null)}}return o.current=s,()=>{o.current=null}});return()=>{a.forEach(o=>o==null?void 0:o())}},t);return p.useMemo(()=>t.every(s=>s==null)?null:s=>{r.current&&(r.current(),r.current=void 0),s!=null&&(r.current=n(s))},t)}function bo(t){if(t===void 0)return{};const r={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{r[n]=t[n]}),r}function bp(t){const{getSlotProps:r,additionalProps:n,externalSlotProps:s,externalForwardedProps:a,className:o}=t;if(!r){const f=ut(n==null?void 0:n.className,o,a==null?void 0:a.className,s==null?void 0:s.className),g={...n==null?void 0:n.style,...a==null?void 0:a.style,...s==null?void 0:s.style},b={...n,...a,...s};return f.length>0&&(b.className=f),Object.keys(g).length>0&&(b.style=g),{props:b,internalRef:void 0}}const i=yp({...a,...s}),l=bo(s),c=bo(a),d=r(i),u=ut(d==null?void 0:d.className,n==null?void 0:n.className,o,a==null?void 0:a.className,s==null?void 0:s.className),m={...d==null?void 0:d.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...s==null?void 0:s.style},x={...d,...n,...c,...l};return u.length>0&&(x.className=u),Object.keys(m).length>0&&(x.style=m),{props:x,internalRef:d.ref}}function it(t){var m;const{elementType:r,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:a=!1,...o}=t,i=a?{}:Ma(n,s),{props:l,internalRef:c}=bp({...o,externalSlotProps:i}),d=vp(c,i==null?void 0:i.ref,(m=t.additionalProps)==null?void 0:m.ref);return gp(r,{...l,ref:d},s)}const dn=(t,r)=>t.length!==r.length?!1:r.every(n=>t.includes(n)),jp=({openTo:t,defaultOpenTo:r,views:n,defaultViews:s})=>{const a=n??s;let o;if(t!=null)o=t;else if(a.includes(r))o=r;else if(a.length>0)o=a[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:a,openTo:o}},ns=(t,r,n)=>{let s=r;return s=t.setHours(s,t.getHours(n)),s=t.setMinutes(s,t.getMinutes(n)),s=t.setSeconds(s,t.getSeconds(n)),s},xn=({date:t,disableFuture:r,disablePast:n,maxDate:s,minDate:a,isDateDisabled:o,utils:i,timezone:l})=>{const c=ns(i,i.dateWithTimezone(void 0,l),t);n&&i.isBefore(a,c)&&(a=c),r&&i.isAfter(s,c)&&(s=c);let d=t,u=t;for(i.isBefore(t,a)&&(d=a,u=null),i.isAfter(t,s)&&(u&&(u=s),d=null);d||u;){if(d&&i.isAfter(d,s)&&(d=null),u&&i.isBefore(u,a)&&(u=null),d){if(!o(d))return d;d=i.addDays(d,1)}if(u){if(!o(u))return u;u=i.addDays(u,-1)}}return null},wp=(t,r)=>r==null||!t.isValid(r)?null:r,At=(t,r,n)=>r==null||!t.isValid(r)?n:r,Cp=(t,r,n)=>!t.isValid(r)&&r!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(r,n),Ra=(t,r)=>{const s=[t.startOfYear(r)];for(;s.length<12;){const a=s[s.length-1];s.push(t.addMonths(a,1))}return s},Gi=(t,r,n)=>n==="date"?t.startOfDay(t.dateWithTimezone(void 0,r)):t.dateWithTimezone(void 0,r),Pp=["year","month","day"],jo=t=>Pp.includes(t),Ea=(t,{format:r,views:n},s)=>{if(r!=null)return r;const a=t.formats;return dn(n,["year"])?a.year:dn(n,["month"])?a.month:dn(n,["day"])?a.dayOfMonth:dn(n,["month","year"])?`${a.month} ${a.year}`:dn(n,["day","month"])?`${a.month} ${a.dayOfMonth}`:s?/en/.test(t.getCurrentLocaleCode())?a.normalDateWithWeekday:a.normalDate:a.keyboardDate},Sp=(t,r)=>{const n=t.startOfWeek(r);return[0,1,2,3,4,5,6].map(s=>t.addDays(n,s))},Tp=["hours","minutes","seconds"],Dp=t=>Tp.includes(t),wo=(t,r)=>r.getHours(t)*3600+r.getMinutes(t)*60+r.getSeconds(t),kp=(t,r)=>(n,s)=>t?r.isAfter(n,s):wo(n,r)>wo(s,r),Ft={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},Ap=t=>Math.max(...t.map(r=>{var n;return(n=Ft[r.type])!=null?n:1})),un=(t,r,n)=>{if(r===Ft.year)return t.startOfYear(n);if(r===Ft.month)return t.startOfMonth(n);if(r===Ft.day)return t.startOfDay(n);let s=n;return r<Ft.minutes&&(s=t.setMinutes(s,0)),r<Ft.seconds&&(s=t.setSeconds(s,0)),r<Ft.milliseconds&&(s=t.setMilliseconds(s,0)),s},Np=({props:t,utils:r,granularity:n,timezone:s,getTodayDate:a})=>{var o;let i=a?a():un(r,n,Gi(r,s));t.minDate!=null&&r.isAfterDay(t.minDate,i)&&(i=un(r,n,t.minDate)),t.maxDate!=null&&r.isBeforeDay(t.maxDate,i)&&(i=un(r,n,t.maxDate));const l=kp((o=t.disableIgnoringDatePartForTimeValidation)!=null?o:!1,r);return t.minTime!=null&&l(t.minTime,i)&&(i=un(r,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:ns(r,i,t.minTime))),t.maxTime!=null&&l(i,t.maxTime)&&(i=un(r,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:ns(r,i,t.maxTime))),i},Xi=(t,r)=>{const n=t.formatTokenMap[r];if(n==null)throw new Error([`MUI: The token "${r}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},Mp=t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},Ds=(t,r,n)=>{const s=[],a=t.dateWithTimezone(void 0,r),o=t.startOfWeek(a),i=t.endOfWeek(a);let l=o;for(;t.isBefore(l,i);)s.push(l),l=t.addDays(l,1);return s.map(c=>t.formatByString(c,n))},Zi=(t,r,n,s)=>{switch(n){case"month":return Ra(t,t.dateWithTimezone(void 0,r)).map(a=>t.formatByString(a,s));case"weekDay":return Ds(t,r,s);case"meridiem":{const a=t.dateWithTimezone(void 0,r);return[t.startOfDay(a),t.endOfDay(a)].map(o=>t.formatByString(o,s))}default:return[]}},Ji=(t,r,n)=>{let s=r;for(s=Number(s).toString();s.length<n;)s=`0${s}`;return s},el=(t,r,n,s,a)=>{if(a.type==="day"&&a.contentType==="digit-with-letter"){const i=t.setDate(s.longestMonth,n);return t.formatByString(i,a.format)}const o=n.toString();return a.hasLeadingZerosInInput?Ji(t,o,a.maxLength):o},Rp=(t,r,n,s,a,o,i)=>{const l=Mp(s),c=s==="Home",d=s==="End",u=n.value===""||c||d,m=()=>{const f=a[n.type]({currentDate:o,format:n.format,contentType:n.contentType}),g=w=>el(t,r,w,f,n),b=n.type==="minutes"&&i!=null&&i.minutesStep?i.minutesStep:1;let j=parseInt(n.value,10)+l*b;if(u){if(n.type==="year"&&!d&&!c)return t.formatByString(t.dateWithTimezone(void 0,r),n.format);l>0||c?j=f.minimum:j=f.maximum}return j%b!==0&&((l<0||c)&&(j+=b-(b+j)%b),(l>0||d)&&(j-=j%b)),j>f.maximum?g(f.minimum+(j-f.maximum-1)%(f.maximum-f.minimum+1)):j<f.minimum?g(f.maximum-(f.minimum-j-1)%(f.maximum-f.minimum+1)):g(j)},x=()=>{const f=Zi(t,r,n.type,n.format);if(f.length===0)return n.value;if(u)return l>0||c?f[0]:f[f.length-1];const b=(f.indexOf(n.value)+f.length+l)%f.length;return f[b]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?m():x()},Ia=(t,r)=>{let n=t.value||t.placeholder;const s=r==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return r==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(n=Number(n).toString()),["input-rtl","input-ltr"].includes(r)&&t.contentType==="digit"&&!s&&n.length===1&&(n=`${n}‎`),r==="input-rtl"&&(n=`⁨${n}⁩`),n},Br=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),tl=(t,r)=>{let n=0,s=r?1:0;const a=[];for(let o=0;o<t.length;o+=1){const i=t[o],l=Ia(i,r?"input-rtl":"input-ltr"),c=`${i.startSeparator}${l}${i.endSeparator}`,d=Br(c).length,u=c.length,m=Br(l),x=s+l.indexOf(m[0])+i.startSeparator.length,f=x+m.length;a.push(V({},i,{start:n,end:n+d,startInInput:x,endInInput:f})),n+=d,s+=u}return a},Ep=(t,r,n,s,a)=>{switch(s.type){case"year":return n.fieldYearPlaceholder({digitAmount:t.formatByString(t.dateWithTimezone(void 0,r),a).length,format:a});case"month":return n.fieldMonthPlaceholder({contentType:s.contentType,format:a});case"day":return n.fieldDayPlaceholder({format:a});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:s.contentType,format:a});case"hours":return n.fieldHoursPlaceholder({format:a});case"minutes":return n.fieldMinutesPlaceholder({format:a});case"seconds":return n.fieldSecondsPlaceholder({format:a});case"meridiem":return n.fieldMeridiemPlaceholder({format:a});default:return a}},Co=(t,r,n,s)=>t.formatByString(t.parse(r,n),s),rl=(t,r,n)=>t.formatByString(t.dateWithTimezone(void 0,r),n).length===4,nl=(t,r,n,s,a)=>{if(n!=="digit")return!1;const o=t.dateWithTimezone(void 0,r);switch(s){case"year":return rl(t,r,a)?t.formatByString(t.setYear(o,1),a)==="0001":t.formatByString(t.setYear(o,2001),a)==="01";case"month":return t.formatByString(t.startOfYear(o),a).length>1;case"day":return t.formatByString(t.startOfMonth(o),a).length>1;case"weekDay":return t.formatByString(t.startOfWeek(o),a).length>1;case"hours":return t.formatByString(t.setHours(o,1),a).length>1;case"minutes":return t.formatByString(t.setMinutes(o,1),a).length>1;case"seconds":return t.formatByString(t.setSeconds(o,1),a).length>1;default:throw new Error("Invalid section type")}},Ip=(t,r)=>{const n=[],{start:s,end:a}=t.escapedCharacters,o=new RegExp(`(\\${s}[^\\${a}]*\\${a})+`,"g");let i=null;for(;i=o.exec(r);)n.push({start:i.index,end:o.lastIndex-1});return n},Po=(t,r,n,s,a,o,i,l)=>{let c="";const d=[],u=t.date(),m=T=>{if(T==="")return null;const y=Xi(t,T),A=nl(t,r,y.contentType,y.type,T),I=i?A:y.contentType==="digit",M=a!=null&&t.isValid(a);let O=M?t.formatByString(a,T):"",E=null;if(I)if(A)E=O===""?t.formatByString(u,T).length:O.length;else{if(y.maxLength==null)throw new Error(`MUI: The token ${T} should have a 'maxDigitNumber' property on it's adapter`);E=y.maxLength,M&&(O=Ji(t,O,E))}return d.push(V({},y,{format:T,maxLength:E,value:O,placeholder:Ep(t,r,n,y,T),hasLeadingZeros:A,hasLeadingZerosInFormat:A,hasLeadingZerosInInput:I,startSeparator:d.length===0?c:"",endSeparator:"",modified:!1})),null};let x=10,f=s,g=t.expandFormat(s);for(;g!==f;)if(f=g,g=t.expandFormat(f),x-=1,x<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const b=g,S=Ip(t,b),j=new RegExp(`^(${Object.keys(t.formatTokenMap).sort((T,y)=>y.length-T.length).join("|")})`,"g");let w="";for(let T=0;T<b.length;T+=1){const y=S.find(E=>E.start<=T&&E.end>=T),A=b[T],I=y!=null,M=`${w}${b.slice(T)}`,O=j.test(M);!I&&A.match(/([A-Za-z]+)/)&&O?(w=M.slice(0,j.lastIndex),T+=j.lastIndex-1):I&&(y==null?void 0:y.start)===T||(y==null?void 0:y.end)===T||(m(w),w="",d.length===0?c+=A:d[d.length-1].endSeparator+=A)}return m(w),d.map(T=>{const y=A=>{let I=A;return l&&I!==null&&I.includes(" ")&&(I=`⁩${I}⁦`),o==="spacious"&&["/",".","-"].includes(I)&&(I=` ${I} `),I};return T.startSeparator=y(T.startSeparator),T.endSeparator=y(T.endSeparator),T})},Op=(t,r)=>{const n=r.some(l=>l.type==="day"),s=[],a=[];for(let l=0;l<r.length;l+=1){const c=r[l];n&&c.type==="weekDay"||(s.push(c.format),a.push(Ia(c,"non-input")))}const o=s.join(" "),i=a.join(" ");return t.parse(i,o)},_p=(t,r)=>{const s=t.map(a=>{const o=Ia(a,r?"input-rtl":"input-ltr");return`${a.startSeparator}${o}${a.endSeparator}`}).join("");return r?`⁦${s}⁩`:s},Fp=(t,r)=>{const n=t.dateWithTimezone(void 0,r),s=t.endOfYear(n),a=t.endOfDay(n),{maxDaysInMonth:o,longestMonth:i}=Ra(t,n).reduce((l,c)=>{const d=t.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:rl(t,r,l)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(s)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&t.isValid(l)?t.getDaysInMonth(l):o,longestMonth:i}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=Ds(t,r,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=t.getHours(a);return t.formatByString(t.endOfDay(n),l)!==c.toString()?{minimum:1,maximum:Number(t.formatByString(t.startOfDay(n),l))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:t.getMinutes(a)}),seconds:()=>({minimum:0,maximum:t.getSeconds(a)}),meridiem:()=>({minimum:0,maximum:0})}},Lp=(t,r,n,s,a)=>{switch(n.type){case"year":return t.setYear(a,t.getYear(s));case"month":return t.setMonth(a,t.getMonth(s));case"weekDay":{const o=Ds(t,r,n.format),i=t.formatByString(s,n.format),l=o.indexOf(i),d=o.indexOf(n.value)-l;return t.addDays(s,d)}case"day":return t.setDate(a,t.getDate(s));case"meridiem":{const o=t.getHours(s)<12,i=t.getHours(a);return o&&i>=12?t.addHours(a,-12):!o&&i<12?t.addHours(a,12):a}case"hours":return t.setHours(a,t.getHours(s));case"minutes":return t.setMinutes(a,t.getMinutes(s));case"seconds":return t.setSeconds(a,t.getSeconds(s));default:return a}},So={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},To=(t,r,n,s,a,o)=>[...s].sort((i,l)=>So[i.type]-So[l.type]).reduce((i,l)=>!o||l.modified?Lp(t,r,l,n,i):i,a),Vp=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,$p=(t,r)=>{const n={};if(!r)return t.forEach((c,d)=>{const u=d===0?null:d-1,m=d===t.length-1?null:d+1;n[d]={leftIndex:u,rightIndex:m}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const s={},a={};let o=0,i=0,l=t.length-1;for(;l>=0;){i=t.findIndex((c,d)=>{var u;return d>=o&&((u=c.endSeparator)==null?void 0:u.includes(" "))&&c.endSeparator!==" / "}),i===-1&&(i=t.length-1);for(let c=i;c>=o;c-=1)a[c]=l,s[l]=c,l-=1;o=i+1}return t.forEach((c,d)=>{const u=a[d],m=u===0?null:s[u-1],x=u===t.length-1?null:s[u+1];n[d]={leftIndex:m,rightIndex:x}}),{neighbors:n,startIndex:s[0],endIndex:s[t.length-1]}},Bp=["value","referenceDate"],ir={emptyValue:null,getTodayValue:Gi,getInitialReferenceValue:t=>{let{value:r,referenceDate:n}=t,s=Ve(t,Bp);return r!=null&&s.utils.isValid(r)?r:n??Np(s)},cleanValue:wp,areValuesEqual:Cp,isSameError:(t,r)=>t===r,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,r)=>r==null||!t.isValid(r)?null:t.getTimezone(r),setTimezone:(t,r,n)=>n==null?null:t.setTimezone(n,r)},Up={updateReferenceValue:(t,r,n)=>r==null||!t.isValid(r)?n:r,getSectionsFromValue:(t,r,n,s,a)=>!t.isValid(r)&&!!n?n:tl(a(r),s),getValueStrFromSections:_p,getActiveDateManager:(t,r)=>({date:r.value,referenceDate:r.referenceValue,getSections:n=>n,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:n==null||!t.isValid(n)?r.referenceValue:n})}),parseValueStr:(t,r,n)=>n(t.trim(),r)},Wp=["localeText"],ca=p.createContext(null),Xt=function(r){var n;const{localeText:s}=r,a=Ve(r,Wp),{utils:o,localeText:i}=(n=p.useContext(ca))!=null?n:{utils:void 0,localeText:void 0},l=ct({props:a,name:"MuiLocalizationProvider"}),{children:c,dateAdapter:d,dateFormats:u,dateLibInstance:m,adapterLocale:x,localeText:f}=l,g=p.useMemo(()=>V({},f,i,s),[f,i,s]),b=p.useMemo(()=>{if(!d)return o||null;const w=new d({locale:x,formats:u,instance:m});if(!w.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return w},[d,x,u,m,o]),S=p.useMemo(()=>b?{minDate:b.date("1900-01-01T00:00:00.000"),maxDate:b.date("2099-12-31T00:00:00.000")}:null,[b]),j=p.useMemo(()=>({utils:b,defaultDates:S,localeText:g}),[S,b,g]);return e.jsx(ca.Provider,{value:j,children:c})},Hp=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:V({},t)}}}}),sl={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(t,r,n)=>`Select ${t}. ${r===null?"No time selected":`Selected time is ${n.format(r,"fullTime")}`}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:(t,r)=>t!==null&&r.isValid(t)?`Choose date, selected date is ${r.format(t,"fullDate")}`:"Choose date",openTimePickerDialogue:(t,r)=>t!==null&&r.isValid(t)?`Choose time, selected time is ${r.format(t,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},zp=sl;Hp(sl);const Or=()=>{const t=p.useContext(ca);if(t===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const r=p.useMemo(()=>V({},zp,t.localeText),[t.localeText]);return p.useMemo(()=>V({},t,{localeText:r}),[t,r])},qe=()=>Or().utils,kn=()=>Or().defaultDates,yr=()=>Or().localeText,ks=t=>{const r=qe(),n=p.useRef();return n.current===void 0&&(n.current=r.dateWithTimezone(void 0,t)),n.current};function Yp(t){return yt("MuiPickersToolbar",t)}vt("MuiPickersToolbar",["root","content"]);const qp=t=>{const{classes:r,isLandscape:n}=t;return ft({root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]},Yp,r)},Qp=Ne("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>V({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3)},r.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),Kp=Ne("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(t,r)=>r.content})(({ownerState:t})=>{var r;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:t.isLandscape?"flex-start":"space-between",flexDirection:t.isLandscape?(r=t.landscapeDirection)!=null?r:"column":"row",flex:1,alignItems:t.isLandscape?"flex-start":"center"}}),Gp=p.forwardRef(function(r,n){const s=ct({props:r,name:"MuiPickersToolbar"}),{children:a,className:o,toolbarTitle:i,hidden:l,titleId:c}=s,d=s,u=qp(d);return l?null:e.jsxs(Qp,{ref:n,className:ut(u.root,o),ownerState:d,children:[e.jsx(h,{color:"text.secondary",variant:"overline",id:c,children:i}),e.jsx(Kp,{className:u.content,ownerState:d,children:a})]})});function Xp(t){return yt("MuiDatePickerToolbar",t)}vt("MuiDatePickerToolbar",["root","title"]);const Zp=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Jp=t=>{const{classes:r}=t;return ft({root:["root"],title:["title"]},Xp,r)},ex=Ne(Gp,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),tx=Ne(h,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(t,r)=>r.title})(({ownerState:t})=>V({},t.isLandscape&&{margin:"auto 16px auto auto"})),rx=p.forwardRef(function(r,n){const s=ct({props:r,name:"MuiDatePickerToolbar"}),{value:a,isLandscape:o,toolbarFormat:i,toolbarPlaceholder:l="––",views:c,className:d}=s,u=Ve(s,Zp),m=qe(),x=yr(),f=Jp(s),g=p.useMemo(()=>{if(!a)return l;const S=Ea(m,{format:i,views:c},!0);return m.formatByString(a,S)},[a,i,l,m,c]),b=s;return e.jsx(ex,V({ref:n,toolbarTitle:x.datePickerToolbarTitle,isLandscape:o,className:ut(f.root,d)},u,{children:e.jsx(tx,{variant:"h4",align:o?"left":"center",ownerState:b,className:f.title,children:g})}))}),al=t=>{if(t!==void 0)return Object.keys(t).reduce((r,n)=>V({},r,{[`${n.slice(0,1).toLowerCase()}${n.slice(1)}`]:t[n]}),{})};function ol(t,r){var n,s,a,o;const i=qe(),l=kn(),c=ct({props:t,name:r}),d=p.useMemo(()=>{var m;return((m=c.localeText)==null?void 0:m.toolbarTitle)==null?c.localeText:V({},c.localeText,{datePickerToolbarTitle:c.localeText.toolbarTitle})},[c.localeText]),u=(n=c.slots)!=null?n:al(c.components);return V({},c,{localeText:d},jp({views:c.views,openTo:c.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(s=c.disableFuture)!=null?s:!1,disablePast:(a=c.disablePast)!=null?a:!1,minDate:At(i,c.minDate,l.minDate),maxDate:At(i,c.maxDate,l.maxDate),slots:V({toolbar:rx},u),slotProps:(o=c.slotProps)!=null?o:c.componentsProps})}const nx=xr(e.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),sx=xr(e.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),ax=xr(e.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),ox=xr(e.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");xr(e.jsxs(p.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");xr(e.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");xr(e.jsxs(p.Fragment,{children:[e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const ix=xr(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function lx(t){return yt("MuiPickersArrowSwitcher",t)}vt("MuiPickersArrowSwitcher",["root","spacer","button"]);const cx=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],dx=["ownerState"],ux=["ownerState"],hx=Ne("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex"}),mx=Ne("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(t,r)=>r.spacer})(({theme:t})=>({width:t.spacing(3)})),Do=Ne(St,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(t,r)=>r.button})(({ownerState:t})=>V({},t.hidden&&{visibility:"hidden"})),fx=t=>{const{classes:r}=t;return ft({root:["root"],spacer:["spacer"],button:["button"]},lx,r)},px=p.forwardRef(function(r,n){var s,a,o,i;const c=Ir().direction==="rtl",d=ct({props:r,name:"MuiPickersArrowSwitcher"}),{children:u,className:m,slots:x,slotProps:f,isNextDisabled:g,isNextHidden:b,onGoToNext:S,nextLabel:j,isPreviousDisabled:w,isPreviousHidden:T,onGoToPrevious:y,previousLabel:A}=d,I=Ve(d,cx),M=d,O=fx(M),E={isDisabled:g,isHidden:b,goTo:S,label:j},k={isDisabled:w,isHidden:T,goTo:y,label:A},C=(s=x==null?void 0:x.previousIconButton)!=null?s:Do,P=it({elementType:C,externalSlotProps:f==null?void 0:f.previousIconButton,additionalProps:{size:"medium",title:k.label,"aria-label":k.label,disabled:k.isDisabled,edge:"end",onClick:k.goTo},ownerState:V({},M,{hidden:k.isHidden}),className:O.button}),F=(a=x==null?void 0:x.nextIconButton)!=null?a:Do,_=it({elementType:F,externalSlotProps:f==null?void 0:f.nextIconButton,additionalProps:{size:"medium",title:E.label,"aria-label":E.label,disabled:E.isDisabled,edge:"start",onClick:E.goTo},ownerState:V({},M,{hidden:E.isHidden}),className:O.button}),R=(o=x==null?void 0:x.leftArrowIcon)!=null?o:sx,Y=it({elementType:R,externalSlotProps:f==null?void 0:f.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),U=Ve(Y,dx),$=(i=x==null?void 0:x.rightArrowIcon)!=null?i:ax,H=it({elementType:$,externalSlotProps:f==null?void 0:f.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),q=Ve(H,ux);return e.jsxs(hx,V({ref:n,className:ut(O.root,m),ownerState:M},I,{children:[e.jsx(C,V({},P,{children:c?e.jsx($,V({},q)):e.jsx(R,V({},U))})),u?e.jsx(h,{variant:"subtitle1",component:"span",children:u}):e.jsx(mx,{className:O.spacer,ownerState:M}),e.jsx(F,V({},_,{children:c?e.jsx(R,V({},U)):e.jsx($,V({},q))}))]}))}),yn=36,As=2,Ns=320,xx=280,Oa=334,gx=Ne(zt)({[`& .${Ba.container}`]:{outline:0},[`& .${Ba.paper}`]:{outline:0,minWidth:Ns}}),yx=Ne(Yt)({"&:first-of-type":{padding:0}});function vx(t){var r,n;const{children:s,onDismiss:a,open:o,slots:i,slotProps:l}=t,c=(r=i==null?void 0:i.dialog)!=null?r:gx,d=(n=i==null?void 0:i.mobileTransition)!=null?n:is;return e.jsx(c,V({open:o,onClose:a},l==null?void 0:l.dialog,{TransitionComponent:d,TransitionProps:l==null?void 0:l.mobileTransition,PaperComponent:i==null?void 0:i.mobilePaper,PaperProps:l==null?void 0:l.mobilePaper,children:e.jsx(yx,{children:s})}))}function bx(t){return yt("MuiPickersPopper",t)}vt("MuiPickersPopper",["root","paper"]);function jx(t,r){return Array.isArray(r)?r.every(n=>t.indexOf(n)!==-1):t.indexOf(r)!==-1}const wx=(t,r)=>n=>{(n.key==="Enter"||n.key===" ")&&(t(n),n.preventDefault(),n.stopPropagation())},ss=(t=document)=>{const r=t.activeElement;return r?r.shadowRoot?ss(r.shadowRoot):r:null},Cx="@media (pointer: fine)",Px="@media (prefers-reduced-motion: reduce)",Wr=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),ko=Wr&&Wr[1]?parseInt(Wr[1],10):null,Ao=Wr&&Wr[2]?parseInt(Wr[2],10):null,Sx=ko&&ko<10||Ao&&Ao<13||!1,il=()=>ha(Px,{defaultMatches:!1})||Sx,Tx=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Dx=t=>{const{classes:r}=t;return ft({root:["root"],paper:["paper"]},bx,r)},kx=Ne(zl,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>({zIndex:t.zIndex.modal})),Ax=Ne(rt,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(t,r)=>r.paper})(({ownerState:t})=>V({outline:0,transformOrigin:"top center"},t.placement.includes("top")&&{transformOrigin:"bottom center"}));function Nx(t,r){return r.documentElement.clientWidth<t.clientX||r.documentElement.clientHeight<t.clientY}function Mx(t,r){const n=p.useRef(!1),s=p.useRef(!1),a=p.useRef(null),o=p.useRef(!1);p.useEffect(()=>{if(!t)return;function c(){o.current=!0}return document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),()=>{document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),o.current=!1}},[t]);const i=je(c=>{if(!o.current)return;const d=s.current;s.current=!1;const u=Fs(a.current);if(!a.current||"clientX"in c&&Nx(c,u))return;if(n.current){n.current=!1;return}let m;c.composedPath?m=c.composedPath().indexOf(a.current)>-1:m=!u.documentElement.contains(c.target)||a.current.contains(c.target),!m&&!d&&r(c)}),l=()=>{s.current=!0};return p.useEffect(()=>{if(t){const c=Fs(a.current),d=()=>{n.current=!0};return c.addEventListener("touchstart",i),c.addEventListener("touchmove",d),()=>{c.removeEventListener("touchstart",i),c.removeEventListener("touchmove",d)}}},[t,i]),p.useEffect(()=>{if(t){const c=Fs(a.current);return c.addEventListener("click",i),()=>{c.removeEventListener("click",i),s.current=!1}}},[t,i]),[a,l,l]}const Rx=p.forwardRef((t,r)=>{const{PaperComponent:n,popperPlacement:s,ownerState:a,children:o,paperSlotProps:i,paperClasses:l,onPaperClick:c,onPaperTouchStart:d}=t,u=Ve(t,Tx),m=V({},a,{placement:s}),x=it({elementType:n,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:r},className:l,ownerState:m});return e.jsx(n,V({},u,x,{onClick:f=>{var g;c(f),(g=x.onClick)==null||g.call(x,f)},onTouchStart:f=>{var g;d(f),(g=x.onTouchStart)==null||g.call(x,f)},ownerState:m,children:o}))});function Ex(t){var r,n,s,a;const o=ct({props:t,name:"MuiPickersPopper"}),{anchorEl:i,children:l,containerRef:c=null,shouldRestoreFocus:d,onBlur:u,onDismiss:m,open:x,role:f,placement:g,slots:b,slotProps:S,reduceAnimations:j}=o;p.useEffect(()=>{function H(q){x&&(q.key==="Escape"||q.key==="Esc")&&m()}return document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}},[m,x]);const w=p.useRef(null);p.useEffect(()=>{f==="tooltip"||d&&!d()||(x?w.current=ss(document):w.current&&w.current instanceof HTMLElement&&setTimeout(()=>{w.current instanceof HTMLElement&&w.current.focus()}))},[x,f,d]);const[T,y,A]=Mx(x,u??m),I=p.useRef(null),M=Nr(I,c),O=Nr(M,T),E=o,k=Dx(E),C=il(),P=j??C,F=H=>{H.key==="Escape"&&(H.stopPropagation(),m())},_=((r=b==null?void 0:b.desktopTransition)!=null?r:P)?is:Wl,R=(n=b==null?void 0:b.desktopTrapFocus)!=null?n:Hl,Y=(s=b==null?void 0:b.desktopPaper)!=null?s:Ax,U=(a=b==null?void 0:b.popper)!=null?a:kx,$=it({elementType:U,externalSlotProps:S==null?void 0:S.popper,additionalProps:{transition:!0,role:f,open:x,anchorEl:i,placement:g,onKeyDown:F},className:k.root,ownerState:o});return e.jsx(U,V({},$,{children:({TransitionProps:H,placement:q})=>e.jsx(R,V({open:x,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:f==="tooltip",isEnabled:()=>!0},S==null?void 0:S.desktopTrapFocus,{children:e.jsx(_,V({},H,S==null?void 0:S.desktopTransition,{children:e.jsx(Rx,{PaperComponent:Y,ownerState:E,popperPlacement:q,ref:O,onPaperClick:y,onPaperTouchStart:A,paperClasses:k.paper,paperSlotProps:S==null?void 0:S.desktopPaper,children:l})}))}))}))}const _a=({timezone:t,value:r,defaultValue:n,onChange:s,valueManager:a})=>{var o,i;const l=qe(),c=p.useRef(n),d=(o=r??c.current)!=null?o:a.emptyValue,u=p.useMemo(()=>a.getTimezone(l,d),[l,a,d]),m=je(b=>u==null?b:a.setTimezone(l,u,b)),x=(i=t??u)!=null?i:"default",f=p.useMemo(()=>a.setTimezone(l,x,d),[a,l,x,d]),g=je((b,...S)=>{const j=m(b);s==null||s(j,...S)});return{value:f,handleValueChange:g,timezone:x}},Fa=({name:t,timezone:r,value:n,defaultValue:s,onChange:a,valueManager:o})=>{const[i,l]=pr({name:t,state:"value",controlled:n,default:s??o.emptyValue}),c=je((d,...u)=>{l(d),a==null||a(d,...u)});return _a({timezone:r,value:i,defaultValue:void 0,onChange:c,valueManager:o})};function ll(t,r,n,s){const{value:a,onError:o}=t,i=Or(),l=p.useRef(s),c=r({adapter:i,value:a,props:t});return p.useEffect(()=>{o&&!n(c,l.current)&&o(c,a),l.current=c},[n,o,l,c,a]),c}const Ix=t=>{const r=qe(),n=yr(),s=Or(),o=Ir().direction==="rtl",{valueManager:i,fieldValueManager:l,validator:c,internalProps:d,internalProps:{value:u,defaultValue:m,referenceDate:x,onChange:f,format:g,formatDensity:b="dense",selectedSections:S,onSelectedSectionsChange:j,shouldRespectLeadingZeros:w=!1,timezone:T}}=t,{timezone:y,value:A,handleValueChange:I}=_a({timezone:T,value:u,defaultValue:m,onChange:f,valueManager:i}),M=p.useMemo(()=>Fp(r,y),[r,y]),O=p.useCallback((J,D=null)=>l.getSectionsFromValue(r,J,D,o,Z=>Po(r,y,n,g,Z,b,w,o)),[l,g,n,o,w,r,b,y]),E=p.useMemo(()=>l.getValueStrFromSections(O(i.emptyValue),o),[l,O,i.emptyValue,o]),[k,C]=p.useState(()=>{const J=O(A),D={sections:J,value:A,referenceValue:i.emptyValue,tempValueStrAndroid:null},Z=Ap(J),ye=i.getInitialReferenceValue({referenceDate:x,value:A,utils:r,props:d,granularity:Z,timezone:y});return V({},D,{referenceValue:ye})}),[P,F]=pr({controlled:S,default:null,name:"useField",state:"selectedSectionIndexes"}),_=J=>{F(J),j==null||j(J),C(D=>V({},D,{selectedSectionQuery:null}))},R=p.useMemo(()=>{if(P==null)return null;if(P==="all")return{startIndex:0,endIndex:k.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof P=="number")return{startIndex:P,endIndex:P};if(typeof P=="string"){const J=k.sections.findIndex(D=>D.type===P);return{startIndex:J,endIndex:J}}return P},[P,k.sections]),Y=({value:J,referenceValue:D,sections:Z})=>{if(C(B=>V({},B,{sections:Z,value:J,referenceValue:D,tempValueStrAndroid:null})),i.areValuesEqual(r,k.value,J))return;const ye={validationError:c({adapter:s,value:J,props:V({},d,{value:J,timezone:y})})};I(J,ye)},U=(J,D)=>{const Z=[...k.sections];return Z[J]=V({},Z[J],{value:D,modified:!0}),tl(Z,o)},$=()=>{Y({value:i.emptyValue,referenceValue:k.referenceValue,sections:O(i.emptyValue)})},H=()=>{if(R==null)return;const J=k.sections[R.startIndex],D=l.getActiveDateManager(r,k,J),ye=D.getSections(k.sections).filter(Te=>Te.value!=="").length===(J.value===""?0:1),B=U(R.startIndex,""),K=ye?null:r.date(new Date("")),le=D.getNewValuesFromNewActiveDate(K);(K!=null&&!r.isValid(K))!=(D.date!=null&&!r.isValid(D.date))?Y(V({},le,{sections:B})):C(Te=>V({},Te,le,{sections:B,tempValueStrAndroid:null}))},q=J=>{const D=(B,K)=>{const le=r.parse(B,g);if(le==null||!r.isValid(le))return null;const Te=Po(r,y,n,g,le,b,w,o);return To(r,y,le,Te,K,!1)},Z=l.parseValueStr(J,k.referenceValue,D),ye=l.updateReferenceValue(r,Z,k.referenceValue);Y({value:Z,referenceValue:ye,sections:O(Z,k.sections)})},G=({activeSection:J,newSectionValue:D,shouldGoToNextSection:Z})=>{Z&&R&&R.startIndex<k.sections.length-1?_(R.startIndex+1):R&&R.startIndex!==R.endIndex&&_(R.startIndex);const ye=l.getActiveDateManager(r,k,J),B=U(R.startIndex,D),K=ye.getSections(B),le=Op(r,K);let Te,xe;if(le!=null&&r.isValid(le)){const be=To(r,y,le,K,ye.referenceDate,!0);Te=ye.getNewValuesFromNewActiveDate(be),xe=!0}else Te=ye.getNewValuesFromNewActiveDate(le),xe=(le!=null&&!r.isValid(le))!=(ye.date!=null&&!r.isValid(ye.date));return xe?Y(V({},Te,{sections:B})):C(be=>V({},be,Te,{sections:B,tempValueStrAndroid:null}))},ee=J=>C(D=>V({},D,{tempValueStrAndroid:J}));return p.useEffect(()=>{const J=O(k.value);C(D=>V({},D,{sections:J}))},[g,r.locale]),p.useEffect(()=>{let J=!1;i.areValuesEqual(r,k.value,A)?J=i.getTimezone(r,k.value)!==i.getTimezone(r,A):J=!0,J&&C(D=>V({},D,{value:A,referenceValue:l.updateReferenceValue(r,A,D.referenceValue),sections:O(A)}))},[A]),{state:k,selectedSectionIndexes:R,setSelectedSections:_,clearValue:$,clearActiveSection:H,updateSectionValue:G,updateValueFromValueStr:q,setTempAndroidValueStr:ee,sectionsValueBoundaries:M,placeholder:E,timezone:y}},Ox=5e3,$r=t=>t.saveQuery!=null,_x=({sections:t,updateSectionValue:r,sectionsValueBoundaries:n,setTempAndroidValueStr:s,timezone:a})=>{const o=qe(),[i,l]=p.useState(null),c=je(()=>l(null));p.useEffect(()=>{var f;i!=null&&((f=t[i.sectionIndex])==null?void 0:f.type)!==i.sectionType&&c()},[t,i,c]),p.useEffect(()=>{if(i!=null){const f=setTimeout(()=>c(),Ox);return()=>{window.clearTimeout(f)}}return()=>{}},[i,c]);const d=({keyPressed:f,sectionIndex:g},b,S)=>{const j=f.toLowerCase(),w=t[g];if(i!=null&&(!S||S(i.value))&&i.sectionIndex===g){const y=`${i.value}${j}`,A=b(y,w);if(!$r(A))return l({sectionIndex:g,value:y,sectionType:w.type}),A}const T=b(j,w);return $r(T)&&!T.saveQuery?(c(),null):(l({sectionIndex:g,value:j,sectionType:w.type}),$r(T)?null:T)},u=f=>{const g=(j,w,T)=>{const y=w.filter(A=>A.toLowerCase().startsWith(T));return y.length===0?{saveQuery:!1}:{sectionValue:y[0],shouldGoToNextSection:y.length===1}},b=(j,w,T,y)=>{const A=I=>Zi(o,a,w.type,I);if(w.contentType==="letter")return g(w.format,A(w.format),j);if(T&&y!=null&&Xi(o,T).contentType==="letter"){const I=A(T),M=g(T,I,j);return $r(M)?{saveQuery:!1}:V({},M,{sectionValue:y(M.sectionValue,I)})}return{saveQuery:!1}};return d(f,(j,w)=>{switch(w.type){case"month":{const T=y=>Co(o,y,o.formats.month,w.format);return b(j,w,o.formats.month,T)}case"weekDay":{const T=(y,A)=>A.indexOf(y).toString();return b(j,w,o.formats.weekday,T)}case"meridiem":return b(j,w);default:return{saveQuery:!1}}})},m=f=>{const g=(S,j)=>{const w=+`${S}`,T=n[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(w>T.maximum)return{saveQuery:!1};if(w<T.minimum)return{saveQuery:!0};const y=+`${S}0`>T.maximum||S.length===T.maximum.toString().length;return{sectionValue:el(o,a,w,T,j),shouldGoToNextSection:y}};return d(f,(S,j)=>{if(j.contentType==="digit"||j.contentType==="digit-with-letter")return g(S,j);if(j.type==="month"){nl(o,a,"digit","month","MM");const w=g(S,{type:j.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if($r(w))return w;const T=Co(o,w.sectionValue,"MM",j.format);return V({},w,{sectionValue:T})}if(j.type==="weekDay"){const w=g(S,j);if($r(w))return w;const T=Ds(o,a,j.format)[Number(w.sectionValue)-1];return V({},w,{sectionValue:T})}return{saveQuery:!1}},S=>!Number.isNaN(Number(S)))};return{applyCharacterEditing:je(f=>{const g=t[f.sectionIndex],S=f.keyPressed!==" "&&!Number.isNaN(Number(f.keyPressed))?m(f):u(f);S==null?s(null):r({activeSection:g,newSectionValue:S.sectionValue,shouldGoToNextSection:S.shouldGoToNextSection})}),resetCharacterQuery:c}},Fx=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],Lx=t=>{const r=qe(),{state:n,selectedSectionIndexes:s,setSelectedSections:a,clearValue:o,clearActiveSection:i,updateSectionValue:l,updateValueFromValueStr:c,setTempAndroidValueStr:d,sectionsValueBoundaries:u,placeholder:m,timezone:x}=Ix(t),{inputRef:f,internalProps:g,internalProps:{readOnly:b=!1,unstableFieldRef:S,minutesStep:j},forwardedProps:{onClick:w,onKeyDown:T,onFocus:y,onBlur:A,onMouseUp:I,onPaste:M,error:O,clearable:E,onClear:k,disabled:C},fieldValueManager:P,valueManager:F,validator:_}=t,R=Ve(t.forwardedProps,Fx),{applyCharacterEditing:Y,resetCharacterQuery:U}=_x({sections:n.sections,updateSectionValue:l,sectionsValueBoundaries:u,setTempAndroidValueStr:d,timezone:x}),$=p.useRef(null),H=Nr(f,$),q=p.useRef(void 0),ee=Ir().direction==="rtl",J=p.useMemo(()=>$p(n.sections,ee),[n.sections,ee]),D=()=>{var te;if(b){a(null);return}const me=(te=$.current.selectionStart)!=null?te:0;let oe;me<=n.sections[0].startInInput||me>=n.sections[n.sections.length-1].endInInput?oe=1:oe=n.sections.findIndex(X=>X.startInInput-X.startSeparator.length>me);const ue=oe===-1?n.sections.length-1:oe-1;a(ue)},Z=je((te,...me)=>{te.isDefaultPrevented()||(w==null||w(te,...me),D())}),ye=je(te=>{I==null||I(te),te.preventDefault()}),B=je((...te)=>{y==null||y(...te);const me=$.current;window.clearTimeout(q.current),q.current=setTimeout(()=>{!me||me!==$.current||s!=null||b||(me.value.length&&Number(me.selectionEnd)-Number(me.selectionStart)===me.value.length?a("all"):D())})}),K=je((...te)=>{A==null||A(...te),a(null)}),le=je(te=>{if(M==null||M(te),b){te.preventDefault();return}const me=te.clipboardData.getData("text");if(s&&s.startIndex===s.endIndex){const oe=n.sections[s.startIndex],ue=/^[a-zA-Z]+$/.test(me),X=/^[0-9]+$/.test(me),he=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(me);if(oe.contentType==="letter"&&ue||oe.contentType==="digit"&&X||oe.contentType==="digit-with-letter"&&he){U(),l({activeSection:oe,newSectionValue:me,shouldGoToNextSection:!0}),te.preventDefault();return}if(ue||X){te.preventDefault();return}}te.preventDefault(),U(),c(me)}),Te=je(te=>{if(b)return;const me=te.target.value;if(me===""){U(),o();return}const oe=te.nativeEvent.data,ue=oe&&oe.length>1,X=ue?oe:me,he=Br(X);if(s==null||ue){c(ue?oe:he);return}let Le;if(s.startIndex===0&&s.endIndex===n.sections.length-1&&he.length===1)Le=he;else{const Me=Br(P.getValueStrFromSections(n.sections,ee));let Ue=-1,ot=-1;for(let bt=0;bt<Me.length;bt+=1)Ue===-1&&Me[bt]!==he[bt]&&(Ue=bt),ot===-1&&Me[Me.length-bt-1]!==he[he.length-bt-1]&&(ot=bt);const Tt=n.sections[s.startIndex];if(Ue<Tt.start||Me.length-ot-1>Tt.end)return;const br=he.length-Me.length+Tt.end-Br(Tt.endSeparator||"").length;Le=he.slice(Tt.start+Br(Tt.startSeparator||"").length,br)}if(Le.length===0){Vp()?d(X):(U(),i());return}Y({keyPressed:Le,sectionIndex:s.startIndex})}),xe=je(te=>{switch(T==null||T(te),!0){case(te.key==="a"&&(te.ctrlKey||te.metaKey)):{te.preventDefault(),a("all");break}case te.key==="ArrowRight":{if(te.preventDefault(),s==null)a(J.startIndex);else if(s.startIndex!==s.endIndex)a(s.endIndex);else{const me=J.neighbors[s.startIndex].rightIndex;me!==null&&a(me)}break}case te.key==="ArrowLeft":{if(te.preventDefault(),s==null)a(J.endIndex);else if(s.startIndex!==s.endIndex)a(s.startIndex);else{const me=J.neighbors[s.startIndex].leftIndex;me!==null&&a(me)}break}case te.key==="Delete":{if(te.preventDefault(),b)break;s==null||s.startIndex===0&&s.endIndex===n.sections.length-1?o():i(),U();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(te.key):{if(te.preventDefault(),b||s==null)break;const me=n.sections[s.startIndex],oe=P.getActiveDateManager(r,n,me),ue=Rp(r,x,me,te.key,u,oe.date,{minutesStep:j});l({activeSection:me,newSectionValue:ue,shouldGoToNextSection:!1});break}}});Yr(()=>{if(!$.current)return;if(s==null){$.current.scrollLeft&&($.current.scrollLeft=0);return}const te=n.sections[s.startIndex],me=n.sections[s.endIndex];let oe=te.startInInput,ue=me.endInInput;if(s.shouldSelectBoundarySelectors&&(oe-=te.startSeparator.length,ue+=me.endSeparator.length),oe!==$.current.selectionStart||ue!==$.current.selectionEnd){const X=$.current.scrollTop;$.current===ss(document)&&$.current.setSelectionRange(oe,ue),$.current.scrollTop=X}});const be=ll(V({},g,{value:n.value,timezone:x}),_,F.isSameError,F.defaultErrorState),re=p.useMemo(()=>O!==void 0?O:F.hasError(be),[F,be,O]);p.useEffect(()=>{!re&&!s&&U()},[n.referenceValue,s,re]),p.useEffect(()=>($.current&&$.current===document.activeElement&&a("all"),()=>window.clearTimeout(q.current)),[]),p.useEffect(()=>{n.tempValueStrAndroid!=null&&s!=null&&(U(),i())},[n.tempValueStrAndroid]);const Pe=p.useMemo(()=>{var te;return(te=n.tempValueStrAndroid)!=null?te:P.getValueStrFromSections(n.sections,ee)},[n.sections,P,n.tempValueStrAndroid,ee]),ze=p.useMemo(()=>s==null||n.sections[s.startIndex].contentType==="letter"?"text":"numeric",[s,n.sections]),Be=$.current&&$.current===ss(document),lt=F.areValuesEqual(r,n.value,F.emptyValue),ae=!Be&&lt;p.useImperativeHandle(S,()=>({getSections:()=>n.sections,getActiveSectionIndex:()=>{var te,me,oe;const ue=(te=$.current.selectionStart)!=null?te:0,X=(me=$.current.selectionEnd)!=null?me:0,he=!!((oe=$.current)!=null&&oe.readOnly);if(ue===0&&X===0||he)return null;const Le=ue<=n.sections[0].startInInput?1:n.sections.findIndex(Me=>Me.startInInput-Me.startSeparator.length>ue);return Le===-1?n.sections.length-1:Le-1},setSelectedSections:te=>a(te)}));const De=je((te,...me)=>{var oe;te.preventDefault(),k==null||k(te,...me),o(),$==null||(oe=$.current)==null||oe.focus(),a(0)});return V({placeholder:m,autoComplete:"off",disabled:!!C},R,{value:ae?"":Pe,inputMode:ze,readOnly:b,onClick:Z,onFocus:B,onBlur:K,onPaste:le,onChange:Te,onKeyDown:xe,onMouseUp:ye,onClear:De,error:re,ref:H,clearable:!!(E&&!lt&&!b&&!C)})},Vx=({open:t,onOpen:r,onClose:n})=>{const s=p.useRef(typeof t=="boolean").current,[a,o]=p.useState(!1);p.useEffect(()=>{if(s){if(typeof t!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");o(t)}},[s,t]);const i=p.useCallback(l=>{s||o(l),l&&r&&r(),!l&&n&&n()},[s,r,n]);return{isOpen:a,setIsOpen:i}},$x=t=>{const{action:r,hasChanged:n,dateState:s,isControlled:a}=t,o=!a&&!s.hasBeenModifiedSinceMount;return r.name==="setValueFromField"?!0:r.name==="setValueFromAction"?o&&["accept","today","clear"].includes(r.pickerAction)?!0:n(s.lastPublishedValue):r.name==="setValueFromView"&&r.selectionState!=="shallow"||r.name==="setValueFromShortcut"?o?!0:n(s.lastPublishedValue):!1},Bx=t=>{const{action:r,hasChanged:n,dateState:s,isControlled:a,closeOnSelect:o}=t,i=!a&&!s.hasBeenModifiedSinceMount;return r.name==="setValueFromAction"?i&&["accept","today","clear"].includes(r.pickerAction)?!0:n(s.lastCommittedValue):r.name==="setValueFromView"&&r.selectionState==="finish"&&o?i?!0:n(s.lastCommittedValue):r.name==="setValueFromShortcut"?r.changeImportance==="accept"&&n(s.lastCommittedValue):!1},Ux=t=>{const{action:r,closeOnSelect:n}=t;return r.name==="setValueFromAction"?!0:r.name==="setValueFromView"?r.selectionState==="finish"&&n:r.name==="setValueFromShortcut"?r.changeImportance==="accept":!1},Wx=({props:t,valueManager:r,valueType:n,wrapperVariant:s,validator:a})=>{const{onAccept:o,onChange:i,value:l,defaultValue:c,closeOnSelect:d=s==="desktop",selectedSections:u,onSelectedSectionsChange:m,timezone:x}=t,{current:f}=p.useRef(c),{current:g}=p.useRef(l!==void 0),b=qe(),S=Or(),[j,w]=pr({controlled:u,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:T,setIsOpen:y}=Vx(t),[A,I]=p.useState(()=>{let B;return l!==void 0?B=l:f!==void 0?B=f:B=r.emptyValue,{draft:B,lastPublishedValue:B,lastCommittedValue:B,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:M,handleValueChange:O}=_a({timezone:x,value:l,defaultValue:f,onChange:i,valueManager:r});ll(V({},t,{value:A.draft,timezone:M}),a,r.isSameError,r.defaultErrorState);const E=je(B=>{const K={action:B,dateState:A,hasChanged:be=>!r.areValuesEqual(b,B.value,be),isControlled:g,closeOnSelect:d},le=$x(K),Te=Bx(K),xe=Ux(K);if(I(be=>V({},be,{draft:B.value,lastPublishedValue:le?B.value:be.lastPublishedValue,lastCommittedValue:Te?B.value:be.lastCommittedValue,hasBeenModifiedSinceMount:!0})),le){const re={validationError:B.name==="setValueFromField"?B.context.validationError:a({adapter:S,value:B.value,props:V({},t,{value:B.value,timezone:M})})};B.name==="setValueFromShortcut"&&B.shortcut!=null&&(re.shortcut=B.shortcut),O(B.value,re)}Te&&o&&o(B.value),xe&&y(!1)});if(l!==void 0&&(A.lastControlledValue===void 0||!r.areValuesEqual(b,A.lastControlledValue,l))){const B=r.areValuesEqual(b,A.draft,l);I(K=>V({},K,{lastControlledValue:l},B?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const k=je(()=>{E({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),C=je(()=>{E({value:A.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),P=je(()=>{E({value:A.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),F=je(()=>{E({value:A.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),_=je(()=>{E({value:r.getTodayValue(b,M,n),name:"setValueFromAction",pickerAction:"today"})}),R=je(()=>y(!0)),Y=je(()=>y(!1)),U=je((B,K="partial")=>E({name:"setValueFromView",value:B,selectionState:K})),$=je((B,K,le)=>E({name:"setValueFromShortcut",value:B,changeImportance:K??"accept",shortcut:le})),H=je((B,K)=>E({name:"setValueFromField",value:B,context:K})),q=je(B=>{w(B),m==null||m(B)}),G={onClear:k,onAccept:C,onDismiss:P,onCancel:F,onSetToday:_,onOpen:R,onClose:Y},ee={value:A.draft,onChange:H,selectedSections:j,onSelectedSectionsChange:q},J=p.useMemo(()=>r.cleanValue(b,A.draft),[b,r,A.draft]),D={value:J,onChange:U,onClose:Y,open:T,onSelectedSectionsChange:q},ye=V({},G,{value:J,onChange:U,onSelectShortcut:$,isValid:B=>{const K=a({adapter:S,value:B,props:V({},t,{value:B,timezone:M})});return!r.hasError(K)}});return{open:T,fieldProps:ee,viewProps:D,layoutProps:ye,actions:G}};function cl({onChange:t,onViewChange:r,openTo:n,view:s,views:a,autoFocus:o,focusedView:i,onFocusedViewChange:l}){var c,d;const u=p.useRef(n),m=p.useRef(a),x=p.useRef(a.includes(n)?n:a[0]),[f,g]=pr({name:"useViews",state:"view",controlled:s,default:x.current}),b=p.useRef(o?f:null),[S,j]=pr({name:"useViews",state:"focusedView",controlled:i,default:b.current});p.useEffect(()=>{(u.current&&u.current!==n||m.current&&m.current.some(E=>!a.includes(E)))&&(g(a.includes(n)?n:a[0]),m.current=a,u.current=n)},[n,g,f,a]);const w=a.indexOf(f),T=(c=a[w-1])!=null?c:null,y=(d=a[w+1])!=null?d:null,A=je((E,k)=>{j(k?E:C=>E===C?null:C),l==null||l(E,k)}),I=je(E=>{A(E,!0),E!==f&&(g(E),r&&r(E))}),M=je(()=>{y&&I(y)}),O=je((E,k,C)=>{const P=k==="finish",F=C?a.indexOf(C)<a.length-1:!!y;if(t(E,P&&F?"partial":k,C),C&&C!==f){const R=a[a.indexOf(C)+1];R&&I(R)}else P&&M()});return{view:f,setView:I,focusedView:S,setFocusedView:A,nextView:y,previousView:T,defaultView:a.includes(n)?n:a[0],goToNextView:M,setValueAndGoToNextView:O}}const Hx=["className","sx"],zx=({props:t,propsFromPickerValue:r,additionalViewProps:n,inputRef:s,autoFocusView:a})=>{const{onChange:o,open:i,onSelectedSectionsChange:l,onClose:c}=r,{view:d,views:u,openTo:m,onViewChange:x,viewRenderers:f,timezone:g}=t,b=Ve(t,Hx),{view:S,setView:j,defaultView:w,focusedView:T,setFocusedView:y,setValueAndGoToNextView:A}=cl({view:d,views:u,openTo:m,onChange:o,onViewChange:x,autoFocus:a}),{hasUIView:I,viewModeLookup:M}=p.useMemo(()=>u.reduce((_,R)=>{let Y;return f[R]!=null?Y="UI":Y="field",_.viewModeLookup[R]=Y,Y==="UI"&&(_.hasUIView=!0),_},{hasUIView:!1,viewModeLookup:{}}),[f,u]),O=p.useMemo(()=>u.reduce((_,R)=>f[R]!=null&&Dp(R)?_+1:_,0),[f,u]),E=M[S],k=je(()=>E==="UI"),[C,P]=p.useState(E==="UI"?S:null);return C!==S&&M[S]==="UI"&&P(S),Yr(()=>{E==="field"&&i&&(c(),setTimeout(()=>{s==null||s.current.focus(),l(S)}))},[S]),Yr(()=>{if(!i)return;let _=S;E==="field"&&C!=null&&(_=C),_!==w&&M[_]==="UI"&&M[w]==="UI"&&(_=w),_!==S&&j(_),y(_,!0)},[i]),{hasUIView:I,shouldRestoreFocus:k,layoutProps:{views:u,view:C,onViewChange:j},renderCurrentView:()=>{if(C==null)return null;const _=f[C];return _==null?null:_(V({},b,n,r,{views:u,timezone:g,onChange:A,view:C,onViewChange:j,focusedView:T,onFocusedViewChange:y,showViewSwitcher:O>1,timeViewsCount:O}))}}};function No(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Yx=(t,r)=>{const[n,s]=p.useState(No);return Yr(()=>{const o=()=>{s(No())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),jx(t,["hours","minutes","seconds"])?!1:(r||n)==="landscape"},qx=({props:t,propsFromPickerValue:r,propsFromPickerViews:n,wrapperVariant:s})=>{const{orientation:a}=t,o=Yx(n.views,a);return{layoutProps:V({},n,r,{isLandscape:o,wrapperVariant:s,disabled:t.disabled,readOnly:t.readOnly})}},dl=({props:t,valueManager:r,valueType:n,wrapperVariant:s,inputRef:a,additionalViewProps:o,validator:i,autoFocusView:l})=>{const c=Wx({props:t,valueManager:r,valueType:n,wrapperVariant:s,validator:i}),d=zx({props:t,inputRef:a,additionalViewProps:o,autoFocusView:l,propsFromPickerValue:c.viewProps}),u=qx({props:t,wrapperVariant:s,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:u.layoutProps}};function ul(t){return yt("MuiPickersLayout",t)}const qs=vt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Qx=["onAccept","onClear","onCancel","onSetToday","actions"];function Kx(t){const{onAccept:r,onClear:n,onCancel:s,onSetToday:a,actions:o}=t,i=Ve(t,Qx),l=yr();if(o==null||o.length===0)return null;const c=o==null?void 0:o.map(d=>{switch(d){case"clear":return e.jsx(Se,{onClick:n,children:l.clearButtonLabel},d);case"cancel":return e.jsx(Se,{onClick:s,children:l.cancelButtonLabel},d);case"accept":return e.jsx(Se,{onClick:r,children:l.okButtonLabel},d);case"today":return e.jsx(Se,{onClick:a,children:l.todayButtonLabel},d);default:return null}});return e.jsx(qt,V({},i,{children:c}))}const Gx=["items","changeImportance","isLandscape","onChange","isValid"],Xx=["getValue"];function Zx(t){const{items:r,changeImportance:n,onChange:s,isValid:a}=t,o=Ve(t,Gx);if(r==null||r.length===0)return null;const i=r.map(l=>{let{getValue:c}=l,d=Ve(l,Xx);const u=c({isValid:a});return{label:d.label,onClick:()=>{s(u,n,d)},disabled:!a(u)}});return e.jsx(ma,V({dense:!0,sx:[{maxHeight:Oa,maxWidth:200,overflow:"auto"},...Array.isArray(o.sx)?o.sx:[o.sx]]},o,{children:i.map(l=>e.jsx(fn,{children:e.jsx(ke,V({},l))},l.label))}))}function Jx(t){return t.view!==null}const eg=t=>{const{classes:r,isLandscape:n}=t;return ft({root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},ul,r)},tg=t=>{var r,n;const{wrapperVariant:s,onAccept:a,onClear:o,onCancel:i,onSetToday:l,view:c,views:d,onViewChange:u,value:m,onChange:x,onSelectShortcut:f,isValid:g,isLandscape:b,disabled:S,readOnly:j,children:w,components:T,componentsProps:y,slots:A,slotProps:I}=t,M=A??al(T),O=I??y,E=eg(t),k=(r=M==null?void 0:M.actionBar)!=null?r:Kx,C=it({elementType:k,externalSlotProps:O==null?void 0:O.actionBar,additionalProps:{onAccept:a,onClear:o,onCancel:i,onSetToday:l,actions:s==="desktop"?[]:["cancel","accept"],className:E.actionBar},ownerState:V({},t,{wrapperVariant:s})}),P=e.jsx(k,V({},C)),F=M==null?void 0:M.toolbar,_=it({elementType:F,externalSlotProps:O==null?void 0:O.toolbar,additionalProps:{isLandscape:b,onChange:x,value:m,view:c,onViewChange:u,views:d,disabled:S,readOnly:j,className:E.toolbar},ownerState:V({},t,{wrapperVariant:s})}),R=Jx(_)&&F?e.jsx(F,V({},_)):null,Y=w,U=M==null?void 0:M.tabs,$=c&&U?e.jsx(U,V({view:c,onViewChange:u,className:E.tabs},O==null?void 0:O.tabs)):null,H=(n=M==null?void 0:M.shortcuts)!=null?n:Zx,q=it({elementType:H,externalSlotProps:O==null?void 0:O.shortcuts,additionalProps:{isValid:g,isLandscape:b,onChange:f,className:E.shortcuts},ownerState:{isValid:g,isLandscape:b,onChange:f,className:E.shortcuts,wrapperVariant:s}}),G=c&&H?e.jsx(H,V({},q)):null;return{toolbar:R,content:Y,tabs:$,actionBar:P,shortcuts:G}},rg=t=>{const{isLandscape:r,classes:n}=t;return ft({root:["root",r&&"landscape"],contentWrapper:["contentWrapper"]},ul,n)},hl=Ne("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${qs.toolbar}`]:r.isLandscape?{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${qs.shortcuts}`]:r.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:t.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${qs.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));hl.propTypes={as:L.elementType,ownerState:L.shape({isLandscape:L.bool.isRequired}).isRequired,sx:L.oneOfType([L.arrayOf(L.oneOfType([L.func,L.object,L.bool])),L.func,L.object])};const ng=Ne("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(t,r)=>r.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),ml=function(r){const n=ct({props:r,name:"MuiPickersLayout"}),{toolbar:s,content:a,tabs:o,actionBar:i,shortcuts:l}=tg(n),{sx:c,className:d,isLandscape:u,ref:m,wrapperVariant:x}=n,f=n,g=rg(f);return e.jsxs(hl,{ref:m,sx:c,className:ut(d,g.root),ownerState:f,children:[u?l:s,u?s:l,e.jsx(ng,{className:g.contentWrapper,children:x==="desktop"?e.jsxs(p.Fragment,{children:[a,o]}):e.jsxs(p.Fragment,{children:[o,a]})}),i]})};function sg(t,{disableFuture:r,maxDate:n,timezone:s}){const a=qe();return p.useMemo(()=>{const o=a.dateWithTimezone(void 0,s),i=a.startOfMonth(r&&a.isBefore(o,n)?o:n);return!a.isAfter(i,t)},[r,n,t,a,s])}function ag(t,{disablePast:r,minDate:n,timezone:s}){const a=qe();return p.useMemo(()=>{const o=a.dateWithTimezone(void 0,s),i=a.startOfMonth(r&&a.isAfter(o,n)?o:n);return!a.isBefore(i,t)},[r,n,t,a,s])}const fl=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],og=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],ig=["minDateTime","maxDateTime"],lg=[...fl,...og,...ig],pl=t=>lg.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{}),cg=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],dg=(t,r)=>{const n=V({},t),s={},a=o=>{n.hasOwnProperty(o)&&(s[o]=n[o],delete n[o])};return cg.forEach(a),fl.forEach(a),{forwardedProps:n,internalProps:s}},Ms=({props:t,value:r,adapter:n})=>{if(r===null)return null;const{shouldDisableDate:s,shouldDisableMonth:a,shouldDisableYear:o,disablePast:i,disableFuture:l,timezone:c}=t,d=n.utils.dateWithTimezone(void 0,c),u=At(n.utils,t.minDate,n.defaultDates.minDate),m=At(n.utils,t.maxDate,n.defaultDates.maxDate);switch(!0){case!n.utils.isValid(r):return"invalidDate";case!!(s&&s(r)):return"shouldDisableDate";case!!(a&&a(r)):return"shouldDisableMonth";case!!(o&&o(r)):return"shouldDisableYear";case!!(l&&n.utils.isAfterDay(r,d)):return"disableFuture";case!!(i&&n.utils.isBeforeDay(r,d)):return"disablePast";case!!(u&&n.utils.isBeforeDay(r,u)):return"minDate";case!!(m&&n.utils.isAfterDay(r,m)):return"maxDate";default:return null}};function ug(t){return yt("MuiPickersDay",t)}const jr=vt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),hg=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],mg=t=>{const{selected:r,disableMargin:n,disableHighlightToday:s,today:a,disabled:o,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:c}=t,d=i&&!l;return ft({root:["root",r&&!d&&"selected",o&&"disabled",!n&&"dayWithMargin",!s&&a&&"today",i&&l&&"dayOutsideMonth",d&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},ug,c)},xl=({theme:t,ownerState:r})=>V({},t.typography.caption,{width:yn,height:yn,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:qr(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:qr(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${jr.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${jr.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${jr.disabled}:not(.${jr.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${jr.disabled}&.${jr.selected}`]:{opacity:.6}},!r.disableMargin&&{margin:`0 ${As}px`},r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&{color:(t.vars||t).palette.text.secondary},!r.disableHighlightToday&&r.today&&{[`&:not(.${jr.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}),gl=(t,r)=>{const{ownerState:n}=t;return[r.root,!n.disableMargin&&r.dayWithMargin,!n.disableHighlightToday&&n.today&&r.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&r.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&r.hiddenDaySpacingFiller]},fg=Ne(Yl,{name:"MuiPickersDay",slot:"Root",overridesResolver:gl})(xl),pg=Ne("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:gl})(({theme:t,ownerState:r})=>V({},xl({theme:t,ownerState:r}),{opacity:0,pointerEvents:"none"})),hn=()=>{},xg=p.forwardRef(function(r,n){const s=ct({props:r,name:"MuiPickersDay"}),{autoFocus:a=!1,className:o,day:i,disabled:l=!1,disableHighlightToday:c=!1,disableMargin:d=!1,isAnimating:u,onClick:m,onDaySelect:x,onFocus:f=hn,onBlur:g=hn,onKeyDown:b=hn,onMouseDown:S=hn,onMouseEnter:j=hn,outsideCurrentMonth:w,selected:T=!1,showDaysOutsideCurrentMonth:y=!1,children:A,today:I=!1}=s,M=Ve(s,hg),O=V({},s,{autoFocus:a,disabled:l,disableHighlightToday:c,disableMargin:d,selected:T,showDaysOutsideCurrentMonth:y,today:I}),E=mg(O),k=qe(),C=p.useRef(null),P=Nr(C,n);Yr(()=>{a&&!l&&!u&&!w&&C.current.focus()},[a,l,u,w]);const F=R=>{S(R),w&&R.preventDefault()},_=R=>{l||x(i),w&&R.currentTarget.focus(),m&&m(R)};return w&&!y?e.jsx(pg,{className:ut(E.root,E.hiddenDaySpacingFiller,o),ownerState:O,role:M.role}):e.jsx(fg,V({className:ut(E.root,o),ref:P,centerRipple:!0,disabled:l,tabIndex:T?0:-1,onKeyDown:R=>b(R,i),onFocus:R=>f(R,i),onBlur:R=>g(R,i),onMouseEnter:R=>j(R,i),onClick:_,onMouseDown:F},M,{ownerState:O,children:A||k.format(i,"dayOfMonth")}))}),gg=p.memo(xg),yg=t=>yt("MuiPickersSlideTransition",t),Dt=vt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),vg=["children","className","reduceAnimations","slideDirection","transKey","classes"],bg=t=>{const{classes:r,slideDirection:n}=t,s={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return ft(s,yg,r)},jg=Ne(Lo,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,r)=>[r.root,{[`.${Dt["slideEnter-left"]}`]:r["slideEnter-left"]},{[`.${Dt["slideEnter-right"]}`]:r["slideEnter-right"]},{[`.${Dt.slideEnterActive}`]:r.slideEnterActive},{[`.${Dt.slideExit}`]:r.slideExit},{[`.${Dt["slideExitActiveLeft-left"]}`]:r["slideExitActiveLeft-left"]},{[`.${Dt["slideExitActiveLeft-right"]}`]:r["slideExitActiveLeft-right"]}]})(({theme:t})=>{const r=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Dt["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Dt["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Dt.slideEnterActive}`]:{transform:"translate(0%)",transition:r},[`& .${Dt.slideExit}`]:{transform:"translate(0%)"},[`& .${Dt["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:r,zIndex:0},[`& .${Dt["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:r,zIndex:0}}});function wg(t){const r=ct({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:s,reduceAnimations:a,transKey:o}=r,i=Ve(r,vg),l=bg(r),c=Ir();if(a)return e.jsx("div",{className:ut(l.root,s),children:n});const d={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return e.jsx(jg,{className:ut(l.root,s),childFactory:u=>p.cloneElement(u,{classNames:d}),role:"presentation",children:e.jsx(ql,V({mountOnEnter:!0,unmountOnExit:!0,timeout:c.transitions.duration.complex,classNames:d},i,{children:n}),o)})}const yl=({shouldDisableDate:t,shouldDisableMonth:r,shouldDisableYear:n,minDate:s,maxDate:a,disableFuture:o,disablePast:i,timezone:l})=>{const c=Or();return p.useCallback(d=>Ms({adapter:c,value:d,props:{shouldDisableDate:t,shouldDisableMonth:r,shouldDisableYear:n,minDate:s,maxDate:a,disableFuture:o,disablePast:i,timezone:l}})!==null,[c,t,r,n,s,a,o,i,l])},Cg=t=>yt("MuiDayCalendar",t);vt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const Pg=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],Sg=["ownerState"],Tg=t=>{const{classes:r}=t;return ft({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},Cg,r)},vl=(yn+As*2)*6,Dg=Ne("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({}),kg=Ne("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(t,r)=>r.header})({display:"flex",justifyContent:"center",alignItems:"center"}),Ag=Ne(h,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(t,r)=>r.weekDayLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),Ng=Ne(h,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(t,r)=>r.weekNumberLabel})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.disabled})),Mg=Ne(h,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(t,r)=>r.weekNumber})(({theme:t})=>V({},t.typography.caption,{width:yn,height:yn,padding:0,margin:`0 ${As}px`,color:t.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Rg=Ne("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(t,r)=>r.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:vl}),Eg=Ne(wg,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(t,r)=>r.slideTransition})({minHeight:vl}),Ig=Ne("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(t,r)=>r.monthContainer})({overflow:"hidden"}),Og=Ne("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(t,r)=>r.weekContainer})({margin:`${As}px 0`,display:"flex",justifyContent:"center"});function _g(t){var r,n,s;let{parentProps:a,day:o,focusableDay:i,selectedDays:l,isDateDisabled:c,currentMonthNumber:d,isViewFocused:u}=t,m=Ve(t,Pg);const{disabled:x,disableHighlightToday:f,isMonthSwitchingAnimating:g,showDaysOutsideCurrentMonth:b,components:S,componentsProps:j,slots:w,slotProps:T,timezone:y}=a,A=qe(),I=ks(y),M=i!==null&&A.isSameDay(o,i),O=l.some(U=>A.isSameDay(U,o)),E=A.isSameDay(o,I),k=(r=(n=w==null?void 0:w.day)!=null?n:S==null?void 0:S.Day)!=null?r:gg,C=it({elementType:k,externalSlotProps:(s=T==null?void 0:T.day)!=null?s:j==null?void 0:j.day,additionalProps:V({disableHighlightToday:f,showDaysOutsideCurrentMonth:b,role:"gridcell",isAnimating:g,"data-timestamp":A.toJsDate(o).valueOf()},m),ownerState:V({},a,{day:o,selected:O})}),P=Ve(C,Sg),F=p.useMemo(()=>x||c(o),[x,c,o]),_=p.useMemo(()=>A.getMonth(o)!==d,[A,o,d]),R=p.useMemo(()=>{const U=A.startOfMonth(A.setMonth(o,d));return b?A.isSameDay(o,A.startOfWeek(U)):A.isSameDay(o,U)},[d,o,b,A]),Y=p.useMemo(()=>{const U=A.endOfMonth(A.setMonth(o,d));return b?A.isSameDay(o,A.endOfWeek(U)):A.isSameDay(o,U)},[d,o,b,A]);return e.jsx(k,V({},P,{day:o,disabled:F,autoFocus:u&&M,today:E,outsideCurrentMonth:_,isFirstVisibleCell:R,isLastVisibleCell:Y,selected:O,tabIndex:M?0:-1,"aria-selected":O,"aria-current":E?"date":void 0}))}function Fg(t){const r=ct({props:t,name:"MuiDayCalendar"}),{onFocusedDayChange:n,className:s,currentMonth:a,selectedDays:o,focusedDay:i,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:u,reduceAnimations:m,renderLoading:x=()=>e.jsx("span",{children:"..."}),slideDirection:f,TransitionProps:g,disablePast:b,disableFuture:S,minDate:j,maxDate:w,shouldDisableDate:T,shouldDisableMonth:y,shouldDisableYear:A,dayOfWeekFormatter:I,hasFocus:M,onFocusedViewChange:O,gridLabelId:E,displayWeekNumber:k,fixedWeekNumber:C,autoFocus:P,timezone:F}=r,_=ks(F),R=qe(),Y=Tg(r),$=Ir().direction==="rtl",H=I||((ae,De)=>R.format(De,"weekdayShort").charAt(0).toUpperCase()),q=yl({shouldDisableDate:T,shouldDisableMonth:y,shouldDisableYear:A,minDate:j,maxDate:w,disablePast:b,disableFuture:S,timezone:F}),G=yr(),[ee,J]=pr({name:"DayCalendar",state:"hasFocus",controlled:M,default:P??!1}),[D,Z]=p.useState(()=>i||_),ye=je(ae=>{u||c(ae)}),B=ae=>{q(ae)||(n(ae),Z(ae),O==null||O(!0),J(!0))},K=je((ae,De)=>{switch(ae.key){case"ArrowUp":B(R.addDays(De,-7)),ae.preventDefault();break;case"ArrowDown":B(R.addDays(De,7)),ae.preventDefault();break;case"ArrowLeft":{const te=R.addDays(De,$?1:-1),me=R.addMonths(De,$?1:-1),oe=xn({utils:R,date:te,minDate:$?te:R.startOfMonth(me),maxDate:$?R.endOfMonth(me):te,isDateDisabled:q,timezone:F});B(oe||te),ae.preventDefault();break}case"ArrowRight":{const te=R.addDays(De,$?-1:1),me=R.addMonths(De,$?-1:1),oe=xn({utils:R,date:te,minDate:$?R.startOfMonth(me):te,maxDate:$?te:R.endOfMonth(me),isDateDisabled:q,timezone:F});B(oe||te),ae.preventDefault();break}case"Home":B(R.startOfWeek(De)),ae.preventDefault();break;case"End":B(R.endOfWeek(De)),ae.preventDefault();break;case"PageUp":B(R.addMonths(De,1)),ae.preventDefault();break;case"PageDown":B(R.addMonths(De,-1)),ae.preventDefault();break}}),le=je((ae,De)=>B(De)),Te=je((ae,De)=>{ee&&R.isSameDay(D,De)&&(O==null||O(!1))}),xe=R.getMonth(a),be=p.useMemo(()=>o.filter(ae=>!!ae).map(ae=>R.startOfDay(ae)),[R,o]),re=xe,Pe=p.useMemo(()=>p.createRef(),[re]),ze=R.startOfWeek(_),Be=p.useMemo(()=>{const ae=R.startOfMonth(a),De=R.endOfMonth(a);return q(D)||R.isAfterDay(D,De)||R.isBeforeDay(D,ae)?xn({utils:R,date:D,minDate:ae,maxDate:De,disablePast:b,disableFuture:S,isDateDisabled:q,timezone:F}):D},[a,S,b,D,q,R,F]),lt=p.useMemo(()=>{const ae=R.setTimezone(a,F),De=R.getWeekArray(ae);let te=R.addMonths(ae,1);for(;C&&De.length<C;){const me=R.getWeekArray(te),oe=R.isSameDay(De[De.length-1][0],me[0][0]);me.slice(oe?1:0).forEach(ue=>{De.length<C&&De.push(ue)}),te=R.addMonths(te,1)}return De},[a,C,R,F]);return e.jsxs(Dg,{role:"grid","aria-labelledby":E,className:Y.root,children:[e.jsxs(kg,{role:"row",className:Y.header,children:[k&&e.jsx(Ng,{variant:"caption",role:"columnheader","aria-label":G.calendarWeekNumberHeaderLabel,className:Y.weekNumberLabel,children:G.calendarWeekNumberHeaderText}),Sp(R,_).map((ae,De)=>{var te;const me=R.format(ae,"weekdayShort");return e.jsx(Ag,{variant:"caption",role:"columnheader","aria-label":R.format(R.addDays(ze,De),"weekday"),className:Y.weekDayLabel,children:(te=H==null?void 0:H(me,ae))!=null?te:me},me+De.toString())})]}),l?e.jsx(Rg,{className:Y.loadingContainer,children:x()}):e.jsx(Eg,V({transKey:re,onExited:d,reduceAnimations:m,slideDirection:f,className:ut(s,Y.slideTransition)},g,{nodeRef:Pe,children:e.jsx(Ig,{ref:Pe,role:"rowgroup",className:Y.monthContainer,children:lt.map((ae,De)=>e.jsxs(Og,{role:"row",className:Y.weekContainer,"aria-rowindex":De+1,children:[k&&e.jsx(Mg,{className:Y.weekNumber,role:"rowheader","aria-label":G.calendarWeekNumberAriaLabelText(R.getWeekNumber(ae[0])),children:G.calendarWeekNumberText(R.getWeekNumber(ae[0]))}),ae.map((te,me)=>e.jsx(_g,{parentProps:r,day:te,selectedDays:be,focusableDay:Be,onKeyDown:K,onFocus:le,onBlur:Te,onDaySelect:ye,isDateDisabled:q,currentMonthNumber:xe,isViewFocused:ee,"aria-colindex":me+1},te.toString()))]},`week-${ae[0]}`))})}))]})}const Lg=(t,r,n)=>(s,a)=>{switch(a.type){case"changeMonth":return V({},s,{slideDirection:a.direction,currentMonth:a.newMonth,isMonthSwitchingAnimating:!t});case"finishMonthSwitchingAnimation":return V({},s,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(s.focusedDay!=null&&a.focusedDay!=null&&n.isSameDay(a.focusedDay,s.focusedDay))return s;const o=a.focusedDay!=null&&!r&&!n.isSameMonth(s.currentMonth,a.focusedDay);return V({},s,{focusedDay:a.focusedDay,isMonthSwitchingAnimating:o&&!t&&!a.withoutMonthSwitchingAnimation,currentMonth:o?n.startOfMonth(a.focusedDay):s.currentMonth,slideDirection:a.focusedDay!=null&&n.isAfterDay(a.focusedDay,s.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},Vg=t=>{const{value:r,referenceDate:n,defaultCalendarMonth:s,disableFuture:a,disablePast:o,disableSwitchToMonthOnDayFocus:i=!1,maxDate:l,minDate:c,onMonthChange:d,reduceAnimations:u,shouldDisableDate:m,timezone:x}=t,f=qe(),g=p.useRef(Lg(!!u,i,f)).current,b=p.useMemo(()=>{let M=null;return n?M=n:s&&(M=f.startOfMonth(s)),ir.getInitialReferenceValue({value:r,utils:f,timezone:x,props:t,referenceDate:M,granularity:Ft.day})},[]),[S,j]=p.useReducer(g,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:f.startOfMonth(b),slideDirection:"left"}),w=p.useCallback(M=>{j(V({type:"changeMonth"},M)),d&&d(M.newMonth)},[d]),T=p.useCallback(M=>{const O=M;f.isSameMonth(O,S.currentMonth)||w({newMonth:f.startOfMonth(O),direction:f.isAfterDay(O,S.currentMonth)?"left":"right"})},[S.currentMonth,w,f]),y=yl({shouldDisableDate:m,minDate:c,maxDate:l,disableFuture:a,disablePast:o,timezone:x}),A=p.useCallback(()=>{j({type:"finishMonthSwitchingAnimation"})},[]),I=je((M,O)=>{y(M)||j({type:"changeFocusedDay",focusedDay:M,withoutMonthSwitchingAnimation:O})});return{referenceDate:b,calendarState:S,changeMonth:T,changeFocusedDay:I,isDateDisabled:y,onMonthSwitchingAnimationEnd:A,handleChangeMonth:w}},$g=["props","getOpenDialogAriaText"],Bg=["ownerState"],Ug=["ownerState"],Wg=t=>{var r,n,s,a,o;let{props:i,getOpenDialogAriaText:l}=t,c=Ve(t,$g);const{slots:d,slotProps:u,className:m,sx:x,format:f,formatDensity:g,timezone:b,name:S,label:j,inputRef:w,readOnly:T,disabled:y,autoFocus:A,localeText:I,reduceAnimations:M}=i,O=qe(),E=p.useRef(null),k=p.useRef(null),C=ga(),P=(r=u==null||(n=u.toolbar)==null?void 0:n.hidden)!=null?r:!1,{open:F,actions:_,hasUIView:R,layoutProps:Y,renderCurrentView:U,shouldRestoreFocus:$,fieldProps:H}=dl(V({},c,{props:i,inputRef:E,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),q=(s=d.inputAdornment)!=null?s:ya,G=it({elementType:q,externalSlotProps:u==null?void 0:u.inputAdornment,additionalProps:{position:"end"},ownerState:i}),ee=Ve(G,Bg),J=(a=d.openPickerButton)!=null?a:St,D=it({elementType:J,externalSlotProps:u==null?void 0:u.openPickerButton,additionalProps:{disabled:y||T,onClick:F?_.onClose:_.onOpen,"aria-label":l(H.value,O),edge:ee.position},ownerState:i}),Z=Ve(D,Ug),ye=d.openPickerIcon,B=d.field,K=it({elementType:B,externalSlotProps:u==null?void 0:u.field,additionalProps:V({},H,P&&{id:C},{readOnly:T,disabled:y,className:m,sx:x,format:f,formatDensity:g,timezone:b,label:j,name:S,autoFocus:A&&!i.open,focused:F?!0:void 0}),ownerState:i});R&&(K.InputProps=V({},K.InputProps,{ref:k},!i.disableOpenPicker&&{[`${ee.position}Adornment`]:e.jsx(q,V({},ee,{children:e.jsx(J,V({},Z,{children:e.jsx(ye,V({},u==null?void 0:u.openPickerIcon))}))}))}));const le=V({textField:d.textField,clearIcon:d.clearIcon,clearButton:d.clearButton},K.slots),Te=(o=d.layout)!=null?o:ml,xe=Nr(E,K.inputRef,w);let be=C;P&&(j?be=`${C}-label`:be=void 0);const re=V({},u,{toolbar:V({},u==null?void 0:u.toolbar,{titleId:C}),popper:V({"aria-labelledby":be},u==null?void 0:u.popper)});return{renderPicker:()=>e.jsxs(Xt,{localeText:I,children:[e.jsx(B,V({},K,{slots:le,slotProps:re,inputRef:xe})),e.jsx(Ex,V({role:"dialog",placement:"bottom-start",anchorEl:k.current},_,{open:F,slots:d,slotProps:re,shouldRestoreFocus:$,reduceAnimations:M,children:e.jsx(Te,V({},Y,re==null?void 0:re.layout,{slots:d,slotProps:re,children:U()}))}))]})}},Hg=t=>{var r,n,s;const a=qe(),o=kn();return V({},t,{disablePast:(r=t.disablePast)!=null?r:!1,disableFuture:(n=t.disableFuture)!=null?n:!1,format:(s=t.format)!=null?s:a.formats.keyboardDate,minDate:At(a,t.minDate,o.minDate),maxDate:At(a,t.maxDate,o.maxDate)})},zg=({props:t,inputRef:r})=>{const n=Hg(t),{forwardedProps:s,internalProps:a}=dg(n);return Lx({inputRef:r,forwardedProps:s,internalProps:a,valueManager:ir,fieldValueManager:Up,validator:Ms})},Yg=["ownerState"],qg=({clearable:t,fieldProps:r,InputProps:n,onClear:s,slots:a,slotProps:o,components:i,componentsProps:l})=>{var c,d,u,m,x,f;const g=yr(),b=(c=(d=a==null?void 0:a.clearButton)!=null?d:i==null?void 0:i.ClearButton)!=null?c:St,S=it({elementType:b,externalSlotProps:(u=o==null?void 0:o.clearButton)!=null?u:l==null?void 0:l.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:g.fieldClearLabel}}),j=Ve(S,Yg),w=(m=(x=a==null?void 0:a.clearIcon)!=null?x:i==null?void 0:i.ClearIcon)!=null?m:ix,T=it({elementType:w,externalSlotProps:(f=o==null?void 0:o.clearIcon)!=null?f:l==null?void 0:l.clearIcon,ownerState:{}}),y=V({},n,{endAdornment:e.jsxs(p.Fragment,{children:[t&&e.jsx(ya,{position:"end",sx:{marginRight:n!=null&&n.endAdornment?-1:-1.5},children:e.jsx(b,V({},j,{onClick:s,children:e.jsx(w,V({fontSize:"small"},T))}))}),n==null?void 0:n.endAdornment]})}),A=V({},r,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(r.sx)?r.sx:[r.sx]]});return{InputProps:y,fieldProps:A}},Qg=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Kg=["inputRef"],Gg=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],bl=p.forwardRef(function(r,n){var s,a,o;const i=ct({props:r,name:"MuiDateField"}),{components:l,componentsProps:c,slots:d,slotProps:u,InputProps:m,inputProps:x}=i,f=Ve(i,Qg),g=i,b=(s=(a=d==null?void 0:d.textField)!=null?a:l==null?void 0:l.TextField)!=null?s:He,S=it({elementType:b,externalSlotProps:(o=u==null?void 0:u.textField)!=null?o:c==null?void 0:c.textField,externalForwardedProps:f,ownerState:g}),{inputRef:j}=S,w=Ve(S,Kg);w.inputProps=V({},x,w.inputProps),w.InputProps=V({},m,w.InputProps);const T=zg({props:w,inputRef:j}),{ref:y,onPaste:A,onKeyDown:I,inputMode:M,readOnly:O,clearable:E,onClear:k}=T,C=Ve(T,Gg),{InputProps:P,fieldProps:F}=qg({onClear:k,clearable:E,fieldProps:C,InputProps:C.InputProps,slots:d,slotProps:u,components:l,componentsProps:c});return e.jsx(b,V({ref:n},F,{InputProps:V({},P,{readOnly:O}),inputProps:V({},C.inputProps,{inputMode:M,onPaste:A,onKeyDown:I,ref:y})}))}),Xg=t=>yt("MuiPickersFadeTransitionGroup",t);vt("MuiPickersFadeTransitionGroup",["root"]);const Zg=t=>{const{classes:r}=t;return ft({root:["root"]},Xg,r)},Jg=Ne(Lo,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"block",position:"relative"});function jl(t){const r=ct({props:t,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:s,reduceAnimations:a,transKey:o}=r,i=Zg(r),l=Ir();return a?n:e.jsx(Jg,{className:ut(i.root,s),children:e.jsx(is,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:n},o)})}function ey(t){return yt("MuiPickersMonth",t)}const On=vt("MuiPickersMonth",["root","monthButton","disabled","selected"]),ty=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],ry=t=>{const{disabled:r,selected:n,classes:s}=t;return ft({root:["root"],monthButton:["monthButton",r&&"disabled",n&&"selected"]},ey,s)},ny=Ne("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(t,r)=>[r.root]})(({ownerState:t})=>({flexBasis:t.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),sy=Ne("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(t,r)=>[r.monthButton,{[`&.${On.disabled}`]:r.disabled},{[`&.${On.selected}`]:r.selected}]})(({theme:t})=>V({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:qr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:qr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${On.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${On.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),ay=p.memo(function(r){const n=ct({props:r,name:"MuiPickersMonth"}),{autoFocus:s,children:a,disabled:o,selected:i,value:l,tabIndex:c,onClick:d,onKeyDown:u,onFocus:m,onBlur:x,"aria-current":f,"aria-label":g}=n,b=Ve(n,ty),S=p.useRef(null),j=ry(n);return Yr(()=>{if(s){var w;(w=S.current)==null||w.focus()}},[s]),e.jsx(ny,V({className:j.root,ownerState:n},b,{children:e.jsx(sy,{ref:S,disabled:o,type:"button",role:"radio",tabIndex:o?-1:c,"aria-current":f,"aria-checked":i,"aria-label":g,onClick:w=>d(w,l),onKeyDown:w=>u(w,l),onFocus:w=>m(w,l),onBlur:w=>x(w,l),className:j.monthButton,ownerState:n,children:a})}))});function oy(t){return yt("MuiMonthCalendar",t)}vt("MuiMonthCalendar",["root"]);const iy=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],ly=t=>{const{classes:r}=t;return ft({root:["root"]},oy,r)};function cy(t,r){const n=qe(),s=kn(),a=ct({props:t,name:r});return V({disableFuture:!1,disablePast:!1},a,{minDate:At(n,a.minDate,s.minDate),maxDate:At(n,a.maxDate,s.maxDate)})}const dy=Ne("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:Ns,boxSizing:"border-box"}),uy=p.forwardRef(function(r,n){const s=cy(r,"MuiMonthCalendar"),{className:a,value:o,defaultValue:i,referenceDate:l,disabled:c,disableFuture:d,disablePast:u,maxDate:m,minDate:x,onChange:f,shouldDisableMonth:g,readOnly:b,disableHighlightToday:S,autoFocus:j=!1,onMonthFocus:w,hasFocus:T,onFocusedViewChange:y,monthsPerRow:A=3,timezone:I,gridLabelId:M}=s,O=Ve(s,iy),{value:E,handleValueChange:k,timezone:C}=Fa({name:"MonthCalendar",timezone:I,value:o,defaultValue:i,onChange:f,valueManager:ir}),P=ks(C),F=Vo(),_=qe(),R=p.useMemo(()=>ir.getInitialReferenceValue({value:E,utils:_,props:s,timezone:C,referenceDate:l,granularity:Ft.month}),[]),Y=s,U=ly(Y),$=p.useMemo(()=>_.getMonth(P),[_,P]),H=p.useMemo(()=>E!=null?_.getMonth(E):S?null:_.getMonth(R),[E,_,S,R]),[q,G]=p.useState(()=>H||$),[ee,J]=pr({name:"MonthCalendar",state:"hasFocus",controlled:T,default:j??!1}),D=je(xe=>{J(xe),y&&y(xe)}),Z=p.useCallback(xe=>{const be=_.startOfMonth(u&&_.isAfter(P,x)?P:x),re=_.startOfMonth(d&&_.isBefore(P,m)?P:m),Pe=_.startOfMonth(xe);return _.isBefore(Pe,be)||_.isAfter(Pe,re)?!0:g?g(Pe):!1},[d,u,m,x,P,g,_]),ye=je((xe,be)=>{if(b)return;const re=_.setMonth(E??R,be);k(re)}),B=je(xe=>{Z(_.setMonth(E??R,xe))||(G(xe),D(!0),w&&w(xe))});p.useEffect(()=>{G(xe=>H!==null&&xe!==H?H:xe)},[H]);const K=je((xe,be)=>{switch(xe.key){case"ArrowUp":B((12+be-3)%12),xe.preventDefault();break;case"ArrowDown":B((12+be+3)%12),xe.preventDefault();break;case"ArrowLeft":B((12+be+(F.direction==="ltr"?-1:1))%12),xe.preventDefault();break;case"ArrowRight":B((12+be+(F.direction==="ltr"?1:-1))%12),xe.preventDefault();break}}),le=je((xe,be)=>{B(be)}),Te=je((xe,be)=>{q===be&&D(!1)});return e.jsx(dy,V({ref:n,className:ut(U.root,a),ownerState:Y,role:"radiogroup","aria-labelledby":M},O,{children:Ra(_,E??R).map(xe=>{const be=_.getMonth(xe),re=_.format(xe,"monthShort"),Pe=_.format(xe,"month"),ze=be===H,Be=c||Z(xe);return e.jsx(ay,{selected:ze,value:be,onClick:ye,onKeyDown:K,autoFocus:ee&&be===q,disabled:Be,tabIndex:be===q?0:-1,onFocus:le,onBlur:Te,"aria-current":$===be?"date":void 0,"aria-label":Pe,monthsPerRow:A,children:re},re)})}))});function hy(t){return yt("MuiPickersYear",t)}const _n=vt("MuiPickersYear",["root","yearButton","selected","disabled"]),my=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],fy=t=>{const{disabled:r,selected:n,classes:s}=t;return ft({root:["root"],yearButton:["yearButton",r&&"disabled",n&&"selected"]},hy,s)},py=Ne("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(t,r)=>[r.root]})(({ownerState:t})=>({flexBasis:t.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),xy=Ne("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(t,r)=>[r.yearButton,{[`&.${_n.disabled}`]:r.disabled},{[`&.${_n.selected}`]:r.selected}]})(({theme:t})=>V({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:qr(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:qr(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${_n.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${_n.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),gy=p.memo(function(r){const n=ct({props:r,name:"MuiPickersYear"}),{autoFocus:s,className:a,children:o,disabled:i,selected:l,value:c,tabIndex:d,onClick:u,onKeyDown:m,onFocus:x,onBlur:f,"aria-current":g}=n,b=Ve(n,my),S=p.useRef(null),j=fy(n);return p.useEffect(()=>{s&&S.current.focus()},[s]),e.jsx(py,V({className:ut(j.root,a),ownerState:n},b,{children:e.jsx(xy,{ref:S,disabled:i,type:"button",role:"radio",tabIndex:i?-1:d,"aria-current":g,"aria-checked":l,onClick:w=>u(w,c),onKeyDown:w=>m(w,c),onFocus:w=>x(w,c),onBlur:w=>f(w,c),className:j.yearButton,ownerState:n,children:o})}))});function yy(t){return yt("MuiYearCalendar",t)}vt("MuiYearCalendar",["root"]);const vy=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],by=t=>{const{classes:r}=t;return ft({root:["root"]},yy,r)};function jy(t,r){var n;const s=qe(),a=kn(),o=ct({props:t,name:r});return V({disablePast:!1,disableFuture:!1},o,{yearsPerRow:(n=o.yearsPerRow)!=null?n:3,minDate:At(s,o.minDate,a.minDate),maxDate:At(s,o.maxDate,a.maxDate)})}const wy=Ne("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:Ns,maxHeight:xx,boxSizing:"border-box",position:"relative"}),Cy=p.forwardRef(function(r,n){const s=jy(r,"MuiYearCalendar"),{autoFocus:a,className:o,value:i,defaultValue:l,referenceDate:c,disabled:d,disableFuture:u,disablePast:m,maxDate:x,minDate:f,onChange:g,readOnly:b,shouldDisableYear:S,disableHighlightToday:j,onYearFocus:w,hasFocus:T,onFocusedViewChange:y,yearsPerRow:A,timezone:I,gridLabelId:M}=s,O=Ve(s,vy),{value:E,handleValueChange:k,timezone:C}=Fa({name:"YearCalendar",timezone:I,value:i,defaultValue:l,onChange:g,valueManager:ir}),P=ks(C),F=Vo(),_=qe(),R=p.useMemo(()=>ir.getInitialReferenceValue({value:E,utils:_,props:s,timezone:C,referenceDate:c,granularity:Ft.year}),[]),Y=s,U=by(Y),$=p.useMemo(()=>_.getYear(P),[_,P]),H=p.useMemo(()=>E!=null?_.getYear(E):j?null:_.getYear(R),[E,_,j,R]),[q,G]=p.useState(()=>H||$),[ee,J]=pr({name:"YearCalendar",state:"hasFocus",controlled:T,default:a??!1}),D=je(re=>{J(re),y&&y(re)}),Z=p.useCallback(re=>{if(m&&_.isBeforeYear(re,P)||u&&_.isAfterYear(re,P)||f&&_.isBeforeYear(re,f)||x&&_.isAfterYear(re,x))return!0;if(!S)return!1;const Pe=_.startOfYear(re);return S(Pe)},[u,m,x,f,P,S,_]),ye=je((re,Pe)=>{if(b)return;const ze=_.setYear(E??R,Pe);k(ze)}),B=je(re=>{Z(_.setYear(E??R,re))||(G(re),D(!0),w==null||w(re))});p.useEffect(()=>{G(re=>H!==null&&re!==H?H:re)},[H]);const K=je((re,Pe)=>{switch(re.key){case"ArrowUp":B(Pe-A),re.preventDefault();break;case"ArrowDown":B(Pe+A),re.preventDefault();break;case"ArrowLeft":B(Pe+(F.direction==="ltr"?-1:1)),re.preventDefault();break;case"ArrowRight":B(Pe+(F.direction==="ltr"?1:-1)),re.preventDefault();break}}),le=je((re,Pe)=>{B(Pe)}),Te=je((re,Pe)=>{q===Pe&&D(!1)}),xe=p.useRef(null),be=Nr(n,xe);return p.useEffect(()=>{if(a||xe.current===null)return;const re=xe.current.querySelector('[tabindex="0"]');if(!re)return;const Pe=re.offsetHeight,ze=re.offsetTop,Be=xe.current.clientHeight,lt=xe.current.scrollTop,ae=ze+Pe;Pe>Be||ze<lt||(xe.current.scrollTop=ae-Be/2-Pe/2)},[a]),e.jsx(wy,V({ref:be,className:ut(U.root,o),ownerState:Y,role:"radiogroup","aria-labelledby":M},O,{children:_.getYearRange(f,x).map(re=>{const Pe=_.getYear(re),ze=Pe===H,Be=d||Z(re);return e.jsx(gy,{selected:ze,value:Pe,onClick:ye,onKeyDown:K,autoFocus:ee&&Pe===q,disabled:Be,tabIndex:Pe===q?0:-1,onFocus:le,onBlur:Te,"aria-current":$===Pe?"date":void 0,yearsPerRow:A,children:_.format(re,"year")},_.format(re,"year"))})}))}),Py=t=>yt("MuiPickersCalendarHeader",t),Sy=vt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Ty=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],Dy=["ownerState"],ky=t=>{const{classes:r}=t;return ft({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Py,r)},Ay=Ne("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),Ny=Ne("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(t,r)=>r.labelContainer})(({theme:t})=>V({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),My=Ne("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(t,r)=>r.label})({marginRight:6}),Ry=Ne(St,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(t,r)=>r.switchViewButton})(({ownerState:t})=>V({marginRight:"auto"},t.view==="year"&&{[`.${Sy.switchViewIcon}`]:{transform:"rotate(180deg)"}})),Ey=Ne(nx,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(t,r)=>r.switchViewIcon})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),Iy=p.forwardRef(function(r,n){var s,a,o,i;const l=yr(),c=qe(),d=ct({props:r,name:"MuiPickersCalendarHeader"}),{slots:u,slotProps:m,components:x,currentMonth:f,disabled:g,disableFuture:b,disablePast:S,maxDate:j,minDate:w,onMonthChange:T,onViewChange:y,view:A,reduceAnimations:I,views:M,labelId:O,className:E,timezone:k}=d,C=Ve(d,Ty),P=d,F=ky(d),_=(s=(a=u==null?void 0:u.switchViewButton)!=null?a:x==null?void 0:x.SwitchViewButton)!=null?s:Ry,R=it({elementType:_,externalSlotProps:m==null?void 0:m.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(A)},ownerState:P,className:F.switchViewButton}),Y=(o=(i=u==null?void 0:u.switchViewIcon)!=null?i:x==null?void 0:x.SwitchViewIcon)!=null?o:Ey,U=it({elementType:Y,externalSlotProps:m==null?void 0:m.switchViewIcon,ownerState:void 0,className:F.switchViewIcon}),$=Ve(U,Dy),H=()=>T(c.addMonths(f,1),"left"),q=()=>T(c.addMonths(f,-1),"right"),G=sg(f,{disableFuture:b,maxDate:j,timezone:k}),ee=ag(f,{disablePast:S,minDate:w,timezone:k}),J=()=>{if(!(M.length===1||!y||g))if(M.length===2)y(M.find(D=>D!==A)||M[0]);else{const D=M.indexOf(A)!==0?0:1;y(M[D])}};return M.length===1&&M[0]==="year"?null:e.jsxs(Ay,V({},C,{ownerState:P,className:ut(E,F.root),ref:n,children:[e.jsxs(Ny,{role:"presentation",onClick:J,ownerState:P,"aria-live":"polite",className:F.labelContainer,children:[e.jsx(jl,{reduceAnimations:I,transKey:c.format(f,"monthAndYear"),children:e.jsx(My,{id:O,ownerState:P,className:F.label,children:c.format(f,"monthAndYear")})}),M.length>1&&!g&&e.jsx(_,V({},R,{children:e.jsx(Y,V({},$))}))]}),e.jsx(is,{in:A==="day",children:e.jsx(px,{slots:u,slotProps:m,onGoToPrevious:q,isPreviousDisabled:ee,previousLabel:l.previousMonth,onGoToNext:H,isNextDisabled:G,nextLabel:l.nextMonth})})]}))}),Oy=Ne("div")({overflow:"hidden",width:Ns,maxHeight:Oa,display:"flex",flexDirection:"column",margin:"0 auto"}),_y=t=>yt("MuiDateCalendar",t);vt("MuiDateCalendar",["root","viewTransitionContainer"]);const Fy=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],Ly=t=>{const{classes:r}=t;return ft({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},_y,r)};function Vy(t,r){var n,s,a,o,i,l,c;const d=qe(),u=kn(),m=il(),x=ct({props:t,name:r});return V({},x,{loading:(n=x.loading)!=null?n:!1,disablePast:(s=x.disablePast)!=null?s:!1,disableFuture:(a=x.disableFuture)!=null?a:!1,openTo:(o=x.openTo)!=null?o:"day",views:(i=x.views)!=null?i:["year","day"],reduceAnimations:(l=x.reduceAnimations)!=null?l:m,renderLoading:(c=x.renderLoading)!=null?c:()=>e.jsx("span",{children:"..."}),minDate:At(d,x.minDate,u.minDate),maxDate:At(d,x.maxDate,u.maxDate)})}const $y=Ne(Oy,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(t,r)=>r.root})({display:"flex",flexDirection:"column",height:Oa}),By=Ne(jl,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(t,r)=>r.viewTransitionContainer})({}),Uy=p.forwardRef(function(r,n){var s,a,o;const i=qe(),l=ga(),c=Vy(r,"MuiDateCalendar"),{autoFocus:d,onViewChange:u,value:m,defaultValue:x,referenceDate:f,disableFuture:g,disablePast:b,defaultCalendarMonth:S,onChange:j,onYearChange:w,onMonthChange:T,reduceAnimations:y,shouldDisableDate:A,shouldDisableMonth:I,shouldDisableYear:M,view:O,views:E,openTo:k,className:C,disabled:P,readOnly:F,minDate:_,maxDate:R,disableHighlightToday:Y,focusedView:U,onFocusedViewChange:$,showDaysOutsideCurrentMonth:H,fixedWeekNumber:q,dayOfWeekFormatter:G,components:ee,componentsProps:J,slots:D,slotProps:Z,loading:ye,renderLoading:B,displayWeekNumber:K,yearsPerRow:le,monthsPerRow:Te,timezone:xe}=c,be=Ve(c,Fy),{value:re,handleValueChange:Pe,timezone:ze}=Fa({name:"DateCalendar",timezone:xe,value:m,defaultValue:x,onChange:j,valueManager:ir}),{view:Be,setView:lt,focusedView:ae,setFocusedView:De,goToNextView:te,setValueAndGoToNextView:me}=cl({view:O,views:E,openTo:k,onChange:Pe,onViewChange:u,autoFocus:d,focusedView:U,onFocusedViewChange:$}),{referenceDate:oe,calendarState:ue,changeFocusedDay:X,changeMonth:he,handleChangeMonth:Le,isDateDisabled:Me,onMonthSwitchingAnimationEnd:Ue}=Vg({value:re,defaultCalendarMonth:S,referenceDate:f,reduceAnimations:y,onMonthChange:T,minDate:_,maxDate:R,shouldDisableDate:A,disablePast:b,disableFuture:g,timezone:ze}),ot=P&&re||_,Tt=P&&re||R,vr=`${l}-grid-label`,br=ae!==null,bt=(s=(a=D==null?void 0:D.calendarHeader)!=null?a:ee==null?void 0:ee.CalendarHeader)!=null?s:Iy,_r=it({elementType:bt,externalSlotProps:(o=Z==null?void 0:Z.calendarHeader)!=null?o:J==null?void 0:J.calendarHeader,additionalProps:{views:E,view:Be,currentMonth:ue.currentMonth,onViewChange:lt,onMonthChange:(ve,fe)=>Le({newMonth:ve,direction:fe}),minDate:ot,maxDate:Tt,disabled:P,disablePast:b,disableFuture:g,reduceAnimations:y,timezone:ze,labelId:vr,slots:D,slotProps:Z},ownerState:c}),Rs=je(ve=>{const fe=i.startOfMonth(ve),rn=i.endOfMonth(ve),cr=Me(ve)?xn({utils:i,date:ve,minDate:i.isBefore(_,fe)?fe:_,maxDate:i.isAfter(R,rn)?rn:R,disablePast:b,disableFuture:g,isDateDisabled:Me,timezone:ze}):ve;cr?(me(cr,"finish"),T==null||T(fe)):(te(),he(fe)),X(cr,!0)}),Es=je(ve=>{const fe=i.startOfYear(ve),rn=i.endOfYear(ve),cr=Me(ve)?xn({utils:i,date:ve,minDate:i.isBefore(_,fe)?fe:_,maxDate:i.isAfter(R,rn)?rn:R,disablePast:b,disableFuture:g,isDateDisabled:Me,timezone:ze}):ve;cr?(me(cr,"finish"),w==null||w(cr)):(te(),he(fe)),X(cr,!0)}),Is=je(ve=>Pe(ve&&ns(i,ve,re??oe),"finish",Be));p.useEffect(()=>{re!=null&&i.isValid(re)&&he(re)},[re]);const Jr=c,An=Ly(Jr),en={disablePast:b,disableFuture:g,maxDate:R,minDate:_},Fr={disableHighlightToday:Y,readOnly:F,disabled:P,timezone:ze,gridLabelId:vr},tn=p.useRef(Be);p.useEffect(()=>{tn.current!==Be&&(ae===tn.current&&De(Be,!0),tn.current=Be)},[ae,De,Be]);const Os=p.useMemo(()=>[re],[re]);return e.jsxs($y,V({ref:n,className:ut(An.root,C),ownerState:Jr},be,{children:[e.jsx(bt,V({},_r)),e.jsx(By,{reduceAnimations:y,className:An.viewTransitionContainer,transKey:Be,ownerState:Jr,children:e.jsxs("div",{children:[Be==="year"&&e.jsx(Cy,V({},en,Fr,{value:re,onChange:Es,shouldDisableYear:M,hasFocus:br,onFocusedViewChange:ve=>De("year",ve),yearsPerRow:le,referenceDate:oe})),Be==="month"&&e.jsx(uy,V({},en,Fr,{hasFocus:br,className:C,value:re,onChange:Rs,shouldDisableMonth:I,onFocusedViewChange:ve=>De("month",ve),monthsPerRow:Te,referenceDate:oe})),Be==="day"&&e.jsx(Fg,V({},ue,en,Fr,{onMonthSwitchingAnimationEnd:Ue,onFocusedDayChange:X,reduceAnimations:y,selectedDays:Os,onSelectedDaysChange:Is,shouldDisableDate:A,shouldDisableMonth:I,shouldDisableYear:M,hasFocus:br,onFocusedViewChange:ve=>De("day",ve),showDaysOutsideCurrentMonth:H,fixedWeekNumber:q,dayOfWeekFormatter:G,displayWeekNumber:K,components:ee,componentsProps:J,slots:D,slotProps:Z,loading:ye,renderLoading:B}))]})})]}))}),Hr=({view:t,onViewChange:r,views:n,focusedView:s,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:m,disablePast:x,minDate:f,maxDate:g,shouldDisableDate:b,shouldDisableMonth:S,shouldDisableYear:j,reduceAnimations:w,onMonthChange:T,monthsPerRow:y,onYearChange:A,yearsPerRow:I,defaultCalendarMonth:M,components:O,componentsProps:E,slots:k,slotProps:C,loading:P,renderLoading:F,disableHighlightToday:_,readOnly:R,disabled:Y,showDaysOutsideCurrentMonth:U,dayOfWeekFormatter:$,sx:H,autoFocus:q,fixedWeekNumber:G,displayWeekNumber:ee,timezone:J})=>e.jsx(Uy,{view:t,onViewChange:r,views:n.filter(jo),focusedView:s&&jo(s)?s:null,onFocusedViewChange:a,value:o,defaultValue:i,referenceDate:l,onChange:c,className:d,classes:u,disableFuture:m,disablePast:x,minDate:f,maxDate:g,shouldDisableDate:b,shouldDisableMonth:S,shouldDisableYear:j,reduceAnimations:w,onMonthChange:T,monthsPerRow:y,onYearChange:A,yearsPerRow:I,defaultCalendarMonth:M,components:O,componentsProps:E,slots:k,slotProps:C,loading:P,renderLoading:F,disableHighlightToday:_,readOnly:R,disabled:Y,showDaysOutsideCurrentMonth:U,dayOfWeekFormatter:$,sx:H,autoFocus:q,fixedWeekNumber:G,displayWeekNumber:ee,timezone:J}),wl=p.forwardRef(function(r,n){var s,a,o,i;const l=yr(),c=qe(),d=ol(r,"MuiDesktopDatePicker"),u=V({day:Hr,month:Hr,year:Hr},d.viewRenderers),m=V({},d,{viewRenderers:u,format:Ea(c,d,!1),yearsPerRow:(s=d.yearsPerRow)!=null?s:4,slots:V({openPickerIcon:ox,field:bl},d.slots),slotProps:V({},d.slotProps,{field:f=>{var g;return V({},Ma((g=d.slotProps)==null?void 0:g.field,f),pl(d),{ref:n})},toolbar:V({hidden:!0},(a=d.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:x}=Wg({props:m,valueManager:ir,valueType:"date",getOpenDialogAriaText:(o=(i=m.localeText)==null?void 0:i.openDatePickerDialogue)!=null?o:l.openDatePickerDialogue,validator:Ms});return x()});wl.propTypes={autoFocus:L.bool,className:L.string,closeOnSelect:L.bool,components:L.object,componentsProps:L.object,dayOfWeekFormatter:L.func,defaultCalendarMonth:L.any,defaultValue:L.any,disabled:L.bool,disableFuture:L.bool,disableHighlightToday:L.bool,disableOpenPicker:L.bool,disablePast:L.bool,displayWeekNumber:L.bool,fixedWeekNumber:L.number,format:L.string,formatDensity:L.oneOf(["dense","spacious"]),inputRef:$o,label:L.node,loading:L.bool,localeText:L.object,maxDate:L.any,minDate:L.any,monthsPerRow:L.oneOf([3,4]),name:L.string,onAccept:L.func,onChange:L.func,onClose:L.func,onError:L.func,onMonthChange:L.func,onOpen:L.func,onSelectedSectionsChange:L.func,onViewChange:L.func,onYearChange:L.func,open:L.bool,openTo:L.oneOf(["day","month","year"]),orientation:L.oneOf(["landscape","portrait"]),readOnly:L.bool,reduceAnimations:L.bool,referenceDate:L.any,renderLoading:L.func,selectedSections:L.oneOfType([L.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),L.number,L.shape({endIndex:L.number.isRequired,startIndex:L.number.isRequired})]),shouldDisableDate:L.func,shouldDisableMonth:L.func,shouldDisableYear:L.func,showDaysOutsideCurrentMonth:L.bool,slotProps:L.object,slots:L.object,sx:L.oneOfType([L.arrayOf(L.oneOfType([L.func,L.object,L.bool])),L.func,L.object]),timezone:L.string,value:L.any,view:L.oneOf(["day","month","year"]),viewRenderers:L.shape({day:L.func,month:L.func,year:L.func}),views:L.arrayOf(L.oneOf(["day","month","year"]).isRequired),yearsPerRow:L.oneOf([3,4])};const Wy=["props","getOpenDialogAriaText"],Hy=t=>{var r,n,s;let{props:a,getOpenDialogAriaText:o}=t,i=Ve(t,Wy);const{slots:l,slotProps:c,className:d,sx:u,format:m,formatDensity:x,timezone:f,name:g,label:b,inputRef:S,readOnly:j,disabled:w,localeText:T}=a,y=qe(),A=p.useRef(null),I=ga(),M=(r=c==null||(n=c.toolbar)==null?void 0:n.hidden)!=null?r:!1,{open:O,actions:E,layoutProps:k,renderCurrentView:C,fieldProps:P}=dl(V({},i,{props:a,inputRef:A,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),F=l.field,_=it({elementType:F,externalSlotProps:c==null?void 0:c.field,additionalProps:V({},P,M&&{id:I},!(w||j)&&{onClick:E.onOpen,onKeyDown:wx(E.onOpen)},{readOnly:j??!0,disabled:w,className:d,sx:u,format:m,formatDensity:x,timezone:f,label:b,name:g}),ownerState:a});_.inputProps=V({},_.inputProps,{"aria-label":o(P.value,y)});const R=V({textField:l.textField},_.slots),Y=(s=l.layout)!=null?s:ml,U=Nr(A,_.inputRef,S);let $=I;M&&(b?$=`${I}-label`:$=void 0);const H=V({},c,{toolbar:V({},c==null?void 0:c.toolbar,{titleId:I}),mobilePaper:V({"aria-labelledby":$},c==null?void 0:c.mobilePaper)});return{renderPicker:()=>e.jsxs(Xt,{localeText:T,children:[e.jsx(F,V({},_,{slots:R,slotProps:H,inputRef:U})),e.jsx(vx,V({},E,{open:O,slots:l,slotProps:H,children:e.jsx(Y,V({},k,H==null?void 0:H.layout,{slots:l,slotProps:H,children:C()}))}))]})}},Cl=p.forwardRef(function(r,n){var s,a,o;const i=yr(),l=qe(),c=ol(r,"MuiMobileDatePicker"),d=V({day:Hr,month:Hr,year:Hr},c.viewRenderers),u=V({},c,{viewRenderers:d,format:Ea(l,c,!1),slots:V({field:bl},c.slots),slotProps:V({},c.slotProps,{field:x=>{var f;return V({},Ma((f=c.slotProps)==null?void 0:f.field,x),pl(c),{ref:n})},toolbar:V({hidden:!1},(s=c.slotProps)==null?void 0:s.toolbar)})}),{renderPicker:m}=Hy({props:u,valueManager:ir,valueType:"date",getOpenDialogAriaText:(a=(o=u.localeText)==null?void 0:o.openDatePickerDialogue)!=null?a:i.openDatePickerDialogue,validator:Ms});return m()});Cl.propTypes={autoFocus:L.bool,className:L.string,closeOnSelect:L.bool,components:L.object,componentsProps:L.object,dayOfWeekFormatter:L.func,defaultCalendarMonth:L.any,defaultValue:L.any,disabled:L.bool,disableFuture:L.bool,disableHighlightToday:L.bool,disableOpenPicker:L.bool,disablePast:L.bool,displayWeekNumber:L.bool,fixedWeekNumber:L.number,format:L.string,formatDensity:L.oneOf(["dense","spacious"]),inputRef:$o,label:L.node,loading:L.bool,localeText:L.object,maxDate:L.any,minDate:L.any,monthsPerRow:L.oneOf([3,4]),name:L.string,onAccept:L.func,onChange:L.func,onClose:L.func,onError:L.func,onMonthChange:L.func,onOpen:L.func,onSelectedSectionsChange:L.func,onViewChange:L.func,onYearChange:L.func,open:L.bool,openTo:L.oneOf(["day","month","year"]),orientation:L.oneOf(["landscape","portrait"]),readOnly:L.bool,reduceAnimations:L.bool,referenceDate:L.any,renderLoading:L.func,selectedSections:L.oneOfType([L.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),L.number,L.shape({endIndex:L.number.isRequired,startIndex:L.number.isRequired})]),shouldDisableDate:L.func,shouldDisableMonth:L.func,shouldDisableYear:L.func,showDaysOutsideCurrentMonth:L.bool,slotProps:L.object,slots:L.object,sx:L.oneOfType([L.arrayOf(L.oneOfType([L.func,L.object,L.bool])),L.func,L.object]),timezone:L.string,value:L.any,view:L.oneOf(["day","month","year"]),viewRenderers:L.shape({day:L.func,month:L.func,year:L.func}),views:L.arrayOf(L.oneOf(["day","month","year"]).isRequired),yearsPerRow:L.oneOf([3,4])};const zy=["desktopModeMediaQuery"],Yy=p.forwardRef(function(r,n){const s=ct({props:r,name:"MuiDatePicker"}),{desktopModeMediaQuery:a=Cx}=s,o=Ve(s,zy);return ha(a,{defaultMatches:!0})?e.jsx(wl,V({ref:n},o)):e.jsx(Cl,V({ref:n},o))});var da={exports:{}};(function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},s=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},a=function(c,d){var u=c.match(/(P+)(p+)?/)||[],m=u[1],x=u[2];if(!x)return n(c,d);var f;switch(m){case"P":f=d.dateTime({width:"short"});break;case"PP":f=d.dateTime({width:"medium"});break;case"PPP":f=d.dateTime({width:"long"});break;case"PPPP":default:f=d.dateTime({width:"full"});break}return f.replace("{{date}}",n(m,d)).replace("{{time}}",s(x,d))},o={p:s,P:a},i=o;r.default=i,t.exports=r.default})(da,da.exports);var qy=da.exports;const Qy=uc(qy),Ky={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Gy={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Xy{constructor(r){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Ky,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(i).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:n,formats:s,longFormatters:a}=r;this.locale=n,this.formats=V({},Gy,s),this.longFormatters=a}}class Pr extends Xy{constructor({locale:r,formats:n}={}){if(typeof Yn!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:r??Da,formats:n,longFormatters:Qy}),this.parseISO=s=>mr(s),this.toISO=s=>mm(s,{format:"extended"}),this.parse=(s,a)=>s===""?null:wf(s,a,new Date,{locale:this.locale}),this.isValid=s=>Ni(this.date(s)),this.format=(s,a)=>this.formatByString(s,this.formats[a]),this.formatByString=(s,a)=>hr(s,a,{locale:this.locale}),this.getDiff=(s,a,o)=>{switch(o){case"years":return xh(s,this.date(a));case"quarters":return mh(s,this.date(a));case"months":return Ri(s,this.date(a));case"weeks":return ph(s,this.date(a));case"days":return Mi(s,this.date(a));case"hours":return dh(s,this.date(a));case"minutes":return uh(s,this.date(a));case"seconds":return fh(s,this.date(a));default:return Ps(s,this.date(a))}},this.isEqual=(s,a)=>s===null&&a===null?!0:Sm(s,a),this.isSameYear=(s,a)=>Tf(s,a),this.isSameMonth=(s,a)=>Sf(s,a),this.isSameDay=(s,a)=>ah(s,a),this.isSameHour=(s,a)=>Pf(s,a),this.isAfter=(s,a)=>zs(s,a),this.isAfterYear=(s,a)=>zs(s,Us(a)),this.isAfterDay=(s,a)=>zs(s,oa(a)),this.isBefore=(s,a)=>ln(s,a),this.isBeforeYear=(s,a)=>ln(s,Rn(a)),this.isBeforeDay=(s,a)=>ln(s,Kr(a)),this.isWithinRange=(s,[a,o])=>Df(s,{start:a,end:o}),this.startOfYear=s=>Rn(s),this.startOfMonth=s=>uo(s),this.startOfWeek=s=>Tr(s,{locale:this.locale}),this.startOfDay=s=>Kr(s),this.endOfYear=s=>Us(s),this.endOfMonth=s=>ia(s),this.endOfWeek=s=>Ws(s,{locale:this.locale}),this.endOfDay=s=>oa(s),this.addYears=(s,a)=>io(s,a),this.addMonths=(s,a)=>qn(s,a),this.addWeeks=(s,a)=>nh(s,a),this.addDays=(s,a)=>Yn(s,a),this.addHours=(s,a)=>Gu(s,a),this.addMinutes=(s,a)=>th(s,a),this.addSeconds=(s,a)=>rh(s,a),this.getYear=s=>Pm(s),this.getMonth=s=>ym(s),this.getDate=s=>fm(s),this.getHours=s=>pm(s),this.getMinutes=s=>gm(s),this.getSeconds=s=>vm(s),this.getMilliseconds=s=>xm(s),this.setYear=(s,a)=>Kf(s,a),this.setMonth=(s,a)=>Wf(s,a),this.setDate=(s,a)=>Hf(s,a),this.setHours=(s,a)=>zf(s,a),this.setMinutes=(s,a)=>qf(s,a),this.setSeconds=(s,a)=>Qf(s,a),this.setMilliseconds=(s,a)=>Yf(s,a),this.getDaysInMonth=s=>$i(s),this.getNextMonth=s=>qn(s,1),this.getPreviousMonth=s=>qn(s,-1),this.getMonthArray=s=>{const o=[Rn(s)];for(;o.length<12;){const i=o[o.length-1];o.push(this.getNextMonth(i))}return o},this.mergeDateAndTime=(s,a)=>this.setSeconds(this.setMinutes(this.setHours(s,this.getHours(a)),this.getMinutes(a)),this.getSeconds(a)),this.getWeekdays=()=>{const s=new Date;return gh({start:Tr(s,{locale:this.locale}),end:Ws(s,{locale:this.locale})}).map(a=>this.formatByString(a,"EEEEEE"))},this.getWeekArray=s=>{const a=Tr(uo(s),{locale:this.locale}),o=Ws(ia(s),{locale:this.locale});let i=0,l=a;const c=[];for(;ln(l,o);){const d=Math.floor(i/7);c[d]=c[d]||[],c[d].push(l),l=Yn(l,1),i+=1}return c},this.getWeekNumber=s=>Cm(s,{locale:this.locale}),this.getYearRange=(s,a)=>{const o=Rn(s),i=Us(a),l=[];let c=o;for(;ln(c,i);)l.push(c),c=io(c,1);return l}}}class Zy{constructor(){}async makeRequest(r,n,s){try{return(await we.api.request({method:r,url:n,data:s})).data}catch(a){throw this.handleServiceError(a)}}async createAsset(r){return this.makeRequest("POST","/api/v1/assets",r)}async getAssets(r={}){const n=new URLSearchParams;Object.entries(r).forEach(([a,o])=>{o!=null&&o!==""&&n.append(a,o.toString())});const s=`/api/v1/assets?${n.toString()}`;return this.makeRequest("GET",s)}async getAssetById(r){return this.makeRequest("GET",`/api/v1/assets/${r}`)}async updateAsset(r,n){console.log("AssetService.updateAsset called with:",{id:r,data:n}),console.log("Making PUT request to: /api/v1/assets/"+r);const s=await this.makeRequest("PUT",`/api/v1/assets/${r}`,n);return console.log("API response data:",s),s}async deleteAsset(r){await this.makeRequest("DELETE",`/api/v1/assets/${r}`)}async getAssetsByPortfolio(r,n={}){const s=new URLSearchParams;Object.entries(n).forEach(([o,i])=>{i!=null&&i!==""&&s.append(o,i.toString())});const a=`/api/v1/assets/portfolio/${r}?${s.toString()}`;return this.makeRequest("GET",a)}async searchAssets(r,n){const s=new URLSearchParams;s.append("q",r),n&&s.append("portfolioId",n);const a=`/api/v1/assets/search?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetStatistics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/statistics`)).data}async getAssetAnalytics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/analytics`)).data}async getAssetPerformance(r,n="ALL"){const s=new URLSearchParams;s.append("period",n);const a=`/api/v1/assets/portfolio/${r}/performance?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetAllocation(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/allocation`)).data}async getAssetTypes(){return(await this.makeRequest("GET","/api/v1/assets/types")).types}async getAssetRiskMetrics(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/risk`)).data}async getRecentAssets(r,n){const s=new URLSearchParams;r&&s.append("limit",r.toString()),n&&s.append("portfolioId",n);const a=`/api/v1/assets/recent?${s.toString()}`;return(await this.makeRequest("GET",a)).data}async getAssetsByValueRange(r,n,s){const a=new URLSearchParams;a.append("minValue",r.toString()),a.append("maxValue",n.toString()),s&&a.append("portfolioId",s);const o=`/api/v1/assets/value-range?${a.toString()}`;return(await this.makeRequest("GET",o)).data}async checkAssetExists(r){return(await this.makeRequest("GET",`/api/v1/assets/${r}/exists`)).data.exists}async getAssetCount(r){return(await this.makeRequest("GET",`/api/v1/assets/portfolio/${r}/count`)).data.count}async getTradeCount(r){return await this.makeRequest("GET",`/api/v1/assets/${r}/trades/count`)}async deleteAllTrades(r){return(await this.makeRequest("DELETE",`/api/v1/assets/${r}/trades`)).deletedCount}async forceDeleteAsset(r){await this.makeRequest("DELETE",`/api/v1/assets/${r}/force`)}handleServiceError(r){return r instanceof Error?{message:r.message,status:0,code:"NETWORK_ERROR"}:r}}const Dr=new Zy;function Pl(t,r){return!t||t===0?0:(r-t)/t*100}function Sl(t){const{initialValue:r,currentValue:n,createdAt:s}=t,a=new Date(s),o=new Date,i=Pl(r,n),l=Math.max(1,Math.floor((o.getTime()-a.getTime())/(1e3*60*60*24))),c=fr(i,l,1),d=fr(i,l,7),u=fr(i,l,30),m=fr(i,l,365);return{daily:Math.round(c*100)/100,weekly:Math.round(d*100)/100,monthly:Math.round(u*100)/100,yearly:Math.round(m*100)/100}}function fr(t,r,n){if(r<n)return t;const s=r/n;return t/s}function Fn(t,r){const n=Sl(t),s=ev(r);return{daily:Math.round(n.daily*s.daily*100)/100,weekly:Math.round(n.weekly*s.weekly*100)/100,monthly:Math.round(n.monthly*s.monthly*100)/100,yearly:Math.round(n.yearly*s.yearly*100)/100}}function Jy(t){return{GOLD:.8,VFF:1.2,VESAF:1.1,SSISCA:1,HPG:1.3,VCB:.9}[t.toUpperCase()]||1}function ev(t){const r=Jy(t),n=new Date,s=n.getHours(),a=n.getDay(),o=s>=9&&s<=15?1+(r-1)*.5:.8,i=a>=1&&a<=5?1+(r-1)*.3:.9,l=1+(r-1)*.2,c=1+(r-1)*.1;return{daily:o,weekly:i,monthly:l,yearly:c}}function Ln(t,r){if(!r||r.length===0)return Sl(t);const{currentValue:n}=t,s=r.filter(u=>u.side==="BUY").reduce((u,m)=>u+m.quantity*m.price,0),a=r.filter(u=>u.side==="SELL").reduce((u,m)=>u+m.quantity*m.price,0),o=s-a,i=Pl(o,n),l=new Date(t.createdAt),d=Math.max(1,Math.floor((new Date().getTime()-l.getTime())/(1e3*60*60*24)));return{daily:fr(i,d,1),weekly:fr(i,d,7),monthly:fr(i,d,30),yearly:fr(i,d,365)}}function Mo(t){return t===0?"0.00%":t>0?`+${t.toFixed(2)}%`:`${t.toFixed(2)}%`}function Ro(t){return t>0?"text-green-600":t<0?"text-red-600":"text-gray-600"}const La=(t={})=>{const{initialFilters:r={},autoFetch:n=!0}=t,{accountId:s}=Nt(),[a,o]=p.useState([]),[i,l]=p.useState(!1),[c,d]=p.useState(null),[u,m]=p.useState({createdBy:s,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC",...r}),[x,f]=p.useState({page:1,limit:25,total:0,totalPages:0}),g=p.useCallback(async k=>{l(!0),d(null);try{const C=new URLSearchParams;Object.entries(k).forEach(([_,R])=>{R!=null&&R!==""&&C.append(_,R.toString())});const F=`${k.createdBy?`/api/v1/assets/user/${k.createdBy}`:"/api/v1/assets"}?${C.toString()}`;try{const R=(await we.api.get(F)).data,Y=U=>{const $={initialValue:U.initialValue||0,currentValue:U.currentQuantity&&U.currentPrice?U.currentQuantity*U.currentPrice:0,createdAt:U.createdAt,updatedAt:U.updatedAt};let H;return U.trades&&U.trades.length>0?H=Ln($,U.trades):H=Fn($,U.symbol),{...U,createdAt:U.createdAt,updatedAt:U.updatedAt,initialValue:U.initialValue,initialQuantity:U.initialQuantity,currentValue:U.currentQuantity&&U.currentPrice?U.currentQuantity*U.currentPrice:0,currentQuantity:U.currentQuantity,hasTrades:U.hasTrades,displayName:U.displayName,totalValue:U.hasTrades?U.currentQuantity&&U.currentPrice?U.currentQuantity*U.currentPrice:0:U.initialValue||0,totalQuantity:U.hasTrades?U.totalQuantity||U.currentQuantity||0:U.initialQuantity||0,currentPrice:U.currentPrice||0,avgCost:U.avgCost||0,quantity:U.hasTrades?U.currentQuantity||0:U.initialQuantity||0,performance:H}};if(Array.isArray(R)){const U=R.map(Y);o(U),f({page:1,limit:U.length,total:U.length,totalPages:1})}else{const U=(R.data||[]).map(Y);o(U),f({page:R.page||1,limit:R.limit||25,total:R.total||0,totalPages:R.totalPages||0})}}catch(_){throw console.error("Error fetching assets from API:",_),_}}catch(C){console.error("Error fetching assets:",C),d(C instanceof Error?C.message:"Failed to fetch assets"),o([]),f({page:1,limit:25,total:0,totalPages:0})}finally{l(!1)}},[]),b=p.useCallback(k=>{m(k),n&&g(k)},[n]),S=p.useCallback((k,C)=>{const P={...u,[k]:C};b(P)},[u,b]),j=p.useCallback(()=>{b({createdBy:s,portfolioId:void 0,search:"",type:void 0,minValue:void 0,maxValue:void 0,limit:25,page:1,sortBy:"name",sortOrder:"ASC"})},[b,s]),w=p.useCallback(()=>{g(u)},[u,g]),T=p.useCallback(async()=>{l(!0),d(null);try{await g(u)}catch(k){console.error("forceRefresh error:",k);const C=k instanceof Error?k.message:"Failed to refresh assets";d(C)}finally{l(!1)}},[u,g]),y=p.useCallback(k=>{S("page",k)},[S]),A=p.useCallback(k=>{S("limit",k),S("page",1)},[S]),I=p.useCallback((k,C)=>{S("sortBy",k),S("sortOrder",C)},[S]),M=p.useCallback(async(k,C)=>{try{console.log("useAssets updateAsset called with:",{id:k,data:C}),l(!0),d(null);const P={...C};console.log("Mapped backend data:",P),console.log("Calling assetService.updateAsset...");const F=await Dr.updateAsset(k,P);console.log("assetService.updateAsset result:",F);const _={initialValue:F.initialValue||0,currentValue:F.currentQuantity&&F.currentPrice?F.currentQuantity*F.currentPrice:0,createdAt:F.createdAt,updatedAt:F.updatedAt};let R;F.trades&&F.trades.length>0?R=Ln(_,F.trades):R=Fn(_,F.symbol);const Y={...F,totalValue:F.hasTrades?F.currentQuantity&&F.currentPrice?F.currentQuantity*F.currentPrice:0:F.initialValue||0,totalQuantity:F.hasTrades?F.totalQuantity||F.currentQuantity||0:F.initialQuantity||0,quantity:F.hasTrades?F.currentQuantity||0:F.initialQuantity||0,performance:R};return o(U=>{console.log("Previous assets:",U),console.log("Asset to update ID:",k),console.log("Frontend asset data:",Y);const $=U.map(H=>{if(H.id===k){const q={...H,...Y};return console.log("Updated asset:",q),q}return H});return console.log("New assets state:",$),$}),Y}catch(P){console.error("Error in updateAsset:",P);const F=P instanceof Error?P.message:"Failed to update asset";throw d(F),P}finally{l(!1)}},[]),O=p.useCallback(async k=>{try{l(!0),d(null);const C=await Dr.createAsset(k),P={initialValue:C.initialValue||0,currentValue:C.currentQuantity&&C.currentPrice?C.currentQuantity*C.currentPrice:0,createdAt:C.createdAt,updatedAt:C.updatedAt};let F;C.trades&&C.trades.length>0?F=Ln(P,C.trades):F=Fn(P,C.symbol);const _={...C,totalValue:C.hasTrades?C.currentQuantity&&C.currentPrice?C.currentQuantity*C.currentPrice:0:C.initialValue||0,totalQuantity:C.hasTrades?C.totalQuantity||C.currentQuantity||0:C.initialQuantity||0,quantity:C.hasTrades?C.currentQuantity||0:C.initialQuantity||0,performance:F};return o(R=>[_,...R]),_}catch(C){const P=C instanceof Error?C.message:"Failed to create asset";throw d(P),C}finally{l(!1)}},[]),E=p.useCallback(async k=>{try{l(!0),d(null),await Dr.deleteAsset(k),o(C=>C.filter(P=>P.id!==k)),f(C=>({...C,total:Math.max(0,C.total-1)}))}catch(C){const P=C instanceof Error?C.message:"Failed to delete asset";throw d(P),C}finally{l(!1)}},[u,g]);return p.useEffect(()=>{s&&u.createdBy!==s&&m(k=>({...k,createdBy:s}))},[s]),p.useEffect(()=>{n&&g(u)},[n,g,u]),p.useEffect(()=>{const k=setInterval(()=>{if(a.length>0){const C=a.map(P=>{const F={initialValue:P.initialValue||0,currentValue:P.currentQuantity&&P.currentPrice?P.currentQuantity*P.currentPrice:0,createdAt:P.createdAt,updatedAt:P.updatedAt};let _;return P.trades&&P.trades.length>0?_=Ln(F,P.trades):_=Fn(F,P.symbol),{...P,totalValue:P.hasTrades?P.currentQuantity&&P.currentPrice?P.currentQuantity*P.currentPrice:0:P.initialValue||0,totalQuantity:P.hasTrades?P.totalQuantity||P.currentQuantity||0:P.initialQuantity||0,quantity:P.hasTrades?P.currentQuantity||0:P.initialQuantity||0,performance:_}});o(C)}},3e5);return()=>clearInterval(k)},[a]),{assets:a,loading:i,error:c,pagination:x,setFilters:b,updateFilter:S,clearFilters:j,refresh:w,forceRefresh:T,goToPage:y,setPageSize:A,setSorting:I,updateAsset:M,createAsset:O,deleteAsset:E}};var ht=(t=>(t.BUY="BUY",t.SELL="SELL",t))(ht||{}),jt=(t=>(t.MARKET="MARKET",t.LIMIT="LIMIT",t.STOP="STOP",t))(jt||{}),kr=(t=>(t.MANUAL="MANUAL",t.API="API",t.IMPORT="IMPORT",t))(kr||{}),Tl=(t=>(t.STOCK="STOCK",t.BOND="BOND",t.ETF="ETF",t.MUTUAL_FUND="MUTUAL_FUND",t.CRYPTO="CRYPTO",t.COMMODITY="COMMODITY",t.REIT="REIT",t.GOLD="GOLD",t.DEPOSIT="DEPOSIT",t.CASH="CASH",t.OTHER="OTHER",t))(Tl||{});const ua={STOCK:"Cổ phiếu",BOND:"Trái phiếu",ETF:"Quỹ ETF",MUTUAL_FUND:"Quỹ tương hỗ",CRYPTO:"Tiền điện tử",COMMODITY:"Hàng hóa",REIT:"Bất động sản",GOLD:"Vàng",DEPOSIT:"Tiền gửi",CASH:"Tiền mặt",OTHER:"Khác"},tv=cs({portfolioId:dt().uuid("Invalid portfolio ID").required("Portfolio is required"),assetId:dt().uuid("Invalid asset ID").required("Asset is required"),tradeDate:dt().required("Trade date is required"),side:Wa().oneOf(Object.values(ht)).required("Trade side is required"),quantity:mn().positive("Quantity must be positive").min(.01,"Quantity must be at least 0.01").required("Quantity is required"),price:mn().positive("Price must be positive").min(.01,"Price must be at least 0.01").required("Price is required"),fee:mn().min(0,"Fee cannot be negative").optional(),tax:mn().min(0,"Tax cannot be negative").optional(),tradeType:Wa().oneOf(Object.values(jt)).optional(),notes:dt().max(500,"Notes cannot exceed 500 characters").optional()}),Vn=({field:t,label:r,error:n,helperText:s,disabled:a,inputProps:o,currency:i})=>{const[l,c]=p.useState(""),[d,u]=p.useState(!1),m=j=>{if(!j||j==="")return"";const w=typeof j=="string"?parseFloat(j):j;return isNaN(w)?"":pt(w,i==="VND"?0:2)},x=j=>{if(!j||j.trim()==="")return"";const w=j.replace(/,/g,"").trim(),T=parseFloat(w);return isNaN(T)?"":T.toString()},f=j=>{if(!j)return!0;const w=j.replace(/,/g,"").trim();return/^\d*\.?\d*$/.test(w)};p.useEffect(()=>{d||c(m(t.value))},[t.value,d]);const g=()=>{var w;u(!0);let j=((w=t.value)==null?void 0:w.toString())||"";j.includes(".")&&(j=j.replace(/\.?0+$/,""),j.endsWith(".")&&(j=j.slice(0,-1))),c(j)},b=()=>{u(!1);const j=x(l);j?t.onChange(parseFloat(j)):t.onChange("");const w=m(t.value);c(w)},S=j=>{const w=j.target.value;if(!f(w))return;c(w);const T=x(w);T?t.onChange(parseFloat(T)):w===""&&t.onChange("")};return e.jsx(He,{value:l,onChange:S,onFocus:g,onBlur:b,label:r,type:"text",fullWidth:!0,error:n,helperText:s,disabled:a,inputProps:o,InputProps:{startAdornment:i?e.jsx(h,{variant:"body2",sx:{mr:1,color:"text.secondary"},children:qi[i]||i}):void 0}})},as=({onSubmit:t,initialData:r,isLoading:n=!1,error:s,mode:a="create",defaultPortfolioId:o,showSubmitButton:i=!0,formRef:l})=>{const{accountId:c}=Nt(),{portfolios:d,isLoading:u,error:m}=bs(c),{assets:x,loading:f,error:g}=La(),{control:b,handleSubmit:S,watch:j,setValue:w,formState:{errors:T,isValid:y}}=ds({resolver:Ts(tv),defaultValues:{portfolioId:(r==null?void 0:r.portfolioId)||o||"",assetId:(r==null?void 0:r.assetId)||"",tradeDate:(r==null?void 0:r.tradeDate)||new Date().toISOString(),side:(r==null?void 0:r.side)||ht.BUY,quantity:(r==null?void 0:r.quantity)||0,price:(r==null?void 0:r.price)||0,fee:(r==null?void 0:r.fee)||0,tax:(r==null?void 0:r.tax)||0,tradeType:(r==null?void 0:r.tradeType)||jt.MARKET,notes:(r==null?void 0:r.notes)||""}}),A=j("quantity"),I=j("price"),M=j("fee")||0,O=j("tax")||0,E=j("portfolioId"),k=j("assetId"),C=d==null?void 0:d.find($=>$.portfolioId===E),P=(C==null?void 0:C.baseCurrency)||"VND";p.useEffect(()=>{if(k&&x){const $=x.find(H=>H.id===k);$&&$.currentPrice&&$.currentPrice>0&&w("price",$.currentPrice)}},[k,x,w]);const F=p.useMemo(()=>{const $=Number(A)||0,H=Number(I)||0,q=Number(M)||0,G=Number(O)||0,ee=$*H,J=ee+q+G;return{value:ee,cost:J,fee:q,tax:G}},[A,I,M,O]);p.useEffect(()=>{r&&a==="edit"&&(w("portfolioId",r.portfolioId||""),w("assetId",r.assetId||""),w("tradeDate",r.tradeDate||new Date().toISOString()),w("side",r.side||ht.BUY),w("quantity",r.quantity||0),w("price",r.price||0),w("fee",r.fee||0),w("tax",r.tax||0),w("tradeType",r.tradeType||jt.MARKET),w("notes",r.notes||""))},[r,a,w]);const _=async $=>{try{const H=j(),q={portfolioId:H.portfolioId,assetId:H.assetId,tradeDate:typeof H.tradeDate=="string"?H.tradeDate:H.tradeDate.toISOString(),side:H.side,quantity:H.quantity,price:H.price,fee:H.fee||0,tax:H.tax||0,tradeType:H.tradeType||jt.MARKET,notes:H.notes||""};await t(q)}catch(H){console.error("Error submitting trade form:",H)}},R=$=>$===ht.BUY?"success":"error",Y=$=>$===ht.BUY?"↗":"↘",U=()=>{if(k&&x){const $=x.find(H=>H.id===k);$&&$.currentPrice&&$.currentPrice>0&&w("price",$.currentPrice)}};return u||f?e.jsx(Xt,{dateAdapter:Pr,children:e.jsx(pe,{children:e.jsx(ge,{children:e.jsxs(v,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(Ye,{size:20}),e.jsx(h,{variant:"h5",children:"Loading trade form..."})]})})})}):!(d!=null&&d.length)&&!u?e.jsx(Xt,{dateAdapter:Pr,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(We,{severity:"error",sx:{mb:3},children:"No portfolios available. Please create a portfolio first."}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:m?`Error: ${m}`:"No portfolios found. Please check if the backend is running and try again."})]})})}):!(x!=null&&x.length)&&!f?e.jsx(Xt,{dateAdapter:Pr,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(We,{severity:"error",sx:{mb:3},children:"No assets available. Please create an asset first."}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:g?`Error: ${g}`:"No assets found. Please check if the backend is running and try again."})]})})}):e.jsxs(Xt,{dateAdapter:Pr,children:[s&&e.jsx(We,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:s}),e.jsxs("form",{ref:l,onSubmit:S(_),children:[e.jsxs(v,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Basic Information"}),e.jsxs(N,{container:!0,spacing:1.5,children:[e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"portfolioId",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!T.portfolioId,children:[e.jsx(Je,{children:"Portfolio *"}),e.jsx(et,{...$,label:"Portfolio *",disabled:n||u,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:u?e.jsx(de,{disabled:!0,children:"Loading portfolios..."}):(d==null?void 0:d.length)>0?d.map(H=>e.jsx(de,{value:H.portfolioId,children:H.name},H.portfolioId)):e.jsx(de,{disabled:!0,children:"No portfolios found"})}),T.portfolioId&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:T.portfolioId.message})]})})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"assetId",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!T.assetId,children:[e.jsx(Je,{children:"Asset *"}),e.jsx(et,{...$,label:"Asset *",disabled:n||f,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:f?e.jsxs(de,{disabled:!0,children:[e.jsx(Ye,{size:20}),e.jsx("span",{style:{marginLeft:8},children:"Loading assets..."})]}):(x==null?void 0:x.length)===0?e.jsx(de,{disabled:!0,children:"No assets available"}):x==null?void 0:x.map(H=>e.jsxs(de,{value:H.id,children:[H.symbol||"N/A"," - ",H.name]},H.id))}),T.assetId&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:T.assetId.message})]})})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"tradeDate",control:b,render:({field:$})=>{var H;return e.jsx(Yy,{label:"Trade Date *",disabled:n,value:(()=>{try{if(!$.value)return new Date;if(typeof $.value=="string"){const q=new Date($.value);return isNaN(q.getTime())?new Date:q}return $.value}catch{return new Date}})(),onChange:q=>{try{q&&!isNaN(q.getTime())?$.onChange(q.toISOString()):$.onChange(new Date().toISOString())}catch{$.onChange(new Date().toISOString())}},slotProps:{textField:{fullWidth:!0,error:!!T.tradeDate,helperText:(H=T.tradeDate)==null?void 0:H.message,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}}})}})})]})]}),e.jsxs(v,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Details"}),e.jsxs(N,{container:!0,spacing:1.5,children:[e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"side",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!T.side,children:[e.jsx(Je,{children:"Trade Side *"}),e.jsxs(et,{...$,label:"Trade Side *",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(de,{value:ht.BUY,children:e.jsx(v,{display:"flex",alignItems:"center",gap:1,children:e.jsx(h,{color:"success.main",fontWeight:"medium",children:"↗ BUY"})})}),e.jsx(de,{value:ht.SELL,children:e.jsx(v,{display:"flex",alignItems:"center",gap:1,children:e.jsx(h,{color:"error.main",fontWeight:"medium",children:"↘ SELL"})})})]}),T.side&&e.jsx(h,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:T.side.message})]})})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"quantity",control:b,render:({field:$})=>{var H;return e.jsx(Vn,{field:$,label:"Quantity *",error:!!T.quantity,helperText:(H=T.quantity)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0.01"}})}})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"price",control:b,render:({field:$})=>{var H;return e.jsxs(v,{sx:{position:"relative"},children:[e.jsx(Vn,{field:$,label:`Price per Unit (${P}) *`,error:!!T.price,helperText:(H=T.price)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0.01"},currency:P}),k&&e.jsx(Ar,{title:"Refresh market price",children:e.jsx(St,{size:"small",onClick:U,disabled:n,sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",zIndex:1,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:e.jsx(Mr,{fontSize:"small"})})})]})}})})]})]}),e.jsxs(v,{mb:1.5,children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Additional Information"}),e.jsxs(N,{container:!0,spacing:1.5,children:[e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"fee",control:b,render:({field:$})=>{var H;return e.jsx(Vn,{field:$,label:`Trading Fee (${P})`,error:!!T.fee,helperText:(H=T.fee)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:P})}})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"tax",control:b,render:({field:$})=>{var H;return e.jsx(Vn,{field:$,label:`Tax (${P})`,error:!!T.tax,helperText:(H=T.tax)==null?void 0:H.message,disabled:n,inputProps:{step:"0.01",min:"0"},currency:P})}})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(Qe,{name:"tradeType",control:b,render:({field:$})=>e.jsxs(Ze,{fullWidth:!0,error:!!T.tradeType,children:[e.jsx(Je,{children:"Trade Type"}),e.jsxs(et,{...$,label:"Trade Type",disabled:n,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(de,{value:jt.MARKET,children:"Market Order"}),e.jsx(de,{value:jt.LIMIT,children:"Limit Order"}),e.jsx(de,{value:jt.STOP,children:"Stop Order"})]}),T.tradeType&&e.jsx(h,{variant:"caption",color:"error",children:T.tradeType.message})]})})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(Qe,{name:"notes",control:b,render:({field:$})=>{var H;return e.jsx(He,{...$,label:"Notes",multiline:!0,rows:3,fullWidth:!0,error:!!T.notes,helperText:(H=T.notes)==null?void 0:H.message,disabled:n,placeholder:"Additional notes about this trade...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}})})]})]}),e.jsxs(v,{mb:2,p:1.5,sx:{bgcolor:"grey.50",borderRadius:2,border:1,borderColor:"grey.200"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"bold",sx:{mb:1.5},children:"Trade Summary"}),e.jsxs(N,{container:!0,spacing:1.5,children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"info.main",children:Q(F.value,P)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"warning.main",children:Q(F.fee+F.tax,P)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"primary.main",children:Q(F.cost,P)})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"white",borderRadius:1,border:1,borderColor:"grey.300"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Side"}),e.jsx(ke,{label:j("side"),color:R(j("side")),icon:e.jsx("span",{children:Y(j("side"))}),size:"small",sx:{fontWeight:600}})]})})]})]}),i&&e.jsx(v,{display:"flex",justifyContent:"flex-end",sx:{mt:2},children:e.jsx(Se,{type:"submit",variant:"contained",disabled:!y||n,startIcon:n?e.jsx(Ye,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:n?"Processing...":a==="create"?"Create Trade":"Update Trade"})})]})]})},rv=({open:t,onClose:r,onSubmit:n,initialData:s,isLoading:a=!1,error:o})=>{const i=p.useRef(null),l=async d=>{try{await n(d),r()}catch(u){console.error("Error updating trade:",u)}},c=()=>{i.current&&i.current.requestSubmit()};return e.jsxs(zt,{open:t,onClose:r,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh",maxHeight:"85vh",overflow:"hidden"}},children:[e.jsx(lr,{children:e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(h,{variant:"h6",children:"Edit Trade"}),e.jsx(St,{onClick:r,size:"small",children:e.jsx(va,{})})]})}),e.jsx(Yt,{dividers:!0,sx:{overflow:"auto",maxHeight:"calc(85vh - 100px)",p:0},children:e.jsx(v,{sx:{p:2},children:e.jsx(as,{onSubmit:l,initialData:s,isLoading:a,error:o,mode:"edit",showSubmitButton:!1,formRef:i})})}),e.jsxs(qt,{sx:{p:2},children:[e.jsx(Se,{onClick:r,disabled:a,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(Se,{onClick:c,variant:"contained",disabled:a,startIcon:a?e.jsx(Ye,{size:20}):null,sx:{textTransform:"none",fontWeight:600,px:3},children:a?"Updating...":"Update Trade"})]})]})},nv=({trade:t,tradeDetails:r=[],onEdit:n,isLoading:s=!1})=>{const a=f=>f===ht.BUY?"success":"error",o=f=>f===ht.BUY?e.jsx(gt,{}):e.jsx(kt,{}),i=f=>{switch(f){case jt.MARKET:return"primary";case jt.LIMIT:return"secondary";case jt.STOP:return"warning";default:return"default"}},l=f=>{switch(f){case kr.MANUAL:return"info";case kr.API:return"success";case kr.IMPORT:return"warning";default:return"default"}},c=r.reduce((f,g)=>f+g.matchedQty,0),d=r.reduce((f,g)=>f+g.pnl,0),u=t.quantity*t.price,m=(Number(t.fee)||0)+(Number(t.tax)||0),x=u+m;return e.jsxs(v,{children:[e.jsxs(v,{sx:{bgcolor:"grey.50",p:2,borderRadius:2,mb:2,border:1,borderColor:"grey.200"},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h5",component:"h2",fontWeight:"bold",color:"primary",children:"Trade Details"}),e.jsxs(v,{display:"flex",gap:1,children:[e.jsx(ke,{label:t.assetSymbol,color:"primary",variant:"outlined",size:"small",sx:{fontWeight:600}}),e.jsx(ke,{label:t.side,color:a(t.side),icon:o(t.side),size:"small",sx:{fontWeight:600}}),e.jsx(ke,{label:t.tradeType,color:i(t.tradeType),variant:"outlined",size:"small",sx:{fontWeight:600}})]})]}),e.jsx(v,{display:"flex",gap:1,children:n&&e.jsx(Se,{variant:"contained",startIcon:e.jsx(ls,{}),onClick:()=>n(t),sx:{textTransform:"none",fontWeight:600,px:3,py:1},children:"Edit Trade"})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:[t.assetName," • ",hr(mr(t.tradeDate.toString()),"MMM dd, yyyy HH:mm")]})]}),e.jsxs(N,{container:!0,spacing:2,mb:2,children:[e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{sx:{boxShadow:2,height:"100%"},children:e.jsxs(ge,{children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Basic Information"}),e.jsxs(N,{container:!0,spacing:1.5,children:[e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade ID"}),e.jsxs(h,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[t.tradeId.slice(0,8),"..."]})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Date & Time"}),e.jsx(h,{variant:"body2",fontWeight:"medium",children:hr(mr(t.tradeDate.toString()),"MMM dd, yyyy HH:mm")})]}),e.jsxs(N,{item:!0,xs:12,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Asset"}),e.jsxs(h,{variant:"body2",fontWeight:"medium",children:[t.assetSymbol," - ",t.assetName]})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Trade Type"}),e.jsx(ke,{label:t.tradeType,color:i(t.tradeType),size:"small"})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Source"}),e.jsx(ke,{label:t.source,color:l(t.source),size:"small"})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(h,{variant:"body2",children:hr(mr(t.createdAt.toString()),"MMM dd, yyyy")})]})]})]})})}),e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{sx:{boxShadow:2,height:"100%"},children:e.jsxs(ge,{children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Financial Metrics"}),(t.totalValue!==u||t.totalCost!==x)&&e.jsx(We,{severity:"info",sx:{mb:2,fontSize:"0.75rem"},children:e.jsxs(h,{variant:"caption",children:[e.jsx("strong",{children:"Note:"})," Values shown are calculated from quantity × price. Database values: Total Value: ",Q(Number(t.totalValue)||0),", Total Cost: ",Q(Number(t.totalCost)||0)]})}),e.jsxs(N,{container:!0,spacing:1.5,children:[e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Quantity"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:pt(t.quantity,2)})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Price per Unit"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:Q(t.price)})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Value"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"info.main",children:Q(u)})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Fees & Taxes"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"warning.main",children:Q(m)})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Cost"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:Q(x)})]}),e.jsxs(N,{item:!0,xs:6,children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Realized P&L"}),e.jsx(h,{variant:"subtitle1",fontWeight:"bold",color:t.realizedPl&&t.realizedPl>=0?"success.main":"error.main",children:t.realizedPl?Q(Number(t.realizedPl)||0):"N/A"})]})]})]})})})]}),t.notes&&e.jsx(v,{mb:2,children:e.jsx(pe,{sx:{boxShadow:2},children:e.jsxs(ge,{sx:{p:2},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Notes"}),e.jsx(We,{severity:"info",variant:"outlined",sx:{bgcolor:"info.50",borderColor:"info.200","& .MuiAlert-message":{width:"100%"}},children:e.jsx(h,{variant:"body1",children:t.notes})})]})})}),t.side===ht.SELL&&r.length>0&&e.jsx(v,{mb:2,children:e.jsx(pe,{sx:{boxShadow:2},children:e.jsxs(ge,{sx:{p:2},children:[e.jsx(h,{variant:"subtitle1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Trade Matching Details"}),e.jsxs(N,{container:!0,spacing:2,mb:2,children:[e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"success.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Matched"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"success.main",children:pt(c,2)})]})}),e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"warning.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Remaining"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:"warning.main",children:pt(t.remainingQuantity||0,2)})]})}),e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:d>=0?"success.50":"error.50",borderRadius:2},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Realized P&L"}),e.jsx(h,{variant:"h6",fontWeight:"bold",color:d>=0?"success.main":"error.main",children:Q(d)})]})})]}),e.jsx(Zt,{component:rt,variant:"outlined",sx:{borderRadius:2,boxShadow:1},children:e.jsxs(Jt,{size:"small",children:[e.jsx(er,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600},children:"Buy Trade ID"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"Matched Qty"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"Buy Price"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"Sell Price"}),e.jsx(z,{align:"right",sx:{fontWeight:600},children:"P&L"}),e.jsx(z,{sx:{fontWeight:600},children:"Matched Date"})]})}),e.jsx(tr,{children:r.map(f=>e.jsxs(Ge,{sx:{"&:nth-of-type(odd)":{bgcolor:"grey.25"},"&:hover":{bgcolor:"action.hover"}},children:[e.jsx(z,{children:e.jsxs(h,{variant:"body2",fontFamily:"monospace",fontWeight:"medium",children:[f.buyTradeId.slice(0,8),"..."]})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:pt(f.matchedQty,2)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:Q(f.buyPrice)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:Q(f.sellPrice)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",color:f.pnl>=0?"success.main":"error.main",fontWeight:"bold",children:Q(f.pnl)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:hr(mr(f.createdAt.toString()),"MMM dd, yyyy")})})]},f.detailId))})]})})]})})}),t.side===ht.SELL&&(t.remainingQuantity||0)>0&&e.jsx(v,{mb:2,children:e.jsx(We,{severity:"warning",variant:"outlined",sx:{borderRadius:2,"& .MuiAlert-message":{width:"100%"}},children:e.jsxs(h,{variant:"body1",fontWeight:"medium",children:["⚠️ This sell trade has ",e.jsxs("strong",{children:[pt(t.remainingQuantity||0,2)," units"]})," remaining unmatched. Consider matching with available buy trades to realize P&L."]})})}),s&&e.jsx(v,{display:"flex",justifyContent:"center",py:4,children:e.jsx(h,{children:"Loading trade details..."})})]})},sv=({open:t,onClose:r,onEdit:n,trade:s,tradeDetails:a=[],isLoading:o=!1,error:i})=>s?e.jsxs(zt,{open:t,onClose:r,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh",borderRadius:3,boxShadow:24}},children:[e.jsx(lr,{sx:{bgcolor:"primary.50",borderBottom:1,borderColor:"divider",py:2},children:e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h5",fontWeight:"bold",children:"Trade Details"}),s&&e.jsx(v,{display:"flex",gap:1,children:e.jsxs(h,{variant:"body2",color:"text.secondary",children:[s.assetSymbol," - ",s.assetName]})})]}),e.jsx(St,{onClick:r,size:"small",sx:{"&:hover":{bgcolor:"error.main",color:"white"}},children:e.jsx(va,{})})]})}),e.jsxs(Yt,{sx:{p:0},children:[i&&e.jsx(We,{severity:"error",sx:{m:2,mb:0},children:i}),o?e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,children:e.jsxs(v,{textAlign:"center",children:[e.jsx(Ye,{size:40}),e.jsx(h,{variant:"h6",sx:{mt:2},children:"Loading trade details..."})]})}):e.jsx(v,{sx:{p:2},children:e.jsx(nv,{trade:s,tradeDetails:a,onEdit:n,isLoading:o})})]}),e.jsx(qt,{sx:{bgcolor:"grey.50",borderTop:1,borderColor:"divider",py:1.5,px:2},children:e.jsx(Se,{onClick:r,variant:"contained",sx:{textTransform:"none",px:3},children:"Close"})})]}):null,av=({open:t,onClose:r,onConfirm:n,title:s,message:a,confirmText:o="Confirm",cancelText:i="Cancel",type:l="warning",isLoading:c=!1,confirmColor:d="error"})=>{const u=()=>{switch(l){case"delete":return e.jsx(ba,{color:"error",sx:{fontSize:40}});case"warning":return e.jsx(zr,{color:"warning",sx:{fontSize:40}});default:return e.jsx(zr,{color:"info",sx:{fontSize:40}})}},m=()=>{switch(l){case"delete":return"error.main";case"warning":return"warning.main";default:return"info.main"}};return e.jsxs(zt,{open:t,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:4}},children:[e.jsx(lr,{sx:{pb:1},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(v,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(v,{sx:{p:1.5,borderRadius:"50%",bgcolor:`${m()}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:u()}),e.jsx(h,{variant:"h6",component:"div",fontWeight:600,children:s})]}),e.jsx(St,{onClick:r,size:"small",sx:{color:"text.secondary","&:hover":{bgcolor:"action.hover"}},children:e.jsx(va,{})})]})}),e.jsx(Ua,{}),e.jsx(Yt,{sx:{pt:3,pb:2},children:e.jsx(h,{variant:"body1",color:"text.primary",sx:{lineHeight:1.6},children:a})}),e.jsx(Ua,{}),e.jsxs(qt,{sx:{p:3,gap:2},children:[e.jsx(Se,{onClick:r,variant:"outlined",disabled:c,sx:{textTransform:"none",px:3,py:1,borderRadius:2,minWidth:100},children:i}),e.jsx(Se,{onClick:n,variant:"contained",color:d,disabled:c,sx:{textTransform:"none",px:3,py:1,borderRadius:2,minWidth:100,fontWeight:600},children:c?"Processing...":o})]})]})},ov=({trades:t,isLoading:r=!1,onEdit:n,onDelete:s,onView:a,onCreate:o,onPageChange:i,currentPage:l=1,totalPages:c=1,totalTrades:d=0})=>{const[u,m]=p.useState(""),[x,f]=p.useState("ALL"),[g,b]=p.useState("ALL"),[S,j]=p.useState("ALL"),[w,T]=p.useState(null),[y,A]=p.useState(null),I=p.useMemo(()=>t.filter(P=>{var U,$,H;const F=((U=P.assetSymbol)==null?void 0:U.toLowerCase().includes(u.toLowerCase()))||(($=P.assetName)==null?void 0:$.toLowerCase().includes(u.toLowerCase()))||((H=P.notes)==null?void 0:H.toLowerCase().includes(u.toLowerCase())),_=x==="ALL"||P.side===x,R=g==="ALL"||P.tradeType===g,Y=S==="ALL"||P.source===S;return F&&_&&R&&Y}),[t,u,x,g,S]),M=(P,F)=>{P.stopPropagation(),T(P.currentTarget),A(F)},O=()=>{T(null),A(null)},E=P=>{if(y){switch(P){case"view":a==null||a(y);break;case"edit":n==null||n(y);break;case"delete":s==null||s(y);break}O()}},k=P=>P===ht.BUY?"success":"error",C=P=>P===ht.BUY?"↗":"↘";return e.jsxs(v,{sx:{p:3},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h5",component:"h2",gutterBottom:!0,children:"Trade History"}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Manage and track all your trading activities"})]}),e.jsxs(v,{display:"flex",gap:2,children:[e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Ql,{}),onClick:()=>{},sx:{textTransform:"none"},children:"Filters"}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(Mt,{}),onClick:o,sx:{textTransform:"none"},children:"New Trade"})]})]}),e.jsx(v,{sx:{mb:3},children:e.jsxs(N,{container:!0,spacing:2,mb:3,children:[e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(He,{fullWidth:!0,placeholder:"Search trades by symbol, name, or notes...",value:u,onChange:P=>m(P.target.value),InputProps:{startAdornment:e.jsx(xa,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(N,{item:!0,xs:12,md:2,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Side"}),e.jsxs(et,{value:x,label:"Side",onChange:P=>f(P.target.value),sx:{borderRadius:2},children:[e.jsx(de,{value:"ALL",children:"All Sides"}),e.jsx(de,{value:ht.BUY,children:"Buy"}),e.jsx(de,{value:ht.SELL,children:"Sell"})]})]})}),e.jsx(N,{item:!0,xs:12,md:2,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Type"}),e.jsxs(et,{value:g,label:"Type",onChange:P=>b(P.target.value),sx:{borderRadius:2},children:[e.jsx(de,{value:"ALL",children:"All Types"}),e.jsx(de,{value:jt.MARKET,children:"Market"}),e.jsx(de,{value:jt.LIMIT,children:"Limit"}),e.jsx(de,{value:jt.STOP,children:"Stop"})]})]})}),e.jsx(N,{item:!0,xs:12,md:2,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Source"}),e.jsxs(et,{value:S,label:"Source",onChange:P=>j(P.target.value),sx:{borderRadius:2},children:[e.jsx(de,{value:"ALL",children:"All Sources"}),e.jsx(de,{value:kr.MANUAL,children:"Manual"}),e.jsx(de,{value:kr.API,children:"API"}),e.jsx(de,{value:kr.IMPORT,children:"Import"})]})]})}),e.jsx(N,{item:!0,xs:12,md:2,children:e.jsx(v,{display:"flex",alignItems:"center",height:"100%",children:e.jsx(ke,{label:`${I.length} of ${d} trades`,color:"primary",variant:"outlined",size:"small"})})})]})}),e.jsx(Zt,{component:rt,variant:"outlined",sx:{borderRadius:2,mb:3,boxShadow:1},children:e.jsxs(Jt,{children:[e.jsx(er,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600,color:"text.primary"},children:"Date"}),e.jsx(z,{sx:{fontWeight:600,color:"text.primary"},children:"Asset"}),e.jsx(z,{sx:{fontWeight:600,color:"text.primary"},children:"Side"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Quantity"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Price"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Value"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Fees"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"Total Cost"}),e.jsx(z,{align:"right",sx:{fontWeight:600,color:"text.primary"},children:"P&L"}),e.jsx(z,{align:"center",sx:{fontWeight:600,color:"text.primary"},children:"Actions"})]})}),e.jsx(tr,{children:r?e.jsx(Ge,{children:e.jsx(z,{colSpan:10,align:"center",sx:{py:6},children:e.jsxs(v,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(Ye,{size:40}),e.jsx(h,{color:"text.secondary",children:"Loading trades..."})]})})}):I.length===0?e.jsx(Ge,{children:e.jsx(z,{colSpan:10,align:"center",sx:{py:6},children:e.jsxs(v,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(h,{variant:"h6",color:"text.secondary",children:"No trades found"}),e.jsx(h,{color:"text.secondary",children:"No trades match your current filter criteria."}),e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Mt,{}),onClick:o,sx:{mt:1},children:"Create First Trade"})]})})}):I.map(P=>{var F,_;return e.jsxs(Ge,{hover:!0,onClick:()=>a==null?void 0:a(P),sx:{"&:hover":{bgcolor:"action.hover",cursor:"pointer"},"&:last-child td":{borderBottom:0}},children:[e.jsxs(z,{children:[e.jsx(h,{variant:"body2",children:hr(mr(P.tradeDate.toString()),"MMM dd, yyyy")}),e.jsx(h,{variant:"caption",color:"text.secondary",children:hr(mr(P.tradeDate.toString()),"HH:mm")})]}),e.jsx(z,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:P.assetSymbol||((F=P.asset)==null?void 0:F.symbol)||"N/A"}),e.jsx(h,{variant:"caption",color:"text.secondary",children:P.assetName||((_=P.asset)==null?void 0:_.name)||"N/A"})]})}),e.jsx(z,{children:e.jsx(ke,{label:P.side,color:k(P.side),size:"small",icon:e.jsx("span",{style:{fontSize:"14px"},children:C(P.side)}),sx:{fontWeight:600,"& .MuiChip-icon":{marginLeft:.5}}})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",children:pt(P.quantity,2)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",children:Q(P.price)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:Q(Number(P.totalValue)||P.quantity*P.price)})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",children:Q((Number(P.fee)||0)+(Number(P.tax)||0))})}),e.jsx(z,{align:"right",children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:Q(Number(P.totalCost)||P.quantity*P.price+(Number(P.fee)||0)+(Number(P.tax)||0))})}),e.jsx(z,{align:"right",children:P.realizedPl!==void 0&&e.jsx(h,{variant:"body2",color:P.realizedPl>=0?"success.main":"error.main",fontWeight:"medium",children:Q(Number(P.realizedPl)||0)})}),e.jsx(z,{align:"center",children:e.jsx(Ar,{title:"Actions",children:e.jsx(St,{size:"small",onClick:R=>M(R,P),sx:{"&:hover":{bgcolor:"primary.main",color:"white"}},children:e.jsx(Bo,{})})})})]},P.tradeId)})})]})}),c>1&&e.jsx(v,{display:"flex",justifyContent:"center",mt:3,children:e.jsx(Kl,{count:c,page:l,onChange:(P,F)=>i==null?void 0:i(F),color:"primary",shape:"rounded",size:"large"})}),e.jsxs(Uo,{anchorEl:w,open:!!w,onClose:O,PaperProps:{sx:{borderRadius:2,boxShadow:3,minWidth:160}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(de,{onClick:()=>E("view"),sx:{py:1.5},children:[e.jsx(Bt,{children:e.jsx(pa,{fontSize:"small",color:"primary"})}),e.jsx(Ut,{children:"View Details"})]}),e.jsxs(de,{onClick:()=>E("edit"),sx:{py:1.5},children:[e.jsx(Bt,{children:e.jsx(ls,{fontSize:"small",color:"primary"})}),e.jsx(Ut,{children:"Edit Trade"})]}),e.jsxs(de,{onClick:()=>E("delete"),sx:{py:1.5,color:"error.main"},children:[e.jsx(Bt,{children:e.jsx(ba,{fontSize:"small",color:"error"})}),e.jsx(Ut,{children:"Delete Trade"})]})]})]})},Dl=({portfolioId:t,onCreate:r,isCompactMode:n=!1})=>{var P,F;const[s,a]=p.useState({assetId:"",side:"",startDate:"",endDate:""}),[o,i]=p.useState(!1),[l,c]=p.useState(!1),[d,u]=p.useState(!1),[m,x]=p.useState(null),{data:f,isLoading:g,error:b}=Na(t,s),S=np(),j=rp(),{data:w,isLoading:T,error:y}=sp((m==null?void 0:m.tradeId)||""),A=_=>{a(_)},I=_=>{x(_),i(!0)},M=_=>{x(_),c(!0)},O=_=>{x(_),u(!0)},E=async()=>{if(m)try{await S.mutateAsync(m.tradeId),u(!1),x(null)}catch(_){console.error("Error deleting trade:",_)}},k=()=>{i(!1),c(!1),u(!1),x(null)},C=()=>{r&&r()};return g?e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(Ye,{}),e.jsx(h,{sx:{ml:2},children:"Loading trades..."})]}):b?e.jsx(We,{severity:"error",children:(b==null?void 0:b.message)||"Failed to load trades"}):e.jsxs(v,{sx:{p:n?1:0},children:[e.jsx(ov,{trades:f||[],isLoading:g,error:b==null?void 0:b.message,onEdit:I,onView:M,onDelete:O,onCreate:C,onFiltersChange:A,filters:s,totalTrades:(f==null?void 0:f.length)||0}),e.jsx(rv,{open:o,onClose:k,onSubmit:async _=>{if(m)try{await j.mutateAsync({id:m.tradeId,data:{..._,tradeDate:typeof _.tradeDate=="string"?_.tradeDate:_.tradeDate.toISOString()}}),k()}catch(R){console.error("Error updating trade:",R)}},initialData:m?{...m,tradeDate:typeof m.tradeDate=="string"?m.tradeDate:m.tradeDate.toISOString()}:void 0,isLoading:j.isLoading,error:(P=j.error)==null?void 0:P.message}),e.jsx(sv,{open:l,onClose:k,onEdit:I,trade:m,tradeDetails:(w==null?void 0:w.tradeDetails)||[],isLoading:T,error:typeof y=="object"&&y!==null&&"message"in y?y.message:void 0}),e.jsx(av,{open:d,onClose:k,onConfirm:E,title:"Delete Trade",message:`Are you sure you want to delete this trade for ${(m==null?void 0:m.assetSymbol)||((F=m==null?void 0:m.asset)==null?void 0:F.symbol)||"this asset"}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"delete",isLoading:S.isLoading,confirmColor:"error"})]})},iv=t=>!t||typeof t!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),lv=({analysis:t,currency:r="USD",isLoading:n=!1,error:s,selectedTimeframe:a="ALL",selectedMetric:o="pnl",onTimeframeChange:i,onMetricChange:l,isCompactMode:c=!1})=>{const[d,u]=p.useState("pie"),m=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C","#8DD1E1","#D084D0","#FFB347","#87CEEB","#DDA0DD","#F0E68C","#98FB98","#F4A460","#20B2AA","#FF6347","#4682B4","#D2691E"],f=(y=>{switch(y){case"VND":return"vi-VN";case"USD":return"en-US";case"EUR":return"de-DE";case"GBP":return"en-GB";case"JPY":return"ja-JP";default:return"en-US"}})(r),g=y=>y>=100?In(y,1,f):(y>=10,In(y,2,f)),b=p.useMemo(()=>{if(!t||!t.pnlSummary||!t.statistics||!t.riskMetrics||!Array.isArray(t.assetPerformance))return!1;if(t.pnlSummary.winRate!==void 0){const y=Number(t.pnlSummary.winRate);if(isNaN(y)||y<0||y>100)return!1}if(t.riskMetrics.volatility!==void 0){const y=Number(t.riskMetrics.volatility);if(isNaN(y)||y<0)return!1}return!0},[t]),S=p.useMemo(()=>t.monthlyPerformance.map(y=>{var A,I,M,O,E;return{month:y.month,pnl:parseFloat(((A=y.totalPl)==null?void 0:A.toString())||"0"),trades:y.tradesCount||0,winRate:y.winRate||0,totalVolume:parseFloat(((I=y.totalVolume)==null?void 0:I.toString())||"0"),winningTrades:y.winningTrades||0,losingTrades:y.losingTrades||0,formattedPnl:Q(parseFloat(((M=y.totalPl)==null?void 0:M.toString())||"0"),r,{},f),formattedVolume:Q(parseFloat(((O=y.totalVolume)==null?void 0:O.toString())||"0"),r,{},f),formattedWinRate:Ce(y.winRate||0,1,f),color:parseFloat(((E=y.totalPl)==null?void 0:E.toString())||"0")>=0?"#00C49F":"#FF8042"}}),[t.monthlyPerformance,r,f]),j=p.useMemo(()=>{var I;if(console.log("🔍 Asset Performance Debug:",{hasAnalysis:!!t,hasAssetPerformance:!!(t!=null&&t.assetPerformance),isArray:Array.isArray(t==null?void 0:t.assetPerformance),assetPerformance:t==null?void 0:t.assetPerformance,length:(I=t==null?void 0:t.assetPerformance)==null?void 0:I.length}),!t.assetPerformance||!Array.isArray(t.assetPerformance))return console.log("Asset performance not available or not an array"),[];const y=t.assetPerformance.map((M,O)=>{var C,P,F,_,R,Y;const E=parseFloat(((C=M.totalPl)==null?void 0:C.toString())||"0"),k=Math.abs(E);return{assetId:M.assetId||`asset-${O}`,name:M.assetSymbol||"Unknown",fullName:M.assetName||"Unknown Asset",value:k,originalValue:E,trades:M.tradesCount||0,winRate:M.winRate||0,totalVolume:parseFloat(((P=M.totalVolume)==null?void 0:P.toString())||"0"),quantity:parseFloat(((F=M.quantity)==null?void 0:F.toString())||"0"),avgCost:parseFloat(((_=M.avgCost)==null?void 0:_.toString())||"0"),marketValue:parseFloat(((R=M.marketValue)==null?void 0:R.toString())||"0"),color:m[O%m.length],formattedValue:Q(E,r,{},f),formattedVolume:Q(parseFloat(((Y=M.totalVolume)==null?void 0:Y.toString())||"0"),r,{},f),formattedWinRate:Ce(M.winRate||0,1,f)}}),A=y.sort((M,O)=>O.value-M.value);return console.log("🔍 Asset Chart Data Processed:",{originalLength:y.length,sortedLength:A.length,sampleData:A.slice(0,3),allValues:A.map(M=>M.value),originalValues:A.map(M=>M.originalValue),hasPositiveValues:A.some(M=>M.value>0),colors:A.map(M=>M.color)}),A},[t.assetPerformance,r,f]),w=({active:y,payload:A,label:I})=>{var M;if(y&&A&&A.length){const O=(M=A[0])==null?void 0:M.payload;return e.jsxs(v,{sx:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:2,p:2,boxShadow:3,minWidth:200},children:[e.jsx(h,{variant:"subtitle2",fontWeight:"bold",color:"primary",gutterBottom:!0,children:I}),A.map((E,k)=>e.jsxs(v,{sx:{mb:.5},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",children:[E.dataKey==="pnl"?"P&L":E.dataKey==="trades"?"Trades":E.dataKey==="winRate"?"Win Rate":E.dataKey==="value"?"Value":E.dataKey,":"]}),e.jsx(h,{variant:"body2",fontWeight:"bold",color:E.color,children:E.dataKey==="pnl"&&(O!=null&&O.formattedPnl)?O.formattedPnl:E.dataKey==="trades"?E.value:E.dataKey==="winRate"&&(O!=null&&O.formattedWinRate)?O.formattedWinRate:E.dataKey==="value"&&(O!=null&&O.formattedValue)?O.formattedValue:E.dataKey==="pnl"?Q(E.value,r,{},f):E.value})]},k)),(O==null?void 0:O.fullName)&&e.jsx(v,{sx:{mt:1,pt:1,borderTop:"1px solid #f0f0f0"},children:e.jsx(h,{variant:"caption",color:"text.secondary",children:O.fullName})})]})}return null},T=({name:y,percent:A,payload:I})=>{const M=In(A*100,1,f),O=(I==null?void 0:I.formattedValue)||Q((I==null?void 0:I.value)||0,r,{},f);return A<.02?`${y}
${O}`:A<.05?`${y}
${M}
${O}`:`${y}
${M}
${O}`};return n?e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(Ye,{}),e.jsx(h,{sx:{ml:2},children:"Loading analysis..."})]}):s?e.jsx(We,{severity:"error",children:(s==null?void 0:s.message)||"Failed to load trade analysis"}):t?b?e.jsxs(v,{sx:{p:c?1:3},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:c?2:4,children:[e.jsxs(v,{children:[e.jsx(h,{variant:c?"h5":"h4",component:"h1",gutterBottom:!0,sx:{fontSize:c?"0.9rem":void 0},children:"Trading Analysis"}),e.jsx(h,{variant:c?"body2":"body1",color:"text.secondary",sx:{fontSize:c?"0.75rem":void 0},children:"Comprehensive performance insights and analytics"})]}),e.jsxs(v,{display:"flex",gap:2,children:[e.jsxs(Ze,{size:"small",sx:{minWidth:140},children:[e.jsx(Je,{children:"Timeframe"}),e.jsxs(et,{value:a,label:"Timeframe",onChange:y=>i==null?void 0:i(y.target.value),sx:{borderRadius:2},children:[e.jsx(de,{value:"ALL",children:"All Time"}),e.jsx(de,{value:"1M",children:"1 Month"}),e.jsx(de,{value:"3M",children:"3 Months"}),e.jsx(de,{value:"6M",children:"6 Months"}),e.jsx(de,{value:"1Y",children:"1 Year"})]})]}),e.jsxs(Ze,{size:"small",sx:{minWidth:140},children:[e.jsx(Je,{children:"Metric"}),e.jsxs(et,{value:o,label:"Metric",onChange:y=>l==null?void 0:l(y.target.value),sx:{borderRadius:2},children:[e.jsx(de,{value:"pnl",children:"P&L"}),e.jsx(de,{value:"trades",children:"Trades"}),e.jsx(de,{value:"winrate",children:"Win Rate"})]})]})]})]}),e.jsxs(N,{container:!0,spacing:c?1:3,mb:c?2:4,children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:140,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total P&L"}),e.jsx(h,{variant:"h4",color:t.pnlSummary.totalPnl>=0?"success.main":"error.main",children:Q(t.pnlSummary.totalPnl,r,{},f)})]}),e.jsx(v,{sx:{color:t.pnlSummary.totalPnl>=0?"success.main":"error.main",display:"flex",alignItems:"center"},children:e.jsx(gt,{})})]}),e.jsx(v,{display:"flex",alignItems:"center",gap:1,children:e.jsx(ke,{label:`${Ce(t.pnlSummary.winRate,1,f)} Win Rate`,color:t.pnlSummary.winRate>=50?"success":"warning",size:"small",variant:"outlined"})})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:140,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Trades"}),e.jsx(h,{variant:"h4",children:pt(t.statistics.totalTrades,0,f)})]}),e.jsx(v,{sx:{color:"primary.main",display:"flex",alignItems:"center"},children:e.jsx(Qn,{})})]}),e.jsxs(v,{display:"flex",gap:1,flexWrap:"wrap",children:[e.jsx(ke,{label:`${t.statistics.buyTrades} Buy`,color:"success",size:"small",variant:"outlined"}),e.jsx(ke,{label:`${t.statistics.sellTrades} Sell`,color:"error",size:"small",variant:"outlined"})]})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:140,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Volume"}),e.jsx(h,{variant:"h4",children:Q(t.statistics.totalVolume,r,{},f)})]}),e.jsx(v,{sx:{color:"info.main",display:"flex",alignItems:"center"},children:e.jsx(Gl,{})})]}),e.jsxs(h,{variant:"body2",color:"text.secondary",children:["Avg: ",Q(t.statistics.averagePrice,r,{},f)]})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:140,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sharpe Ratio"}),e.jsx(h,{variant:"h4",color:"primary",children:t.riskMetrics.sharpeRatio})]}),e.jsx(v,{sx:{color:"warning.main",display:"flex",alignItems:"center"},children:e.jsx(Xl,{})})]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Risk-Adjusted Return"})]})})})]}),e.jsxs(N,{container:!0,spacing:3,mb:4,children:[e.jsx(N,{item:!0,xs:12,lg:8,children:e.jsx(pe,{sx:{boxShadow:2,height:400},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Monthly Performance"}),e.jsx(ke,{label:"P&L Trend",color:"primary",size:"small",variant:"outlined"})]}),e.jsx(v,{sx:{flex:1,minHeight:0},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(us,{data:S,children:[e.jsx(nr,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(sr,{dataKey:"month",tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"}}),e.jsx(ar,{tick:{fontSize:12},axisLine:{stroke:"#e0e0e0"},tickFormatter:y=>Q(y,r,{},f)}),e.jsx(Et,{content:e.jsx(w,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(Qr,{type:"monotone",dataKey:"pnl",stroke:"#1976d2",strokeWidth:3,dot:y=>{const{cx:A,cy:I,payload:M,index:O}=y;return e.jsx("circle",{cx:A,cy:I,r:4,fill:(M==null?void 0:M.color)||"#1976d2",stroke:"#fff",strokeWidth:2},`dot-${O}`)},activeDot:{r:6,stroke:"#1976d2",strokeWidth:2},name:"P&L"})]})})})]})})}),e.jsx(N,{item:!0,xs:12,lg:4,children:e.jsx(pe,{sx:{boxShadow:2,height:400},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(h,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Asset Performance"}),e.jsxs(v,{display:"flex",gap:1,children:[e.jsx(ke,{label:"Pie Chart",size:"small",color:d==="pie"?"primary":"default",onClick:()=>u("pie"),sx:{cursor:"pointer"}}),e.jsx(ke,{label:"Compact List",size:"small",color:d==="compact"?"primary":"default",onClick:()=>u("compact"),sx:{cursor:"pointer"}})]})]}),j&&j.length>0&&j.some(y=>y.value>0)?e.jsx(v,{sx:{height:350,display:"flex",flexDirection:"column"},children:d==="pie"?e.jsx(v,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center","& .recharts-pie-label-text":{fontSize:"10px !important",fontWeight:"bold !important",fill:"#333 !important",textShadow:"1px 1px 2px rgba(255,255,255,0.8) !important"}},children:e.jsx(Rt,{width:"100%",height:"100%",children:e.jsxs(Yo,{children:[e.jsx(qo,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:T,outerRadius:90,innerRadius:35,fill:"#8884d8",dataKey:"value",minAngle:1,paddingAngle:1,children:j.map((y,A)=>e.jsx(jn,{fill:y.color||m[A%m.length]},`cell-${A}`))}),e.jsx(Et,{content:e.jsx(w,{}),contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})})}):e.jsx(v,{sx:{flex:1,overflow:"auto",border:"1px solid",borderColor:"grey.200",borderRadius:1,backgroundColor:"grey.50",p:2},children:e.jsx(v,{display:"flex",flexWrap:"wrap",gap:1,children:j.map((y,A)=>{const I=j.reduce((O,E)=>O+E.value,0),M=I>0?y.value/I*100:0;return e.jsx(ke,{icon:e.jsx(v,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:y.color||m[A%m.length],border:"1px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.2)"}}),label:e.jsxs(v,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(h,{variant:"caption",fontWeight:"bold",children:y.name}),e.jsx(h,{variant:"caption",fontWeight:"bold",color:y.originalValue>=0?"success.main":"error.main",children:y.formattedValue}),e.jsxs(h,{variant:"caption",color:"primary",fontWeight:"bold",children:["(",Ce(M,1,f),")"]})]}),variant:"outlined",sx:{height:32,backgroundColor:y.originalValue>=0?"success.50":"error.50",borderColor:"grey.300",borderWidth:1,"&:hover":{backgroundColor:y.originalValue>=0?"success.100":"error.100",transform:"scale(1.02)",borderColor:y.originalValue>=0?"success.main":"error.main"},transition:"all 0.2s ease-in-out"}},A)})})})}):e.jsxs(v,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:300,children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,children:"No asset performance data available"}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Debug: assetChartData length = ",(j==null?void 0:j.length)||0]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Analysis has assetPerformance: ",t!=null&&t.assetPerformance?"Yes":"No"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Has positive values: ",j!=null&&j.some(y=>y.value>0)?"Yes":"No"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",children:["Values: ",j==null?void 0:j.map(y=>`${y.name}: ${y.value}`).join(", ")]})]})]})})})]}),e.jsx(N,{container:!0,spacing:3,mb:4,children:e.jsx(N,{item:!0,xs:12,children:e.jsx(pe,{sx:{boxShadow:2},children:e.jsxs(ge,{children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Risk Metrics"}),e.jsx(ke,{label:"Risk Assessment",color:"warning",size:"small",variant:"outlined"})]}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:t.riskMetrics.sharpeRatio}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Sharpe Ratio"})]})}),e.jsx(N,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:t.riskMetrics.volatility>200?"error.50":"warning.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:t.riskMetrics.volatility>200?"error.main":"warning.main",fontWeight:"bold",children:g(t.riskMetrics.volatility)}),e.jsxs(h,{variant:"body2",color:"text.secondary",mt:1,children:["Volatility",t.riskMetrics.volatility>200&&e.jsx(h,{variant:"caption",color:"error.main",display:"block",children:"⚠️ Extreme volatility"})]})]})}),e.jsx(N,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"error.main",fontWeight:"bold",children:Q(t.riskMetrics.var95,r,{},f)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"VaR (95%)"})]})}),e.jsx(N,{item:!0,xs:6,sm:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"error.main",fontWeight:"bold",children:Q(t.riskMetrics.maxDrawdown,r,{},f)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Max Drawdown"})]})})]})]})})})}),e.jsxs(N,{container:!0,spacing:3,mb:4,children:[e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{sx:{boxShadow:2,height:500},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Top Performing Trades"}),e.jsx(ke,{label:"Best",color:"success",size:"small",variant:"outlined"})]}),e.jsx(Zt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Jt,{size:"small",stickyHeader:!0,children:[e.jsx(er,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600},children:"Asset"}),e.jsx(z,{sx:{fontWeight:600},children:"Side"}),e.jsx(z,{sx:{fontWeight:600},children:"P&L"}),e.jsx(z,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(tr,{children:t.topTrades.slice(0,5).map(y=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),e.jsx(z,{children:e.jsx(ke,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),e.jsx(z,{color:y.realizedPl>=0?"success.main":"error.main",children:Q(Number(y.realizedPl)||0,r,{},f)}),e.jsx(z,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})}),e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{sx:{boxShadow:2,height:500},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(h,{variant:"h6",children:"Worst Performing Trades"}),e.jsx(ke,{label:"Worst",color:"error",size:"small",variant:"outlined"})]}),e.jsx(Zt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Jt,{size:"small",stickyHeader:!0,children:[e.jsx(er,{children:e.jsxs(Ge,{sx:{bgcolor:"grey.50"},children:[e.jsx(z,{sx:{fontWeight:600},children:"Asset"}),e.jsx(z,{sx:{fontWeight:600},children:"Side"}),e.jsx(z,{sx:{fontWeight:600},children:"P&L"}),e.jsx(z,{sx:{fontWeight:600},children:"Date"})]})}),e.jsx(tr,{children:t.worstTrades.slice(0,5).map(y=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:y.assetSymbol}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.assetName})]})}),e.jsx(z,{children:e.jsx(ke,{label:y.side,color:y.side==="BUY"?"success":"error",size:"small"})}),e.jsx(z,{color:y.realizedPl>=0?"success.main":"error.main",children:Q(Number(y.realizedPl)||0,r,{},f)}),e.jsx(z,{children:new Date(y.tradeDate).toLocaleDateString()})]},y.tradeId))})]})})]})})})]}),e.jsx(N,{container:!0,spacing:3,children:e.jsx(N,{item:!0,xs:12,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Performance Details"}),e.jsx(Zt,{sx:{flex:1,overflow:"auto"},children:e.jsxs(Jt,{stickyHeader:!0,children:[e.jsx(er,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Asset"}),e.jsx(z,{children:"Quantity"}),e.jsx(z,{children:"Avg Cost"}),e.jsx(z,{children:"Market Value"}),e.jsx(z,{children:"P&L"}),e.jsx(z,{children:"Trades"}),e.jsx(z,{children:"Win Rate"})]})}),e.jsx(tr,{children:j&&j.length>0?j.map(y=>e.jsxs(Ge,{hover:!0,children:[e.jsx(z,{children:e.jsxs(v,{children:[e.jsx(h,{variant:"body2",fontWeight:"bold",children:y.name}),e.jsx(h,{variant:"caption",color:"text.secondary",children:y.fullName})]})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:pt(y.quantity,2,f)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:Q(y.avgCost,r,{},f)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:Q(y.marketValue,r,{},f)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"bold",color:y.value>=0?"success.main":"error.main",children:y.formattedValue})}),e.jsx(z,{children:e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(h,{variant:"body2",children:y.trades}),e.jsx(ke,{label:y.winRate>=50?"Win":"Loss",size:"small",color:y.winRate>=50?"success":"error",variant:"outlined"})]})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"bold",children:y.formattedWinRate})})]},y.assetId||y.name)):e.jsx(Ge,{children:e.jsx(z,{colSpan:7,align:"center",sx:{py:4},children:e.jsx(h,{color:"text.secondary",children:"No asset performance data available"})})})})]})})]})})})})]}):e.jsx(We,{severity:"error",children:"Invalid analysis data format"}):e.jsx(We,{severity:"info",children:"No trade data available for analysis"})},kl=({portfolioId:t,isCompactMode:r=!1})=>{const[n,s]=p.useState("ALL"),[a,o]=p.useState("pnl");if(!iv(t))return e.jsx(We,{severity:"error",children:"Invalid portfolio ID format"});const{portfolio:i,isLoading:l,error:c}=Ai(t),d={timeframe:n,metric:a},{data:u,isLoading:m,error:x}=ap(t,d);return console.log("🔍 TradeAnalysisContainer - Filters:",{selectedTimeframe:n,selectedMetric:a,portfolioId:t}),console.log("🔍 TradeAnalysisContainer - Analysis Data:",{hasAnalysis:!!u,analysisKeys:u?Object.keys(u):[],assetPerformance:u==null?void 0:u.assetPerformance,monthlyPerformance:u==null?void 0:u.monthlyPerformance,pnlSummary:u==null?void 0:u.pnlSummary,statistics:u==null?void 0:u.statistics,riskMetrics:u==null?void 0:u.riskMetrics}),l||m?e.jsxs(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:[e.jsx(Ye,{}),e.jsx(h,{sx:{ml:2},children:"Loading analysis..."})]}):c?e.jsx(We,{severity:"error",children:(c==null?void 0:c.message)||"Failed to load portfolio information"}):x?e.jsx(We,{severity:"error",children:(x==null?void 0:x.message)||"Failed to load trade analysis"}):i?u?e.jsx(lv,{analysis:u,currency:i.baseCurrency,selectedTimeframe:n,selectedMetric:a,onTimeframeChange:s,onMetricChange:o,isCompactMode:r}):e.jsx(We,{severity:"info",children:"No trade data available for analysis"}):e.jsx(We,{severity:"error",children:"Portfolio not found"})};function Qs(t){const{children:r,value:n,index:s,...a}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==s,id:`portfolio-tabpanel-${s}`,"aria-labelledby":`portfolio-tab-${s}`,...a,children:n===s&&e.jsx(v,{sx:{p:3},children:r})})}const cv=()=>{const{portfolioId:t}=zo(),r=bn(),[n,s]=p.useState(1),[a,o]=p.useState(!1),[i,l]=p.useState(null),[c,d]=p.useState(!1),[u,m]=p.useState(null),[x,f]=p.useState(null),[g,b]=p.useState(!1),[S,j]=p.useState(null),[w,T]=p.useState(null),[y,A]=p.useState(!1),[I,M]=p.useState(null),[O,E]=p.useState(null),[k,C]=p.useState(!1),[P,F]=p.useState(null),[_,R]=p.useState(null),[Y,U]=p.useState(!1),[$,H]=p.useState(null),[q,G]=p.useState(null),[ee,J]=p.useState(!1),[D,Z]=p.useState(null),[ye,B]=p.useState(null),[K,le]=p.useState(!1),[Te,xe]=p.useState(null),[be,re]=p.useState(null),[Pe,ze]=p.useState(!1),[Be,lt]=p.useState(null),[ae,De]=p.useState(!1),[te,me]=p.useState(!1),oe=(ve,fe)=>ae?fe:ve,{portfolio:ue,isLoading:X,error:he,refetch:Le}=Ai(t),{navData:Me,performanceData:Ue,allocationData:ot,isLoading:Tt,error:vr}=Qu(t);p.useEffect(()=>{(async()=>{if(t)try{d(!0),m(null);const fe=await we.getPortfolioRiskReturn(t);l(fe)}catch(fe){console.error("Error fetching risk-return data:",fe),m("Failed to load risk-return data")}finally{d(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{b(!0),j(null);const fe=await we.getPortfolioAssetPerformance(t);f(fe)}catch(fe){console.error("Error fetching asset performance data:",fe),j("Failed to load asset performance data")}finally{b(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{A(!0),M(null);const fe=await we.getPortfolioRiskMetrics(t);T(fe)}catch(fe){console.error("Error fetching risk metrics data:",fe),M("Failed to load risk metrics data")}finally{A(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{C(!0),F(null);const fe=await we.getPortfolioDiversificationHeatmap(t);E(fe)}catch(fe){console.error("Error fetching diversification data:",fe),F("Failed to load diversification data")}finally{C(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{U(!0),H(null);const fe=await we.getPortfolioAllocationTimeline(t);R(fe)}catch(fe){console.error("Error fetching allocation timeline data:",fe),H("Failed to load allocation timeline data")}finally{U(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{J(!0),Z(null);const fe=await we.getPortfolioCashFlowAnalysis(t);G(fe)}catch(fe){console.error("Error fetching cash flow data:",fe),Z("Failed to load cash flow data")}finally{J(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{le(!0),xe(null);const fe=await we.getPortfolioBenchmarkComparison(t);B(fe)}catch(fe){console.error("Error fetching benchmark data:",fe),xe("Failed to load benchmark data")}finally{le(!1)}})()},[t]),p.useEffect(()=>{(async()=>{if(t)try{ze(!0),lt(null);const fe=await we.getPortfolioAssetDetailSummary(t);re(fe)}catch(fe){console.error("Error fetching asset detail data:",fe),lt("Failed to load asset detail data")}finally{ze(!1)}})()},[t]);const br=Ki(),bt=Na(t),_r=bt.data||[],Rs=(ve,fe)=>{s(fe)},Es=async ve=>{try{await br.mutateAsync(ve),o(!1)}catch(fe){console.error("Error creating trade:",fe)}},Is=async()=>{if(t){me(!0);try{await Promise.all([Le(),bt.refetch(),we.getPortfolioRiskReturn(t),we.getPortfolioAssetPerformance(t),we.getPortfolioRiskMetrics(t),we.getPortfolioDiversificationHeatmap(t),we.getPortfolioAllocationTimeline(t),we.getPortfolioCashFlowAnalysis(t),we.getPortfolioBenchmarkComparison(t),we.getPortfolioAssetDetailSummary(t)]),l(null),f(null),T(null),E(null),R(null),G(null),B(null),re(null),console.log("All data refreshed successfully")}catch(ve){console.error("Error refreshing data:",ve)}finally{me(!1)}}},Jr=_r.length,An=_r.reduce((ve,fe)=>ve+(Number(fe.quantity)*Number(fe.price)||0),0),en=_r.reduce((ve,fe)=>ve+(Number(fe.fee)||0)+(Number(fe.tax)||0),0),Fr=_r.reduce((ve,fe)=>ve+(Number(fe.realizedPl)||0),0),tn=[{title:"Total Trades",value:Jr,color:"primary",icon:e.jsx(gt,{})},{title:"Total Volume",value:Q(An,(ue==null?void 0:ue.baseCurrency)||"VND"),color:"info",icon:e.jsx(rr,{})},{title:"Fees & Taxes",value:Q(en,(ue==null?void 0:ue.baseCurrency)||"VND"),color:"warning",icon:e.jsx(kt,{})},{title:"Realized P&L",value:Q(Fr,(ue==null?void 0:ue.baseCurrency)||"VND"),color:Fr>=0?"success":"error",icon:e.jsx(gt,{})}];Wt.useEffect(()=>{console.log("Portfolio Detail Debug:",{portfolio:ue,navData:Me,performanceData:Ue,allocationData:ot,isAnalyticsLoading:Tt,analyticsError:vr})},[ue,Me,Ue,ot,Tt,vr]);const Os=()=>{r("/portfolios")};return X?e.jsx(Ur,{maxWidth:"xl",children:e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(Ye,{})})}):he||!ue?e.jsx(Ur,{maxWidth:"xl",children:e.jsx(v,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:e.jsx(h,{color:"error",children:"Failed to load portfolio. Please try again."})})}):e.jsxs(Ur,{maxWidth:"xl",sx:{scrollBehavior:"smooth"},children:[e.jsx(v,{sx:{position:"sticky",top:40,zIndex:999,backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",py:2,px:3,mb:4,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(10px)"},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[e.jsxs(v,{sx:{textAlign:{xs:"center",sm:"left"}},children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:ue.name}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Portfolio Management & Trading"})]}),e.jsxs(v,{display:"flex",gap:2,sx:{flexDirection:{xs:"column",sm:"row"},width:{xs:"100%",sm:"auto"}},children:[e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Wo,{}),onClick:Os,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,width:{xs:"100%",sm:"auto"},transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}},children:"Back to Portfolios"}),e.jsx(Ar,{title:"Refresh all portfolio data",children:e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Mr,{}),onClick:Is,disabled:te,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,width:{xs:"100%",sm:"auto"},transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}},children:te?"Refreshing...":"Refresh All"})}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(Mt,{}),onClick:()=>o(!0),sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,width:{xs:"100%",sm:"auto"},transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"}},children:"New Trade"})]})]})}),e.jsxs(N,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:120,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Current NAV"}),e.jsx(h,{variant:"h5",component:"div",children:Me?Q(Me.navValue,ue.baseCurrency):"N/A"})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:120,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Total Return"}),e.jsx(h,{variant:"h5",component:"div",color:((Ue==null?void 0:Ue.totalReturn)||0)>=0?"success.main":"error.main",children:Ue?Ce(Ue.totalReturn):"N/A"})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:120,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Annualized Return"}),e.jsx(h,{variant:"h5",component:"div",color:((Ue==null?void 0:Ue.annualizedReturn)||0)>=0?"success.main":"error.main",children:Ue?Ce(Ue.annualizedReturn):"N/A"})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:120,boxShadow:2},children:e.jsxs(ge,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Base Currency"}),e.jsx(h,{variant:"h5",component:"div",children:ue.baseCurrency})]})})})]}),e.jsx(N,{container:!0,spacing:3,sx:{mb:4},children:tn.map((ve,fe)=>e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{sx:{height:120,boxShadow:2},children:e.jsx(ge,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(v,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:ve.title}),e.jsx(h,{variant:"h5",component:"div",children:ve.value})]}),e.jsx(v,{sx:{color:`${ve.color}.main`,display:"flex",alignItems:"center"},children:ve.icon})]})})})},fe))}),e.jsx(v,{sx:{position:"sticky",top:110,zIndex:1100,backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",py:1,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(10px)"},children:e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:2},children:[e.jsxs(vn,{value:n,onChange:Rs,"aria-label":"portfolio tabs",sx:{minHeight:"48px","& .MuiTab-root":{minHeight:"48px",fontWeight:600,textTransform:"none",fontSize:"0.95rem"}},children:[e.jsx(xt,{label:"Trading Management"}),e.jsx(xt,{label:"Trading Analysis",defaultChecked:!0}),e.jsx(xt,{label:"Asset Allocation"})]}),e.jsx(Ar,{title:ae?"Switch to Normal View":"Switch to Compact View",children:e.jsx(St,{onClick:()=>De(!ae),color:"primary",size:"small",sx:{p:1,borderRadius:1,backgroundColor:ae?"primary.main":"transparent",color:ae?"primary.contrastText":"primary.main","&:hover":{backgroundColor:ae?"primary.dark":"primary.light"},transition:"all 0.2s ease-in-out"},children:ae?e.jsx(Zl,{}):e.jsx(Jl,{})})})]})}),e.jsxs(v,{sx:{backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider",py:1,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(10px)"},children:[e.jsx(Qs,{value:n,index:0,children:e.jsx(v,{sx:{backgroundColor:"background.paper",minHeight:"80vh"},children:e.jsx(N,{container:!0,spacing:oe(3,1),children:e.jsx(N,{item:!0,xs:12,children:e.jsx(Dl,{portfolioId:t,onCreate:()=>o(!0),isCompactMode:ae})})})})}),e.jsx(Qs,{value:n,index:1,children:e.jsx(v,{sx:{backgroundColor:"background.paper",minHeight:"80vh"},children:e.jsxs(N,{container:!0,spacing:oe(3,1),children:[e.jsx(N,{item:!0,xs:12,children:e.jsx(ip,{portfolioId:t,baseCurrency:ue.baseCurrency,title:"Portfolio Performance"})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(kl,{portfolioId:t,isCompactMode:ae})})]})})}),e.jsx(Qs,{value:n,index:2,children:e.jsxs(v,{sx:{backgroundColor:"background.paper",minHeight:"80vh"},children:[e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Portfolio Overview"}),e.jsxs(N,{container:!0,spacing:oe(3,1),children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"primary",fontWeight:"bold",children:Q(ue.totalValue,ue.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Total Value"})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"success.main",fontWeight:"bold",children:Q(ue.unrealizedPl,ue.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Unrealized P&L"})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:Q(ue.cashBalance,ue.baseCurrency)}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Cash Balance"})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,textAlign:"center",border:"1px solid #e0e0e0"},children:[e.jsx(h,{variant:"h4",color:"warning.main",fontWeight:"bold",children:Object.keys((ot==null?void 0:ot.allocation)||{}).length}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Asset Classes"})]})})]})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Asset Allocation"}),e.jsxs(N,{container:!0,spacing:oe(3,1),children:[e.jsx(N,{item:!0,xs:12,md:8,children:e.jsx(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:Tt?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):vr?e.jsx(h,{color:"error",children:"Failed to load allocation data"}):e.jsx(op,{data:ot||{allocation:{},totalValue:0,assetCount:0},baseCurrency:ue.baseCurrency})})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsxs(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Allocation Summary"}),ot&&Object.keys(ot.allocation).length>0?e.jsxs(v,{children:[Object.entries(ot.allocation).map(([ve,fe])=>e.jsxs(v,{sx:{mb:3},children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(h,{variant:"body1",fontWeight:"medium",children:ve.toUpperCase()}),e.jsxs(h,{variant:"body1",fontWeight:"bold",color:"primary",children:[fe.percentage.toFixed(1),"%"]})]}),e.jsx(v,{sx:{width:"100%",height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:e.jsx(v,{sx:{width:`${fe.percentage}%`,height:"100%",backgroundColor:"#1976d2",transition:"width 0.3s ease"}})}),e.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:Q(fe.value,ue.baseCurrency)})]},ve)),e.jsxs(v,{sx:{mt:3,pt:3,borderTop:"1px solid #e0e0e0",textAlign:"center"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Portfolio Value"}),e.jsx(h,{variant:"h5",color:"primary",fontWeight:"bold",children:Q(ue.totalValue,ue.baseCurrency)})]})]}):e.jsx(h,{variant:"body2",color:"text.secondary",children:"No allocation data available"})]})})]})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Asset Detail Summary"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:Pe?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):Be?e.jsx(h,{color:"error",children:Be}):e.jsx(pp,{data:(be==null?void 0:be.data)||[],baseCurrency:ue.baseCurrency,title:"Individual Asset Holdings"})})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Risk & Performance Analysis"}),e.jsxs(N,{container:!0,spacing:oe(3,1),children:[e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:c?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):u?e.jsx(h,{color:"error",children:u}):e.jsx(lp,{data:(i==null?void 0:i.data)||[],baseCurrency:ue.baseCurrency,title:"Risk-Return Analysis"})})}),e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:g?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):S?e.jsx(h,{color:"error",children:S}):e.jsx(cp,{data:(x==null?void 0:x.data)||[],baseCurrency:ue.baseCurrency,title:"Asset Performance Comparison"})})})]})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Risk Metrics"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:y?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):I?e.jsx(h,{color:"error",children:I}):e.jsx(dp,{data:(w==null?void 0:w.data)||{},baseCurrency:ue.baseCurrency,title:"Risk Metrics Dashboard"})})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Diversification & Timeline"}),e.jsxs(N,{container:!0,spacing:oe(3,1),children:[e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:k?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):P?e.jsx(h,{color:"error",children:P}):e.jsx(up,{data:(O==null?void 0:O.data)||[],title:"Diversification Heatmap"})})}),e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(v,{sx:{p:oe(3,1),backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0",height:"100%"},children:Y?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):$?e.jsx(h,{color:"error",children:$}):e.jsx(hp,{data:(_==null?void 0:_.data)||[],baseCurrency:ue.baseCurrency,title:"Allocation Timeline"})})})]})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Cash Flow Analysis"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:ee?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):D?e.jsx(h,{color:"error",children:D}):e.jsx(mp,{data:(q==null?void 0:q.data)||[],baseCurrency:ue.baseCurrency,title:"Cash Flow Analysis"})})]}),e.jsxs(v,{sx:{mb:oe(4,1)},children:[e.jsx(h,{variant:ae?"h6":"h5",gutterBottom:!0,sx:{fontWeight:600,color:"#1a1a1a",mb:oe(3,1),fontSize:ae?"0.9rem":void 0},children:"Benchmark Comparison"}),e.jsx(v,{sx:{p:3,backgroundColor:"white",borderRadius:2,boxShadow:1,border:"1px solid #e0e0e0"},children:K?e.jsx(v,{display:"flex",justifyContent:"center",p:4,children:e.jsx(Ye,{})}):Te?e.jsx(h,{color:"error",children:Te}):e.jsx(fp,{data:(ye==null?void 0:ye.data)||[],baseCurrency:ue.baseCurrency,title:"Benchmark Comparison",benchmarkName:(ye==null?void 0:ye.benchmarkName)||"S&P 500"})})]})]})})]}),a&&e.jsx(v,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:()=>o(!1),children:e.jsx(v,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out"},onClick:ve=>ve.stopPropagation(),children:e.jsx(as,{onSubmit:Es,defaultPortfolioId:t})})})]})};function Ks(t){const{children:r,value:n,index:s,...a}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==s,id:`trading-tabpanel-${s}`,"aria-labelledby":`trading-tab-${s}`,...a,children:n===s&&e.jsx(v,{sx:{p:0},children:r})})}const dv=()=>{var O,E;const{portfolioId:t}=zo(),r=bn(),[n,s]=p.useState(0),[a,o]=p.useState(!1),i=Ki(),c=Na(t).data||[],d=(k,C)=>{s(C)},u=()=>{r(`/portfolios/${t}`)},m=async k=>{try{await i.mutateAsync(k),o(!1)}catch(C){console.error("Error creating trade:",C)}},x=async k=>{const C={...k,tradeDate:k.tradeDate};await m(C)},f=()=>{o(!1)},g=()=>{s(2)},b=(c==null?void 0:c.length)||0,S=(c==null?void 0:c.filter(k=>k.side==="BUY").length)||0,j=(c==null?void 0:c.filter(k=>k.side==="SELL").length)||0,w=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.totalValue)||0),0))||0,T=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.fee)||0),0))||0,y=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.tax)||0),0))||0,A=T+y,I=(c==null?void 0:c.reduce((k,C)=>k+(Number(C.realizedPl)||0),0))||0,M=[{title:"Total Trades",value:b.toString(),icon:e.jsx(rr,{}),color:"primary"},{title:"Buy Orders",value:S.toString(),icon:e.jsx(gt,{}),color:"success"},{title:"Sell Orders",value:j.toString(),icon:e.jsx(kt,{}),color:"error"},{title:"Total Volume",value:Q(w),icon:e.jsx(Qn,{}),color:"info"}];return t?e.jsxs(Ur,{maxWidth:"xl",children:[e.jsx(v,{sx:{mb:4},children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Trading Management"}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Manage your trades, analyze performance, and track positions"})]}),e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Wo,{}),onClick:u,sx:{borderRadius:2,textTransform:"none",px:3,py:1},children:"Back to Portfolio"})]})}),e.jsx(N,{container:!0,spacing:3,sx:{mb:4},children:M.map((k,C)=>e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{children:e.jsx(ge,{children:e.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(v,{children:[e.jsx(h,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:k.title}),e.jsx(h,{variant:"h5",component:"div",children:k.value})]}),e.jsx(v,{sx:{color:`${k.color}.main`,display:"flex",alignItems:"center"},children:k.icon})]})})})},C))}),e.jsx(N,{container:!0,spacing:3,sx:{mb:4},children:e.jsx(N,{item:!0,xs:12,children:e.jsx(pe,{sx:{boxShadow:2},children:e.jsxs(ge,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Trading Performance"}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"grey.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"text.primary",fontWeight:"bold",children:Q(A)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Fees & Taxes"})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:I>=0?"success.50":"error.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:I>=0?"success.main":"error.main",fontWeight:"bold",children:Q(I)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Realized P&L"})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"info.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:Q(w)}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Volume"})]})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(v,{textAlign:"center",p:2,sx:{bgcolor:"primary.50",borderRadius:2},children:[e.jsx(h,{variant:"h4",color:"primary.main",fontWeight:"bold",children:b}),e.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Total Trades"})]})})]})]})})})}),e.jsxs(rt,{sx:{width:"100%",boxShadow:2},children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider",bgcolor:"grey.50"},children:e.jsxs(vn,{value:n,onChange:d,"aria-label":"trading tabs",variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500,minHeight:48},"& .Mui-selected":{color:"primary.main",fontWeight:600}},children:[e.jsx(xt,{label:"Trade History",icon:e.jsx(rr,{}),iconPosition:"start"}),e.jsx(xt,{label:"Analysis",icon:e.jsx(Qn,{}),iconPosition:"start"}),e.jsx(xt,{label:"Create Trade",icon:e.jsx(Mt,{}),iconPosition:"start"})]})}),e.jsx(Ks,{value:n,index:0,children:e.jsx(Dl,{portfolioId:t,onCreate:g})}),e.jsx(Ks,{value:n,index:1,children:e.jsx(kl,{portfolioId:t})}),e.jsx(Ks,{value:n,index:2,children:e.jsx(v,{sx:{p:2},children:e.jsx(as,{onSubmit:x,isLoading:i.isLoading,error:(O=i.error)==null?void 0:O.message,mode:"create",defaultPortfolioId:t})})})]}),e.jsx(Fo,{color:"primary","aria-label":"add trade",sx:{position:"fixed",bottom:24,right:24,boxShadow:3,"&:hover":{boxShadow:6,transform:"scale(1.05)"},transition:"all 0.2s ease-in-out"},onClick:()=>o(!0),children:e.jsx(Mt,{})}),a&&e.jsx(v,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:f,children:e.jsx(v,{sx:{bgcolor:"white",borderRadius:3,p:4,maxWidth:900,width:"95%",maxHeight:"95%",overflow:"auto",boxShadow:24,animation:"modalSlideIn 0.3s ease-out","@keyframes modalSlideIn":{from:{opacity:0,transform:"translateY(-20px) scale(0.95)"},to:{opacity:1,transform:"translateY(0) scale(1)"}}},onClick:k=>k.stopPropagation(),children:e.jsx(as,{onSubmit:x,isLoading:i.isLoading,error:(E=i.error)==null?void 0:E.message,mode:"create",defaultPortfolioId:t})})})]}):e.jsx(Ur,{maxWidth:"lg",children:e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Portfolio not found"})})},Al=()=>{const[t,r]=p.useState([]),[n,s]=p.useState(!0),[a,o]=p.useState(null),i=p.useCallback(async()=>{try{s(!0),o(null);const c=await Dr.getAssetTypes();r(c)}catch(c){const d=c instanceof Error?c.message:"Failed to fetch asset types";o(d),console.error("Error fetching asset types:",c)}finally{s(!1)}},[]),l=p.useCallback(async()=>{await i()},[i]);return p.useEffect(()=>{i()},[i]),{assetTypes:t,loading:n,error:a,refresh:l}},uv=(t,r,n="ASC")=>[...t].sort((s,a)=>{let o,i;switch(r){case"name":o=s.name.toLowerCase(),i=a.name.toLowerCase();break;case"type":o=s.type,i=a.type;break;case"totalValue":o=s.totalValue,i=a.totalValue;break;case"totalQuantity":o=s.totalQuantity,i=a.totalQuantity;break;case"createdAt":o=new Date(s.createdAt).getTime(),i=new Date(a.createdAt).getTime();break;case"updatedAt":o=new Date(s.updatedAt).getTime(),i=new Date(a.updatedAt).getTime();break;default:o=s.name.toLowerCase(),i=a.name.toLowerCase()}return o<i?n==="ASC"?-1:1:o>i?n==="ASC"?1:-1:0}),hv=(t,r)=>{if(!r.trim())return t;const n=r.toLowerCase();return t.filter(s=>{var a,o;return s.name.toLowerCase().includes(n)||((a=s.symbol)==null?void 0:a.toLowerCase().includes(n))||((o=s.description)==null?void 0:o.toLowerCase().includes(n))})},mv=(t,r)=>t.filter(n=>n.type===r),fv=(t,r,n)=>t.filter(s=>(Number(s.totalValue)||0)>=r&&(Number(s.totalValue)||0)<=n),pv=t=>{const r=t.currentQuantity&&t.currentPrice?t.currentQuantity*t.currentPrice:0,n=r-(t.initialValue||0),s=t.currentQuantity?t.currentQuantity-(t.initialQuantity||0):0,a=(t.initialValue||0)>0?n/(t.initialValue||0)*100:0,o=(t.initialQuantity||0)>0?s/(t.initialQuantity||0)*100:0;return{currentValue:r,valueChange:n,quantityChange:s,valueChangePercentage:a,quantityChangePercentage:o,isGaining:n>0,isLosing:n<0}},xv=({portfolioId:t,initialFilters:r={},onAssetSelect:n,onAssetEdit:s,onAssetDelete:a,showActions:o=!0,className:i=""})=>{const{baseCurrency:l}=Nt(),c=p.useMemo(()=>({...r,...t&&{portfolioId:t}}),[t,r]),{assets:d,loading:u,error:m,pagination:x,clearFilters:f,refresh:g,goToPage:b,setPageSize:S,setSorting:j}=La({initialFilters:c||{},autoFetch:!0}),{assetTypes:w}=Al(),[T,y]=p.useState(""),[A,I]=p.useState("ALL"),[M,O]=p.useState("name"),[E,k]=p.useState("ASC"),[C,P]=p.useState(!1),[F,_]=p.useState({min:"",max:""}),R=p.useMemo(()=>{let D=d;if(T&&(D=hv(D,T)),A!=="ALL"&&(D=mv(D,A)),F.min||F.max){const Z=F.min?parseFloat(F.min):0,ye=F.max?parseFloat(F.max):1/0;D=fv(D,Z,ye)}return uv(D,M,E)},[d,T,A,F,M,E]),Y=D=>{y(D)},U=D=>{I(D)},$=D=>{M===D?k(E==="ASC"?"DESC":"ASC"):(O(D),k("ASC")),j(D,E)},H=(D,Z)=>{_(ye=>({...ye,[D]:Z}))},q=()=>{y(""),I("ALL"),_({min:"",max:""}),f()},G=D=>{b(D)},ee=D=>{S(D)},J=()=>{g()};return u&&d.length===0?e.jsx("div",{className:`asset-list ${i}`,children:e.jsxs("div",{className:"asset-list__loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading assets..."})]})}):m?e.jsx("div",{className:`asset-list ${i}`,children:e.jsxs("div",{className:"asset-list__error",children:[e.jsxs("p",{children:["Error: ",m]}),e.jsx("button",{onClick:J,className:"btn btn--primary",children:"Retry"})]})}):e.jsxs("div",{className:`asset-list ${i}`,children:[e.jsxs("div",{className:"asset-list__header",children:[e.jsxs("div",{className:"asset-list__title",children:[e.jsxs("h2",{children:["Assets (",x.total,")"]}),e.jsxs("button",{onClick:J,className:"btn btn--secondary btn--icon",disabled:u,children:[e.jsx("span",{className:"icon",children:"↻"}),"Refresh"]})]}),e.jsxs("div",{className:"asset-list__controls",children:[e.jsx("div",{className:"asset-list__search",children:e.jsx("input",{type:"text",placeholder:"Search assets...",value:T,onChange:D=>Y(D.target.value),className:"input"})}),e.jsx("div",{className:"asset-list__filters",children:e.jsxs("button",{onClick:()=>P(!C),className:"btn btn--secondary",children:["Filters ",C?"▲":"▼"]})})]}),C&&e.jsxs("div",{className:"asset-list__advanced-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Type:"}),e.jsxs("select",{value:A,onChange:D=>U(D.target.value),className:"select",children:[e.jsx("option",{value:"ALL",children:"All Types"}),w.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Value Range:"}),e.jsxs("div",{className:"value-range",children:[e.jsx("input",{type:"number",placeholder:"Min",value:F.min,onChange:D=>H("min",D.target.value),className:"input input--small"}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",placeholder:"Max",value:F.max,onChange:D=>H("max",D.target.value),className:"input input--small"})]})]}),e.jsx("button",{onClick:q,className:"btn btn--outline",children:"Clear Filters"})]})]}),e.jsx("div",{className:"asset-list__table-container",children:e.jsxs("table",{className:"asset-list__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"sortable",onClick:()=>$("name"),children:["Name ",M==="name"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("type"),children:["Type ",M==="type"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("totalValue"),children:["Value ",M==="totalValue"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("totalQuantity"),children:["Quantity ",M==="totalQuantity"&&(E==="ASC"?"↑":"↓")]}),e.jsxs("th",{className:"sortable",onClick:()=>$("currentPrice"),children:["Market Price ",M==="currentPrice"&&(E==="ASC"?"↑":"↓")]}),e.jsx("th",{children:"Performance"}),e.jsxs("th",{className:"sortable",onClick:()=>$("updatedAt"),children:["Updated ",M==="updatedAt"&&(E==="ASC"?"↑":"↓")]}),o&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:o?8:7,className:"asset-list__empty",children:"No assets found"})}):R.map(D=>{var ye;const Z=pv(D);return e.jsxs("tr",{className:"asset-list__row",onClick:()=>n==null?void 0:n(D),children:[e.jsx("td",{className:"asset-list__cell asset-list__cell--name",children:e.jsxs("div",{className:"asset-name",children:[e.jsx("div",{className:"asset-name__primary",children:D.name}),D.symbol&&e.jsx("div",{className:"asset-name__secondary",children:D.symbol})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsx("span",{className:`asset-type asset-type--${D.type.toLowerCase()}`,children:((ye=w.find(B=>B.value===D.type))==null?void 0:ye.label)||D.type})}),e.jsx("td",{className:"asset-list__cell asset-list__cell--value",children:e.jsxs("div",{className:"value-display",children:[e.jsx("div",{className:"value-display__primary",children:Q(Number(D.totalValue)||0)}),D.currentValue&&D.currentValue!==D.initialValue&&e.jsxs("div",{className:"value-display__secondary",children:["Initial: ",Q(D.initialValue||0)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:"quantity-display",children:[e.jsx("div",{className:"quantity-display__primary",children:pt(Number(D.totalQuantity)||0,2)}),D.currentQuantity&&D.currentQuantity!==D.initialQuantity&&e.jsxs("div",{className:"quantity-display__secondary",children:["Initial: ",pt(D.initialQuantity||0,2)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:"price-display",children:[e.jsx("div",{className:"price-display__primary price-display__primary--current",children:Q(Number(D.currentPrice)||0)}),D.avgCost!==void 0&&D.avgCost>0&&D.avgCost!==D.currentPrice&&e.jsxs("div",{className:"price-display__secondary",children:["Avg: ",Q(Number(D.avgCost)||0)]})]})}),e.jsx("td",{className:"asset-list__cell",children:e.jsxs("div",{className:`performance ${Z.isGaining?"performance--positive":Z.isLosing?"performance--negative":""}`,children:[e.jsx("div",{className:"performance__value",children:Q(Z.valueChange,l)}),e.jsx("div",{className:"performance__percentage",children:Ce(Z.valueChangePercentage,2)})]})}),e.jsx("td",{className:"asset-list__cell",children:new Date(D.updatedAt).toLocaleDateString()}),o&&e.jsx("td",{className:"asset-list__cell asset-list__cell--actions",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:B=>{B.stopPropagation(),s==null||s(D)},className:"btn btn--small btn--secondary",title:"Edit Asset",children:"✏️"}),e.jsx("button",{onClick:B=>{B.stopPropagation(),a==null||a(D)},className:"btn btn--small btn--danger",title:"Delete Asset",children:"🗑️"})]})})]},D.id)})})]})}),x.total>0&&e.jsxs("div",{className:"asset-list__pagination",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(x.page-1)*x.limit+1," to"," ",Math.min(x.page*x.limit,x.total)," of"," ",x.total," assets"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>G(x.page-1),disabled:x.page<=1,className:"btn btn--secondary",children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(x.total/x.limit)},(D,Z)=>Z+1).filter(D=>{const Z=x.page;return D===1||D===Z||D===Z-1||D===Z+1||D===Math.ceil(x.total/x.limit)}).map((D,Z,ye)=>e.jsxs(Wt.Fragment,{children:[Z>0&&ye[Z-1]!==D-1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>G(D),className:`btn ${D===x.page?"btn--primary":"btn--secondary"}`,children:D})]},D))}),e.jsx("button",{onClick:()=>G(x.page+1),disabled:x.page>=Math.ceil(x.total/x.limit),className:"btn btn--secondary",children:"Next"})]}),e.jsxs("div",{className:"pagination-size",children:[e.jsx("label",{children:"Show:"}),e.jsxs("select",{value:x.limit,onChange:D=>ee(Number(D.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]})},gv=({performance:t,className:r="",showLabels:n=!0,compact:s=!1})=>{const a=[{key:"daily",label:"Hôm nay",value:t.daily},{key:"weekly",label:"Tuần",value:t.weekly},{key:"monthly",label:"Tháng",value:t.monthly},{key:"yearly",label:"Năm",value:t.yearly}];return s?e.jsx("div",{className:`asset-performance asset-performance--compact ${r}`,children:a.map(({key:o,label:i,value:l})=>e.jsxs("div",{className:"performance-metric performance-metric--compact",children:[n&&e.jsxs("span",{className:"performance-label",children:[i,":"]}),e.jsx("span",{className:`performance-value performance-value--compact ${Ro(l)}`,children:Mo(l)})]},o))}):e.jsx("div",{className:`asset-performance asset-performance--grid ${r}`,children:a.map(({key:o,label:i,value:l})=>e.jsxs("div",{className:"performance-metric",children:[e.jsx("div",{className:"performance-label",children:i}),e.jsx("div",{className:`performance-value ${Ro(l)}`,children:Mo(l)})]},o))})},yv=({asset:t,onEdit:r,onDelete:n,onView:s,showActions:a=!0,compact:o=!1,className:i=""})=>{const{baseCurrency:l}=Nt(),c={valueChange:(Number(t.totalValue)||0)-(Number(t.initialValue)||0),valueChangePercentage:t.initialValue?((Number(t.totalValue)||0)-(Number(t.initialValue)||0))/(Number(t.initialValue)||1)*100:0,isGaining:(Number(t.totalValue)||0)>(Number(t.initialValue)||0),isLosing:(Number(t.totalValue)||0)<(Number(t.initialValue)||0)},d=()=>{s==null||s(t)},u=x=>{x.stopPropagation(),r==null||r(t)},m=x=>{x.stopPropagation(),n==null||n(t)};return e.jsxs("div",{className:`asset-card ${o?"asset-card--compact":""} ${i}`,onClick:d,children:[e.jsxs("div",{className:"asset-card__header",children:[e.jsxs("div",{className:"asset-card__title",children:[e.jsx("h3",{className:"asset-card__name",children:t.name}),t.symbol&&e.jsx("span",{className:"asset-card__code",children:t.symbol})]}),e.jsx("div",{className:"asset-card__type",children:e.jsx("span",{className:`asset-type asset-type--${t.type.toLowerCase()}`,children:ua[t.type]||t.type})})]}),t.description&&!o&&e.jsx("div",{className:"asset-card__description",children:e.jsx("p",{children:t.description})}),e.jsxs("div",{className:"asset-card__content",children:[e.jsxs("div",{className:"asset-card__value",children:[e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{className:"value-item__primary",children:Q(Number(t.totalValue)||0,l)}),t.currentValue&&t.currentValue!==t.initialValue&&e.jsxs("span",{className:"value-item__secondary",children:["Initial: ",Q(t.initialValue||0,l)]})]}),e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Current Price"}),e.jsx("span",{className:"value-item__primary",children:Q(t.currentPrice||0,l)}),t.currentPrice&&e.jsx("span",{className:"value-item__secondary",children:"Market Price"})]}),e.jsxs("div",{className:"value-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{className:"value-item__primary",children:pt(Number(t.totalQuantity)||0,2)}),t.currentQuantity&&t.currentQuantity!==t.initialQuantity&&e.jsxs("span",{className:"value-item__secondary",children:["Initial: ",pt(t.initialQuantity||0,2)]})]})]}),e.jsxs("div",{className:"asset-card__performance",children:[e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Performance"}),e.jsxs("div",{className:`performance ${c.isGaining?"performance--positive":c.isLosing?"performance--negative":""}`,children:[e.jsx("span",{className:"performance__value",children:Q(c.valueChange,l)}),e.jsx("span",{className:"performance__percentage",children:Ce(c.valueChangePercentage,2)})]})]}),t.performance&&e.jsx("div",{className:"performance-metrics",children:e.jsx(gv,{performance:t.performance,compact:!0,showLabels:!0,className:"mt-2"})})]}),!o&&e.jsxs("div",{className:"asset-card__info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Created"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Updated"}),e.jsx("span",{children:new Date(t.updatedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Has Trades"}),e.jsx("span",{className:t.hasTrades?"status status--active":"status status--inactive",children:t.hasTrades?"Yes":"No"})]})]})]}),a&&e.jsxs("div",{className:"asset-card__actions",children:[e.jsx("button",{onClick:u,className:"btn btn--small btn--secondary",title:"Edit Asset",children:"✏️ Edit"}),e.jsx("button",{onClick:m,className:"btn btn--small btn--danger",title:"Delete Asset",children:"🗑️ Delete"})]}),e.jsxs("div",{className:"asset-card__indicators",children:[t.hasTrades&&e.jsx("span",{className:"indicator indicator--trades",title:"Has trading activity",children:"📈"}),c.isGaining&&e.jsx("span",{className:"indicator indicator--gaining",title:"Positive performance",children:"📈"}),c.isLosing&&e.jsx("span",{className:"indicator indicator--losing",title:"Negative performance",children:"📉"})]})]})},vv=({filters:t,onFiltersChange:r,onClearFilters:n,className:s="",showAdvanced:a=!1,onToggleAdvanced:o})=>{var E,k;const[i,l]=p.useState(t.search||""),[c,d]=p.useState(t.type||"ALL"),[u,m]=p.useState(t.sortBy||"name"),[x,f]=p.useState(t.sortOrder||"ASC"),[g,b]=p.useState({min:((E=t.minValue)==null?void 0:E.toString())||"",max:((k=t.maxValue)==null?void 0:k.toString())||""}),[S,j]=p.useState(t.limit||25);p.useEffect(()=>{var C,P;l(t.search||""),d(t.type||"ALL"),m(t.sortBy||"name"),f(t.sortOrder||"ASC"),b({min:((C=t.minValue)==null?void 0:C.toString())||"",max:((P=t.maxValue)==null?void 0:P.toString())||""}),j(t.limit||25)},[t]);const w=p.useCallback(C=>{l(C),r({...t,search:C||void 0})},[t,r]),T=p.useCallback(C=>{d(C),r({...t,type:C==="ALL"?void 0:C})},[t,r]),y=p.useCallback((C,P)=>{const F={...g,[C]:P};b(F);const _=F.min?parseFloat(F.min):void 0,R=F.max?parseFloat(F.max):void 0;r({...t,minValue:_,maxValue:R})},[t,r,g]),A=p.useCallback(C=>{j(C),r({...t,limit:C})},[t,r]),I=p.useCallback(()=>{l(""),d("ALL"),m("name"),f("ASC"),b({min:"",max:""}),j(25),n()},[n]),M=p.useCallback(()=>{o==null||o(!a)},[a,o]),O=i||c!=="ALL"||g.min||g.max;return e.jsxs("div",{className:`asset-filters ${s}`,children:[e.jsxs("div",{className:"asset-filters__basic",children:[e.jsxs("div",{className:"asset-filters__search",children:[e.jsx("input",{type:"text",placeholder:"Search assets...",value:i,onChange:C=>w(C.target.value),className:"input input--search"}),i&&e.jsx("button",{onClick:()=>w(""),className:"btn btn--icon btn--clear",title:"Clear search",children:"✕"})]}),e.jsx("div",{className:"asset-filters__type",children:e.jsxs("select",{value:c,onChange:C=>T(C.target.value),className:"select",children:[e.jsx("option",{value:"ALL",children:"All Types"}),Object.entries(ua).map(([C,P])=>e.jsx("option",{value:C,children:P},C))]})}),e.jsx("div",{className:"asset-filters__sort",children:e.jsxs("select",{value:`${u}-${x}`,onChange:C=>{const[P,F]=C.target.value.split("-");m(P),f(F),r({...t,sortBy:P,sortOrder:F})},className:"select",children:[e.jsx("option",{value:"name-ASC",children:"Name A-Z"}),e.jsx("option",{value:"name-DESC",children:"Name Z-A"}),e.jsx("option",{value:"totalValue-ASC",children:"Value Low-High"}),e.jsx("option",{value:"totalValue-DESC",children:"Value High-Low"}),e.jsx("option",{value:"totalQuantity-ASC",children:"Quantity Low-High"}),e.jsx("option",{value:"totalQuantity-DESC",children:"Quantity High-Low"}),e.jsx("option",{value:"updatedAt-ASC",children:"Oldest First"}),e.jsx("option",{value:"updatedAt-DESC",children:"Newest First"})]})}),e.jsx("div",{className:"asset-filters__limit",children:e.jsxs("select",{value:S,onChange:C=>A(Number(C.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"})]})}),e.jsxs("div",{className:"asset-filters__actions",children:[e.jsxs("button",{onClick:M,className:"btn btn--secondary",children:[a?"Hide":"Show"," Advanced"]}),O&&e.jsx("button",{onClick:I,className:"btn btn--outline",children:"Clear All"})]})]}),a&&e.jsxs("div",{className:"asset-filters__advanced",children:[e.jsx("div",{className:"asset-filters__advanced-header",children:e.jsx("h4",{children:"Advanced Filters"})}),e.jsxs("div",{className:"asset-filters__advanced-content",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Value Range"}),e.jsxs("div",{className:"value-range",children:[e.jsx("input",{type:"number",placeholder:"Min value",value:g.min,onChange:C=>y("min",C.target.value),className:"input input--small",min:"0",step:"0.01"}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",placeholder:"Max value",value:g.max,onChange:C=>y("max",C.target.value),className:"input input--small",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort Options"}),e.jsxs("div",{className:"sort-options",children:[e.jsxs("div",{className:"sort-field",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("select",{value:u,onChange:C=>{m(C.target.value),r({...t,sortBy:C.target.value})},className:"select select--small",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"type",children:"Type"}),e.jsx("option",{value:"totalValue",children:"Total Value"}),e.jsx("option",{value:"totalQuantity",children:"Total Quantity"}),e.jsx("option",{value:"createdAt",children:"Created Date"}),e.jsx("option",{value:"updatedAt",children:"Updated Date"})]})]}),e.jsxs("div",{className:"sort-order",children:[e.jsx("label",{children:"Order:"}),e.jsxs("select",{value:x,onChange:C=>{f(C.target.value),r({...t,sortOrder:C.target.value})},className:"select select--small",children:[e.jsx("option",{value:"ASC",children:"Ascending"}),e.jsx("option",{value:"DESC",children:"Descending"})]})]})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Results per page"}),e.jsxs("select",{value:S,onChange:C=>A(Number(C.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"}),e.jsx("option",{value:250,children:"250"}),e.jsx("option",{value:500,children:"500"})]})]})]})]}),O&&e.jsx("div",{className:"asset-filters__summary",children:e.jsxs("div",{className:"active-filters",children:[e.jsx("span",{className:"active-filters__label",children:"Active filters:"}),e.jsxs("div",{className:"active-filters__tags",children:[i&&e.jsxs("span",{className:"filter-tag",children:['Search: "',i,'"',e.jsx("button",{onClick:()=>w(""),className:"filter-tag__remove",children:"✕"})]}),c!=="ALL"&&e.jsxs("span",{className:"filter-tag",children:["Type: ",ua[c],e.jsx("button",{onClick:()=>T("ALL"),className:"filter-tag__remove",children:"✕"})]}),g.min&&e.jsxs("span",{className:"filter-tag",children:["Min: ",g.min,e.jsx("button",{onClick:()=>y("min",""),className:"filter-tag__remove",children:"✕"})]}),g.max&&e.jsxs("span",{className:"filter-tag",children:["Max: ",g.max,e.jsx("button",{onClick:()=>y("max",""),className:"filter-tag__remove",children:"✕"})]})]})]})})]})},bv=({onSubmit:t,onCancel:r,userId:n,initialData:s,submitText:a="Create Asset",mode:o="create",loading:i=!1,className:l=""})=>{var A;const{accountId:c}=Nt(),d=n||c,u=o==="edit"||s&&s.symbol,{assetTypes:m,loading:x,error:f}=Al(),[g,b]=p.useState({name:"",symbol:"",type:((A=m[0])==null?void 0:A.value)||Tl.STOCK,description:"",initialValue:void 0,initialQuantity:void 0,currentValue:void 0,currentQuantity:void 0,createdBy:d,updatedBy:d,...s}),[S,j]=p.useState({}),w=()=>{var M,O;const I={};return(M=g.name)!=null&&M.trim()||(I.name="Asset name is required"),!u&&!((O=g.symbol)!=null&&O.trim())&&(I.symbol="Asset symbol is required"),g.type||(I.type="Asset type is required"),j(I),Object.keys(I).length===0},T=I=>{I.preventDefault(),console.log("AssetForm handleSubmit called"),console.log("Form data:",g),console.log("Form validation result:",w()),w()?(console.log("Calling onSubmit with formData"),t(g)):console.log("Form validation failed")},y=I=>M=>{if(I==="initialValue"||I==="initialQuantity"||I==="currentValue"||I==="currentQuantity")return;const O=M.target.value;b(E=>({...E,[I]:O})),S[I]&&j(E=>({...E,[I]:""}))};return e.jsxs("div",{className:"asset-form",children:[e.jsxs("div",{className:"asset-form__header",children:[e.jsx("h2",{children:a}),e.jsx("button",{type:"button",onClick:r,className:"btn btn--secondary btn--icon","aria-label":"Close form",children:"✕"})]}),e.jsx("div",{className:"asset-form__content",children:e.jsxs(v,{component:"form",onSubmit:T,children:[e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Asset Name",value:g.name,onChange:y("name"),error:!!S.name,helperText:S.name,required:!0})}),!u&&e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Asset Symbol",value:g.symbol,onChange:y("symbol"),placeholder:"e.g., AAPL, HPG",error:!!S.symbol,helperText:"Symbol cannot be changed after creation. ",required:!0})}),u&&e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Asset Symbol",value:g.symbol||"",disabled:!0,helperText:"Symbol cannot be changed after creation"})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsxs(Ze,{fullWidth:!0,error:!!S.type,children:[e.jsx(Je,{children:"Asset Type"}),e.jsx(et,{value:g.type,onChange:y("type"),label:"Asset Type",disabled:x,children:x?e.jsxs(de,{disabled:!0,children:[e.jsx(Ye,{size:20,sx:{mr:1}}),"Loading asset types..."]}):f?e.jsx(de,{disabled:!0,children:"Error loading asset types"}):m.map(I=>e.jsx(de,{value:I.value,children:I.label},I.value))}),S.type&&e.jsx(We,{severity:"error",sx:{mt:1},children:S.type}),f&&e.jsx(We,{severity:"warning",sx:{mt:1},children:f})]})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Currency",value:"VND",disabled:!0,helperText:"Currently only VND is supported"})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(He,{fullWidth:!0,label:"Description",value:g.description,onChange:y("description"),multiline:!0,rows:2,placeholder:"Optional description of the asset"})}),e.jsx(N,{item:!0,xs:12,children:e.jsxs(We,{severity:"info",sx:{mb:2},children:[e.jsx("strong",{children:"Computed Fields:"})," Initial value, initial quantity, current value, and current quantity are automatically calculated based on your trades and market prices. These fields will be updated when you create trades for this asset."]})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Initial Value",type:"number",value:g.initialValue??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:0,step:.01},placeholder:g.initialValue?void 0:"No data available"})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Initial Quantity",type:"number",value:g.initialQuantity??"",disabled:!0,helperText:"Calculated from first trade",inputProps:{min:1e-4,step:1e-4},placeholder:g.initialQuantity?void 0:"No data available"})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Current Value",type:"number",value:g.currentValue??"",disabled:!0,helperText:"Calculated from trades × current market price",inputProps:{min:0,step:.01},placeholder:g.currentValue?void 0:"No data available"})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{fullWidth:!0,label:"Current Quantity",type:"number",value:g.currentQuantity??"",disabled:!0,helperText:"Calculated from all trades",inputProps:{min:0,step:1e-4},placeholder:g.currentQuantity?void 0:"No data available"})})]}),e.jsxs("div",{className:"asset-form__actions",children:[e.jsx(Se,{type:"button",variant:"outlined",onClick:r,size:"large",children:"Cancel"}),e.jsx(Se,{type:"submit",variant:"contained",size:"large",disabled:i,children:i?"Đang xử lý...":a})]})]})})]})},jv=({assets:t,statistics:r,onClose:n,className:s=""})=>{const{baseCurrency:a}=Nt(),o=Wt.useMemo(()=>{const c=t.reduce((x,f)=>{var g;return x+(Number((g=f.performance)==null?void 0:g.daily)||0)},0),d=t.reduce((x,f)=>{var g;return x+(Number((g=f.performance)==null?void 0:g.weekly)||0)},0),u=t.reduce((x,f)=>{var g;return x+(Number((g=f.performance)==null?void 0:g.monthly)||0)},0),m=t.reduce((x,f)=>{var g;return x+(Number((g=f.performance)==null?void 0:g.yearly)||0)},0);return{averageDailyReturn:t.length>0?c/t.length:0,averageWeeklyReturn:t.length>0?d/t.length:0,averageMonthlyReturn:t.length>0?u/t.length:0,averageYearlyReturn:t.length>0?m/t.length:0}},[t]),i=Wt.useMemo(()=>{const c=[{label:"Under ₫10K",min:0,max:1e4,count:0},{label:"₫10K - ₫50K",min:1e4,max:5e4,count:0},{label:"₫50K - ₫100K",min:5e4,max:1e5,count:0},{label:"₫100K - ₫500K",min:1e5,max:5e5,count:0},{label:"Over ₫500K",min:5e5,max:1/0,count:0}];return t.forEach(d=>{const u=Number(d.totalValue)||0,m=c.find(x=>u>=x.min&&u<x.max);m&&m.count++}),c},[t]),l=Wt.useMemo(()=>[...t].filter(c=>{var d;return((d=c.performance)==null?void 0:d.yearly)!==void 0}).sort((c,d)=>{var u,m;return(((u=d.performance)==null?void 0:u.yearly)||0)-(((m=c.performance)==null?void 0:m.yearly)||0)}).slice(0,5),[t]);return e.jsxs("div",{className:`asset-analytics ${s}`,children:[e.jsxs("div",{className:"asset-analytics__header",children:[e.jsx("h3",{children:"Asset Analytics"}),n&&e.jsx("button",{onClick:n,className:"btn btn--secondary btn--icon","aria-label":"Close analytics",children:"✕"})]}),e.jsxs("div",{className:"asset-analytics__content",children:[e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Performance Overview"}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageDailyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Daily Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageWeeklyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Weekly Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageMonthlyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Monthly Return"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsxs("div",{className:"metric-card__value",children:[o.averageYearlyReturn.toFixed(2),"%"]}),e.jsx("div",{className:"metric-card__label",children:"Avg Yearly Return"})]})]})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Asset Type Distribution"}),e.jsx("div",{className:"distribution-chart",children:Object.entries(r.assetsByType).map(([c,d])=>{const u=r.totalAssets>0?d/r.totalAssets*100:0;return e.jsxs("div",{className:"distribution-item",children:[e.jsxs("div",{className:"distribution-item__label",children:[e.jsx("span",{className:"distribution-item__type",children:c}),e.jsx("span",{className:"distribution-item__count",children:d})]}),e.jsx("div",{className:"distribution-item__bar",children:e.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),e.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},c)})})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Value Distribution"}),e.jsx("div",{className:"distribution-chart",children:i.map((c,d)=>{const u=r.totalAssets>0?c.count/r.totalAssets*100:0;return e.jsxs("div",{className:"distribution-item",children:[e.jsxs("div",{className:"distribution-item__label",children:[e.jsx("span",{className:"distribution-item__type",children:c.label}),e.jsx("span",{className:"distribution-item__count",children:c.count})]}),e.jsx("div",{className:"distribution-item__bar",children:e.jsx("div",{className:"distribution-item__fill",style:{width:`${u}%`}})}),e.jsxs("div",{className:"distribution-item__percentage",children:[u.toFixed(1),"%"]})]},d)})})]}),e.jsxs("div",{className:"analytics-section",children:[e.jsx("h4",{children:"Top Performers (Yearly)"}),e.jsx("div",{className:"performers-list",children:l.map((c,d)=>{var u,m;return e.jsxs("div",{className:"performer-item",children:[e.jsxs("div",{className:"performer-item__rank",children:["#",d+1]}),e.jsxs("div",{className:"performer-item__info",children:[e.jsx("div",{className:"performer-item__name",children:c.name}),e.jsx("div",{className:"performer-item__code",children:c.symbol})]}),e.jsxs("div",{className:"performer-item__performance",children:[e.jsx("div",{className:`performer-item__return ${(((u=c.performance)==null?void 0:u.yearly)||0)>=0?"positive":"negative"}`,children:Ce(((m=c.performance)==null?void 0:m.yearly)||0,2)}),e.jsx("div",{className:"performer-item__value",children:Q(Number(c.totalValue)||0,a)})]})]},c.id)})})]})]})]})},wv=({selectedAsset:t,editingAsset:r,deletingAsset:n,showCreateForm:s=!1,onClose:a,onSubmit:o,onDeleteConfirm:i,onEditAsset:l,portfolioId:c,className:d=""})=>{const{baseCurrency:u}=Nt(),m=()=>{a()},x=()=>{n&&i(n)},f=()=>{a()};return e.jsxs("div",{className:`asset-dialogs ${d}`,children:[t&&e.jsx("div",{className:"modal-overlay",onClick:m,children:e.jsx("div",{className:"modal-content",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"asset-dialog",children:[e.jsxs("div",{className:"asset-dialog__header",children:[e.jsx("h3",{children:"Asset Details"}),e.jsx("button",{onClick:m,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:"✕"})]}),e.jsx("div",{className:"asset-dialog__content",children:e.jsxs("div",{className:"asset-details",children:[e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Basic Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Name"}),e.jsx("span",{children:t.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Symbol"}),e.jsx("span",{children:t.symbol})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Type"}),e.jsx("span",{className:`asset-type-badge asset-type-badge--${t.type.toLowerCase()}`,children:t.type})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Description"}),e.jsx("span",{children:t.description||"No description"})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Financial Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Current Price"}),e.jsx("span",{className:"detail-value--highlight",children:Q(t.currentPrice||t.currentValue||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Average Cost"}),e.jsx("span",{children:Q(t.avgCost||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{children:pt(t.quantity||t.totalQuantity||0,2)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{className:"detail-value--highlight",children:Q(Number(t.totalValue)||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Initial Value"}),e.jsx("span",{children:Q(t.initialValue||0,u)})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Profit & Loss Analysis"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Unrealized P&L"}),e.jsx("span",{className:`detail-value ${(t.currentPrice||0)>=(t.avgCost||0)?"positive":"negative"}`,children:Q(((t.currentPrice||0)-(t.avgCost||0))*(t.quantity||t.totalQuantity||0),u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"P&L Percentage"}),e.jsx("span",{className:`detail-value ${(t.currentPrice||0)>=(t.avgCost||0)?"positive":"negative"}`,children:t.avgCost&&t.avgCost>0?Ce(((t.currentPrice||0)-t.avgCost)/t.avgCost*100,2):"N/A"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Cost Basis"}),e.jsx("span",{children:Q((t.avgCost||0)*(t.quantity||t.totalQuantity||0),u)})]})]})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Performance"}),e.jsx("div",{className:"performance-grid",children:t.performance?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Daily"}),e.jsx("span",{className:`performance-value ${(t.performance.daily||0)>=0?"positive":"negative"}`,children:Ce(t.performance.daily||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Weekly"}),e.jsx("span",{className:`performance-value ${(t.performance.weekly||0)>=0?"positive":"negative"}`,children:Ce(t.performance.weekly||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Monthly"}),e.jsx("span",{className:`performance-value ${(t.performance.monthly||0)>=0?"positive":"negative"}`,children:Ce(t.performance.monthly||0,2)})]}),e.jsxs("div",{className:"performance-item",children:[e.jsx("label",{children:"Yearly"}),e.jsx("span",{className:`performance-value ${(t.performance.yearly||0)>=0?"positive":"negative"}`,children:Ce(t.performance.yearly||0,2)})]})]}):e.jsx("div",{className:"performance-item",children:e.jsx("span",{children:"No performance data available"})})})]}),e.jsxs("div",{className:"asset-details__section",children:[e.jsx("h4",{children:"Metadata"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Created"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Last Updated"}),e.jsx("span",{children:new Date(t.updatedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Asset ID"}),e.jsx("span",{children:t.id})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Asset Class"}),e.jsx("span",{children:t.assetClass})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Currency"}),e.jsx("span",{children:t.currency})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Status"}),e.jsx("span",{className:`status-badge ${t.isActive?"status-badge--active":"status-badge--inactive"}`,children:t.isActive?"Active":"Inactive"})]})]})]})]})}),e.jsxs("div",{className:"asset-dialog__actions",children:[e.jsx("button",{onClick:()=>{l&&t&&l(t)},className:"btn btn--secondary",disabled:!l,title:"Edit this asset",children:"✏️ Edit Asset"}),e.jsx("button",{onClick:()=>{i&&t&&i(t)},className:"btn btn--danger",title:"Delete this asset",children:"🗑️ Delete"}),e.jsx("button",{onClick:m,className:"btn btn--primary",children:"Close"})]})]})})}),n&&e.jsx("div",{className:"modal-overlay",onClick:f,children:e.jsx("div",{className:"modal-content modal-content--small",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"asset-dialog",children:[e.jsxs("div",{className:"asset-dialog__header",children:[e.jsx("h3",{children:"Delete Asset"}),e.jsx("button",{onClick:f,className:"btn btn--secondary btn--icon","aria-label":"Close dialog",children:"✕"})]}),e.jsx("div",{className:"asset-dialog__content",children:e.jsxs("div",{className:"delete-confirmation",children:[e.jsx("div",{className:"delete-confirmation__icon",children:"⚠️"}),e.jsx("h4",{children:"Are you sure you want to delete this asset?"}),e.jsxs("p",{children:["This action cannot be undone. The asset ",e.jsx("strong",{children:n.name})," (",n.symbol,") will be permanently removed from your portfolio."]}),e.jsxs("div",{className:"delete-confirmation__details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Value"}),e.jsx("span",{children:Q(Number(n.totalValue)||0,u)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Quantity"}),e.jsx("span",{children:pt(n.quantity||n.totalQuantity||0,2)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Type"}),e.jsx("span",{children:n.type})]})]})]})}),e.jsxs("div",{className:"asset-dialog__actions",children:[e.jsx("button",{onClick:f,className:"btn btn--secondary",children:"Cancel"}),e.jsx("button",{onClick:x,className:"btn btn--danger",children:"Delete Asset"})]})]})})})]})},Cv=({open:t,assetName:r,tradeCount:n,onConfirm:s,onCancel:a,isDeleting:o=!1})=>e.jsxs(zt,{open:t,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[e.jsx(lr,{sx:{pb:1},children:e.jsxs(v,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(zr,{color:"warning"}),e.jsx(h,{variant:"h6",component:"div",children:n>0?"Delete Asset with Trades":"Delete Asset"})]})}),e.jsxs(Yt,{sx:{pt:1},children:[e.jsx(We,{severity:"warning",sx:{mb:2},children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:"This action cannot be undone!"})}),n>0?e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"body1",paragraph:!0,children:["The asset ",e.jsxs("strong",{children:['"',r,'"']})," has ",e.jsx("strong",{children:n})," associated trade(s)."]}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Deleting this asset will also permanently delete all associated trades. This action cannot be undone and may affect your portfolio calculations."}),e.jsxs(v,{sx:{bgcolor:"grey.50",p:2,borderRadius:1,border:"1px solid",borderColor:"grey.200"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"What will be deleted:"})}),e.jsxs(h,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[e.jsxs("li",{children:['The asset "',r,'"']}),e.jsxs("li",{children:[n," trade record(s)"]}),e.jsx("li",{children:"All associated transaction history"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"body1",paragraph:!0,children:["The asset ",e.jsxs("strong",{children:['"',r,'"']})," has no associated trades."]}),e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This asset can be safely deleted without affecting any trading history. This action cannot be undone."}),e.jsxs(v,{sx:{bgcolor:"green.50",p:2,borderRadius:1,border:"1px solid",borderColor:"green.200"},children:[e.jsx(h,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:"What will be deleted:"})}),e.jsxs(h,{variant:"body2",color:"text.secondary",component:"ul",sx:{mt:1,pl:2},children:[e.jsxs("li",{children:['The asset "',r,'"']}),e.jsx("li",{children:"No trade records (safe to delete)"})]})]})]})]}),e.jsxs(qt,{sx:{p:3,pt:1},children:[e.jsx(Se,{onClick:a,disabled:o,variant:"outlined",size:"large",children:"Cancel"}),e.jsx(Se,{onClick:s,disabled:o,variant:"contained",color:"error",size:"large",startIcon:o?e.jsx(Ye,{size:20}):e.jsx(zr,{}),children:o?"Deleting...":n>0?"Delete Asset & Trades":"Delete Asset"})]})]}),Pv=({portfolioId:t,className:r=""})=>{const{baseCurrency:n,accountId:s}=Nt(),[a,o]=p.useState("list"),[i,l]=p.useState(!1),[c,d]=p.useState(!1),[u,m]=p.useState(!1),[x,f]=p.useState(null),[g,b]=p.useState(null),[S,j]=p.useState(null),[w,T]=p.useState(!1),[y,A]=p.useState(!1),[I,M]=p.useState(null),[O,E]=p.useState(0),[k,C]=p.useState(null),[P,F]=p.useState(!1),_=p.useMemo(()=>({portfolioId:t,limit:25,sortBy:"name",sortOrder:"ASC"}),[t]),[R,Y]=p.useState(_),{assets:U,loading:$,error:H,pagination:q,setFilters:G,clearFilters:ee,refresh:J,forceRefresh:D,goToPage:Z,setPageSize:ye,updateAsset:B,createAsset:K}=La({initialFilters:_,autoFetch:!0}),le=p.useCallback(X=>{Y(X),G(X)},[G]),Te=p.useCallback(()=>{Y(_),ee()},[_,ee]),xe=p.useCallback(()=>{o(X=>X==="list"?"grid":"list")},[]),be=p.useCallback(X=>{l(X)},[]),re=p.useCallback(()=>{d(X=>!X)},[]),Pe=p.useCallback(()=>{m(X=>!X)},[]),ze=p.useCallback(X=>{f(X)},[]),Be=p.useCallback(X=>{console.log("handleAssetEdit called with asset:",X),b(X)},[]),lt=p.useCallback(()=>{f(null),b(null),j(null),m(!1),C(null)},[]),ae=p.useCallback(async(X,he)=>{try{if(U.filter(Me=>{var Ue;return((Ue=Me.symbol)==null?void 0:Ue.toLowerCase())===X.toLowerCase()&&Me.id!==he}).length>0)return!0;try{const Me=await we.api.get(`/api/v1/assets?symbol=${encodeURIComponent(X)}&createdBy=${s}`),Ue=Me.data.data||Me.data;return Array.isArray(Ue)&&Ue.length>0}catch{return!1}return!1}catch(Le){return console.error("Error checking symbol:",Le),!1}},[U,s]),De=p.useCallback(async X=>{F(!0),C(null);try{if(console.log("Form submitted with data:",X),console.log("Editing asset:",g),!g&&X.symbol){console.log("Checking symbol uniqueness for:",X.symbol),console.log("Current assets:",U.map(Le=>({symbol:Le.symbol,id:Le.id})));const he=await ae(X.symbol);if(console.log("Symbol exists:",he),he){console.log("Setting form error: Symbol already exists"),C("Mã tài sản này đã tồn tại. Vui lòng chọn mã khác."),F(!1);return}}if(g){const he={name:X.name,symbol:X.symbol,type:X.type,description:X.description,updatedBy:X.updatedBy||s};Object.keys(he).forEach(Me=>{he[Me]===void 0&&delete he[Me],Me==="description"&&he[Me]===""||he[Me]===""&&delete he[Me]});const Le=await B(g.id,he);console.log("Update result:",Le)}else{const he={name:X.name,symbol:X.symbol,type:X.type,description:X.description,createdBy:X.createdBy||s,updatedBy:X.updatedBy||s};Object.keys(he).forEach(Me=>{(he[Me]===void 0||he[Me]==="")&&delete he[Me]}),console.log("Creating new asset"),console.log("Create data:",he);const Le=await K(he);console.log("Create result:",Le)}lt()}catch(he){console.error("Error saving asset:",he);let Le="Có lỗi xảy ra khi lưu tài sản";he instanceof Error&&(he.message.includes("already exists")?Le="Mã tài sản này đã tồn tại. Vui lòng chọn mã khác.":he.message.includes("required")?Le="Vui lòng điền đầy đủ thông tin bắt buộc.":he.message.includes("invalid")?Le="Thông tin không hợp lệ. Vui lòng kiểm tra lại.":Le=he.message),C(Le)}finally{F(!1)}},[g,B,K,lt,s]),te=p.useCallback(async X=>{try{const he=await Dr.getTradeCount(X.id);M(X),E(he.count),T(!0)}catch(he){console.error("Error getting trade count:",he),alert(`Error getting trade information: ${he instanceof Error?he.message:"Unknown error"}`)}},[]),me=p.useCallback(async()=>{if(I){A(!0);try{O>0?await Dr.forceDeleteAsset(I.id):await Dr.deleteAsset(I.id),await new Promise(X=>setTimeout(X,500)),await D(),await new Promise(X=>setTimeout(X,100)),await D(),T(!1),M(null),lt()}catch(X){console.error("Error deleting asset:",X),alert(`Error deleting asset: ${X instanceof Error?X.message:"Unknown error"}`)}finally{A(!1)}}},[I,O,D,lt]),oe=p.useCallback(()=>{T(!1),M(null),E(0)},[]),ue=p.useMemo(()=>{const X=U.length,he=U.reduce((Ue,ot)=>Ue+(Number(ot.totalValue)||0),0),Le=X>0?he/X:0,Me=U.reduce((Ue,ot)=>(Ue[ot.type]=(Ue[ot.type]||0)+1,Ue),{});return{totalAssets:X,totalValue:he,averageValue:Le,assetsByType:Me}},[U]);return $&&U.length===0?e.jsx("div",{className:`asset-management ${r}`,children:e.jsxs("div",{className:"asset-management__loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading assets..."})]})}):H?e.jsx("div",{className:`asset-management ${r}`,children:e.jsxs("div",{className:"asset-management__error",children:[e.jsx("h2",{children:"Error Loading Assets"}),e.jsx("p",{children:H}),e.jsx("button",{onClick:J,className:"btn btn--primary",children:"Retry"})]})}):e.jsxs("div",{className:`asset-management ${r}`,children:[e.jsxs("div",{className:"asset-management__header",children:[e.jsxs("div",{className:"asset-management__title",children:[e.jsx("h1",{children:"Asset Management"}),e.jsx("p",{children:"Manage your portfolio assets"})]}),e.jsxs("div",{className:"asset-management__actions",children:[e.jsx("button",{onClick:re,className:`btn btn--secondary ${c?"btn--active":""}`,children:"📊 Analytics"}),e.jsx("button",{onClick:Pe,className:"btn btn--primary",children:"➕ Add Asset"})]})]}),e.jsxs("div",{className:"asset-management__stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:ue.totalAssets}),e.jsx("div",{className:"stat-card__label",children:"Total Assets"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Q(ue.totalValue,n)}),e.jsx("div",{className:"stat-card__label",children:"Total Value"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Q(ue.averageValue,n)}),e.jsx("div",{className:"stat-card__label",children:"Average Value"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-card__value",children:Object.keys(ue.assetsByType).length}),e.jsx("div",{className:"stat-card__label",children:"Asset Types"})]})]}),c&&e.jsx("div",{className:"asset-management__analytics",children:e.jsx(jv,{assets:U,statistics:ue,onClose:re})}),e.jsx(vv,{filters:R,onFiltersChange:le,onClearFilters:Te,showAdvanced:i,onToggleAdvanced:be,className:"asset-management__filters"}),e.jsxs("div",{className:"asset-management__controls",children:[e.jsxs("div",{className:"asset-management__view-controls",children:[e.jsx("button",{onClick:xe,className:`btn btn--secondary ${a==="list"?"btn--active":""}`,children:"📋 List"}),e.jsx("button",{onClick:xe,className:`btn btn--secondary ${a==="grid"?"btn--active":""}`,children:"🔲 Grid"})]}),e.jsxs("div",{className:"asset-management__pagination-info",children:["Showing ",(q.page-1)*q.limit+1," to"," ",Math.min(q.page*q.limit,q.total)," of"," ",q.total," assets"]})]}),e.jsx("div",{className:"asset-management__content",children:a==="list"?e.jsx(xv,{portfolioId:t,initialFilters:R,onAssetSelect:ze,onAssetEdit:Be,onAssetDelete:te,showActions:!0,className:"asset-management__list"}):e.jsx("div",{className:"asset-management__grid",children:U.length===0?e.jsx("div",{className:"asset-management__empty",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state__icon",children:"📊"}),e.jsx("h3",{children:"No Assets Found"}),e.jsx("p",{children:"No assets match your current filters. Try adjusting your search criteria."}),e.jsx("button",{onClick:Te,className:"btn btn--primary",children:"Clear Filters"})]})}):e.jsx("div",{className:"asset-grid",children:U.map(X=>e.jsx(yv,{asset:X,onEdit:Be,onDelete:te,onView:ze,showActions:!0,className:"asset-grid__item"},X.id))})})}),q.total>0&&e.jsxs("div",{className:"asset-management__pagination",children:[e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>Z(q.page-1),disabled:q.page<=1,className:"btn btn--secondary",children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.ceil(q.total/q.limit)},(X,he)=>he+1).filter(X=>{const he=q.page;return X===1||X===he||X===he-1||X===he+1||X===Math.ceil(q.total/q.limit)}).map((X,he,Le)=>e.jsxs(Wt.Fragment,{children:[he>0&&Le[he-1]!==X-1&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>Z(X),className:`btn ${X===q.page?"btn--primary":"btn--secondary"}`,children:X})]},X))}),e.jsx("button",{onClick:()=>Z(q.page+1),disabled:q.page>=Math.ceil(q.total/q.limit),className:"btn btn--secondary",children:"Next"})]}),e.jsxs("div",{className:"pagination-size",children:[e.jsx("label",{children:"Show:"}),e.jsxs("select",{value:q.limit,onChange:X=>ye(Number(X.target.value)),className:"select select--small",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsx(wv,{selectedAsset:x,editingAsset:g,deletingAsset:S,showCreateForm:!1,onClose:lt,onSubmit:De,onDeleteConfirm:te,onEditAsset:Be,portfolioId:t}),(u||g)&&e.jsx("div",{className:"modal-overlay",onClick:lt,children:e.jsxs("div",{className:"modal-content modal-content--form",onClick:X=>X.stopPropagation(),children:[k&&e.jsx("div",{className:"error-message",style:{backgroundColor:"#fee",color:"#c33",padding:"12px",margin:"0 0 16px 0",borderRadius:"4px",border:"1px solid #fcc",fontSize:"14px"},children:k}),e.jsx(bv,{userId:s,initialData:g?(()=>{const X={name:g.name||"",symbol:g.symbol||"",type:g.type,description:g.description||"",initialValue:g.initialValue||void 0,initialQuantity:g.initialQuantity||void 0,currentValue:g.currentValue||void 0,currentQuantity:g.currentQuantity||void 0,createdBy:g.createdBy||s,updatedBy:g.updatedBy||s};return console.log("Initial data for AssetForm:",X),console.log("Editing asset:",g),X})():void 0,submitText:g?"Update Asset":"Create Asset",mode:g?"edit":"create",onSubmit:De,onCancel:lt,loading:P})]})}),e.jsx(Cv,{open:w,assetName:(I==null?void 0:I.name)||"",tradeCount:O,onConfirm:me,onCancel:oe,isDeleting:y})]})},Sv=cs({symbol:dt().required("Symbol is required").min(1,"Symbol must be at least 1 character").max(20,"Symbol must be at most 20 characters").matches(/^[A-Z0-9.-]+$/,"Symbol must contain only uppercase letters, numbers, dots, and hyphens"),name:dt().required("Name is required").min(2,"Name must be at least 2 characters").max(100,"Name must be at most 100 characters"),type:dt().required("Asset type is required").oneOf(["STOCK","BOND","CRYPTO","COMMODITY","CURRENCY","ETF","MUTUAL_FUND"],"Invalid asset type"),nation:dt().required("Nation is required"),marketCode:dt().required("Market code is required"),currency:dt().required("Currency is required"),timezone:dt().required("Timezone is required"),description:dt().max(500,"Description must be at most 500 characters")}),Tv=[{value:"STOCK",label:"Stock"},{value:"BOND",label:"Bond"},{value:"CRYPTO",label:"Cryptocurrency"},{value:"COMMODITY",label:"Commodity"},{value:"CURRENCY",label:"Currency"},{value:"ETF",label:"ETF"},{value:"MUTUAL_FUND",label:"Mutual Fund"}],$n=[{code:"VN",name:"Vietnam",currency:"VND",timezone:"Asia/Ho_Chi_Minh",marketCodes:[{code:"HOSE",name:"Ho Chi Minh Stock Exchange"},{code:"HNX",name:"Hanoi Stock Exchange"},{code:"UPCOM",name:"Unlisted Public Company Market"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{3,4}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"Asia/Ho_Chi_Minh",days:[{day:"Monday",open:"09:00",close:"15:00"},{day:"Tuesday",open:"09:00",close:"15:00"},{day:"Wednesday",open:"09:00",close:"15:00"},{day:"Thursday",open:"09:00",close:"15:00"},{day:"Friday",open:"09:00",close:"15:00"}]}},{code:"US",name:"United States",currency:"USD",timezone:"America/New_York",marketCodes:[{code:"NYSE",name:"New York Stock Exchange"},{code:"NASDAQ",name:"NASDAQ"},{code:"AMEX",name:"American Stock Exchange"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{1,5}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"America/New_York",days:[{day:"Monday",open:"09:30",close:"16:00"},{day:"Tuesday",open:"09:30",close:"16:00"},{day:"Wednesday",open:"09:30",close:"16:00"},{day:"Thursday",open:"09:30",close:"16:00"},{day:"Friday",open:"09:30",close:"16:00"}]}},{code:"UK",name:"United Kingdom",currency:"GBP",timezone:"Europe/London",marketCodes:[{code:"LSE",name:"London Stock Exchange"},{code:"AIM",name:"Alternative Investment Market"}],defaultPriceSource:"MARKET_DATA_SERVICE",assetTypePatterns:{STOCK:"^[A-Z]{2,4}$",BOND:"^[A-Z]{2,4}[0-9]{2,4}$"},tradingHours:{timezone:"Europe/London",days:[{day:"Monday",open:"08:00",close:"16:30"},{day:"Tuesday",open:"08:00",close:"16:30"},{day:"Wednesday",open:"08:00",close:"16:30"},{day:"Thursday",open:"08:00",close:"16:30"},{day:"Friday",open:"08:00",close:"16:30"}]}}],Dv=({open:t,onClose:r,onSubmit:n,initialData:s,mode:a,loading:o=!1})=>{const[i,l]=p.useState(""),[c,d]=p.useState([]),[u,m]=p.useState({isValid:!0,message:""}),{control:x,handleSubmit:f,reset:g,watch:b,setValue:S,formState:{errors:j,isDirty:w}}=ds({resolver:Ts(Sv),defaultValues:{symbol:"",name:"",type:"STOCK",nation:"",marketCode:"",currency:"",timezone:"",description:"",...s}}),T=b("nation"),y=b("type"),A=b("symbol");p.useEffect(()=>{if(T){const k=$n.find(C=>C.code===T);k&&(d(k.marketCodes),S("currency",k.currency),S("timezone",k.timezone),l(T))}},[T,S]),p.useEffect(()=>{if(A&&T&&y){const k=$n.find(C=>C.code===T);if(k&&k.assetTypePatterns[y]){const P=new RegExp(k.assetTypePatterns[y]).test(A);m({isValid:P,message:P?"":`Symbol format is invalid for ${y} in ${k.name}`})}}},[A,T,y]);const I=()=>{g(),l(""),d([]),m({isValid:!0,message:""}),r()},M=async k=>{try{await n(k),I()}catch(C){console.error("Form submission error:",C)}},O=k=>{const C=$n.find(P=>P.code===k);return C?`${C.name} (${k})`:k},E=k=>{const C=c.find(P=>P.code===k);return C?`${C.name} (${k})`:k};return e.jsx(Xt,{dateAdapter:Pr,children:e.jsxs(zt,{open:t,onClose:I,maxWidth:"md",fullWidth:!0,children:[e.jsx(lr,{children:e.jsx(h,{variant:"h6",component:"div",children:a==="create"?"Create New Global Asset":"Edit Global Asset"})}),e.jsxs("form",{onSubmit:f(M),children:[e.jsx(Yt,{children:e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"symbol",control:x,render:({field:k})=>{var C;return e.jsx(He,{...k,label:"Symbol",fullWidth:!0,error:!!j.symbol||!u.isValid,helperText:((C=j.symbol)==null?void 0:C.message)||u.message,placeholder:"e.g., AAPL, HPG",disabled:a==="edit"})}})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"name",control:x,render:({field:k})=>{var C;return e.jsx(He,{...k,label:"Asset Name",fullWidth:!0,error:!!j.name,helperText:(C=j.name)==null?void 0:C.message,placeholder:"e.g., Apple Inc., Hoa Phat Group"})}})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"type",control:x,render:({field:k})=>e.jsxs(Ze,{fullWidth:!0,error:!!j.type,children:[e.jsx(Je,{children:"Asset Type"}),e.jsx(et,{...k,label:"Asset Type",children:Tv.map(C=>e.jsx(de,{value:C.value,children:C.label},C.value))}),j.type&&e.jsx(h,{variant:"caption",color:"error",children:j.type.message})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"nation",control:x,render:({field:k})=>e.jsxs(Ze,{fullWidth:!0,error:!!j.nation,children:[e.jsx(Je,{children:"Nation"}),e.jsx(et,{...k,label:"Nation",children:$n.map(C=>e.jsx(de,{value:C.code,children:O(C.code)},C.code))}),j.nation&&e.jsx(h,{variant:"caption",color:"error",children:j.nation.message})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"marketCode",control:x,render:({field:k})=>e.jsxs(Ze,{fullWidth:!0,error:!!j.marketCode,disabled:!T,children:[e.jsx(Je,{children:"Market Code"}),e.jsx(et,{...k,label:"Market Code",children:c.map(C=>e.jsx(de,{value:C.code,children:E(C.code)},C.code))}),j.marketCode&&e.jsx(h,{variant:"caption",color:"error",children:j.marketCode.message})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"currency",control:x,render:({field:k})=>{var C;return e.jsx(He,{...k,label:"Currency",fullWidth:!0,error:!!j.currency,helperText:(C=j.currency)==null?void 0:C.message,disabled:!0})}})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"timezone",control:x,render:({field:k})=>{var C;return e.jsx(He,{...k,label:"Timezone",fullWidth:!0,error:!!j.timezone,helperText:(C=j.timezone)==null?void 0:C.message,disabled:!0})}})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(Qe,{name:"description",control:x,render:({field:k})=>{var C;return e.jsx(He,{...k,label:"Description",fullWidth:!0,multiline:!0,rows:3,error:!!j.description,helperText:(C=j.description)==null?void 0:C.message,placeholder:"Optional description of the asset"})}})}),i&&e.jsx(N,{item:!0,xs:12,children:e.jsxs(v,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Nation Configuration"}),e.jsxs(v,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(ke,{label:`Currency: ${b("currency")}`,size:"small"}),e.jsx(ke,{label:`Timezone: ${b("timezone")}`,size:"small"}),e.jsx(ke,{label:`Markets: ${c.length}`,size:"small"})]})]})})]})}),e.jsxs(qt,{children:[e.jsx(Se,{onClick:I,disabled:o,children:"Cancel"}),e.jsx(Se,{type:"submit",variant:"contained",disabled:o||!w||!u.isValid,startIcon:o?e.jsx(Ye,{size:20}):null,children:o?"Saving...":a==="create"?"Create Asset":"Update Asset"})]})]})]})})},kv={STOCK:"#1976d2",BOND:"#388e3c",CRYPTO:"#f57c00",COMMODITY:"#7b1fa2",CURRENCY:"#d32f2f",ETF:"#0288d1",MUTUAL_FUND:"#5d4037"},Av={VN:"Vietnam",US:"United States",UK:"United Kingdom",JP:"Japan",SG:"Singapore",AU:"Australia",CA:"Canada",DE:"Germany",FR:"France",CN:"China"},Nv={HOSE:"Ho Chi Minh Stock Exchange",HNX:"Hanoi Stock Exchange",UPCOM:"Unlisted Public Company Market",NYSE:"New York Stock Exchange",NASDAQ:"NASDAQ",AMEX:"American Stock Exchange",LSE:"London Stock Exchange",AIM:"Alternative Investment Market",TSE:"Tokyo Stock Exchange",SGX:"Singapore Exchange",ASX:"Australian Securities Exchange",TSX:"Toronto Stock Exchange",XETRA:"XETRA",EPA:"Euronext Paris",SSE:"Shanghai Stock Exchange",SZSE:"Shenzhen Stock Exchange"},Mv=({assets:t,loading:r=!1,onEdit:n,onDelete:s,onView:a,onRefresh:o,error:i})=>{const[l,c]=p.useState(0),[d,u]=p.useState(10),[m,x]=p.useState(""),[f,g]=p.useState(""),[b,S]=p.useState(""),[j,w]=p.useState("symbol"),[T,y]=p.useState("asc"),[A,I]=p.useState(null),[M,O]=p.useState(null),E=p.useMemo(()=>[...new Set(t.map(Z=>Z.type))].sort(),[t]),k=p.useMemo(()=>[...new Set(t.map(Z=>Z.nation))].sort(),[t]),C=p.useMemo(()=>{let D=t.filter(Z=>{var le;const ye=Z.symbol.toLowerCase().includes(m.toLowerCase())||Z.name.toLowerCase().includes(m.toLowerCase())||((le=Z.description)==null?void 0:le.toLowerCase().includes(m.toLowerCase())),B=!f||Z.type===f,K=!b||Z.nation===b;return ye&&B&&K});return D.sort((Z,ye)=>{let B=Z[j],K=ye[j];return j==="createdAt"?(B=new Date(B).getTime(),K=new Date(K).getTime()):typeof B=="string"&&(B=B.toLowerCase(),K=K.toLowerCase()),B<K?T==="asc"?-1:1:B>K?T==="asc"?1:-1:0}),D},[t,m,f,b,j,T]),P=p.useMemo(()=>{const D=l*d;return C.slice(D,D+d)},[C,l,d]),F=(D,Z)=>{c(Z)},_=D=>{u(parseInt(D.target.value,10)),c(0)},R=D=>{j===D?y(T==="asc"?"desc":"asc"):(w(D),y("asc"))},Y=(D,Z)=>{I(D.currentTarget),O(Z)},U=()=>{I(null),O(null)},$=D=>{if(M)switch(D){case"view":a(M);break;case"edit":n(M);break;case"delete":s(M);break}U()},H=(D,Z)=>new Intl.NumberFormat("en-US",{style:"currency",currency:Z,minimumFractionDigits:2,maximumFractionDigits:2}).format(D),q=D=>{if(!D.assetPrice)return e.jsx(Gs,{color:"disabled"});const Z=Math.random()-.5;return Z>.1?e.jsx(gt,{color:"success"}):Z<-.1?e.jsx(kt,{color:"error"}):e.jsx(Gs,{color:"disabled"})},G=D=>kv[D]||"#666",ee=D=>Av[D]||D,J=D=>Nv[D]||D;return i?e.jsx(We,{severity:"error",action:e.jsx(Se,{color:"inherit",size:"small",onClick:o,children:"Retry"}),children:i}):e.jsxs(v,{children:[e.jsx(rt,{sx:{p:2,mb:2},children:e.jsxs(N,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsx(He,{fullWidth:!0,placeholder:"Search assets...",value:m,onChange:D=>x(D.target.value),InputProps:{startAdornment:e.jsx(ya,{position:"start",children:e.jsx(xa,{})})}})}),e.jsx(N,{item:!0,xs:12,sm:3,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Type"}),e.jsxs(et,{value:f,onChange:D=>g(D.target.value),label:"Type",children:[e.jsx(de,{value:"",children:"All Types"}),E.map(D=>e.jsx(de,{value:D,children:D},D))]})]})}),e.jsx(N,{item:!0,xs:12,sm:3,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Nation"}),e.jsxs(et,{value:b,onChange:D=>S(D.target.value),label:"Nation",children:[e.jsx(de,{value:"",children:"All Nations"}),k.map(D=>e.jsx(de,{value:D,children:ee(D)},D))]})]})}),e.jsx(N,{item:!0,xs:12,sm:2,children:e.jsx(Se,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Mr,{}),onClick:o,disabled:r,children:"Refresh"})})]})}),e.jsxs(pe,{children:[e.jsx(Zt,{children:e.jsxs(Jt,{children:[e.jsx(er,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsx(nn,{active:j==="symbol",direction:j==="symbol"?T:"asc",onClick:()=>R("symbol"),children:"Symbol"})}),e.jsx(z,{children:e.jsx(nn,{active:j==="name",direction:j==="name"?T:"asc",onClick:()=>R("name"),children:"Name"})}),e.jsx(z,{children:e.jsx(nn,{active:j==="type",direction:j==="type"?T:"asc",onClick:()=>R("type"),children:"Type"})}),e.jsx(z,{children:e.jsx(nn,{active:j==="nation",direction:j==="nation"?T:"asc",onClick:()=>R("nation"),children:"Nation"})}),e.jsx(z,{children:e.jsx(nn,{active:j==="marketCode",direction:j==="marketCode"?T:"asc",onClick:()=>R("marketCode"),children:"Market"})}),e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Status"}),e.jsx(z,{align:"right",children:"Actions"})]})}),e.jsx(tr,{children:r?e.jsx(Ge,{children:e.jsx(z,{colSpan:8,align:"center",children:e.jsx(Ye,{})})}):P.length===0?e.jsx(Ge,{children:e.jsx(z,{colSpan:8,align:"center",children:e.jsx(h,{variant:"body2",color:"text.secondary",children:"No assets found"})})}):P.map(D=>e.jsx(Ar,{title:"Click to view asset details",placement:"top",arrow:!0,children:e.jsxs(Ge,{hover:!0,onClick:()=>a(D),sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},children:[e.jsx(z,{children:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:D.symbol}),e.jsx(ec,{fontSize:"small",color:"action",sx:{opacity:.6}})]})}),e.jsxs(z,{children:[e.jsx(h,{variant:"body2",children:D.name}),D.description&&e.jsx(h,{variant:"caption",color:"text.secondary",children:D.description})]}),e.jsx(z,{children:e.jsx(ke,{label:D.type,size:"small",sx:{backgroundColor:G(D.type),color:"white"}})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:ee(D.nation)})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:J(D.marketCode)})}),e.jsxs(z,{children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[q(D),e.jsx(h,{variant:"body2",children:D.assetPrice?H(D.assetPrice.currentPrice,D.currency):"No price data"})]}),D.assetPrice&&e.jsxs(h,{variant:"caption",color:"text.secondary",children:[D.assetPrice.priceSource," • ",new Date(D.assetPrice.lastPriceUpdate).toLocaleDateString()]})]}),e.jsx(z,{children:e.jsx(ke,{label:D.isActive?"Active":"Inactive",size:"small",color:D.isActive?"success":"default"})}),e.jsx(z,{align:"right",children:e.jsx(St,{onClick:Z=>{Z.stopPropagation(),Y(Z,D)},size:"small",children:e.jsx(Bo,{})})})]})},D.id))})]})}),e.jsx(tc,{rowsPerPageOptions:[5,10,25,50],component:"div",count:C.length,rowsPerPage:d,page:l,onPageChange:F,onRowsPerPageChange:_})]}),e.jsxs(Uo,{anchorEl:A,open:!!A,onClose:U,children:[e.jsxs(de,{onClick:()=>$("view"),children:[e.jsx(Bt,{children:e.jsx(pa,{fontSize:"small"})}),e.jsx(Ut,{children:"View Details"})]}),e.jsxs(de,{onClick:()=>$("edit"),children:[e.jsx(Bt,{children:e.jsx(ls,{fontSize:"small"})}),e.jsx(Ut,{children:"Edit"})]}),e.jsxs(de,{onClick:()=>$("delete"),children:[e.jsx(Bt,{children:e.jsx(ba,{fontSize:"small"})}),e.jsx(Ut,{children:"Delete"})]})]})]})},Rv=async(t,r={})=>{const n=new URLSearchParams;return r.page&&n.append("page",r.page.toString()),r.limit&&n.append("limit",r.limit.toString()),r.sortBy&&n.append("sortBy",r.sortBy),r.sortOrder&&n.append("sortOrder",r.sortOrder),r.startDate&&n.append("startDate",r.startDate),r.endDate&&n.append("endDate",r.endDate),r.priceType&&n.append("priceType",r.priceType),r.priceSource&&n.append("priceSource",r.priceSource),(await we.api.get(`/api/v1/price-history/asset/${t}?${n.toString()}`)).data},Ev=(t,r={})=>wt(["priceHistory",t,r],()=>Rv(t,r),{enabled:!!t,staleTime:0,refetchOnWindowFocus:!1}),Iv=cs({price:mn().required("Price is required").positive("Price must be positive").min(.01,"Price must be at least 0.01"),priceType:dt().required("Price type is required").oneOf(["MANUAL","MARKET_DATA","EXTERNAL","CALCULATED"],"Invalid price type"),priceSource:dt().required("Price source is required").oneOf(["USER","MARKET_DATA_SERVICE","EXTERNAL_API","CALCULATED"],"Invalid price source"),changeReason:dt().max(200,"Change reason must be at most 200 characters")}),Eo=[{value:"MANUAL",label:"Manual Entry",color:"#1976d2"},{value:"MARKET_DATA",label:"Market Data",color:"#388e3c"},{value:"EXTERNAL",label:"External Source",color:"#f57c00"},{value:"CALCULATED",label:"Calculated",color:"#7b1fa2"}],Io=[{value:"USER",label:"User Input",color:"#1976d2"},{value:"MARKET_DATA_SERVICE",label:"Market Data Service",color:"#388e3c"},{value:"EXTERNAL_API",label:"External API",color:"#f57c00"},{value:"CALCULATED",label:"Calculated",color:"#7b1fa2"}],Ov=({asset:t,onPriceUpdate:r,onPriceHistoryRefresh:n,loading:s=!1,error:a})=>{var _,R,Y,U,$,H,q;const[o,i]=p.useState(0),[l,c]=p.useState(!1),d=Qt(),{data:u,isLoading:m,error:x,refetch:f}=Ev(t.id,{limit:50,sortBy:"createdAt",sortOrder:"DESC"}),g=(u==null?void 0:u.data)||[],{control:b,handleSubmit:S,reset:j,formState:{errors:w}}=ds({resolver:Ts(Iv),defaultValues:{price:((_=t.assetPrice)==null?void 0:_.currentPrice)||0,priceType:((R=t.assetPrice)==null?void 0:R.priceType)||"MANUAL",priceSource:((Y=t.assetPrice)==null?void 0:Y.priceSource)||"USER",changeReason:""}}),T=p.useMemo(()=>{if(g.length<2)return 0;const G=typeof g[0].price=="string"?parseFloat(g[0].price):g[0].price,ee=typeof g[1].price=="string"?parseFloat(g[1].price):g[1].price;return(G-ee)/ee*100},[g]),y=(G,ee)=>{const J=typeof G=="string"?parseFloat(G):G;return new Intl.NumberFormat("en-US",{style:"currency",currency:ee,minimumFractionDigits:2,maximumFractionDigits:2}).format(J)},A=G=>new Date(G).toLocaleString(),I=()=>T>.1?e.jsx(gt,{color:"success"}):T<-.1?e.jsx(kt,{color:"error"}):e.jsx(Gs,{color:"disabled"}),M=G=>{const ee=Eo.find(J=>J.value===G);return(ee==null?void 0:ee.color)||"#666"},O=G=>{const ee=Io.find(J=>J.value===G);return(ee==null?void 0:ee.color)||"#666"},E=async G=>{try{await r(t.id,G.price,G.priceType,G.priceSource,G.changeReason),c(!1),j(),d.invalidateQueries(["priceHistory",t.id]),await f()}catch(ee){console.error("Price update error:",ee)}},k=async()=>{try{await n(t.id),d.invalidateQueries(["priceHistory",t.id]),await f()}catch(G){console.error("Price history refresh error:",G)}},C=(G,ee)=>{i(ee),ee===1&&(d.invalidateQueries(["priceHistory",t.id]),f())},P=G=>{const ee=new Date,J=new Date(G),D=Math.floor((ee.getTime()-J.getTime())/(1e3*60*60));return D<1?"Just now":D<24?`${D}h ago`:`${Math.floor(D/24)}d ago`},F=G=>{const ee=new Date,J=new Date(G),D=Math.floor((ee.getTime()-J.getTime())/(1e3*60*60));return D<1?"success":D<24?"warning":"error"};return a?e.jsx(We,{severity:"error",children:a}):e.jsx(Xt,{dateAdapter:Pr,children:e.jsxs(v,{children:[e.jsx(pe,{sx:{mb:2},children:e.jsx(ge,{children:e.jsxs(N,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(N,{item:!0,xs:12,sm:6,children:[e.jsx(h,{variant:"h4",component:"div",children:y(((U=t.assetPrice)==null?void 0:U.currentPrice)||0,t.currency)}),e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[I(),e.jsxs(h,{variant:"body2",color:T>0?"success.main":T<0?"error.main":"text.secondary",children:[T>0?"+":"",T.toFixed(2),"%"]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"vs previous"})]})]}),e.jsxs(N,{item:!0,xs:12,sm:6,children:[e.jsx(v,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:t.assetPrice&&e.jsxs(e.Fragment,{children:[e.jsx(ke,{label:t.assetPrice.priceType,size:"small",sx:{backgroundColor:M(t.assetPrice.priceType),color:"white"}}),e.jsx(ke,{label:t.assetPrice.priceSource,size:"small",sx:{backgroundColor:O(t.assetPrice.priceSource),color:"white"}}),e.jsx(ke,{label:P(t.assetPrice.lastPriceUpdate),size:"small",color:F(t.assetPrice.lastPriceUpdate)})]})}),e.jsxs(h,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Last updated: ",t.assetPrice?A(t.assetPrice.lastPriceUpdate):"Never"]})]})]})})}),e.jsxs(pe,{children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(vn,{value:o,onChange:C,children:[e.jsx(xt,{label:"Price Settings"}),e.jsx(xt,{label:"Price History"})]})}),e.jsxs(ge,{children:[o===0&&e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"h6",children:"Price Management"}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(ls,{}),onClick:()=>c(!0),disabled:s,children:"Update Price"})]}),e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{label:"Current Price",value:y((($=t.assetPrice)==null?void 0:$.currentPrice)||0,t.currency),fullWidth:!0,disabled:!0})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{label:"Price Type",value:((H=t.assetPrice)==null?void 0:H.priceType)||"N/A",fullWidth:!0,disabled:!0})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{label:"Price Source",value:((q=t.assetPrice)==null?void 0:q.priceSource)||"N/A",fullWidth:!0,disabled:!0})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(He,{label:"Last Update",value:t.assetPrice?A(t.assetPrice.lastPriceUpdate):"Never",fullWidth:!0,disabled:!0})})]})]}),o===1&&e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(h,{variant:"h6",children:"Price History"}),e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Mr,{}),onClick:k,disabled:m,children:"Refresh"})]}),x?e.jsxs(We,{severity:"error",sx:{mb:2},children:["Failed to load price history: ",x instanceof Error?x.message:"Unknown error"]}):null,m?e.jsx(Ho,{}):g.length===0?e.jsx(We,{severity:"info",children:"No price history available for this asset."}):e.jsx(Zt,{component:rt,children:e.jsxs(Jt,{children:[e.jsx(er,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Type"}),e.jsx(z,{children:"Source"}),e.jsx(z,{children:"Reason"}),e.jsx(z,{children:"Date"})]})}),e.jsx(tr,{children:g.map(G=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:y(G.price,t.currency)})}),e.jsx(z,{children:e.jsx(ke,{label:G.priceType,size:"small",sx:{backgroundColor:M(G.priceType),color:"white"}})}),e.jsx(z,{children:e.jsx(ke,{label:G.priceSource,size:"small",sx:{backgroundColor:O(G.priceSource),color:"white"}})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:G.changeReason||"N/A"})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:A(G.createdAt)})})]},G.id))})]})})]})]})]}),e.jsxs(zt,{open:l,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(lr,{children:"Update Price"}),e.jsxs("form",{onSubmit:S(E),children:[e.jsx(Yt,{children:e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,xs:12,children:e.jsx(Qe,{name:"price",control:b,render:({field:G})=>{var ee;return e.jsx(He,{...G,label:"Price",type:"number",fullWidth:!0,error:!!w.price,helperText:(ee=w.price)==null?void 0:ee.message,InputProps:{startAdornment:e.jsx(h,{sx:{mr:1},children:t.currency})}})}})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"priceType",control:b,render:({field:G})=>e.jsxs(Ze,{fullWidth:!0,error:!!w.priceType,children:[e.jsx(Je,{children:"Price Type"}),e.jsx(et,{...G,label:"Price Type",children:Eo.map(ee=>e.jsx(de,{value:ee.value,children:ee.label},ee.value))}),w.priceType&&e.jsx(h,{variant:"caption",color:"error",children:w.priceType.message})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(Qe,{name:"priceSource",control:b,render:({field:G})=>e.jsxs(Ze,{fullWidth:!0,error:!!w.priceSource,children:[e.jsx(Je,{children:"Price Source"}),e.jsx(et,{...G,label:"Price Source",children:Io.map(ee=>e.jsx(de,{value:ee.value,children:ee.label},ee.value))}),w.priceSource&&e.jsx(h,{variant:"caption",color:"error",children:w.priceSource.message})]})})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(Qe,{name:"changeReason",control:b,render:({field:G})=>{var ee;return e.jsx(He,{...G,label:"Change Reason",fullWidth:!0,multiline:!0,rows:2,error:!!w.changeReason,helperText:(ee=w.changeReason)==null?void 0:ee.message,placeholder:"Optional reason for price change"})}})})]})}),e.jsxs(qt,{children:[e.jsx(Se,{onClick:()=>c(!1),children:"Cancel"}),e.jsx(Se,{type:"submit",variant:"contained",disabled:s,startIcon:s?e.jsx(Ye,{size:20}):null,children:s?"Updating...":"Update Price"})]})]})]})]})})},_v={totalAssets:150,successfulUpdates:142,failedUpdates:8,successRate:94.7,averageUpdateTime:1250,lastUpdate:"2024-01-15T10:30:00Z",nextUpdate:"2024-01-15T10:45:00Z"},Fv=[{name:"MockProvider",baseUrl:"https://api.mockprovider.com",isActive:!0,rateLimit:100,lastCheck:"2024-01-15T10:30:00Z",status:"connected"},{name:"AlphaVantage",baseUrl:"https://www.alphavantage.co",isActive:!1,rateLimit:5,lastCheck:"2024-01-15T09:15:00Z",status:"error"},{name:"Yahoo Finance",baseUrl:"https://query1.finance.yahoo.com",isActive:!0,rateLimit:2e3,lastCheck:"2024-01-15T10:25:00Z",status:"connected"}],Lv=[{assetId:"asset-1",symbol:"HPG",success:!0,newPrice:15e4,timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-2",symbol:"AAPL",success:!0,newPrice:185.5,timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-3",symbol:"MSFT",success:!1,error:"API rate limit exceeded",timestamp:"2024-01-15T10:30:00Z"},{assetId:"asset-4",symbol:"GOOGL",success:!0,newPrice:142.75,timestamp:"2024-01-15T10:30:00Z"}],Vv=({stats:t=_v,providers:r=Fv,recentUpdates:n=Lv,onRefresh:s,onUpdateAll:a,onUpdateByNation:o,onUpdateByMarket:i,onTestProvider:l,loading:c=!1,error:d})=>{const[u,m]=p.useState(0),[x,f]=p.useState(!1),[g,b]=p.useState(""),[S,j]=p.useState(""),w=P=>new Date(P).toLocaleString(),T=()=>{const P=new Date,F=new Date(t.nextUpdate),_=Math.floor((F.getTime()-P.getTime())/(1e3*60));if(_<=0)return"Updating now...";if(_<60)return`${_}m`;const R=Math.floor(_/60),Y=_%60;return`${R}h ${Y}m`},y=P=>{switch(P){case"connected":return"success";case"disconnected":return"warning";case"error":return"error";default:return"default"}},A=P=>{switch(P){case"connected":return e.jsx(Bn,{});case"disconnected":return e.jsx(zr,{});case"error":return e.jsx(Ls,{});default:return e.jsx(nc,{})}},I=P=>P?e.jsx(Bn,{color:"success"}):e.jsx(Ls,{color:"error"}),M=(P,F)=>{m(F)},O=()=>{a()},E=()=>{g&&o(g)},k=()=>{S&&i(S)},C=P=>{l(P)};return d?e.jsx(We,{severity:"error",action:e.jsx(Se,{color:"inherit",size:"small",onClick:s,children:"Retry"}),children:d}):e.jsx(Xt,{dateAdapter:Pr,children:e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(h,{variant:"h4",component:"h1",children:"Market Data Dashboard"}),e.jsxs(v,{sx:{display:"flex",gap:1},children:[e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Mr,{}),onClick:s,disabled:c,children:"Refresh"}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(rc,{}),onClick:O,disabled:c,children:"Update All Prices"}),e.jsx(St,{onClick:()=>f(!0),children:e.jsx(fa,{})})]})]}),e.jsxs(N,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h4",children:t.totalAssets})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Success Rate"}),e.jsxs(h,{variant:"h4",color:"success.main",children:[t.successRate.toFixed(1),"%"]})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Avg Update Time"}),e.jsxs(h,{variant:"h4",children:[t.averageUpdateTime,"ms"]})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Next Update"}),e.jsx(h,{variant:"h4",children:T()})]})})})]}),e.jsxs(pe,{children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(vn,{value:u,onChange:M,children:[e.jsx(xt,{label:"Overview"}),e.jsx(xt,{label:"Providers"}),e.jsx(xt,{label:"Recent Updates"}),e.jsx(xt,{label:"Statistics"})]})}),e.jsxs(ge,{children:[u===0&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(N,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Update by Nation"}),e.jsxs(et,{value:g,onChange:P=>b(P.target.value),label:"Update by Nation",children:[e.jsx(de,{value:"VN",children:"Vietnam"}),e.jsx(de,{value:"US",children:"United States"}),e.jsx(de,{value:"UK",children:"United Kingdom"}),e.jsx(de,{value:"JP",children:"Japan"})]})]})}),e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsxs(Ze,{fullWidth:!0,children:[e.jsx(Je,{children:"Update by Market"}),e.jsxs(et,{value:S,onChange:P=>j(P.target.value),label:"Update by Market",children:[e.jsx(de,{value:"HOSE",children:"Ho Chi Minh Stock Exchange"}),e.jsx(de,{value:"NYSE",children:"New York Stock Exchange"}),e.jsx(de,{value:"NASDAQ",children:"NASDAQ"}),e.jsx(de,{value:"LSE",children:"London Stock Exchange"})]})]})}),e.jsx(N,{item:!0,xs:12,sm:4,children:e.jsxs(v,{sx:{display:"flex",gap:1},children:[e.jsx(Se,{variant:"outlined",onClick:E,disabled:!g||c,fullWidth:!0,children:"Update Nation"}),e.jsx(Se,{variant:"outlined",onClick:k,disabled:!S||c,fullWidth:!0,children:"Update Market"})]})})]}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"System Status"}),e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(pe,{variant:"outlined",children:e.jsxs(ge,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Last Update"}),e.jsx(h,{variant:"body2",children:w(t.lastUpdate)})]})})}),e.jsx(N,{item:!0,xs:12,sm:6,children:e.jsx(pe,{variant:"outlined",children:e.jsxs(ge,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Next Update"}),e.jsx(h,{variant:"body2",children:w(t.nextUpdate)})]})})})]})]}),u===1&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Data Providers"}),e.jsx(Zt,{component:rt,children:e.jsxs(Jt,{children:[e.jsx(er,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Provider"}),e.jsx(z,{children:"Status"}),e.jsx(z,{children:"Rate Limit"}),e.jsx(z,{children:"Last Check"}),e.jsx(z,{children:"Actions"})]})}),e.jsx(tr,{children:r.map(P=>e.jsxs(Ge,{children:[e.jsxs(z,{children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:P.name}),e.jsx(h,{variant:"caption",color:"text.secondary",children:P.baseUrl})]}),e.jsx(z,{children:e.jsx(ke,{icon:A(P.status),label:P.status,color:y(P.status),size:"small"})}),e.jsx(z,{children:e.jsxs(h,{variant:"body2",children:[P.rateLimit," req/min"]})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:w(P.lastCheck)})}),e.jsx(z,{children:e.jsx(Se,{size:"small",onClick:()=>C(P.name),disabled:c,children:"Test Connection"})})]},P.name))})]})})]}),u===2&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Recent Updates"}),e.jsx(Zt,{component:rt,children:e.jsxs(Jt,{children:[e.jsx(er,{children:e.jsxs(Ge,{children:[e.jsx(z,{children:"Symbol"}),e.jsx(z,{children:"Result"}),e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Error"}),e.jsx(z,{children:"Time"})]})}),e.jsx(tr,{children:n.map((P,F)=>e.jsxs(Ge,{children:[e.jsx(z,{children:e.jsx(h,{variant:"body2",fontWeight:"medium",children:P.symbol})}),e.jsx(z,{children:I(P.success)}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:P.newPrice?`$${P.newPrice.toFixed(2)}`:"N/A"})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",color:"error",children:P.error||"N/A"})}),e.jsx(z,{children:e.jsx(h,{variant:"body2",children:w(P.timestamp)})})]},F))})]})})]}),u===3&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Performance Statistics"}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{variant:"outlined",children:e.jsxs(ge,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Update Success Rate"}),e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ho,{variant:"determinate",value:t.successRate,sx:{flexGrow:1}}),e.jsxs(h,{variant:"body2",children:[t.successRate.toFixed(1),"%"]})]})]})})}),e.jsx(N,{item:!0,xs:12,md:6,children:e.jsx(pe,{variant:"outlined",children:e.jsxs(ge,{children:[e.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Update Performance"}),e.jsxs(ma,{dense:!0,children:[e.jsxs(fn,{children:[e.jsx(Bt,{children:e.jsx(Bn,{color:"success"})}),e.jsx(Ut,{primary:"Successful Updates",secondary:t.successfulUpdates})]}),e.jsxs(fn,{children:[e.jsx(Bt,{children:e.jsx(Ls,{color:"error"})}),e.jsx(Ut,{primary:"Failed Updates",secondary:t.failedUpdates})]}),e.jsxs(fn,{children:[e.jsx(Bt,{children:e.jsx(Mr,{})}),e.jsx(Ut,{primary:"Average Response Time",secondary:`${t.averageUpdateTime}ms`})]})]})]})})})]})]})]})]}),e.jsxs(zt,{open:x,onClose:()=>f(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(lr,{children:"Market Data Settings"}),e.jsx(Yt,{children:e.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure market data providers and update settings."})}),e.jsxs(qt,{children:[e.jsx(Se,{onClick:()=>f(!1),children:"Cancel"}),e.jsx(Se,{variant:"contained",children:"Save Settings"})]})]})]})})},$v=async(t={})=>{const r=new URLSearchParams;t.page&&r.append("page",t.page.toString()),t.limit&&r.append("limit",t.limit.toString()),t.sortBy&&r.append("sortBy",t.sortBy),t.sortOrder&&r.append("sortOrder",t.sortOrder),t.search&&r.append("search",t.search),t.type&&r.append("type",t.type),t.nation&&r.append("nation",t.nation),t.marketCode&&r.append("marketCode",t.marketCode),t.isActive!==void 0&&r.append("isActive",t.isActive.toString()),console.log("fetchGlobalAssets - query:",t),console.log("fetchGlobalAssets - params:",r.toString());const n=await we.api.get(`/api/v1/global-assets?${r.toString()}`);return console.log("fetchGlobalAssets - response:",n),console.log("fetchGlobalAssets - response.data:",n.data),n.data},Bv=async t=>{await we.api.delete(`/api/v1/global-assets/${t}`)},Uv=(t={})=>{var n,s,a,o,i;const r=wt(["globalAssets",t],async()=>{const l=await $v(t),c=await Promise.all(l.data.map(async d=>{try{const u=await we.api.get(`/api/v1/asset-prices/asset/${d.id}`);return{...d,assetPrice:u.data}}catch{return d}}));return{...l,data:c}},{staleTime:3e5});return{...r,data:((n=r.data)==null?void 0:n.data)||[],total:((s=r.data)==null?void 0:s.total)||0,page:((a=r.data)==null?void 0:a.page)||1,limit:((o=r.data)==null?void 0:o.limit)||10,totalPages:((i=r.data)==null?void 0:i.totalPages)||1}},Wv=()=>{const t=Qt();return Ht(Bv,{onSuccess:()=>{t.invalidateQueries(["globalAssets"])}})},Hv=()=>{const t=Qt();return Ht(async({assetId:r,price:n,priceType:s,priceSource:a,changeReason:o})=>{var i;try{console.log("useUpdateAssetPrice - trying to get existing price for assetId:",r);const c=(await we.api.get(`/api/v1/asset-prices/asset/${r}`)).data;return console.log("useUpdateAssetPrice - found existing price:",c),(await we.api.put(`/api/v1/asset-prices/asset/${r}`,{currentPrice:n,priceType:s,priceSource:a,changeReason:o,metadata:{changeReason:o,source:"manual_update"}})).data}catch(l){if(((i=l.response)==null?void 0:i.status)===404)return(await we.api.post("/api/v1/asset-prices",{assetId:r,currentPrice:n,priceType:s,priceSource:a,changeReason:o,metadata:{changeReason:o,source:"manual_update"}})).data;throw l}},{onSuccess:()=>{t.invalidateQueries(["globalAssets"]),t.invalidateQueries(["assetPrices"]),t.invalidateQueries(["priceHistory"]),t.refetchQueries(["globalAssets"]),t.refetchQueries(["priceHistory"])}})},zv=()=>{const t=Qt();return Ht(async r=>(await we.api.post(`/api/v1/market-data/update/${r}`)).data,{onSuccess:()=>{t.invalidateQueries(["globalAssets"]),t.invalidateQueries(["assetPrices"])}})},Nl=()=>{const t=Qt(),r=p.useCallback(async()=>{try{return(await we.api.get("/api/v1/global-assets/auto-sync/status")).data}catch(a){throw console.error("Failed to get auto sync status:",a),a}},[]),n=p.useCallback(async a=>{try{await we.api.post("/api/v1/global-assets/auto-sync/toggle",{enabled:a}),t.invalidateQueries(["globalAssets"]),t.invalidateQueries(["assetPrices"])}catch(o){throw console.error("Failed to toggle auto sync:",o),o}},[t]),s=p.useCallback(async()=>{try{await we.api.post("/api/v1/global-assets/auto-sync/trigger"),t.invalidateQueries(["globalAssets"]),t.invalidateQueries(["assetPrices"])}catch(a){throw console.error("Failed to trigger manual sync:",a),a}},[t]);return{getAutoSyncStatus:r,toggleAutoSync:n,triggerManualSync:s}},Yv=({assets:t,loading:r=!1,error:n,onRefresh:s,onCreateAsset:a,onUpdateAsset:o,total:i=0,page:l=1,totalPages:c=1,onPriceUpdate:d,onPriceHistoryRefresh:u,marketDataStats:m,marketDataProviders:x,recentUpdates:f,onMarketDataRefresh:g,onUpdateAllPrices:b,onUpdateByNation:S,onUpdateByMarket:j,onTestProvider:w,onUpdateConfig:T})=>{const[y,A]=p.useState(0),[I,M]=p.useState(!1),[O,E]=p.useState(null),[k,C]=p.useState(!1),[P,F]=p.useState("create"),[_,R]=p.useState(!1),Y=Wv(),U=(B,K)=>{A(K)},$=()=>{F("create"),E(null),M(!0)},H=B=>{F("edit"),E(B),M(!0)},q=async B=>{if(window.confirm(`Are you sure you want to delete ${B.symbol}?`))try{await Y.mutateAsync(B.id),alert(`Asset ${B.symbol} deleted successfully`),s()}catch(K){console.error("Delete error:",K);const le=K instanceof Error?K.message:"Failed to delete asset";alert(`Error deleting asset: ${le}`)}},G=B=>{E(B),C(!0)},ee=async B=>{R(!0);try{P==="create"?await a(B):O&&await o(O.id,B),M(!1),s()}catch(K){console.error("Form submission error:",K)}finally{R(!1)}},J=()=>{M(!1),E(null)},D=()=>{C(!1),E(null)},Z=B=>({STOCK:"#1976d2",BOND:"#388e3c",CRYPTO:"#f57c00",COMMODITY:"#7b1fa2",CURRENCY:"#d32f2f",ETF:"#0288d1",MUTUAL_FUND:"#5d4037"})[B]||"#666",ye=B=>({VN:"Vietnam",US:"United States",UK:"United Kingdom",JP:"Japan",SG:"Singapore",AU:"Australia",CA:"Canada",DE:"Germany",FR:"France",CN:"China"})[B]||B;return n?e.jsx(We,{severity:"error",action:e.jsx(Se,{color:"inherit",size:"small",onClick:s,children:"Retry"}),children:n}):e.jsxs(v,{children:[e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(v,{children:[e.jsx(h,{variant:"h4",component:"h1",children:"Global Asset Management"}),e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Showing ",t.length," of ",i," assets (Page ",l," of ",c,")"]})]}),e.jsxs(v,{sx:{display:"flex",gap:1},children:[e.jsx(Se,{variant:"outlined",startIcon:e.jsx(Mr,{}),onClick:s,disabled:r,children:"Refresh"}),e.jsx(Se,{variant:"contained",startIcon:e.jsx(Mt,{}),onClick:$,disabled:r,children:"Add Asset"})]})]}),e.jsxs(pe,{children:[e.jsx(v,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(vn,{value:y,onChange:U,children:[e.jsx(xt,{label:"Assets"}),e.jsx(xt,{label:"Market Data"}),e.jsx(xt,{label:"Analytics"})]})}),e.jsxs(v,{sx:{p:3},children:[y===0&&e.jsx(v,{children:e.jsx(Mv,{assets:t,loading:r,onEdit:H,onDelete:q,onView:G,onRefresh:s,error:n})}),y===1&&e.jsx(v,{children:e.jsx(Vv,{stats:m,providers:x,recentUpdates:f,onRefresh:g,onUpdateAll:b,onUpdateByNation:S,onUpdateByMarket:j,onTestProvider:w,onUpdateConfig:T,loading:r,error:n})}),y===2&&e.jsxs(v,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Analytics"}),e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Assets"}),e.jsx(h,{variant:"h4",children:t.length})]})})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Active Assets"}),e.jsx(h,{variant:"h4",children:t.filter(B=>B.isActive).length})]})})}),e.jsx(N,{item:!0,xs:12,md:4,children:e.jsx(pe,{children:e.jsxs(ge,{children:[e.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Nations"}),e.jsx(h,{variant:"h4",children:new Set(t.map(B=>B.nation)).size})]})})})]}),e.jsxs(v,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Distribution by Type"}),e.jsx(N,{container:!0,spacing:2,children:Object.entries(t.reduce((B,K)=>(B[K.type]=(B[K.type]||0)+1,B),{})).map(([B,K])=>e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{variant:"outlined",children:e.jsx(ge,{children:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{label:B,size:"small",sx:{backgroundColor:Z(B),color:"white"}}),e.jsx(h,{variant:"h6",children:K})]})})})},B))})]}),e.jsxs(v,{sx:{mt:3},children:[e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Asset Distribution by Nation"}),e.jsx(N,{container:!0,spacing:2,children:Object.entries(t.reduce((B,K)=>(B[K.nation]=(B[K.nation]||0)+1,B),{})).map(([B,K])=>e.jsx(N,{item:!0,xs:12,sm:6,md:3,children:e.jsx(pe,{variant:"outlined",children:e.jsx(ge,{children:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(h,{variant:"body2",fontWeight:"medium",children:ye(B)}),e.jsx(h,{variant:"h6",children:K})]})})})},B))})]})]})]})]}),e.jsx(Dv,{open:I,onClose:J,onSubmit:ee,initialData:O||void 0,mode:P,loading:_}),O&&e.jsxs(zt,{open:k,onClose:D,maxWidth:"md",fullWidth:!0,children:[e.jsxs(lr,{children:["Price Management - ",O.symbol]}),e.jsx(Yt,{children:e.jsx(Ov,{asset:{id:O.id,symbol:O.symbol,name:O.name,currency:O.currency,assetPrice:O.assetPrice?{id:"",assetId:O.id,currentPrice:O.assetPrice.currentPrice,priceType:O.assetPrice.priceType,priceSource:O.assetPrice.priceSource,lastPriceUpdate:O.assetPrice.lastPriceUpdate}:void 0},onPriceUpdate:d,onPriceHistoryRefresh:u,loading:r,error:n})}),e.jsx(qt,{children:e.jsx(Se,{onClick:D,children:"Close"})})]})]})},qv=({onToggle:t,disabled:r=!1})=>{const[n,s]=p.useState(!1),[a,o]=p.useState(!1),{toggleAutoSync:i,getAutoSyncStatus:l}=Nl();p.useEffect(()=>{(async()=>{try{const u=await l();s(u.enabled)}catch(u){console.error("Failed to load auto sync status:",u)}})()},[l]);const c=async d=>{const u=d.target.checked;o(!0);try{await i(u),s(u),t==null||t(u),console.log(`Auto sync ${u?"enabled":"disabled"} successfully`)}catch(m){console.error("Failed to toggle auto sync:",m),s(!u)}finally{o(!1)}};return e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(sc,{control:e.jsx(ic,{checked:n,onChange:c,disabled:r||a,color:"primary",size:"medium"}),label:e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[n?e.jsx(ac,{color:"primary",fontSize:"small"}):e.jsx(oc,{color:"disabled",fontSize:"small"}),e.jsx(h,{variant:"body2",color:"text.secondary",children:"Auto Sync Market Price"})]})}),e.jsx(ke,{icon:e.jsx(fa,{fontSize:"small"}),label:n?"Enabled":"Disabled",color:n?"success":"default",size:"small",variant:n?"filled":"outlined"}),a&&e.jsx(ke,{label:"Updating...",size:"small",color:"info",variant:"outlined"}),e.jsx(Ar,{title:n?"Market prices will be automatically synced from external sources every 15 minutes":"Market prices will only be updated manually",children:e.jsx(h,{variant:"caption",color:"text.secondary",sx:{cursor:"help"},children:"ℹ️"})})]})},Qv=async()=>(await we.api.get("/api/v1/market-data/statistics")).data,Kv=async()=>(await we.api.get("/api/v1/market-data/providers")).data,Gv=async(t=50)=>(console.warn("Recent updates endpoint not implemented in backend yet"),[]),Xv=()=>wt(["marketDataStats"],Qv,{staleTime:30*1e3,refetchInterval:60*1e3}),Zv=()=>wt(["marketDataProviders"],Kv,{staleTime:5*60*1e3}),Jv=(t=50)=>wt(["recentUpdates",t],()=>Gv(t),{staleTime:30*1e3,refetchInterval:30*1e3}),eb=()=>{const{data:t=[],isLoading:r,error:n,refetch:s,total:a,page:o,totalPages:i}=Uv({limit:50}),{data:l,isLoading:c,error:d}=Xv(),{data:u=[],isLoading:m,error:x}=Zv(),{data:f=[],isLoading:g,error:b}=Jv(50),S=Hv(),j=zv();Nl();const w=async()=>{await s()},T=async Y=>{},y=async(Y,U)=>{},A=async(Y,U,$,H,q)=>{try{await S.mutateAsync({assetId:Y,price:U,priceType:$,priceSource:H,changeReason:q})}catch(G){throw console.error("Price update error:",G),G}},I=async Y=>{try{await j.mutateAsync(Y)}catch(U){throw console.error("Price history refresh error:",U),U}},M=async()=>{},O=async()=>{},E=async Y=>{},k=async Y=>{},C=async Y=>{},P=async Y=>{},F=r||c||m||g||S.isLoading||j.isLoading,_=n||d||x||b,R=_?(_==null?void 0:_.message)||String(_):void 0;return e.jsxs(Ur,{maxWidth:"xl",sx:{py:3},children:[e.jsxs(rt,{sx:{p:2,mb:3,bgcolor:"background.paper"},children:[e.jsx(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsx(h,{variant:"h6",component:"h2",children:"Market Price Auto Sync"})}),e.jsx(qv,{onToggle:Y=>{console.log(`Auto sync ${Y?"enabled":"disabled"}`)}})]}),e.jsx(Yv,{assets:t,loading:F,error:R,onRefresh:w,onCreateAsset:T,onUpdateAsset:y,total:a,page:o,totalPages:i,onPriceUpdate:A,onPriceHistoryRefresh:I,marketDataStats:l,marketDataProviders:u,recentUpdates:f,onMarketDataRefresh:M,onUpdateAllPrices:O,onUpdateByNation:E,onUpdateByMarket:k,onTestProvider:C,onUpdateConfig:P})]})},tb=lc({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f5f5f5"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}}}}),rb=new xc({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}}),nb=()=>(p.useEffect(()=>()=>{},[]),e.jsx(gc,{client:rb,children:e.jsxs(cc,{theme:tb,children:[e.jsx(Oo,{}),e.jsx(mc,{children:e.jsx(xd,{children:e.jsx(v,{sx:{minHeight:"100vh"},children:e.jsxs(fc,{children:[e.jsx(Ot,{path:"/",element:e.jsx(Gf,{})}),e.jsx(Ot,{path:"/portfolios",element:e.jsx(tp,{})}),e.jsx(Ot,{path:"/portfolios/:portfolioId",element:e.jsx(cv,{})}),e.jsx(Ot,{path:"/portfolios/:portfolioId/trading",element:e.jsx(dv,{})}),e.jsx(Ot,{path:"/assets",element:e.jsx(Pv,{})}),e.jsx(Ot,{path:"/global-assets",element:e.jsx(eb,{})}),e.jsx(Ot,{path:"/analytics",element:e.jsx("div",{children:"Analytics Page - Coming Soon"})}),e.jsx(Ot,{path:"/reports",element:e.jsx("div",{children:"Reports Page - Coming Soon"})}),e.jsx(Ot,{path:"/settings",element:e.jsx("div",{children:"Settings Page - Coming Soon"})}),e.jsx(Ot,{path:"*",element:e.jsx(pc,{to:"/",replace:!0})})]})})})}),e.jsx(fd,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}}),e.jsx(Tc.ReactQueryDevtools,{initialIsOpen:!1})]})})),sb=Xs.createRoot(document.getElementById("root"));sb.render(e.jsx(Wt.StrictMode,{children:e.jsx(nb,{})}));
//# sourceMappingURL=index-DlIUtkZ7.js.map
